(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Nc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function KD(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var Pg={exports:{}},Rl={};var Vx;function YD(){if(Vx)return Rl;Vx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Rl.Fragment=e,Rl.jsx=t,Rl.jsxs=t,Rl}var Fx;function GD(){return Fx||(Fx=1,Pg.exports=YD()),Pg.exports}var H=GD(),qg={exports:{}},$e={};var Wx;function XD(){if(Wx)return $e;Wx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function A(N,z,B){this.props=N,this.context=z,this.refs=S,this.updater=B||x}A.prototype.isReactComponent={},A.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},A.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function w(){}w.prototype=A.prototype;function C(N,z,B){this.props=N,this.context=z,this.refs=S,this.updater=B||x}var k=C.prototype=new w;k.constructor=C,_(k,A.prototype),k.isPureReactComponent=!0;var T=Array.isArray;function O(){}var E={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function j(N,z,B){var D=B.ref;return{$$typeof:n,type:N,key:z,ref:D!==void 0?D:null,props:B}}function V(N,z){return j(N.type,z,N.props)}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function q(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(B){return z[B]})}var X=/\/+/g;function J(N,z){return typeof N=="object"&&N!==null&&N.key!=null?q(""+N.key):z.toString(36)}function ce(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(O,O):(N.status="pending",N.then(function(z){N.status==="pending"&&(N.status="fulfilled",N.value=z)},function(z){N.status==="pending"&&(N.status="rejected",N.reason=z)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,z,B,D,L){var I=typeof N;(I==="undefined"||I==="boolean")&&(N=null);var re=!1;if(N===null)re=!0;else switch(I){case"bigint":case"string":case"number":re=!0;break;case"object":switch(N.$$typeof){case n:case e:re=!0;break;case p:return re=N._init,K(re(N._payload),z,B,D,L)}}if(re)return L=L(N),re=D===""?"."+J(N,0):D,T(L)?(B="",re!=null&&(B=re.replace(X,"$&/")+"/"),K(L,z,B,"",function(ve){return ve})):L!=null&&(P(L)&&(L=V(L,B+(L.key==null||N&&N.key===L.key?"":(""+L.key).replace(X,"$&/")+"/")+re)),z.push(L)),1;re=0;var ue=D===""?".":D+":";if(T(N))for(var ge=0;ge<N.length;ge++)D=N[ge],I=ue+J(D,ge),re+=K(D,z,B,I,L);else if(ge=v(N),typeof ge=="function")for(N=ge.call(N),ge=0;!(D=N.next()).done;)D=D.value,I=ue+J(D,ge++),re+=K(D,z,B,I,L);else if(I==="object"){if(typeof N.then=="function")return K(ce(N),z,B,D,L);throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return re}function U(N,z,B){if(N==null)return N;var D=[],L=0;return K(N,D,"","",function(I){return z.call(B,I,L++)}),D}function ee(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(B){(N._status===0||N._status===-1)&&(N._status=1,N._result=B)},function(B){(N._status===0||N._status===-1)&&(N._status=2,N._result=B)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var oe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Y={map:U,forEach:function(N,z,B){U(N,function(){z.apply(this,arguments)},B)},count:function(N){var z=0;return U(N,function(){z++}),z},toArray:function(N){return U(N,function(z){return z})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return $e.Activity=m,$e.Children=Y,$e.Component=A,$e.Fragment=t,$e.Profiler=r,$e.PureComponent=C,$e.StrictMode=i,$e.Suspense=f,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,$e.__COMPILER_RUNTIME={__proto__:null,c:function(N){return E.H.useMemoCache(N)}},$e.cache=function(N){return function(){return N.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(N,z,B){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var D=_({},N.props),L=N.key;if(z!=null)for(I in z.key!==void 0&&(L=""+z.key),z)!R.call(z,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&z.ref===void 0||(D[I]=z[I]);var I=arguments.length-2;if(I===1)D.children=B;else if(1<I){for(var re=Array(I),ue=0;ue<I;ue++)re[ue]=arguments[ue+2];D.children=re}return j(N.type,L,D)},$e.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},$e.createElement=function(N,z,B){var D,L={},I=null;if(z!=null)for(D in z.key!==void 0&&(I=""+z.key),z)R.call(z,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(L[D]=z[D]);var re=arguments.length-2;if(re===1)L.children=B;else if(1<re){for(var ue=Array(re),ge=0;ge<re;ge++)ue[ge]=arguments[ge+2];L.children=ue}if(N&&N.defaultProps)for(D in re=N.defaultProps,re)L[D]===void 0&&(L[D]=re[D]);return j(N,I,L)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(N){return{$$typeof:c,render:N}},$e.isValidElement=P,$e.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:ee}},$e.memo=function(N,z){return{$$typeof:d,type:N,compare:z===void 0?null:z}},$e.startTransition=function(N){var z=E.T,B={};E.T=B;try{var D=N(),L=E.S;L!==null&&L(B,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(O,oe)}catch(I){oe(I)}finally{z!==null&&B.types!==null&&(z.types=B.types),E.T=z}},$e.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},$e.use=function(N){return E.H.use(N)},$e.useActionState=function(N,z,B){return E.H.useActionState(N,z,B)},$e.useCallback=function(N,z){return E.H.useCallback(N,z)},$e.useContext=function(N){return E.H.useContext(N)},$e.useDebugValue=function(){},$e.useDeferredValue=function(N,z){return E.H.useDeferredValue(N,z)},$e.useEffect=function(N,z){return E.H.useEffect(N,z)},$e.useEffectEvent=function(N){return E.H.useEffectEvent(N)},$e.useId=function(){return E.H.useId()},$e.useImperativeHandle=function(N,z,B){return E.H.useImperativeHandle(N,z,B)},$e.useInsertionEffect=function(N,z){return E.H.useInsertionEffect(N,z)},$e.useLayoutEffect=function(N,z){return E.H.useLayoutEffect(N,z)},$e.useMemo=function(N,z){return E.H.useMemo(N,z)},$e.useOptimistic=function(N,z){return E.H.useOptimistic(N,z)},$e.useReducer=function(N,z,B){return E.H.useReducer(N,z,B)},$e.useRef=function(N){return E.H.useRef(N)},$e.useState=function(N){return E.H.useState(N)},$e.useSyncExternalStore=function(N,z,B){return E.H.useSyncExternalStore(N,z,B)},$e.useTransition=function(){return E.H.useTransition()},$e.version="19.2.1",$e}var Kx;function $a(){return Kx||(Kx=1,qg.exports=XD()),qg.exports}var W=$a();const Ne=Nc(W);var Hg={exports:{}},Nl={},Ig={exports:{}},Ug={};var Yx;function QD(){return Yx||(Yx=1,(function(n){function e(K,U){var ee=K.length;K.push(U);e:for(;0<ee;){var oe=ee-1>>>1,Y=K[oe];if(0<r(Y,U))K[oe]=U,K[ee]=Y,ee=oe;else break e}}function t(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var U=K[0],ee=K.pop();if(ee!==U){K[0]=ee;e:for(var oe=0,Y=K.length,N=Y>>>1;oe<N;){var z=2*(oe+1)-1,B=K[z],D=z+1,L=K[D];if(0>r(B,ee))D<Y&&0>r(L,B)?(K[oe]=L,K[D]=ee,oe=D):(K[oe]=B,K[z]=ee,oe=z);else if(D<Y&&0>r(L,ee))K[oe]=L,K[D]=ee,oe=D;else break e}}return U}function r(K,U){var ee=K.sortIndex-U.sortIndex;return ee!==0?ee:K.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],d=[],p=1,m=null,y=3,v=!1,x=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(K){for(var U=t(d);U!==null;){if(U.callback===null)i(d);else if(U.startTime<=K)i(d),U.sortIndex=U.expirationTime,e(f,U);else break;U=t(d)}}function T(K){if(_=!1,k(K),!x)if(t(f)!==null)x=!0,O||(O=!0,q());else{var U=t(d);U!==null&&ce(T,U.startTime-K)}}var O=!1,E=-1,R=5,j=-1;function V(){return S?!0:!(n.unstable_now()-j<R)}function P(){if(S=!1,O){var K=n.unstable_now();j=K;var U=!0;try{e:{x=!1,_&&(_=!1,w(E),E=-1),v=!0;var ee=y;try{t:{for(k(K),m=t(f);m!==null&&!(m.expirationTime>K&&V());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,y=m.priorityLevel;var Y=oe(m.expirationTime<=K);if(K=n.unstable_now(),typeof Y=="function"){m.callback=Y,k(K),U=!0;break t}m===t(f)&&i(f),k(K)}else i(f);m=t(f)}if(m!==null)U=!0;else{var N=t(d);N!==null&&ce(T,N.startTime-K),U=!1}}break e}finally{m=null,y=ee,v=!1}U=void 0}}finally{U?q():O=!1}}}var q;if(typeof C=="function")q=function(){C(P)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,J=X.port2;X.port1.onmessage=P,q=function(){J.postMessage(null)}}else q=function(){A(P,0)};function ce(K,U){E=A(function(){K(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(K){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var ee=y;y=U;try{return K()}finally{y=ee}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(K,U){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=y;y=K;try{return U()}finally{y=ee}},n.unstable_scheduleCallback=function(K,U,ee){var oe=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,K){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,K={id:p++,callback:U,priorityLevel:K,startTime:ee,expirationTime:Y,sortIndex:-1},ee>oe?(K.sortIndex=ee,e(d,K),t(f)===null&&K===t(d)&&(_?(w(E),E=-1):_=!0,ce(T,ee-oe))):(K.sortIndex=Y,e(f,K),x||v||(x=!0,O||(O=!0,q()))),K},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(K){var U=y;return function(){var ee=y;y=U;try{return K.apply(this,arguments)}finally{y=ee}}}})(Ug)),Ug}var Gx;function JD(){return Gx||(Gx=1,Ig.exports=QD()),Ig.exports}var Vg={exports:{}},pn={};var Xx;function ZD(){if(Xx)return pn;Xx=1;var n=$a();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:f,containerInfo:d,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},pn.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},pn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},pn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},pn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,m=c(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&i.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},pn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},pn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,m=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},pn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},pn.requestFormReset=function(f){i.d.r(f)},pn.unstable_batchedUpdates=function(f,d){return f(d)},pn.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},pn.useFormStatus=function(){return l.H.useHostTransitionStatus()},pn.version="19.2.1",pn}var Qx;function Wd(){if(Qx)return Vg.exports;Qx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vg.exports=ZD(),Vg.exports}var Jx;function eR(){if(Jx)return Nl;Jx=1;var n=JD(),e=$a(),t=Wd();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var g=u.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===u)return f(g),s;if(b===h)return f(g),a;b=b.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=b;else{for(var M=!1,$=g.child;$;){if($===u){M=!0,u=g,h=b;break}if($===h){M=!0,h=g,u=b;break}$=$.sibling}if(!M){for($=b.child;$;){if($===u){M=!0,u=b,h=g;break}if($===h){M=!0,h=b,u=g;break}$=$.sibling}if(!M)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var X=Symbol.for("react.client.reference");function J(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===X?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case C:return s.displayName||"Context";case w:return(s._context.displayName||"Context")+".Consumer";case k:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return a=s.displayName||null,a!==null?a:J(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return J(s(a))}catch{}}return null}var ce=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},oe=[],Y=-1;function N(s){return{current:s}}function z(s){0>Y||(s.current=oe[Y],oe[Y]=null,Y--)}function B(s,a){Y++,oe[Y]=s.current,s.current=a}var D=N(null),L=N(null),I=N(null),re=N(null);function ue(s,a){switch(B(I,a),B(L,s),B(D,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?dx(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=dx(a),s=px(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}z(D),B(D,s)}function ge(){z(D),z(L),z(I)}function ve(s){s.memoizedState!==null&&B(re,s);var a=D.current,u=px(a,s.type);a!==u&&(B(L,s),B(D,u))}function G(s){L.current===s&&(z(D),z(L)),re.current===s&&(z(re),kl._currentValue=ee)}var Z,fe;function ye(s){if(Z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||"",fe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+s+fe}var Se=!1;function Ee(s,a){if(!s||Se)return"";Se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var se=ae}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(ae){se=ae}s.call(pe.prototype)}}else{try{throw Error()}catch(ae){se=ae}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),M=b[0],$=b[1];if(M&&$){var F=M.split(`
`),ie=$.split(`
`);for(g=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;if(h===F.length||g===ie.length)for(h=F.length-1,g=ie.length-1;1<=h&&0<=g&&F[h]!==ie[g];)g--;for(;1<=h&&0<=g;h--,g--)if(F[h]!==ie[g]){if(h!==1||g!==1)do if(h--,g--,0>g||F[h]!==ie[g]){var he=`
`+F[h].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=h&&0<=g);break}}}finally{Se=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?ye(u):""}function nt(s,a){switch(s.tag){case 26:case 27:case 5:return ye(s.type);case 16:return ye("Lazy");case 13:return s.child!==a&&a!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ee(s.type,!1);case 11:return Ee(s.type.render,!1);case 1:return Ee(s.type,!0);case 31:return ye("Activity");default:return""}}function it(s){try{var a="",u=null;do a+=nt(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var we=Object.prototype.hasOwnProperty,De=n.unstable_scheduleCallback,je=n.unstable_cancelCallback,rt=n.unstable_shouldYield,st=n.unstable_requestPaint,ht=n.unstable_now,kn=n.unstable_getCurrentPriorityLevel,Zt=n.unstable_ImmediatePriority,Dt=n.unstable_UserBlockingPriority,Bt=n.unstable_NormalPriority,ze=n.unstable_LowPriority,Fn=n.unstable_IdlePriority,oi=n.log,Zc=n.unstable_setDisableYieldValue,$s=null,bn=null;function ai(s){if(typeof oi=="function"&&Zc(s),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode($s,s)}catch{}}var hn=Math.clz32?Math.clz32:Op,kp=Math.log,eu=Math.LN2;function Op(s){return s>>>=0,s===0?32:31-(kp(s)/eu|0)|0}var So=256,xo=262144,Ct=4194304;function At(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Kt(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,b=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var $=h&134217727;return $!==0?(h=$&~b,h!==0?g=At(h):(M&=$,M!==0?g=At(M):u||(u=$&~s,u!==0&&(g=At(u))))):($=h&~b,$!==0?g=At($):M!==0?g=At(M):u||(u=h&~s,u!==0&&(g=At(u)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:g}function On(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Mn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var s=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),s}function Dn(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function li(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Pt(s,a,u,h,g,b){var M=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var $=s.entanglements,F=s.expirationTimes,ie=s.hiddenUpdates;for(u=M&~u;0<u;){var he=31-hn(u),pe=1<<he;$[he]=0,F[he]=-1;var se=ie[he];if(se!==null)for(ie[he]=null,he=0;he<se.length;he++){var ae=se[he];ae!==null&&(ae.lane&=-536870913)}u&=~pe}h!==0&&Oi(s,h,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(M&~a))}function Oi(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-hn(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Wn(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-hn(u),g=1<<h;g&a|s[h]&a&&(s[h]|=a),u&=~g}}function ci(s,a){var u=a&-a;return u=(u&42)!==0?1:hr(u),(u&(s.suspendedLanes|a))!==0?0:u}function hr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function dr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Mi(){var s=U.p;return s!==0?s:(s=window.event,s===void 0?32:jx(s.type))}function Fr(s,a){var u=U.p;try{return U.p=s,a()}finally{U.p=u}}var ui=Math.random().toString(36).slice(2),en="__reactFiber$"+ui,Rn="__reactProps$"+ui,wo="__reactContainer$"+ui,Mp="__reactEvents$"+ui,LO="__reactListeners$"+ui,jO="__reactHandles$"+ui,eb="__reactResources$"+ui,Ua="__reactMarker$"+ui;function Dp(s){delete s[en],delete s[Rn],delete s[Mp],delete s[LO],delete s[jO]}function _o(s){var a=s[en];if(a)return a;for(var u=s.parentNode;u;){if(a=u[wo]||u[en]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=xx(s);s!==null;){if(u=s[en])return u;s=xx(s)}return a}s=u,u=s.parentNode}return null}function Co(s){if(s=s[en]||s[wo]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Va(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Ao(s){var a=s[eb];return a||(a=s[eb]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(s){s[Ua]=!0}var tb=new Set,nb={};function Ls(s,a){To(s,a),To(s+"Capture",a)}function To(s,a){for(nb[s]=a,s=0;s<a.length;s++)tb.add(a[s])}var BO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ib={},rb={};function PO(s){return we.call(rb,s)?!0:we.call(ib,s)?!1:BO.test(s)?rb[s]=!0:(ib[s]=!0,!1)}function tu(s,a,u){if(PO(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function nu(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function pr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function fi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function sb(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qO(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,b=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(M){u=""+M,b.call(this,M)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Rp(s){if(!s._valueTracker){var a=sb(s)?"checked":"value";s._valueTracker=qO(s,a,""+s[a])}}function ob(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=sb(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function iu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var HO=/[\n"\\]/g;function hi(s){return s.replace(HO,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Np(s,a,u,h,g,b,M,$){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),a!=null?M==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+fi(a)):s.value!==""+fi(a)&&(s.value=""+fi(a)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),a!=null?zp(s,M,fi(a)):u!=null?zp(s,M,fi(u)):h!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.name=""+fi($):s.removeAttribute("name")}function ab(s,a,u,h,g,b,M,$){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Rp(s);return}u=u!=null?""+fi(u):"",a=a!=null?""+fi(a):u,$||a===s.value||(s.value=a),s.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=$?s.checked:!!h,s.defaultChecked=!!h,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),Rp(s)}function zp(s,a,u){a==="number"&&iu(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Eo(s,a,u,h){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+fi(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function lb(s,a,u){if(a!=null&&(a=""+fi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+fi(u):""}function cb(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(ce(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=fi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),Rp(s)}function ko(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var IO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ub(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||IO.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function fb(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&u[g]!==h&&ub(s,g,h)}else for(var b in a)a.hasOwnProperty(b)&&ub(s,b,a[b])}function $p(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(s){return VO.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function mr(){}var Lp=null;function jp(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Oo=null,Mo=null;function hb(s){var a=Co(s);if(a&&(s=a.stateNode)){var u=s[Rn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Np(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+hi(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var g=h[Rn]||null;if(!g)throw Error(i(90));Np(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&ob(h)}break e;case"textarea":lb(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Eo(s,!!u.multiple,a,!1)}}}var Bp=!1;function db(s,a,u){if(Bp)return s(a,u);Bp=!0;try{var h=s(a);return h}finally{if(Bp=!1,(Oo!==null||Mo!==null)&&(Fu(),Oo&&(a=Oo,s=Mo,Mo=Oo=null,hb(a),s)))for(a=0;a<s.length;a++)hb(s[a])}}function Fa(s,a){var u=s.stateNode;if(u===null)return null;var h=u[Rn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=!1;if(gr)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Pp=!1}var Wr=null,qp=null,su=null;function pb(){if(su)return su;var s,a=qp,u=a.length,h,g="value"in Wr?Wr.value:Wr.textContent,b=g.length;for(s=0;s<u&&a[s]===g[s];s++);var M=u-s;for(h=1;h<=M&&a[u-h]===g[b-h];h++);return su=g.slice(s,1<h?1-h:void 0)}function ou(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function au(){return!0}function mb(){return!1}function Nn(s){function a(u,h,g,b,M){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(u=s[$],this[$]=u?u(b):b[$]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?au:mb,this.isPropagationStopped=mb,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=au)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=au)},persist:function(){},isPersistent:au}),a}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=Nn(js),Ka=m({},js,{view:0,detail:0}),FO=Nn(Ka),Hp,Ip,Ya,cu=m({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ya&&(Ya&&s.type==="mousemove"?(Hp=s.screenX-Ya.screenX,Ip=s.screenY-Ya.screenY):Ip=Hp=0,Ya=s),Hp)},movementY:function(s){return"movementY"in s?s.movementY:Ip}}),gb=Nn(cu),WO=m({},cu,{dataTransfer:0}),KO=Nn(WO),YO=m({},Ka,{relatedTarget:0}),Up=Nn(YO),GO=m({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),XO=Nn(GO),QO=m({},js,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),JO=Nn(QO),ZO=m({},js,{data:0}),yb=Nn(ZO),eM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iM(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=nM[s])?!!a[s]:!1}function Vp(){return iM}var rM=m({},Ka,{key:function(s){if(s.key){var a=eM[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ou(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?tM[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(s){return s.type==="keypress"?ou(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ou(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sM=Nn(rM),oM=m({},cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vb=Nn(oM),aM=m({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),lM=Nn(aM),cM=m({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),uM=Nn(cM),fM=m({},cu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),hM=Nn(fM),dM=m({},js,{newState:0,oldState:0}),pM=Nn(dM),mM=[9,13,27,32],Fp=gr&&"CompositionEvent"in window,Ga=null;gr&&"documentMode"in document&&(Ga=document.documentMode);var gM=gr&&"TextEvent"in window&&!Ga,bb=gr&&(!Fp||Ga&&8<Ga&&11>=Ga),Sb=" ",xb=!1;function wb(s,a){switch(s){case"keyup":return mM.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _b(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Do=!1;function yM(s,a){switch(s){case"compositionend":return _b(a);case"keypress":return a.which!==32?null:(xb=!0,Sb);case"textInput":return s=a.data,s===Sb&&xb?null:s;default:return null}}function vM(s,a){if(Do)return s==="compositionend"||!Fp&&wb(s,a)?(s=pb(),su=qp=Wr=null,Do=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bb&&a.locale!=="ko"?null:a.data;default:return null}}var bM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cb(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!bM[s.type]:a==="textarea"}function Ab(s,a,u,h){Oo?Mo?Mo.push(h):Mo=[h]:Oo=h,a=Ju(a,"onChange"),0<a.length&&(u=new lu("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Xa=null,Qa=null;function SM(s){ax(s,0)}function uu(s){var a=Va(s);if(ob(a))return s}function Tb(s,a){if(s==="change")return a}var Eb=!1;if(gr){var Wp;if(gr){var Kp="oninput"in document;if(!Kp){var kb=document.createElement("div");kb.setAttribute("oninput","return;"),Kp=typeof kb.oninput=="function"}Wp=Kp}else Wp=!1;Eb=Wp&&(!document.documentMode||9<document.documentMode)}function Ob(){Xa&&(Xa.detachEvent("onpropertychange",Mb),Qa=Xa=null)}function Mb(s){if(s.propertyName==="value"&&uu(Qa)){var a=[];Ab(a,Qa,s,jp(s)),db(SM,a)}}function xM(s,a,u){s==="focusin"?(Ob(),Xa=a,Qa=u,Xa.attachEvent("onpropertychange",Mb)):s==="focusout"&&Ob()}function wM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uu(Qa)}function _M(s,a){if(s==="click")return uu(a)}function CM(s,a){if(s==="input"||s==="change")return uu(a)}function AM(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Kn=typeof Object.is=="function"?Object.is:AM;function Ja(s,a){if(Kn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!we.call(a,g)||!Kn(s[g],a[g]))return!1}return!0}function Db(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rb(s,a){var u=Db(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Db(u)}}function Nb(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Nb(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function zb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=iu(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=iu(s.document)}return a}function Yp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var TM=gr&&"documentMode"in document&&11>=document.documentMode,Ro=null,Gp=null,Za=null,Xp=!1;function $b(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xp||Ro==null||Ro!==iu(h)||(h=Ro,"selectionStart"in h&&Yp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Za&&Ja(Za,h)||(Za=h,h=Ju(Gp,"onSelect"),0<h.length&&(a=new lu("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=Ro)))}function Bs(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var No={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},Qp={},Lb={};gr&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Ps(s){if(Qp[s])return Qp[s];if(!No[s])return s;var a=No[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Lb)return Qp[s]=a[u];return s}var jb=Ps("animationend"),Bb=Ps("animationiteration"),Pb=Ps("animationstart"),EM=Ps("transitionrun"),kM=Ps("transitionstart"),OM=Ps("transitioncancel"),qb=Ps("transitionend"),Hb=new Map,Jp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jp.push("scrollEnd");function Di(s,a){Hb.set(s,a),Ls(a,[s])}var fu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},di=[],zo=0,Zp=0;function hu(){for(var s=zo,a=Zp=zo=0;a<s;){var u=di[a];di[a++]=null;var h=di[a];di[a++]=null;var g=di[a];di[a++]=null;var b=di[a];if(di[a++]=null,h!==null&&g!==null){var M=h.pending;M===null?g.next=g:(g.next=M.next,M.next=g),h.pending=g}b!==0&&Ib(u,g,b)}}function du(s,a,u,h){di[zo++]=s,di[zo++]=a,di[zo++]=u,di[zo++]=h,Zp|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function em(s,a,u,h){return du(s,a,u,h),pu(s)}function qs(s,a){return du(s,null,null,a),pu(s)}function Ib(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,b=s.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&a!==null&&(g=31-hn(u),s=b.hiddenUpdates,h=s[g],h===null?s[g]=[a]:h.push(a),a.lane=u|536870912),b):null}function pu(s){if(50<xl)throw xl=0,cg=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var $o={};function MM(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(s,a,u,h){return new MM(s,a,u,h)}function tm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yr(s,a){var u=s.alternate;return u===null?(u=Yn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Ub(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function mu(s,a,u,h,g,b){var M=0;if(h=s,typeof s=="function")tm(s)&&(M=1);else if(typeof s=="string")M=$D(s,u,D.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case j:return s=Yn(31,u,a,g),s.elementType=j,s.lanes=b,s;case _:return Hs(u.children,g,b,a);case S:M=8,g|=24;break;case A:return s=Yn(12,u,a,g|2),s.elementType=A,s.lanes=b,s;case T:return s=Yn(13,u,a,g),s.elementType=T,s.lanes=b,s;case O:return s=Yn(19,u,a,g),s.elementType=O,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:M=10;break e;case w:M=9;break e;case k:M=11;break e;case E:M=14;break e;case R:M=16,h=null;break e}M=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Yn(M,u,a,g),a.elementType=s,a.type=h,a.lanes=b,a}function Hs(s,a,u,h){return s=Yn(7,s,h,a),s.lanes=u,s}function nm(s,a,u){return s=Yn(6,s,null,a),s.lanes=u,s}function Vb(s){var a=Yn(18,null,null,0);return a.stateNode=s,a}function im(s,a,u){return a=Yn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Fb=new WeakMap;function pi(s,a){if(typeof s=="object"&&s!==null){var u=Fb.get(s);return u!==void 0?u:(a={value:s,source:a,stack:it(a)},Fb.set(s,a),a)}return{value:s,source:a,stack:it(a)}}var Lo=[],jo=0,gu=null,el=0,mi=[],gi=0,Kr=null,Ki=1,Yi="";function vr(s,a){Lo[jo++]=el,Lo[jo++]=gu,gu=s,el=a}function Wb(s,a,u){mi[gi++]=Ki,mi[gi++]=Yi,mi[gi++]=Kr,Kr=s;var h=Ki;s=Yi;var g=32-hn(h)-1;h&=~(1<<g),u+=1;var b=32-hn(a)+g;if(30<b){var M=g-g%5;b=(h&(1<<M)-1).toString(32),h>>=M,g-=M,Ki=1<<32-hn(a)+g|u<<g|h,Yi=b+s}else Ki=1<<b|u<<g|h,Yi=s}function rm(s){s.return!==null&&(vr(s,1),Wb(s,1,0))}function sm(s){for(;s===gu;)gu=Lo[--jo],Lo[jo]=null,el=Lo[--jo],Lo[jo]=null;for(;s===Kr;)Kr=mi[--gi],mi[gi]=null,Yi=mi[--gi],mi[gi]=null,Ki=mi[--gi],mi[gi]=null}function Kb(s,a){mi[gi++]=Ki,mi[gi++]=Yi,mi[gi++]=Kr,Ki=a.id,Yi=a.overflow,Kr=s}var tn=null,vt=null,Ge=!1,Yr=null,yi=!1,om=Error(i(519));function Gr(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(pi(a,s)),om}function Yb(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[en]=s,a[Rn]=h,u){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(u=0;u<_l.length;u++)Ve(_l[u],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Ve("invalid",a),ab(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ve("invalid",a);break;case"textarea":Ve("invalid",a),cb(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||fx(a.textContent,u)?(h.popover!=null&&(Ve("beforetoggle",a),Ve("toggle",a)),h.onScroll!=null&&Ve("scroll",a),h.onScrollEnd!=null&&Ve("scrollend",a),h.onClick!=null&&(a.onclick=mr),a=!0):a=!1,a||Gr(s,!0)}function Gb(s){for(tn=s.return;tn;)switch(tn.tag){case 5:case 31:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:tn=tn.return}}function Bo(s){if(s!==tn)return!1;if(!Ge)return Gb(s),Ge=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Cg(s.type,s.memoizedProps)),u=!u),u&&vt&&Gr(s),Gb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));vt=Sx(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));vt=Sx(s)}else a===27?(a=vt,cs(s.type)?(s=Og,Og=null,vt=s):vt=a):vt=tn?bi(s.stateNode.nextSibling):null;return!0}function Is(){vt=tn=null,Ge=!1}function am(){var s=Yr;return s!==null&&(jn===null?jn=s:jn.push.apply(jn,s),Yr=null),s}function tl(s){Yr===null?Yr=[s]:Yr.push(s)}var lm=N(null),Us=null,br=null;function Xr(s,a,u){B(lm,a._currentValue),a._currentValue=u}function Sr(s){s._currentValue=lm.current,z(lm)}function cm(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function um(s,a,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var M=g.child;b=b.firstContext;e:for(;b!==null;){var $=b;b=g;for(var F=0;F<a.length;F++)if($.context===a[F]){b.lanes|=u,$=b.alternate,$!==null&&($.lanes|=u),cm(b.return,u,s),h||(M=null);break e}b=$.next}}else if(g.tag===18){if(M=g.return,M===null)throw Error(i(341));M.lanes|=u,b=M.alternate,b!==null&&(b.lanes|=u),cm(M,u,s),M=null}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===s){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}}function Po(s,a,u,h){s=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var M=g.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var $=g.type;Kn(g.pendingProps.value,M.value)||(s!==null?s.push($):s=[$])}}else if(g===re.current){if(M=g.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(kl):s=[kl])}g=g.return}s!==null&&um(a,s,u,h),a.flags|=262144}function yu(s){for(s=s.firstContext;s!==null;){if(!Kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Vs(s){Us=s,br=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return Xb(Us,s)}function vu(s,a){return Us===null&&Vs(s),Xb(s,a)}function Xb(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},br===null){if(s===null)throw Error(i(308));br=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else br=br.next=a;return u}var DM=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},RM=n.unstable_scheduleCallback,NM=n.unstable_NormalPriority,Rt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new DM,data:new Map,refCount:0}}function nl(s){s.refCount--,s.refCount===0&&RM(NM,function(){s.controller.abort()})}var il=null,hm=0,qo=0,Ho=null;function zM(s,a){if(il===null){var u=il=[];hm=0,qo=mg(),Ho={status:"pending",value:void 0,then:function(h){u.push(h)}}}return hm++,a.then(Qb,Qb),a}function Qb(){if(--hm===0&&il!==null){Ho!==null&&(Ho.status="fulfilled");var s=il;il=null,qo=0,Ho=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function $M(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var Jb=K.S;K.S=function(s,a){$S=ht(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&zM(s,a),Jb!==null&&Jb(s,a)};var Fs=N(null);function dm(){var s=Fs.current;return s!==null?s:dt.pooledCache}function bu(s,a){a===null?B(Fs,Fs.current):B(Fs,a.pool)}function Zb(){var s=dm();return s===null?null:{parent:Rt._currentValue,pool:s}}var Io=Error(i(460)),pm=Error(i(474)),Su=Error(i(542)),xu={then:function(){}};function e1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function t1(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(mr,mr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,i1(s),s;default:if(typeof a.status=="string")a.then(mr,mr);else{if(s=dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,i1(s),s}throw Ks=a,Io}}function Ws(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ks=u,Io):u}}var Ks=null;function n1(){if(Ks===null)throw Error(i(459));var s=Ks;return Ks=null,s}function i1(s){if(s===Io||s===Su)throw Error(i(483))}var Uo=null,rl=0;function wu(s){var a=rl;return rl+=1,Uo===null&&(Uo=[]),t1(Uo,s,a)}function sl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function _u(s,a){throw a.$$typeof===y?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function r1(s){function a(te,Q){if(s){var ne=te.deletions;ne===null?(te.deletions=[Q],te.flags|=16):ne.push(Q)}}function u(te,Q){if(!s)return null;for(;Q!==null;)a(te,Q),Q=Q.sibling;return null}function h(te){for(var Q=new Map;te!==null;)te.key!==null?Q.set(te.key,te):Q.set(te.index,te),te=te.sibling;return Q}function g(te,Q){return te=yr(te,Q),te.index=0,te.sibling=null,te}function b(te,Q,ne){return te.index=ne,s?(ne=te.alternate,ne!==null?(ne=ne.index,ne<Q?(te.flags|=67108866,Q):ne):(te.flags|=67108866,Q)):(te.flags|=1048576,Q)}function M(te){return s&&te.alternate===null&&(te.flags|=67108866),te}function $(te,Q,ne,de){return Q===null||Q.tag!==6?(Q=nm(ne,te.mode,de),Q.return=te,Q):(Q=g(Q,ne),Q.return=te,Q)}function F(te,Q,ne,de){var ke=ne.type;return ke===_?he(te,Q,ne.props.children,de,ne.key):Q!==null&&(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&Ws(ke)===Q.type)?(Q=g(Q,ne.props),sl(Q,ne),Q.return=te,Q):(Q=mu(ne.type,ne.key,ne.props,null,te.mode,de),sl(Q,ne),Q.return=te,Q)}function ie(te,Q,ne,de){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ne.containerInfo||Q.stateNode.implementation!==ne.implementation?(Q=im(ne,te.mode,de),Q.return=te,Q):(Q=g(Q,ne.children||[]),Q.return=te,Q)}function he(te,Q,ne,de,ke){return Q===null||Q.tag!==7?(Q=Hs(ne,te.mode,de,ke),Q.return=te,Q):(Q=g(Q,ne),Q.return=te,Q)}function pe(te,Q,ne){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=nm(""+Q,te.mode,ne),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return ne=mu(Q.type,Q.key,Q.props,null,te.mode,ne),sl(ne,Q),ne.return=te,ne;case x:return Q=im(Q,te.mode,ne),Q.return=te,Q;case R:return Q=Ws(Q),pe(te,Q,ne)}if(ce(Q)||q(Q))return Q=Hs(Q,te.mode,ne,null),Q.return=te,Q;if(typeof Q.then=="function")return pe(te,wu(Q),ne);if(Q.$$typeof===C)return pe(te,vu(te,Q),ne);_u(te,Q)}return null}function se(te,Q,ne,de){var ke=Q!==null?Q.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ke!==null?null:$(te,Q,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:return ne.key===ke?F(te,Q,ne,de):null;case x:return ne.key===ke?ie(te,Q,ne,de):null;case R:return ne=Ws(ne),se(te,Q,ne,de)}if(ce(ne)||q(ne))return ke!==null?null:he(te,Q,ne,de,null);if(typeof ne.then=="function")return se(te,Q,wu(ne),de);if(ne.$$typeof===C)return se(te,Q,vu(te,ne),de);_u(te,ne)}return null}function ae(te,Q,ne,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return te=te.get(ne)||null,$(Q,te,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return te=te.get(de.key===null?ne:de.key)||null,F(Q,te,de,ke);case x:return te=te.get(de.key===null?ne:de.key)||null,ie(Q,te,de,ke);case R:return de=Ws(de),ae(te,Q,ne,de,ke)}if(ce(de)||q(de))return te=te.get(ne)||null,he(Q,te,de,ke,null);if(typeof de.then=="function")return ae(te,Q,ne,wu(de),ke);if(de.$$typeof===C)return ae(te,Q,ne,vu(Q,de),ke);_u(Q,de)}return null}function Ae(te,Q,ne,de){for(var ke=null,Qe=null,Te=Q,qe=Q=0,We=null;Te!==null&&qe<ne.length;qe++){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var Je=se(te,Te,ne[qe],de);if(Je===null){Te===null&&(Te=We);break}s&&Te&&Je.alternate===null&&a(te,Te),Q=b(Je,Q,qe),Qe===null?ke=Je:Qe.sibling=Je,Qe=Je,Te=We}if(qe===ne.length)return u(te,Te),Ge&&vr(te,qe),ke;if(Te===null){for(;qe<ne.length;qe++)Te=pe(te,ne[qe],de),Te!==null&&(Q=b(Te,Q,qe),Qe===null?ke=Te:Qe.sibling=Te,Qe=Te);return Ge&&vr(te,qe),ke}for(Te=h(Te);qe<ne.length;qe++)We=ae(Te,te,qe,ne[qe],de),We!==null&&(s&&We.alternate!==null&&Te.delete(We.key===null?qe:We.key),Q=b(We,Q,qe),Qe===null?ke=We:Qe.sibling=We,Qe=We);return s&&Te.forEach(function(ps){return a(te,ps)}),Ge&&vr(te,qe),ke}function Re(te,Q,ne,de){if(ne==null)throw Error(i(151));for(var ke=null,Qe=null,Te=Q,qe=Q=0,We=null,Je=ne.next();Te!==null&&!Je.done;qe++,Je=ne.next()){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var ps=se(te,Te,Je.value,de);if(ps===null){Te===null&&(Te=We);break}s&&Te&&ps.alternate===null&&a(te,Te),Q=b(ps,Q,qe),Qe===null?ke=ps:Qe.sibling=ps,Qe=ps,Te=We}if(Je.done)return u(te,Te),Ge&&vr(te,qe),ke;if(Te===null){for(;!Je.done;qe++,Je=ne.next())Je=pe(te,Je.value,de),Je!==null&&(Q=b(Je,Q,qe),Qe===null?ke=Je:Qe.sibling=Je,Qe=Je);return Ge&&vr(te,qe),ke}for(Te=h(Te);!Je.done;qe++,Je=ne.next())Je=ae(Te,te,qe,Je.value,de),Je!==null&&(s&&Je.alternate!==null&&Te.delete(Je.key===null?qe:Je.key),Q=b(Je,Q,qe),Qe===null?ke=Je:Qe.sibling=Je,Qe=Je);return s&&Te.forEach(function(WD){return a(te,WD)}),Ge&&vr(te,qe),ke}function ft(te,Q,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===_&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:e:{for(var ke=ne.key;Q!==null;){if(Q.key===ke){if(ke=ne.type,ke===_){if(Q.tag===7){u(te,Q.sibling),de=g(Q,ne.props.children),de.return=te,te=de;break e}}else if(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&Ws(ke)===Q.type){u(te,Q.sibling),de=g(Q,ne.props),sl(de,ne),de.return=te,te=de;break e}u(te,Q);break}else a(te,Q);Q=Q.sibling}ne.type===_?(de=Hs(ne.props.children,te.mode,de,ne.key),de.return=te,te=de):(de=mu(ne.type,ne.key,ne.props,null,te.mode,de),sl(de,ne),de.return=te,te=de)}return M(te);case x:e:{for(ke=ne.key;Q!==null;){if(Q.key===ke)if(Q.tag===4&&Q.stateNode.containerInfo===ne.containerInfo&&Q.stateNode.implementation===ne.implementation){u(te,Q.sibling),de=g(Q,ne.children||[]),de.return=te,te=de;break e}else{u(te,Q);break}else a(te,Q);Q=Q.sibling}de=im(ne,te.mode,de),de.return=te,te=de}return M(te);case R:return ne=Ws(ne),ft(te,Q,ne,de)}if(ce(ne))return Ae(te,Q,ne,de);if(q(ne)){if(ke=q(ne),typeof ke!="function")throw Error(i(150));return ne=ke.call(ne),Re(te,Q,ne,de)}if(typeof ne.then=="function")return ft(te,Q,wu(ne),de);if(ne.$$typeof===C)return ft(te,Q,vu(te,ne),de);_u(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Q!==null&&Q.tag===6?(u(te,Q.sibling),de=g(Q,ne),de.return=te,te=de):(u(te,Q),de=nm(ne,te.mode,de),de.return=te,te=de),M(te)):u(te,Q)}return function(te,Q,ne,de){try{rl=0;var ke=ft(te,Q,ne,de);return Uo=null,ke}catch(Te){if(Te===Io||Te===Su)throw Te;var Qe=Yn(29,Te,null,te.mode);return Qe.lanes=de,Qe.return=te,Qe}finally{}}}var Ys=r1(!0),s1=r1(!1),Qr=!1;function mm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Jr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zr(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(et&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=pu(s),Ib(s,null,u),a}return du(s,h,a,u),pu(s)}function ol(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Wn(s,u)}}function ym(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?g=b=M:b=b.next=M,u=u.next}while(u!==null);b===null?g=b=a:b=b.next=a}else g=b=a;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var vm=!1;function al(){if(vm){var s=Ho;if(s!==null)throw s}}function ll(s,a,u,h){vm=!1;var g=s.updateQueue;Qr=!1;var b=g.firstBaseUpdate,M=g.lastBaseUpdate,$=g.shared.pending;if($!==null){g.shared.pending=null;var F=$,ie=F.next;F.next=null,M===null?b=ie:M.next=ie,M=F;var he=s.alternate;he!==null&&(he=he.updateQueue,$=he.lastBaseUpdate,$!==M&&($===null?he.firstBaseUpdate=ie:$.next=ie,he.lastBaseUpdate=F))}if(b!==null){var pe=g.baseState;M=0,he=ie=F=null,$=b;do{var se=$.lane&-536870913,ae=se!==$.lane;if(ae?(Fe&se)===se:(h&se)===se){se!==0&&se===qo&&(vm=!0),he!==null&&(he=he.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ae=s,Re=$;se=a;var ft=u;switch(Re.tag){case 1:if(Ae=Re.payload,typeof Ae=="function"){pe=Ae.call(ft,pe,se);break e}pe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Re.payload,se=typeof Ae=="function"?Ae.call(ft,pe,se):Ae,se==null)break e;pe=m({},pe,se);break e;case 2:Qr=!0}}se=$.callback,se!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:$.tag,payload:$.payload,callback:$.callback,next:null},he===null?(ie=he=ae,F=pe):he=he.next=ae,M|=se;if($=$.next,$===null){if($=g.shared.pending,$===null)break;ae=$,$=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);he===null&&(F=pe),g.baseState=F,g.firstBaseUpdate=ie,g.lastBaseUpdate=he,b===null&&(g.shared.lanes=0),rs|=M,s.lanes=M,s.memoizedState=pe}}function o1(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function a1(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)o1(u[s],a)}var Vo=N(null),Cu=N(0);function l1(s,a){s=Or,B(Cu,s),B(Vo,a),Or=s|a.baseLanes}function bm(){B(Cu,Or),B(Vo,Vo.current)}function Sm(){Or=Cu.current,z(Vo),z(Cu)}var Gn=N(null),vi=null;function es(s){var a=s.alternate;B(Tt,Tt.current&1),B(Gn,s),vi===null&&(a===null||Vo.current!==null||a.memoizedState!==null)&&(vi=s)}function xm(s){B(Tt,Tt.current),B(Gn,s),vi===null&&(vi=s)}function c1(s){s.tag===22?(B(Tt,Tt.current),B(Gn,s),vi===null&&(vi=s)):ts()}function ts(){B(Tt,Tt.current),B(Gn,Gn.current)}function Xn(s){z(Gn),vi===s&&(vi=null),z(Tt)}var Tt=N(0);function Au(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Eg(u)||kg(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xr=0,Be=null,ct=null,Nt=null,Tu=!1,Fo=!1,Gs=!1,Eu=0,cl=0,Wo=null,LM=0;function wt(){throw Error(i(321))}function wm(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Kn(s[u],a[u]))return!1;return!0}function _m(s,a,u,h,g,b){return xr=b,Be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,K.H=s===null||s.memoizedState===null?W1:Bm,Gs=!1,b=u(h,g),Gs=!1,Fo&&(b=f1(a,u,h,g)),u1(s),b}function u1(s){K.H=hl;var a=ct!==null&&ct.next!==null;if(xr=0,Nt=ct=Be=null,Tu=!1,cl=0,Wo=null,a)throw Error(i(300));s===null||zt||(s=s.dependencies,s!==null&&yu(s)&&(zt=!0))}function f1(s,a,u,h){Be=s;var g=0;do{if(Fo&&(Wo=null),cl=0,Fo=!1,25<=g)throw Error(i(301));if(g+=1,Nt=ct=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}K.H=K1,b=a(u,h)}while(Fo);return b}function jM(){var s=K.H,a=s.useState()[0];return a=typeof a.then=="function"?ul(a):a,s=s.useState()[0],(ct!==null?ct.memoizedState:null)!==s&&(Be.flags|=1024),a}function Cm(){var s=Eu!==0;return Eu=0,s}function Am(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Tm(s){if(Tu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Tu=!1}xr=0,Nt=ct=Be=null,Fo=!1,cl=Eu=0,Wo=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Be.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Et(){if(ct===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=ct.next;var a=Nt===null?Be.memoizedState:Nt.next;if(a!==null)Nt=a,ct=s;else{if(s===null)throw Be.alternate===null?Error(i(467)):Error(i(310));ct=s,s={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Nt===null?Be.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(s){var a=cl;return cl+=1,Wo===null&&(Wo=[]),s=t1(Wo,s,a),a=Be,(Nt===null?a.memoizedState:Nt.next)===null&&(a=a.alternate,K.H=a===null||a.memoizedState===null?W1:Bm),s}function Ou(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ul(s);if(s.$$typeof===C)return nn(s)}throw Error(i(438,String(s)))}function Em(s){var a=null,u=Be.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=ku(),Be.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=V;return a.index++,u}function wr(s,a){return typeof a=="function"?a(s):a}function Mu(s){var a=Et();return km(a,ct,s)}function km(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,b=h.pending;if(b!==null){if(g!==null){var M=g.next;g.next=b.next,b.next=M}a.baseQueue=g=b,h.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{a=g.next;var $=M=null,F=null,ie=a,he=!1;do{var pe=ie.lane&-536870913;if(pe!==ie.lane?(Fe&pe)===pe:(xr&pe)===pe){var se=ie.revertLane;if(se===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),pe===qo&&(he=!0);else if((xr&se)===se){ie=ie.next,se===qo&&(he=!0);continue}else pe={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},F===null?($=F=pe,M=b):F=F.next=pe,Be.lanes|=se,rs|=se;pe=ie.action,Gs&&u(b,pe),b=ie.hasEagerState?ie.eagerState:u(b,pe)}else se={lane:pe,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},F===null?($=F=se,M=b):F=F.next=se,Be.lanes|=pe,rs|=pe;ie=ie.next}while(ie!==null&&ie!==a);if(F===null?M=b:F.next=$,!Kn(b,s.memoizedState)&&(zt=!0,he&&(u=Ho,u!==null)))throw u;s.memoizedState=b,s.baseState=M,s.baseQueue=F,h.lastRenderedState=b}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Om(s){var a=Et(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,b=a.memoizedState;if(g!==null){u.pending=null;var M=g=g.next;do b=s(b,M.action),M=M.next;while(M!==g);Kn(b,a.memoizedState)||(zt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,h]}function h1(s,a,u){var h=Be,g=Et(),b=Ge;if(b){if(u===void 0)throw Error(i(407));u=u()}else u=a();var M=!Kn((ct||g).memoizedState,u);if(M&&(g.memoizedState=u,zt=!0),g=g.queue,Rm(m1.bind(null,h,g,s),[s]),g.getSnapshot!==a||M||Nt!==null&&Nt.memoizedState.tag&1){if(h.flags|=2048,Ko(9,{destroy:void 0},p1.bind(null,h,g,u,a),null),dt===null)throw Error(i(349));b||(xr&127)!==0||d1(h,a,u)}return u}function d1(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Be.updateQueue,a===null?(a=ku(),Be.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function p1(s,a,u,h){a.value=u,a.getSnapshot=h,g1(a)&&y1(s)}function m1(s,a,u){return u(function(){g1(a)&&y1(s)})}function g1(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Kn(s,u)}catch{return!0}}function y1(s){var a=qs(s,2);a!==null&&Bn(a,s,2)}function Mm(s){var a=Sn();if(typeof s=="function"){var u=s;if(s=u(),Gs){ai(!0);try{u()}finally{ai(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:s},a}function v1(s,a,u,h){return s.baseState=u,km(s,ct,typeof h=="function"?h:wr)}function BM(s,a,u,h,g){if(Nu(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};K.T!==null?u(!0):b.isTransition=!1,h(b),u=a.pending,u===null?(b.next=a.pending=b,b1(a,b)):(b.next=u.next,a.pending=u.next=b)}}function b1(s,a){var u=a.action,h=a.payload,g=s.state;if(a.isTransition){var b=K.T,M={};K.T=M;try{var $=u(g,h),F=K.S;F!==null&&F(M,$),S1(s,a,$)}catch(ie){Dm(s,a,ie)}finally{b!==null&&M.types!==null&&(b.types=M.types),K.T=b}}else try{b=u(g,h),S1(s,a,b)}catch(ie){Dm(s,a,ie)}}function S1(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){x1(s,a,h)},function(h){return Dm(s,a,h)}):x1(s,a,u)}function x1(s,a,u){a.status="fulfilled",a.value=u,w1(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,b1(s,u)))}function Dm(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,w1(a),a=a.next;while(a!==h)}s.action=null}function w1(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function _1(s,a){return a}function C1(s,a){if(Ge){var u=dt.formState;if(u!==null){e:{var h=Be;if(Ge){if(vt){t:{for(var g=vt,b=yi;g.nodeType!==8;){if(!b){g=null;break t}if(g=bi(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){vt=bi(g.nextSibling),h=g.data==="F!";break e}}Gr(h)}h=!1}h&&(a=u[0])}}return u=Sn(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_1,lastRenderedState:a},u.queue=h,u=U1.bind(null,Be,h),h.dispatch=u,h=Mm(!1),b=jm.bind(null,Be,!1,h.queue),h=Sn(),g={state:a,dispatch:null,action:s,pending:null},h.queue=g,u=BM.bind(null,Be,g,b,u),g.dispatch=u,h.memoizedState=s,[a,u,!1]}function A1(s){var a=Et();return T1(a,ct,s)}function T1(s,a,u){if(a=km(s,a,_1)[0],s=Mu(wr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ul(a)}catch(M){throw M===Io?Su:M}else h=a;a=Et();var g=a.queue,b=g.dispatch;return u!==a.memoizedState&&(Be.flags|=2048,Ko(9,{destroy:void 0},PM.bind(null,g,u),null)),[h,b,s]}function PM(s,a){s.action=a}function E1(s){var a=Et(),u=ct;if(u!==null)return T1(a,u,s);Et(),a=a.memoizedState,u=Et();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Ko(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Be.updateQueue,a===null&&(a=ku(),Be.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function k1(){return Et().memoizedState}function Du(s,a,u,h){var g=Sn();Be.flags|=s,g.memoizedState=Ko(1|a,{destroy:void 0},u,h===void 0?null:h)}function Ru(s,a,u,h){var g=Et();h=h===void 0?null:h;var b=g.memoizedState.inst;ct!==null&&h!==null&&wm(h,ct.memoizedState.deps)?g.memoizedState=Ko(a,b,u,h):(Be.flags|=s,g.memoizedState=Ko(1|a,b,u,h))}function O1(s,a){Du(8390656,8,s,a)}function Rm(s,a){Ru(2048,8,s,a)}function qM(s){Be.flags|=4;var a=Be.updateQueue;if(a===null)a=ku(),Be.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function M1(s){var a=Et().memoizedState;return qM({ref:a,nextImpl:s}),function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function D1(s,a){return Ru(4,2,s,a)}function R1(s,a){return Ru(4,4,s,a)}function N1(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function z1(s,a,u){u=u!=null?u.concat([s]):null,Ru(4,4,N1.bind(null,a,s),u)}function Nm(){}function $1(s,a){var u=Et();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&wm(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function L1(s,a){var u=Et();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&wm(a,h[1]))return h[0];if(h=s(),Gs){ai(!0);try{s()}finally{ai(!1)}}return u.memoizedState=[h,a],h}function zm(s,a,u){return u===void 0||(xr&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=jS(),Be.lanes|=s,rs|=s,u)}function j1(s,a,u,h){return Kn(u,a)?u:Vo.current!==null?(s=zm(s,u,h),Kn(s,a)||(zt=!0),s):(xr&42)===0||(xr&1073741824)!==0&&(Fe&261930)===0?(zt=!0,s.memoizedState=u):(s=jS(),Be.lanes|=s,rs|=s,a)}function B1(s,a,u,h,g){var b=U.p;U.p=b!==0&&8>b?b:8;var M=K.T,$={};K.T=$,jm(s,!1,a,u);try{var F=g(),ie=K.S;if(ie!==null&&ie($,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var he=$M(F,h);fl(s,a,he,Zn(s))}else fl(s,a,h,Zn(s))}catch(pe){fl(s,a,{then:function(){},status:"rejected",reason:pe},Zn())}finally{U.p=b,M!==null&&$.types!==null&&(M.types=$.types),K.T=M}}function HM(){}function $m(s,a,u,h){if(s.tag!==5)throw Error(i(476));var g=P1(s).queue;B1(s,g,a,ee,u===null?HM:function(){return q1(s),u(h)})}function P1(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:ee},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function q1(s){var a=P1(s);a.next===null&&(a=s.alternate.memoizedState),fl(s,a.next.queue,{},Zn())}function Lm(){return nn(kl)}function H1(){return Et().memoizedState}function I1(){return Et().memoizedState}function IM(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Zn();s=Jr(u);var h=Zr(a,s,u);h!==null&&(Bn(h,a,u),ol(h,a,u)),a={cache:fm()},s.payload=a;return}a=a.return}}function UM(s,a,u){var h=Zn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Nu(s)?V1(a,u):(u=em(s,a,u,h),u!==null&&(Bn(u,s,h),F1(u,a,h)))}function U1(s,a,u){var h=Zn();fl(s,a,u,h)}function fl(s,a,u,h){var g={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Nu(s))V1(a,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var M=a.lastRenderedState,$=b(M,u);if(g.hasEagerState=!0,g.eagerState=$,Kn($,M))return du(s,a,g,0),dt===null&&hu(),!1}catch{}finally{}if(u=em(s,a,g,h),u!==null)return Bn(u,s,h),F1(u,a,h),!0}return!1}function jm(s,a,u,h){if(h={lane:2,revertLane:mg(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Nu(s)){if(a)throw Error(i(479))}else a=em(s,u,h,2),a!==null&&Bn(a,s,2)}function Nu(s){var a=s.alternate;return s===Be||a!==null&&a===Be}function V1(s,a){Fo=Tu=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function F1(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Wn(s,u)}}var hl={readContext:nn,use:Ou,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};hl.useEffectEvent=wt;var W1={readContext:nn,use:Ou,useCallback:function(s,a){return Sn().memoizedState=[s,a===void 0?null:a],s},useContext:nn,useEffect:O1,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Du(4194308,4,N1.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Du(4194308,4,s,a)},useInsertionEffect:function(s,a){Du(4,2,s,a)},useMemo:function(s,a){var u=Sn();a=a===void 0?null:a;var h=s();if(Gs){ai(!0);try{s()}finally{ai(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Sn();if(u!==void 0){var g=u(a);if(Gs){ai(!0);try{u(a)}finally{ai(!1)}}}else g=a;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=UM.bind(null,Be,s),[h.memoizedState,s]},useRef:function(s){var a=Sn();return s={current:s},a.memoizedState=s},useState:function(s){s=Mm(s);var a=s.queue,u=U1.bind(null,Be,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:Nm,useDeferredValue:function(s,a){var u=Sn();return zm(u,s,a)},useTransition:function(){var s=Mm(!1);return s=B1.bind(null,Be,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Be,g=Sn();if(Ge){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),dt===null)throw Error(i(349));(Fe&127)!==0||d1(h,a,u)}g.memoizedState=u;var b={value:u,getSnapshot:a};return g.queue=b,O1(m1.bind(null,h,b,s),[s]),h.flags|=2048,Ko(9,{destroy:void 0},p1.bind(null,h,b,u,a),null),u},useId:function(){var s=Sn(),a=dt.identifierPrefix;if(Ge){var u=Yi,h=Ki;u=(h&~(1<<32-hn(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Eu++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=LM++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Lm,useFormState:C1,useActionState:C1,useOptimistic:function(s){var a=Sn();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=jm.bind(null,Be,!0,u),u.dispatch=a,[s,a]},useMemoCache:Em,useCacheRefresh:function(){return Sn().memoizedState=IM.bind(null,Be)},useEffectEvent:function(s){var a=Sn(),u={impl:s};return a.memoizedState=u,function(){if((et&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Bm={readContext:nn,use:Ou,useCallback:$1,useContext:nn,useEffect:Rm,useImperativeHandle:z1,useInsertionEffect:D1,useLayoutEffect:R1,useMemo:L1,useReducer:Mu,useRef:k1,useState:function(){return Mu(wr)},useDebugValue:Nm,useDeferredValue:function(s,a){var u=Et();return j1(u,ct.memoizedState,s,a)},useTransition:function(){var s=Mu(wr)[0],a=Et().memoizedState;return[typeof s=="boolean"?s:ul(s),a]},useSyncExternalStore:h1,useId:H1,useHostTransitionStatus:Lm,useFormState:A1,useActionState:A1,useOptimistic:function(s,a){var u=Et();return v1(u,ct,s,a)},useMemoCache:Em,useCacheRefresh:I1};Bm.useEffectEvent=M1;var K1={readContext:nn,use:Ou,useCallback:$1,useContext:nn,useEffect:Rm,useImperativeHandle:z1,useInsertionEffect:D1,useLayoutEffect:R1,useMemo:L1,useReducer:Om,useRef:k1,useState:function(){return Om(wr)},useDebugValue:Nm,useDeferredValue:function(s,a){var u=Et();return ct===null?zm(u,s,a):j1(u,ct.memoizedState,s,a)},useTransition:function(){var s=Om(wr)[0],a=Et().memoizedState;return[typeof s=="boolean"?s:ul(s),a]},useSyncExternalStore:h1,useId:H1,useHostTransitionStatus:Lm,useFormState:E1,useActionState:E1,useOptimistic:function(s,a){var u=Et();return ct!==null?v1(u,ct,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Em,useCacheRefresh:I1};K1.useEffectEvent=M1;function Pm(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:m({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var qm={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Zn(),g=Jr(h);g.payload=a,u!=null&&(g.callback=u),a=Zr(s,g,h),a!==null&&(Bn(a,s,h),ol(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Zn(),g=Jr(h);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Zr(s,g,h),a!==null&&(Bn(a,s,h),ol(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Zn(),h=Jr(u);h.tag=2,a!=null&&(h.callback=a),a=Zr(s,h,u),a!==null&&(Bn(a,s,u),ol(a,s,u))}};function Y1(s,a,u,h,g,b,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,M):a.prototype&&a.prototype.isPureReactComponent?!Ja(u,h)||!Ja(g,b):!0}function G1(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&qm.enqueueReplaceState(a,a.state,null)}function Xs(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}function X1(s){fu(s)}function Q1(s){console.error(s)}function J1(s){fu(s)}function zu(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Z1(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Hm(s,a,u){return u=Jr(u),u.tag=3,u.payload={element:null},u.callback=function(){zu(s,a)},u}function eS(s){return s=Jr(s),s.tag=3,s}function tS(s,a,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;s.payload=function(){return g(b)},s.callback=function(){Z1(a,u,h)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){Z1(a,u,h),typeof g!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var $=h.stack;this.componentDidCatch(h.value,{componentStack:$!==null?$:""})})}function VM(s,a,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&Po(a,u,g,!0),u=Gn.current,u!==null){switch(u.tag){case 31:case 13:return vi===null?Wu():u.alternate===null&&_t===0&&(_t=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===xu?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),hg(s,h,g)),!1;case 22:return u.flags|=65536,h===xu?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),hg(s,h,g)),!1}throw Error(i(435,u.tag))}return hg(s,h,g),Wu(),!1}if(Ge)return a=Gn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==om&&(s=Error(i(422),{cause:h}),tl(pi(s,u)))):(h!==om&&(a=Error(i(423),{cause:h}),tl(pi(a,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=pi(h,u),g=Hm(s.stateNode,h,g),ym(s,g),_t!==4&&(_t=2)),!1;var b=Error(i(520),{cause:h});if(b=pi(b,u),Sl===null?Sl=[b]:Sl.push(b),_t!==4&&(_t=2),a===null)return!0;h=pi(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Hm(u.stateNode,h,s),ym(u,s),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ss===null||!ss.has(b))))return u.flags|=65536,g&=-g,u.lanes|=g,g=eS(g),tS(g,s,u,h),ym(u,g),!1}u=u.return}while(u!==null);return!1}var Im=Error(i(461)),zt=!1;function rn(s,a,u,h){a.child=s===null?s1(a,null,u,h):Ys(a,s.child,u,h)}function nS(s,a,u,h,g){u=u.render;var b=a.ref;if("ref"in h){var M={};for(var $ in h)$!=="ref"&&(M[$]=h[$])}else M=h;return Vs(a),h=_m(s,a,u,M,b,g),$=Cm(),s!==null&&!zt?(Am(s,a,g),_r(s,a,g)):(Ge&&$&&rm(a),a.flags|=1,rn(s,a,h,g),a.child)}function iS(s,a,u,h,g){if(s===null){var b=u.type;return typeof b=="function"&&!tm(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,rS(s,a,b,h,g)):(s=mu(u.type,null,h,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Xm(s,g)){var M=b.memoizedProps;if(u=u.compare,u=u!==null?u:Ja,u(M,h)&&s.ref===a.ref)return _r(s,a,g)}return a.flags|=1,s=yr(b,h),s.ref=a.ref,s.return=a,a.child=s}function rS(s,a,u,h,g){if(s!==null){var b=s.memoizedProps;if(Ja(b,h)&&s.ref===a.ref)if(zt=!1,a.pendingProps=h=b,Xm(s,g))(s.flags&131072)!==0&&(zt=!0);else return a.lanes=s.lanes,_r(s,a,g)}return Um(s,a,u,h,g)}function sS(s,a,u,h){var g=h.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,s!==null){for(h=a.child=s.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~b}else h=0,a.child=null;return oS(s,a,b,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&bu(a,b!==null?b.cachePool:null),b!==null?l1(a,b):bm(),c1(a);else return h=a.lanes=536870912,oS(s,a,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(bu(a,b.cachePool),l1(a,b),ts(),a.memoizedState=null):(s!==null&&bu(a,null),bm(),ts());return rn(s,a,g,u),a.child}function dl(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function oS(s,a,u,h,g){var b=dm();return b=b===null?null:{parent:Rt._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},s!==null&&bu(a,null),bm(),c1(a),s!==null&&Po(s,a,h,!0),a.childLanes=g,null}function $u(s,a){return a=ju({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function aS(s,a,u){return Ys(a,s.child,null,u),s=$u(a,a.pendingProps),s.flags|=2,Xn(a),a.memoizedState=null,s}function FM(s,a,u){var h=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ge){if(h.mode==="hidden")return s=$u(a,h),a.lanes=536870912,dl(null,s);if(xm(a),(s=vt)?(s=bx(s,yi),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Kr!==null?{id:Ki,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},u=Vb(s),u.return=a,a.child=u,tn=a,vt=null)):s=null,s===null)throw Gr(a);return a.lanes=536870912,null}return $u(a,h)}var b=s.memoizedState;if(b!==null){var M=b.dehydrated;if(xm(a),g)if(a.flags&256)a.flags&=-257,a=aS(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(zt||Po(s,a,u,!1),g=(u&s.childLanes)!==0,zt||g){if(h=dt,h!==null&&(M=ci(h,u),M!==0&&M!==b.retryLane))throw b.retryLane=M,qs(s,M),Bn(h,s,M),Im;Wu(),a=aS(s,a,u)}else s=b.treeContext,vt=bi(M.nextSibling),tn=a,Ge=!0,Yr=null,yi=!1,s!==null&&Kb(a,s),a=$u(a,h),a.flags|=4096;return a}return s=yr(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Lu(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Um(s,a,u,h,g){return Vs(a),u=_m(s,a,u,h,void 0,g),h=Cm(),s!==null&&!zt?(Am(s,a,g),_r(s,a,g)):(Ge&&h&&rm(a),a.flags|=1,rn(s,a,u,g),a.child)}function lS(s,a,u,h,g,b){return Vs(a),a.updateQueue=null,u=f1(a,h,u,g),u1(s),h=Cm(),s!==null&&!zt?(Am(s,a,b),_r(s,a,b)):(Ge&&h&&rm(a),a.flags|=1,rn(s,a,u,b),a.child)}function cS(s,a,u,h,g){if(Vs(a),a.stateNode===null){var b=$o,M=u.contextType;typeof M=="object"&&M!==null&&(b=nn(M)),b=new u(h,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=qm,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=h,b.state=a.memoizedState,b.refs={},mm(a),M=u.contextType,b.context=typeof M=="object"&&M!==null?nn(M):$o,b.state=a.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Pm(a,u,M,h),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&qm.enqueueReplaceState(b,b.state,null),ll(a,h,b,g),al(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){b=a.stateNode;var $=a.memoizedProps,F=Xs(u,$);b.props=F;var ie=b.context,he=u.contextType;M=$o,typeof he=="object"&&he!==null&&(M=nn(he));var pe=u.getDerivedStateFromProps;he=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",$=a.pendingProps!==$,he||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($||ie!==M)&&G1(a,b,h,M),Qr=!1;var se=a.memoizedState;b.state=se,ll(a,h,b,g),al(),ie=a.memoizedState,$||se!==ie||Qr?(typeof pe=="function"&&(Pm(a,u,pe,h),ie=a.memoizedState),(F=Qr||Y1(a,u,F,h,se,ie,M))?(he||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=ie),b.props=h,b.state=ie,b.context=M,h=F):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{b=a.stateNode,gm(s,a),M=a.memoizedProps,he=Xs(u,M),b.props=he,pe=a.pendingProps,se=b.context,ie=u.contextType,F=$o,typeof ie=="object"&&ie!==null&&(F=nn(ie)),$=u.getDerivedStateFromProps,(ie=typeof $=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==pe||se!==F)&&G1(a,b,h,F),Qr=!1,se=a.memoizedState,b.state=se,ll(a,h,b,g),al();var ae=a.memoizedState;M!==pe||se!==ae||Qr||s!==null&&s.dependencies!==null&&yu(s.dependencies)?(typeof $=="function"&&(Pm(a,u,$,h),ae=a.memoizedState),(he=Qr||Y1(a,u,he,h,se,ae,F)||s!==null&&s.dependencies!==null&&yu(s.dependencies))?(ie||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,ae,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,ae,F)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ae),b.props=h,b.state=ae,b.context=F,h=he):(typeof b.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),h=!1)}return b=h,Lu(s,a),h=(a.flags&128)!==0,b||h?(b=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&h?(a.child=Ys(a,s.child,null,g),a.child=Ys(a,null,u,g)):rn(s,a,u,g),a.memoizedState=b.state,s=a.child):s=_r(s,a,g),s}function uS(s,a,u,h){return Is(),a.flags|=256,rn(s,a,u,h),a.child}var Vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fm(s){return{baseLanes:s,cachePool:Zb()}}function Wm(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Jn),s}function fS(s,a,u){var h=a.pendingProps,g=!1,b=(a.flags&128)!==0,M;if((M=b)||(M=s!==null&&s.memoizedState===null?!1:(Tt.current&2)!==0),M&&(g=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ge){if(g?es(a):ts(),(s=vt)?(s=bx(s,yi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Kr!==null?{id:Ki,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},u=Vb(s),u.return=a,a.child=u,tn=a,vt=null)):s=null,s===null)throw Gr(a);return kg(s)?a.lanes=32:a.lanes=536870912,null}var $=h.children;return h=h.fallback,g?(ts(),g=a.mode,$=ju({mode:"hidden",children:$},g),h=Hs(h,g,u,null),$.return=a,h.return=a,$.sibling=h,a.child=$,h=a.child,h.memoizedState=Fm(u),h.childLanes=Wm(s,M,u),a.memoizedState=Vm,dl(null,h)):(es(a),Km(a,$))}var F=s.memoizedState;if(F!==null&&($=F.dehydrated,$!==null)){if(b)a.flags&256?(es(a),a.flags&=-257,a=Ym(s,a,u)):a.memoizedState!==null?(ts(),a.child=s.child,a.flags|=128,a=null):(ts(),$=h.fallback,g=a.mode,h=ju({mode:"visible",children:h.children},g),$=Hs($,g,u,null),$.flags|=2,h.return=a,$.return=a,h.sibling=$,a.child=h,Ys(a,s.child,null,u),h=a.child,h.memoizedState=Fm(u),h.childLanes=Wm(s,M,u),a.memoizedState=Vm,a=dl(null,h));else if(es(a),kg($)){if(M=$.nextSibling&&$.nextSibling.dataset,M)var ie=M.dgst;M=ie,h=Error(i(419)),h.stack="",h.digest=M,tl({value:h,source:null,stack:null}),a=Ym(s,a,u)}else if(zt||Po(s,a,u,!1),M=(u&s.childLanes)!==0,zt||M){if(M=dt,M!==null&&(h=ci(M,u),h!==0&&h!==F.retryLane))throw F.retryLane=h,qs(s,h),Bn(M,s,h),Im;Eg($)||Wu(),a=Ym(s,a,u)}else Eg($)?(a.flags|=192,a.child=s.child,a=null):(s=F.treeContext,vt=bi($.nextSibling),tn=a,Ge=!0,Yr=null,yi=!1,s!==null&&Kb(a,s),a=Km(a,h.children),a.flags|=4096);return a}return g?(ts(),$=h.fallback,g=a.mode,F=s.child,ie=F.sibling,h=yr(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,ie!==null?$=yr(ie,$):($=Hs($,g,u,null),$.flags|=2),$.return=a,h.return=a,h.sibling=$,a.child=h,dl(null,h),h=a.child,$=s.child.memoizedState,$===null?$=Fm(u):(g=$.cachePool,g!==null?(F=Rt._currentValue,g=g.parent!==F?{parent:F,pool:F}:g):g=Zb(),$={baseLanes:$.baseLanes|u,cachePool:g}),h.memoizedState=$,h.childLanes=Wm(s,M,u),a.memoizedState=Vm,dl(s.child,h)):(es(a),u=s.child,s=u.sibling,u=yr(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(M=a.deletions,M===null?(a.deletions=[s],a.flags|=16):M.push(s)),a.child=u,a.memoizedState=null,u)}function Km(s,a){return a=ju({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ju(s,a){return s=Yn(22,s,null,a),s.lanes=0,s}function Ym(s,a,u){return Ys(a,s.child,null,u),s=Km(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function hS(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),cm(s.return,a,u)}function Gm(s,a,u,h,g,b){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g,treeForkCount:b}:(M.isBackwards=a,M.rendering=null,M.renderingStartTime=0,M.last=h,M.tail=u,M.tailMode=g,M.treeForkCount=b)}function dS(s,a,u){var h=a.pendingProps,g=h.revealOrder,b=h.tail;h=h.children;var M=Tt.current,$=(M&2)!==0;if($?(M=M&1|2,a.flags|=128):M&=1,B(Tt,M),rn(s,a,h,u),h=Ge?el:0,!$&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hS(s,u,a);else if(s.tag===19)hS(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&Au(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Gm(a,!1,g,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Au(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Gm(a,!0,u,null,b,h);break;case"together":Gm(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function _r(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),rs|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Po(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=yr(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=yr(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Xm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&yu(s)))}function WM(s,a,u){switch(a.tag){case 3:ue(a,a.stateNode.containerInfo),Xr(a,Rt,s.memoizedState.cache),Is();break;case 27:case 5:ve(a);break;case 4:ue(a,a.stateNode.containerInfo);break;case 10:Xr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,xm(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(es(a),a.flags|=128,null):(u&a.child.childLanes)!==0?fS(s,a,u):(es(a),s=_r(s,a,u),s!==null?s.sibling:null);es(a);break;case 19:var g=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(Po(s,a,u,!1),h=(u&a.childLanes)!==0),g){if(h)return dS(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),B(Tt,Tt.current),h)break;return null;case 22:return a.lanes=0,sS(s,a,u,a.pendingProps);case 24:Xr(a,Rt,s.memoizedState.cache)}return _r(s,a,u)}function pS(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)zt=!0;else{if(!Xm(s,u)&&(a.flags&128)===0)return zt=!1,WM(s,a,u);zt=(s.flags&131072)!==0}else zt=!1,Ge&&(a.flags&1048576)!==0&&Wb(a,el,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Ws(a.elementType),a.type=s,typeof s=="function")tm(s)?(h=Xs(s,h),a.tag=1,a=cS(null,a,s,h,u)):(a.tag=0,a=Um(null,a,s,h,u));else{if(s!=null){var g=s.$$typeof;if(g===k){a.tag=11,a=nS(null,a,s,h,u);break e}else if(g===E){a.tag=14,a=iS(null,a,s,h,u);break e}}throw a=J(s)||s,Error(i(306,a,""))}}return a;case 0:return Um(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,g=Xs(h,a.pendingProps),cS(s,a,h,g,u);case 3:e:{if(ue(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var b=a.memoizedState;g=b.element,gm(s,a),ll(a,h,null,u);var M=a.memoizedState;if(h=M.cache,Xr(a,Rt,h),h!==b.cache&&um(a,[Rt],u,!0),al(),h=M.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=uS(s,a,h,u);break e}else if(h!==g){g=pi(Error(i(424)),a),tl(g),a=uS(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(vt=bi(s.firstChild),tn=a,Ge=!0,Yr=null,yi=!0,u=s1(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Is(),h===g){a=_r(s,a,u);break e}rn(s,a,h,u)}a=a.child}return a;case 26:return Lu(s,a),s===null?(u=Ax(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ge||(u=a.type,s=a.pendingProps,h=Zu(I.current).createElement(u),h[en]=a,h[Rn]=s,sn(h,u,s),Yt(h),a.stateNode=h):a.memoizedState=Ax(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return ve(a),s===null&&Ge&&(h=a.stateNode=wx(a.type,a.pendingProps,I.current),tn=a,yi=!0,g=vt,cs(a.type)?(Og=g,vt=bi(h.firstChild)):vt=g),rn(s,a,a.pendingProps.children,u),Lu(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ge&&((g=h=vt)&&(h=wD(h,a.type,a.pendingProps,yi),h!==null?(a.stateNode=h,tn=a,vt=bi(h.firstChild),yi=!1,g=!0):g=!1),g||Gr(a)),ve(a),g=a.type,b=a.pendingProps,M=s!==null?s.memoizedProps:null,h=b.children,Cg(g,b)?h=null:M!==null&&Cg(g,M)&&(a.flags|=32),a.memoizedState!==null&&(g=_m(s,a,jM,null,null,u),kl._currentValue=g),Lu(s,a),rn(s,a,h,u),a.child;case 6:return s===null&&Ge&&((s=u=vt)&&(u=_D(u,a.pendingProps,yi),u!==null?(a.stateNode=u,tn=a,vt=null,s=!0):s=!1),s||Gr(a)),null;case 13:return fS(s,a,u);case 4:return ue(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ys(a,null,h,u):rn(s,a,h,u),a.child;case 11:return nS(s,a,a.type,a.pendingProps,u);case 7:return rn(s,a,a.pendingProps,u),a.child;case 8:return rn(s,a,a.pendingProps.children,u),a.child;case 12:return rn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Xr(a,a.type,h.value),rn(s,a,h.children,u),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Vs(a),g=nn(g),h=h(g),a.flags|=1,rn(s,a,h,u),a.child;case 14:return iS(s,a,a.type,a.pendingProps,u);case 15:return rS(s,a,a.type,a.pendingProps,u);case 19:return dS(s,a,u);case 31:return FM(s,a,u);case 22:return sS(s,a,u,a.pendingProps);case 24:return Vs(a),h=nn(Rt),s===null?(g=dm(),g===null&&(g=dt,b=fm(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=u),g=b),a.memoizedState={parent:h,cache:g},mm(a),Xr(a,Rt,g)):((s.lanes&u)!==0&&(gm(s,a),ll(a,null,null,u),al()),g=s.memoizedState,b=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Xr(a,Rt,h)):(h=b.cache,Xr(a,Rt,h),h!==g.cache&&um(a,[Rt],u,!0))),rn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Cr(s){s.flags|=4}function Qm(s,a,u,h,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(HS())s.flags|=8192;else throw Ks=xu,pm}else s.flags&=-16777217}function mS(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Mx(a))if(HS())s.flags|=8192;else throw Ks=xu,pm}function Bu(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?dn():536870912,s.lanes|=a,Qo|=a)}function pl(s,a){if(!Ge)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function bt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function KM(s,a,u){var h=a.pendingProps;switch(sm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(a),null;case 1:return bt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Sr(Rt),ge(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Bo(a)?Cr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,am())),bt(a),null;case 26:var g=a.type,b=a.memoizedState;return s===null?(Cr(a),b!==null?(bt(a),mS(a,b)):(bt(a),Qm(a,g,null,h,u))):b?b!==s.memoizedState?(Cr(a),bt(a),mS(a,b)):(bt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Cr(a),bt(a),Qm(a,g,s,h,u)),null;case 27:if(G(a),u=I.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Cr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return bt(a),null}s=D.current,Bo(a)?Yb(a):(s=wx(g,h,u),a.stateNode=s,Cr(a))}return bt(a),null;case 5:if(G(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Cr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return bt(a),null}if(b=D.current,Bo(a))Yb(a);else{var M=Zu(I.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?M.createElement("select",{is:h.is}):M.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?M.createElement(g,{is:h.is}):M.createElement(g)}}b[en]=a,b[Rn]=h;e:for(M=a.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===a)break e;for(;M.sibling===null;){if(M.return===null||M.return===a)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}a.stateNode=b;e:switch(sn(b,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Cr(a)}}return bt(a),Qm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Cr(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=I.current,Bo(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,g=tn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[en]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||fx(s.nodeValue,u)),s||Gr(a,!0)}else s=Zu(s).createTextNode(h),s[en]=a,a.stateNode=s}return bt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Bo(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[en]=a}else Is(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),s=!1}else u=am(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return bt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Bo(a),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[en]=a}else Is(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),g=!1}else g=am(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),Bu(a,a.updateQueue),bt(a),null);case 4:return ge(),s===null&&bg(a.stateNode.containerInfo),bt(a),null;case 10:return Sr(a.type),bt(a),null;case 19:if(z(Tt),h=a.memoizedState,h===null)return bt(a),null;if(g=(a.flags&128)!==0,b=h.rendering,b===null)if(g)pl(h,!1);else{if(_t!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Au(s),b!==null){for(a.flags|=128,pl(h,!1),s=b.updateQueue,a.updateQueue=s,Bu(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)Ub(u,s),u=u.sibling;return B(Tt,Tt.current&1|2),Ge&&vr(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&ht()>Uu&&(a.flags|=128,g=!0,pl(h,!1),a.lanes=4194304)}else{if(!g)if(s=Au(b),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,Bu(a,s),pl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!Ge)return bt(a),null}else 2*ht()-h.renderingStartTime>Uu&&u!==536870912&&(a.flags|=128,g=!0,pl(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(s=h.last,s!==null?s.sibling=b:a.child=b,h.last=b)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=ht(),s.sibling=null,u=Tt.current,B(Tt,g?u&1|2:u&1),Ge&&vr(a,h.treeForkCount),s):(bt(a),null);case 22:case 23:return Xn(a),Sm(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(bt(a),a.subtreeFlags&6&&(a.flags|=8192)):bt(a),u=a.updateQueue,u!==null&&Bu(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&z(Fs),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Sr(Rt),bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function YM(s,a){switch(sm(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Sr(Rt),ge(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return G(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(i(340));Is()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Xn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Is()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return z(Tt),null;case 4:return ge(),null;case 10:return Sr(a.type),null;case 22:case 23:return Xn(a),Sm(),s!==null&&z(Fs),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Sr(Rt),null;case 25:return null;default:return null}}function gS(s,a){switch(sm(a),a.tag){case 3:Sr(Rt),ge();break;case 26:case 27:case 5:G(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:z(Tt);break;case 10:Sr(a.type);break;case 22:case 23:Xn(a),Sm(),s!==null&&z(Fs);break;case 24:Sr(Rt)}}function ml(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var b=u.create,M=u.inst;h=b(),M.destroy=h}u=u.next}while(u!==g)}}catch($){at(a,a.return,$)}}function ns(s,a,u){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&s)===s){var M=h.inst,$=M.destroy;if($!==void 0){M.destroy=void 0,g=a;var F=u,ie=$;try{ie()}catch(he){at(g,F,he)}}}h=h.next}while(h!==b)}}catch(he){at(a,a.return,he)}}function yS(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{a1(a,u)}catch(h){at(s,s.return,h)}}}function vS(s,a,u){u.props=Xs(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){at(s,a,h)}}function gl(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){at(s,a,g)}}function Gi(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){at(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){at(s,a,g)}else u.current=null}function bS(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){at(s,s.return,g)}}function Jm(s,a,u){try{var h=s.stateNode;gD(h,s.type,u,a),h[Rn]=a}catch(g){at(s,s.return,g)}}function SS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&cs(s.type)||s.tag===4}function Zm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||SS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&cs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function eg(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=mr));else if(h!==4&&(h===27&&cs(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(eg(s,a,u),s=s.sibling;s!==null;)eg(s,a,u),s=s.sibling}function Pu(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&cs(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Pu(s,a,u),s=s.sibling;s!==null;)Pu(s,a,u),s=s.sibling}function xS(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);sn(a,h,u),a[en]=s,a[Rn]=u}catch(b){at(s,s.return,b)}}var Ar=!1,$t=!1,tg=!1,wS=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function GM(s,a){if(s=s.containerInfo,wg=af,s=zb(s),Yp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var M=0,$=-1,F=-1,ie=0,he=0,pe=s,se=null;t:for(;;){for(var ae;pe!==u||g!==0&&pe.nodeType!==3||($=M+g),pe!==b||h!==0&&pe.nodeType!==3||(F=M+h),pe.nodeType===3&&(M+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)se=pe,pe=ae;for(;;){if(pe===s)break t;if(se===u&&++ie===g&&($=M),se===b&&++he===h&&(F=M),(ae=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=ae}u=$===-1||F===-1?null:{start:$,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(_g={focusedElem:s,selectionRange:u},af=!1,Gt=a;Gt!==null;)if(a=Gt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Gt=s;else for(;Gt!==null;){switch(a=Gt,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)g=s[u],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=a,g=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Ae=Xs(u.type,g);s=h.getSnapshotBeforeUpdate(Ae,b),h.__reactInternalSnapshotBeforeUpdate=s}catch(Re){at(u,u.return,Re)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Tg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Gt=s;break}Gt=a.return}}function _S(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Er(s,u),h&4&&ml(5,u);break;case 1:if(Er(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(M){at(u,u.return,M)}else{var g=Xs(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(M){at(u,u.return,M)}}h&64&&yS(u),h&512&&gl(u,u.return);break;case 3:if(Er(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{a1(s,a)}catch(M){at(u,u.return,M)}}break;case 27:a===null&&h&4&&xS(u);case 26:case 5:Er(s,u),a===null&&h&4&&bS(u),h&512&&gl(u,u.return);break;case 12:Er(s,u);break;case 31:Er(s,u),h&4&&TS(s,u);break;case 13:Er(s,u),h&4&&ES(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=rD.bind(null,u),CD(s,u))));break;case 22:if(h=u.memoizedState!==null||Ar,!h){a=a!==null&&a.memoizedState!==null||$t,g=Ar;var b=$t;Ar=h,($t=a)&&!b?kr(s,u,(u.subtreeFlags&8772)!==0):Er(s,u),Ar=g,$t=b}break;case 30:break;default:Er(s,u)}}function CS(s){var a=s.alternate;a!==null&&(s.alternate=null,CS(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Dp(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,zn=!1;function Tr(s,a,u){for(u=u.child;u!==null;)AS(s,a,u),u=u.sibling}function AS(s,a,u){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount($s,u)}catch{}switch(u.tag){case 26:$t||Gi(u,a),Tr(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:$t||Gi(u,a);var h=St,g=zn;cs(u.type)&&(St=u.stateNode,zn=!1),Tr(s,a,u),Al(u.stateNode),St=h,zn=g;break;case 5:$t||Gi(u,a);case 6:if(h=St,g=zn,St=null,Tr(s,a,u),St=h,zn=g,St!==null)if(zn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(u.stateNode)}catch(b){at(u,a,b)}else try{St.removeChild(u.stateNode)}catch(b){at(u,a,b)}break;case 18:St!==null&&(zn?(s=St,yx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),sa(s)):yx(St,u.stateNode));break;case 4:h=St,g=zn,St=u.stateNode.containerInfo,zn=!0,Tr(s,a,u),St=h,zn=g;break;case 0:case 11:case 14:case 15:ns(2,u,a),$t||ns(4,u,a),Tr(s,a,u);break;case 1:$t||(Gi(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&vS(u,a,h)),Tr(s,a,u);break;case 21:Tr(s,a,u);break;case 22:$t=(h=$t)||u.memoizedState!==null,Tr(s,a,u),$t=h;break;default:Tr(s,a,u)}}function TS(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sa(s)}catch(u){at(a,a.return,u)}}}function ES(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sa(s)}catch(u){at(a,a.return,u)}}function XM(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new wS),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new wS),a;default:throw Error(i(435,s.tag))}}function qu(s,a){var u=XM(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var g=sD.bind(null,s,h);h.then(g,g)}})}function $n(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],b=s,M=a,$=M;e:for(;$!==null;){switch($.tag){case 27:if(cs($.type)){St=$.stateNode,zn=!1;break e}break;case 5:St=$.stateNode,zn=!1;break e;case 3:case 4:St=$.stateNode.containerInfo,zn=!0;break e}$=$.return}if(St===null)throw Error(i(160));AS(b,M,g),St=null,zn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)kS(a,s),a=a.sibling}var Ri=null;function kS(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:$n(a,s),Ln(s),h&4&&(ns(3,s,s.return),ml(3,s),ns(5,s,s.return));break;case 1:$n(a,s),Ln(s),h&512&&($t||u===null||Gi(u,u.return)),h&64&&Ar&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Ri;if($n(a,s),Ln(s),h&512&&($t||u===null||Gi(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Ua]||b[en]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),sn(b,h,u),b[en]=s,Yt(b),h=b;break e;case"link":var M=kx("link","href",g).get(h+(u.href||""));if(M){for(var $=0;$<M.length;$++)if(b=M[$],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice($,1);break t}}b=g.createElement(h),sn(b,h,u),g.head.appendChild(b);break;case"meta":if(M=kx("meta","content",g).get(h+(u.content||""))){for($=0;$<M.length;$++)if(b=M[$],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice($,1);break t}}b=g.createElement(h),sn(b,h,u),g.head.appendChild(b);break;default:throw Error(i(468,h))}b[en]=s,Yt(b),h=b}s.stateNode=h}else Ox(g,s.type,s.stateNode);else s.stateNode=Ex(g,h,s.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?Ox(g,s.type,s.stateNode):Ex(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Jm(s,s.memoizedProps,u.memoizedProps)}break;case 27:$n(a,s),Ln(s),h&512&&($t||u===null||Gi(u,u.return)),u!==null&&h&4&&Jm(s,s.memoizedProps,u.memoizedProps);break;case 5:if($n(a,s),Ln(s),h&512&&($t||u===null||Gi(u,u.return)),s.flags&32){g=s.stateNode;try{ko(g,"")}catch(Ae){at(s,s.return,Ae)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,Jm(s,g,u!==null?u.memoizedProps:g)),h&1024&&(tg=!0);break;case 6:if($n(a,s),Ln(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ae){at(s,s.return,Ae)}}break;case 3:if(nf=null,g=Ri,Ri=ef(a.containerInfo),$n(a,s),Ri=g,Ln(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{sa(a.containerInfo)}catch(Ae){at(s,s.return,Ae)}tg&&(tg=!1,OS(s));break;case 4:h=Ri,Ri=ef(s.stateNode.containerInfo),$n(a,s),Ln(s),Ri=h;break;case 12:$n(a,s),Ln(s);break;case 31:$n(a,s),Ln(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,qu(s,h)));break;case 13:$n(a,s),Ln(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Iu=ht()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,qu(s,h)));break;case 22:g=s.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,ie=Ar,he=$t;if(Ar=ie||g,$t=he||F,$n(a,s),$t=he,Ar=ie,Ln(s),h&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||F||Ar||$t||Qs(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){F=u=a;try{if(b=F.stateNode,g)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{$=F.stateNode;var pe=F.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;$.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ae){at(F,F.return,Ae)}}}else if(a.tag===6){if(u===null){F=a;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(Ae){at(F,F.return,Ae)}}}else if(a.tag===18){if(u===null){F=a;try{var ae=F.stateNode;g?vx(ae,!0):vx(F.stateNode,!1)}catch(Ae){at(F,F.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,qu(s,u))));break;case 19:$n(a,s),Ln(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,qu(s,h)));break;case 30:break;case 21:break;default:$n(a,s),Ln(s)}}function Ln(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(SS(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,b=Zm(s);Pu(s,b,g);break;case 5:var M=u.stateNode;u.flags&32&&(ko(M,""),u.flags&=-33);var $=Zm(s);Pu(s,$,M);break;case 3:case 4:var F=u.stateNode.containerInfo,ie=Zm(s);eg(s,ie,F);break;default:throw Error(i(161))}}catch(he){at(s,s.return,he)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function OS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;OS(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Er(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_S(s,a.alternate,a),a=a.sibling}function Qs(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ns(4,a,a.return),Qs(a);break;case 1:Gi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&vS(a,a.return,u),Qs(a);break;case 27:Al(a.stateNode);case 26:case 5:Gi(a,a.return),Qs(a);break;case 22:a.memoizedState===null&&Qs(a);break;case 30:Qs(a);break;default:Qs(a)}s=s.sibling}}function kr(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=s,b=a,M=b.flags;switch(b.tag){case 0:case 11:case 15:kr(g,b,u),ml(4,b);break;case 1:if(kr(g,b,u),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ie){at(h,h.return,ie)}if(h=b,g=h.updateQueue,g!==null){var $=h.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)o1(F[g],$)}catch(ie){at(h,h.return,ie)}}u&&M&64&&yS(b),gl(b,b.return);break;case 27:xS(b);case 26:case 5:kr(g,b,u),u&&h===null&&M&4&&bS(b),gl(b,b.return);break;case 12:kr(g,b,u);break;case 31:kr(g,b,u),u&&M&4&&TS(g,b);break;case 13:kr(g,b,u),u&&M&4&&ES(g,b);break;case 22:b.memoizedState===null&&kr(g,b,u),gl(b,b.return);break;case 30:break;default:kr(g,b,u)}a=a.sibling}}function ng(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&nl(u))}function ig(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&nl(s))}function Ni(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)MS(s,a,u,h),a=a.sibling}function MS(s,a,u,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ni(s,a,u,h),g&2048&&ml(9,a);break;case 1:Ni(s,a,u,h);break;case 3:Ni(s,a,u,h),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&nl(s)));break;case 12:if(g&2048){Ni(s,a,u,h),s=a.stateNode;try{var b=a.memoizedProps,M=b.id,$=b.onPostCommit;typeof $=="function"&&$(M,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){at(a,a.return,F)}}else Ni(s,a,u,h);break;case 31:Ni(s,a,u,h);break;case 13:Ni(s,a,u,h);break;case 23:break;case 22:b=a.stateNode,M=a.alternate,a.memoizedState!==null?b._visibility&2?Ni(s,a,u,h):yl(s,a):b._visibility&2?Ni(s,a,u,h):(b._visibility|=2,Yo(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),g&2048&&ng(M,a);break;case 24:Ni(s,a,u,h),g&2048&&ig(a.alternate,a);break;default:Ni(s,a,u,h)}}function Yo(s,a,u,h,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,M=a,$=u,F=h,ie=M.flags;switch(M.tag){case 0:case 11:case 15:Yo(b,M,$,F,g),ml(8,M);break;case 23:break;case 22:var he=M.stateNode;M.memoizedState!==null?he._visibility&2?Yo(b,M,$,F,g):yl(b,M):(he._visibility|=2,Yo(b,M,$,F,g)),g&&ie&2048&&ng(M.alternate,M);break;case 24:Yo(b,M,$,F,g),g&&ie&2048&&ig(M.alternate,M);break;default:Yo(b,M,$,F,g)}a=a.sibling}}function yl(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,g=h.flags;switch(h.tag){case 22:yl(u,h),g&2048&&ng(h.alternate,h);break;case 24:yl(u,h),g&2048&&ig(h.alternate,h);break;default:yl(u,h)}a=a.sibling}}var vl=8192;function Go(s,a,u){if(s.subtreeFlags&vl)for(s=s.child;s!==null;)DS(s,a,u),s=s.sibling}function DS(s,a,u){switch(s.tag){case 26:Go(s,a,u),s.flags&vl&&s.memoizedState!==null&&LD(u,Ri,s.memoizedState,s.memoizedProps);break;case 5:Go(s,a,u);break;case 3:case 4:var h=Ri;Ri=ef(s.stateNode.containerInfo),Go(s,a,u),Ri=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=vl,vl=16777216,Go(s,a,u),vl=h):Go(s,a,u));break;default:Go(s,a,u)}}function RS(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function bl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Gt=h,zS(h,s)}RS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)NS(s),s=s.sibling}function NS(s){switch(s.tag){case 0:case 11:case 15:bl(s),s.flags&2048&&ns(9,s,s.return);break;case 3:bl(s);break;case 12:bl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Hu(s)):bl(s);break;default:bl(s)}}function Hu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Gt=h,zS(h,s)}RS(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ns(8,a,a.return),Hu(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Hu(a));break;default:Hu(a)}s=s.sibling}}function zS(s,a){for(;Gt!==null;){var u=Gt;switch(u.tag){case 0:case 11:case 15:ns(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:nl(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Gt=h;else e:for(u=s;Gt!==null;){h=Gt;var g=h.sibling,b=h.return;if(CS(h),h===u){Gt=null;break e}if(g!==null){g.return=b,Gt=g;break e}Gt=b}}}var QM={getCacheForType:function(s){var a=nn(Rt),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return nn(Rt).controller.signal}},JM=typeof WeakMap=="function"?WeakMap:Map,et=0,dt=null,Ue=null,Fe=0,ot=0,Qn=null,is=!1,Xo=!1,rg=!1,Or=0,_t=0,rs=0,Js=0,sg=0,Jn=0,Qo=0,Sl=null,jn=null,og=!1,Iu=0,$S=0,Uu=1/0,Vu=null,ss=null,qt=0,os=null,Jo=null,Mr=0,ag=0,lg=null,LS=null,xl=0,cg=null;function Zn(){return(et&2)!==0&&Fe!==0?Fe&-Fe:K.T!==null?mg():Mi()}function jS(){if(Jn===0)if((Fe&536870912)===0||Ge){var s=xo;xo<<=1,(xo&3932160)===0&&(xo=262144),Jn=s}else Jn=536870912;return s=Gn.current,s!==null&&(s.flags|=32),Jn}function Bn(s,a,u){(s===dt&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(Zo(s,0),as(s,Fe,Jn,!1)),li(s,u),((et&2)===0||s!==dt)&&(s===dt&&((et&2)===0&&(Js|=u),_t===4&&as(s,Fe,Jn,!1)),Xi(s))}function BS(s,a,u){if((et&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||On(s,a),g=h?tD(s,a):fg(s,a,!0),b=h;do{if(g===0){Xo&&!h&&as(s,a,0,!1);break}else{if(u=s.current.alternate,b&&!ZM(u)){g=fg(s,a,!1),b=!1;continue}if(g===2){if(b=a,s.errorRecoveryDisabledLanes&b)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var $=s;g=Sl;var F=$.current.memoizedState.isDehydrated;if(F&&(Zo($,M).flags|=256),M=fg($,M,!1),M!==2){if(rg&&!F){$.errorRecoveryDisabledLanes|=b,Js|=b,g=4;break e}b=jn,jn=g,b!==null&&(jn===null?jn=b:jn.push.apply(jn,b))}g=M}if(b=!1,g!==2)continue}}if(g===1){Zo(s,0),as(s,a,0,!0);break}e:{switch(h=s,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:as(h,a,Jn,!is);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Iu+300-ht(),10<g)){if(as(h,a,Jn,!is),Kt(h,0,!0)!==0)break e;Mr=a,h.timeoutHandle=mx(PS.bind(null,h,u,jn,Vu,og,a,Jn,Js,Qo,is,b,"Throttled",-0,0),g);break e}PS(h,u,jn,Vu,og,a,Jn,Js,Qo,is,b,null,-0,0)}}break}while(!0);Xi(s)}function PS(s,a,u,h,g,b,M,$,F,ie,he,pe,se,ae){if(s.timeoutHandle=-1,pe=a.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mr},DS(a,b,pe);var Ae=(b&62914560)===b?Iu-ht():(b&4194048)===b?$S-ht():0;if(Ae=jD(pe,Ae),Ae!==null){Mr=b,s.cancelPendingCommit=Ae(KS.bind(null,s,a,b,u,h,g,M,$,F,he,pe,null,se,ae)),as(s,b,M,!ie);return}}KS(s,a,b,u,h,g,M,$,F)}function ZM(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],b=g.getSnapshot;g=g.value;try{if(!Kn(b(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function as(s,a,u,h){a&=~sg,a&=~Js,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var g=a;0<g;){var b=31-hn(g),M=1<<b;h[b]=-1,g&=~M}u!==0&&Oi(s,u,a)}function Fu(){return(et&6)===0?(wl(0),!1):!0}function ug(){if(Ue!==null){if(ot===0)var s=Ue.return;else s=Ue,br=Us=null,Tm(s),Uo=null,rl=0,s=Ue;for(;s!==null;)gS(s.alternate,s),s=s.return;Ue=null}}function Zo(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,bD(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Mr=0,ug(),dt=s,Ue=u=yr(s.current,null),Fe=a,ot=0,Qn=null,is=!1,Xo=On(s,a),rg=!1,Qo=Jn=sg=Js=rs=_t=0,jn=Sl=null,og=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var g=31-hn(h),b=1<<g;a|=s[g],h&=~b}return Or=a,hu(),u}function qS(s,a){Be=null,K.H=hl,a===Io||a===Su?(a=n1(),ot=3):a===pm?(a=n1(),ot=4):ot=a===Im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qn=a,Ue===null&&(_t=1,zu(s,pi(a,s.current)))}function HS(){var s=Gn.current;return s===null?!0:(Fe&4194048)===Fe?vi===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===vi:!1}function IS(){var s=K.H;return K.H=hl,s===null?hl:s}function US(){var s=K.A;return K.A=QM,s}function Wu(){_t=4,is||(Fe&4194048)!==Fe&&Gn.current!==null||(Xo=!0),(rs&134217727)===0&&(Js&134217727)===0||dt===null||as(dt,Fe,Jn,!1)}function fg(s,a,u){var h=et;et|=2;var g=IS(),b=US();(dt!==s||Fe!==a)&&(Vu=null,Zo(s,a)),a=!1;var M=_t;e:do try{if(ot!==0&&Ue!==null){var $=Ue,F=Qn;switch(ot){case 8:ug(),M=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(a=!0);var ie=ot;if(ot=0,Qn=null,ea(s,$,F,ie),u&&Xo){M=0;break e}break;default:ie=ot,ot=0,Qn=null,ea(s,$,F,ie)}}eD(),M=_t;break}catch(he){qS(s,he)}while(!0);return a&&s.shellSuspendCounter++,br=Us=null,et=h,K.H=g,K.A=b,Ue===null&&(dt=null,Fe=0,hu()),M}function eD(){for(;Ue!==null;)VS(Ue)}function tD(s,a){var u=et;et|=2;var h=IS(),g=US();dt!==s||Fe!==a?(Vu=null,Uu=ht()+500,Zo(s,a)):Xo=On(s,a);e:do try{if(ot!==0&&Ue!==null){a=Ue;var b=Qn;t:switch(ot){case 1:ot=0,Qn=null,ea(s,a,b,1);break;case 2:case 9:if(e1(b)){ot=0,Qn=null,FS(a);break}a=function(){ot!==2&&ot!==9||dt!==s||(ot=7),Xi(s)},b.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:e1(b)?(ot=0,Qn=null,FS(a)):(ot=0,Qn=null,ea(s,a,b,7));break;case 5:var M=null;switch(Ue.tag){case 26:M=Ue.memoizedState;case 5:case 27:var $=Ue;if(M?Mx(M):$.stateNode.complete){ot=0,Qn=null;var F=$.sibling;if(F!==null)Ue=F;else{var ie=$.return;ie!==null?(Ue=ie,Ku(ie)):Ue=null}break t}}ot=0,Qn=null,ea(s,a,b,5);break;case 6:ot=0,Qn=null,ea(s,a,b,6);break;case 8:ug(),_t=6;break e;default:throw Error(i(462))}}nD();break}catch(he){qS(s,he)}while(!0);return br=Us=null,K.H=h,K.A=g,et=u,Ue!==null?0:(dt=null,Fe=0,hu(),_t)}function nD(){for(;Ue!==null&&!rt();)VS(Ue)}function VS(s){var a=pS(s.alternate,s,Or);s.memoizedProps=s.pendingProps,a===null?Ku(s):Ue=a}function FS(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=lS(u,a,a.pendingProps,a.type,void 0,Fe);break;case 11:a=lS(u,a,a.pendingProps,a.type.render,a.ref,Fe);break;case 5:Tm(a);default:gS(u,a),a=Ue=Ub(a,Or),a=pS(u,a,Or)}s.memoizedProps=s.pendingProps,a===null?Ku(s):Ue=a}function ea(s,a,u,h){br=Us=null,Tm(a),Uo=null,rl=0;var g=a.return;try{if(VM(s,g,a,u,Fe)){_t=1,zu(s,pi(u,s.current)),Ue=null;return}}catch(b){if(g!==null)throw Ue=g,b;_t=1,zu(s,pi(u,s.current)),Ue=null;return}a.flags&32768?(Ge||h===1?s=!0:Xo||(Fe&536870912)!==0?s=!1:(is=s=!0,(h===2||h===9||h===3||h===6)&&(h=Gn.current,h!==null&&h.tag===13&&(h.flags|=16384))),WS(a,s)):Ku(a)}function Ku(s){var a=s;do{if((a.flags&32768)!==0){WS(a,is);return}s=a.return;var u=KM(a.alternate,a,Or);if(u!==null){Ue=u;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=s}while(a!==null);_t===0&&(_t=5)}function WS(s,a){do{var u=YM(s.alternate,s);if(u!==null){u.flags&=32767,Ue=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=u}while(s!==null);_t=6,Ue=null}function KS(s,a,u,h,g,b,M,$,F){s.cancelPendingCommit=null;do Yu();while(qt!==0);if((et&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Zp,Pt(s,u,b,M,$,F),s===dt&&(Ue=dt=null,Fe=0),Jo=a,os=s,Mr=u,ag=b,lg=g,LS=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,oD(Bt,function(){return JS(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=K.T,K.T=null,g=U.p,U.p=2,M=et,et|=4;try{GM(s,a,u)}finally{et=M,U.p=g,K.T=h}}qt=1,YS(),GS(),XS()}}function YS(){if(qt===1){qt=0;var s=os,a=Jo,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var h=U.p;U.p=2;var g=et;et|=4;try{kS(a,s);var b=_g,M=zb(s.containerInfo),$=b.focusedElem,F=b.selectionRange;if(M!==$&&$&&$.ownerDocument&&Nb($.ownerDocument.documentElement,$)){if(F!==null&&Yp($)){var ie=F.start,he=F.end;if(he===void 0&&(he=ie),"selectionStart"in $)$.selectionStart=ie,$.selectionEnd=Math.min(he,$.value.length);else{var pe=$.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var ae=se.getSelection(),Ae=$.textContent.length,Re=Math.min(F.start,Ae),ft=F.end===void 0?Re:Math.min(F.end,Ae);!ae.extend&&Re>ft&&(M=ft,ft=Re,Re=M);var te=Rb($,Re),Q=Rb($,ft);if(te&&Q&&(ae.rangeCount!==1||ae.anchorNode!==te.node||ae.anchorOffset!==te.offset||ae.focusNode!==Q.node||ae.focusOffset!==Q.offset)){var ne=pe.createRange();ne.setStart(te.node,te.offset),ae.removeAllRanges(),Re>ft?(ae.addRange(ne),ae.extend(Q.node,Q.offset)):(ne.setEnd(Q.node,Q.offset),ae.addRange(ne))}}}}for(pe=[],ae=$;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<pe.length;$++){var de=pe[$];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}af=!!wg,_g=wg=null}finally{et=g,U.p=h,K.T=u}}s.current=a,qt=2}}function GS(){if(qt===2){qt=0;var s=os,a=Jo,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var h=U.p;U.p=2;var g=et;et|=4;try{_S(s,a.alternate,a)}finally{et=g,U.p=h,K.T=u}}qt=3}}function XS(){if(qt===4||qt===3){qt=0,st();var s=os,a=Jo,u=Mr,h=LS;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?qt=5:(qt=0,Jo=os=null,QS(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(ss=null),dr(u),a=a.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot($s,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=K.T,g=U.p,U.p=2,K.T=null;try{for(var b=s.onRecoverableError,M=0;M<h.length;M++){var $=h[M];b($.value,{componentStack:$.stack})}}finally{K.T=a,U.p=g}}(Mr&3)!==0&&Yu(),Xi(s),g=s.pendingLanes,(u&261930)!==0&&(g&42)!==0?s===cg?xl++:(xl=0,cg=s):xl=0,wl(0)}}function QS(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,nl(a)))}function Yu(){return YS(),GS(),XS(),JS()}function JS(){if(qt!==5)return!1;var s=os,a=ag;ag=0;var u=dr(Mr),h=K.T,g=U.p;try{U.p=32>u?32:u,K.T=null,u=lg,lg=null;var b=os,M=Mr;if(qt=0,Jo=os=null,Mr=0,(et&6)!==0)throw Error(i(331));var $=et;if(et|=4,NS(b.current),MS(b,b.current,M,u),et=$,wl(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot($s,b)}catch{}return!0}finally{U.p=g,K.T=h,QS(s,a)}}function ZS(s,a,u){a=pi(u,a),a=Hm(s.stateNode,a,2),s=Zr(s,a,2),s!==null&&(li(s,2),Xi(s))}function at(s,a,u){if(s.tag===3)ZS(s,s,u);else for(;a!==null;){if(a.tag===3){ZS(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ss===null||!ss.has(h))){s=pi(u,s),u=eS(2),h=Zr(a,u,2),h!==null&&(tS(u,h,a,s),li(h,2),Xi(h));break}}a=a.return}}function hg(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new JM;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(u)||(rg=!0,g.add(u),s=iD.bind(null,s,a,u),a.then(s,s))}function iD(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,dt===s&&(Fe&u)===u&&(_t===4||_t===3&&(Fe&62914560)===Fe&&300>ht()-Iu?(et&2)===0&&Zo(s,0):sg|=u,Qo===Fe&&(Qo=0)),Xi(s)}function ex(s,a){a===0&&(a=dn()),s=qs(s,a),s!==null&&(li(s,a),Xi(s))}function rD(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),ex(s,u)}function sD(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),ex(s,u)}function oD(s,a){return De(s,a)}var Gu=null,ta=null,dg=!1,Xu=!1,pg=!1,ls=0;function Xi(s){s!==ta&&s.next===null&&(ta===null?Gu=ta=s:ta=ta.next=s),Xu=!0,dg||(dg=!0,lD())}function wl(s,a){if(!pg&&Xu){pg=!0;do for(var u=!1,h=Gu;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var M=h.suspendedLanes,$=h.pingedLanes;b=(1<<31-hn(42|s)+1)-1,b&=g&~(M&~$),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,rx(h,b))}else b=Fe,b=Kt(h,h===dt?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||On(h,b)||(u=!0,rx(h,b));h=h.next}while(u);pg=!1}}function aD(){tx()}function tx(){Xu=dg=!1;var s=0;ls!==0&&vD()&&(s=ls);for(var a=ht(),u=null,h=Gu;h!==null;){var g=h.next,b=nx(h,a);b===0?(h.next=null,u===null?Gu=g:u.next=g,g===null&&(ta=u)):(u=h,(s!==0||(b&3)!==0)&&(Xu=!0)),h=g}qt!==0&&qt!==5||wl(s),ls!==0&&(ls=0)}function nx(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var M=31-hn(b),$=1<<M,F=g[M];F===-1?(($&u)===0||($&h)!==0)&&(g[M]=Mn($,a)):F<=a&&(s.expiredLanes|=$),b&=~$}if(a=dt,u=Fe,u=Kt(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&je(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||On(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&je(h),dr(u)){case 2:case 8:u=Dt;break;case 32:u=Bt;break;case 268435456:u=Fn;break;default:u=Bt}return h=ix.bind(null,s),u=De(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&je(h),s.callbackPriority=2,s.callbackNode=null,2}function ix(s,a){if(qt!==0&&qt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Yu()&&s.callbackNode!==u)return null;var h=Fe;return h=Kt(s,s===dt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(BS(s,h,a),nx(s,ht()),s.callbackNode!=null&&s.callbackNode===u?ix.bind(null,s):null)}function rx(s,a){if(Yu())return null;BS(s,a,!0)}function lD(){SD(function(){(et&6)!==0?De(Zt,aD):tx()})}function mg(){if(ls===0){var s=qo;s===0&&(s=So,So<<=1,(So&261888)===0&&(So=256)),ls=s}return ls}function sx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ru(""+s)}function ox(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function cD(s,a,u,h,g){if(a==="submit"&&u&&u.stateNode===g){var b=sx((g[Rn]||null).action),M=h.submitter;M&&(a=(a=M[Rn]||null)?sx(a.formAction):M.getAttribute("formAction"),a!==null&&(b=a,M=null));var $=new lu("action","action",null,h,g);s.push({event:$,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ls!==0){var F=M?ox(g,M):new FormData(g);$m(u,{pending:!0,data:F,method:g.method,action:b},null,F)}}else typeof b=="function"&&($.preventDefault(),F=M?ox(g,M):new FormData(g),$m(u,{pending:!0,data:F,method:g.method,action:b},b,F))},currentTarget:g}]})}}for(var gg=0;gg<Jp.length;gg++){var yg=Jp[gg],uD=yg.toLowerCase(),fD=yg[0].toUpperCase()+yg.slice(1);Di(uD,"on"+fD)}Di(jb,"onAnimationEnd"),Di(Bb,"onAnimationIteration"),Di(Pb,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(EM,"onTransitionRun"),Di(kM,"onTransitionStart"),Di(OM,"onTransitionCancel"),Di(qb,"onTransitionEnd"),To("onMouseEnter",["mouseout","mouseover"]),To("onMouseLeave",["mouseout","mouseover"]),To("onPointerEnter",["pointerout","pointerover"]),To("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function ax(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var b=void 0;if(a)for(var M=h.length-1;0<=M;M--){var $=h[M],F=$.instance,ie=$.currentTarget;if($=$.listener,F!==b&&g.isPropagationStopped())break e;b=$,g.currentTarget=ie;try{b(g)}catch(he){fu(he)}g.currentTarget=null,b=F}else for(M=0;M<h.length;M++){if($=h[M],F=$.instance,ie=$.currentTarget,$=$.listener,F!==b&&g.isPropagationStopped())break e;b=$,g.currentTarget=ie;try{b(g)}catch(he){fu(he)}g.currentTarget=null,b=F}}}}function Ve(s,a){var u=a[Mp];u===void 0&&(u=a[Mp]=new Set);var h=s+"__bubble";u.has(h)||(lx(a,s,2,!1),u.add(h))}function vg(s,a,u){var h=0;a&&(h|=4),lx(u,s,h,a)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function bg(s){if(!s[Qu]){s[Qu]=!0,tb.forEach(function(u){u!=="selectionchange"&&(hD.has(u)||vg(u,!1,s),vg(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Qu]||(a[Qu]=!0,vg("selectionchange",!1,a))}}function lx(s,a,u,h){switch(jx(a)){case 2:var g=qD;break;case 8:g=HD;break;default:g=zg}u=g.bind(null,a,u,s),g=void 0,!Pp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function Sg(s,a,u,h,g){var b=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var M=h.tag;if(M===3||M===4){var $=h.stateNode.containerInfo;if($===g)break;if(M===4)for(M=h.return;M!==null;){var F=M.tag;if((F===3||F===4)&&M.stateNode.containerInfo===g)return;M=M.return}for(;$!==null;){if(M=_o($),M===null)return;if(F=M.tag,F===5||F===6||F===26||F===27){h=b=M;continue e}$=$.parentNode}}h=h.return}db(function(){var ie=b,he=jp(u),pe=[];e:{var se=Hb.get(s);if(se!==void 0){var ae=lu,Ae=s;switch(s){case"keypress":if(ou(u)===0)break e;case"keydown":case"keyup":ae=sM;break;case"focusin":Ae="focus",ae=Up;break;case"focusout":Ae="blur",ae=Up;break;case"beforeblur":case"afterblur":ae=Up;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=KO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=lM;break;case jb:case Bb:case Pb:ae=XO;break;case qb:ae=uM;break;case"scroll":case"scrollend":ae=FO;break;case"wheel":ae=hM;break;case"copy":case"cut":case"paste":ae=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=vb;break;case"toggle":case"beforetoggle":ae=pM}var Re=(a&4)!==0,ft=!Re&&(s==="scroll"||s==="scrollend"),te=Re?se!==null?se+"Capture":null:se;Re=[];for(var Q=ie,ne;Q!==null;){var de=Q;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||te===null||(de=Fa(Q,te),de!=null&&Re.push(Cl(Q,de,ne))),ft)break;Q=Q.return}0<Re.length&&(se=new ae(se,Ae,null,u,he),pe.push({event:se,listeners:Re}))}}if((a&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",se&&u!==Lp&&(Ae=u.relatedTarget||u.fromElement)&&(_o(Ae)||Ae[wo]))break e;if((ae||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(Ae=u.relatedTarget||u.toElement,ae=ie,Ae=Ae?_o(Ae):null,Ae!==null&&(ft=o(Ae),Re=Ae.tag,Ae!==ft||Re!==5&&Re!==27&&Re!==6)&&(Ae=null)):(ae=null,Ae=ie),ae!==Ae)){if(Re=gb,de="onMouseLeave",te="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Re=vb,de="onPointerLeave",te="onPointerEnter",Q="pointer"),ft=ae==null?se:Va(ae),ne=Ae==null?se:Va(Ae),se=new Re(de,Q+"leave",ae,u,he),se.target=ft,se.relatedTarget=ne,de=null,_o(he)===ie&&(Re=new Re(te,Q+"enter",Ae,u,he),Re.target=ne,Re.relatedTarget=ft,de=Re),ft=de,ae&&Ae)t:{for(Re=dD,te=ae,Q=Ae,ne=0,de=te;de;de=Re(de))ne++;de=0;for(var ke=Q;ke;ke=Re(ke))de++;for(;0<ne-de;)te=Re(te),ne--;for(;0<de-ne;)Q=Re(Q),de--;for(;ne--;){if(te===Q||Q!==null&&te===Q.alternate){Re=te;break t}te=Re(te),Q=Re(Q)}Re=null}else Re=null;ae!==null&&cx(pe,se,ae,Re,!1),Ae!==null&&ft!==null&&cx(pe,ft,Ae,Re,!0)}}e:{if(se=ie?Va(ie):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var Qe=Tb;else if(Cb(se))if(Eb)Qe=CM;else{Qe=wM;var Te=xM}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ie&&$p(ie.elementType)&&(Qe=Tb):Qe=_M;if(Qe&&(Qe=Qe(s,ie))){Ab(pe,Qe,u,he);break e}Te&&Te(s,se,ie),s==="focusout"&&ie&&se.type==="number"&&ie.memoizedProps.value!=null&&zp(se,"number",se.value)}switch(Te=ie?Va(ie):window,s){case"focusin":(Cb(Te)||Te.contentEditable==="true")&&(Ro=Te,Gp=ie,Za=null);break;case"focusout":Za=Gp=Ro=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,$b(pe,u,he);break;case"selectionchange":if(TM)break;case"keydown":case"keyup":$b(pe,u,he)}var qe;if(Fp)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Do?wb(s,u)&&(We="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(We="onCompositionStart");We&&(bb&&u.locale!=="ko"&&(Do||We!=="onCompositionStart"?We==="onCompositionEnd"&&Do&&(qe=pb()):(Wr=he,qp="value"in Wr?Wr.value:Wr.textContent,Do=!0)),Te=Ju(ie,We),0<Te.length&&(We=new yb(We,s,null,u,he),pe.push({event:We,listeners:Te}),qe?We.data=qe:(qe=_b(u),qe!==null&&(We.data=qe)))),(qe=gM?yM(s,u):vM(s,u))&&(We=Ju(ie,"onBeforeInput"),0<We.length&&(Te=new yb("onBeforeInput","beforeinput",null,u,he),pe.push({event:Te,listeners:We}),Te.data=qe)),cD(pe,s,ie,u,he)}ax(pe,a)})}function Cl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ju(s,a){for(var u=a+"Capture",h=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Fa(s,u),g!=null&&h.unshift(Cl(s,g,b)),g=Fa(s,a),g!=null&&h.push(Cl(s,g,b))),s.tag===3)return h;s=s.return}return[]}function dD(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cx(s,a,u,h,g){for(var b=a._reactName,M=[];u!==null&&u!==h;){var $=u,F=$.alternate,ie=$.stateNode;if($=$.tag,F!==null&&F===h)break;$!==5&&$!==26&&$!==27||ie===null||(F=ie,g?(ie=Fa(u,b),ie!=null&&M.unshift(Cl(u,ie,F))):g||(ie=Fa(u,b),ie!=null&&M.push(Cl(u,ie,F)))),u=u.return}M.length!==0&&s.push({event:a,listeners:M})}var pD=/\r\n?/g,mD=/\u0000|\uFFFD/g;function ux(s){return(typeof s=="string"?s:""+s).replace(pD,`
`).replace(mD,"")}function fx(s,a){return a=ux(a),ux(s)===a}function ut(s,a,u,h,g,b){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||ko(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&ko(s,""+h);break;case"className":nu(s,"class",h);break;case"tabIndex":nu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":nu(s,u,h);break;case"style":fb(s,h,b);break;case"data":if(a!=="object"){nu(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=ru(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&ut(s,a,"name",g.name,g,null),ut(s,a,"formEncType",g.formEncType,g,null),ut(s,a,"formMethod",g.formMethod,g,null),ut(s,a,"formTarget",g.formTarget,g,null)):(ut(s,a,"encType",g.encType,g,null),ut(s,a,"method",g.method,g,null),ut(s,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=ru(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=mr);break;case"onScroll":h!=null&&Ve("scroll",s);break;case"onScrollEnd":h!=null&&Ve("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=ru(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Ve("beforetoggle",s),Ve("toggle",s),tu(s,"popover",h);break;case"xlinkActuate":pr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":pr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":pr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":pr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":pr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":pr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":pr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":pr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":pr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":tu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=UO.get(u)||u,tu(s,u,h))}}function xg(s,a,u,h,g,b){switch(u){case"style":fb(s,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?ko(s,h):(typeof h=="number"||typeof h=="bigint")&&ko(s,""+h);break;case"onScroll":h!=null&&Ve("scroll",s);break;case"onScrollEnd":h!=null&&Ve("scrollend",s);break;case"onClick":h!=null&&(s.onclick=mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),b=s[Rn]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(a,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,g);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):tu(s,u,h)}}}function sn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",s),Ve("load",s);var h=!1,g=!1,b;for(b in u)if(u.hasOwnProperty(b)){var M=u[b];if(M!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(s,a,b,M,u,null)}}g&&ut(s,a,"srcSet",u.srcSet,u,null),h&&ut(s,a,"src",u.src,u,null);return;case"input":Ve("invalid",s);var $=b=M=g=null,F=null,ie=null;for(h in u)if(u.hasOwnProperty(h)){var he=u[h];if(he!=null)switch(h){case"name":g=he;break;case"type":M=he;break;case"checked":F=he;break;case"defaultChecked":ie=he;break;case"value":b=he;break;case"defaultValue":$=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,a));break;default:ut(s,a,h,he,u,null)}}ab(s,b,$,F,ie,M,g,!1);return;case"select":Ve("invalid",s),h=M=b=null;for(g in u)if(u.hasOwnProperty(g)&&($=u[g],$!=null))switch(g){case"value":b=$;break;case"defaultValue":M=$;break;case"multiple":h=$;default:ut(s,a,g,$,u,null)}a=b,u=M,s.multiple=!!h,a!=null?Eo(s,!!h,a,!1):u!=null&&Eo(s,!!h,u,!0);return;case"textarea":Ve("invalid",s),b=g=h=null;for(M in u)if(u.hasOwnProperty(M)&&($=u[M],$!=null))switch(M){case"value":h=$;break;case"defaultValue":g=$;break;case"children":b=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:ut(s,a,M,$,u,null)}cb(s,h,g,b);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(h=u[F],h!=null))switch(F){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ut(s,a,F,h,u,null)}return;case"dialog":Ve("beforetoggle",s),Ve("toggle",s),Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":Ve("load",s);break;case"video":case"audio":for(h=0;h<_l.length;h++)Ve(_l[h],s);break;case"image":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"embed":case"source":case"link":Ve("error",s),Ve("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in u)if(u.hasOwnProperty(ie)&&(h=u[ie],h!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(s,a,ie,h,u,null)}return;default:if($p(a)){for(he in u)u.hasOwnProperty(he)&&(h=u[he],h!==void 0&&xg(s,a,he,h,u,void 0));return}}for($ in u)u.hasOwnProperty($)&&(h=u[$],h!=null&&ut(s,a,$,h,u,null))}function gD(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,M=null,$=null,F=null,ie=null,he=null;for(ae in u){var pe=u[ae];if(u.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=pe;default:h.hasOwnProperty(ae)||ut(s,a,ae,null,h,pe)}}for(var se in h){var ae=h[se];if(pe=u[se],h.hasOwnProperty(se)&&(ae!=null||pe!=null))switch(se){case"type":b=ae;break;case"name":g=ae;break;case"checked":ie=ae;break;case"defaultChecked":he=ae;break;case"value":M=ae;break;case"defaultValue":$=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:ae!==pe&&ut(s,a,se,ae,h,pe)}}Np(s,M,$,F,ie,he,b,g);return;case"select":ae=M=$=se=null;for(b in u)if(F=u[b],u.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":ae=F;default:h.hasOwnProperty(b)||ut(s,a,b,null,h,F)}for(g in h)if(b=h[g],F=u[g],h.hasOwnProperty(g)&&(b!=null||F!=null))switch(g){case"value":se=b;break;case"defaultValue":$=b;break;case"multiple":M=b;default:b!==F&&ut(s,a,g,b,h,F)}a=$,u=M,h=ae,se!=null?Eo(s,!!u,se,!1):!!h!=!!u&&(a!=null?Eo(s,!!u,a,!0):Eo(s,!!u,u?[]:"",!1));return;case"textarea":ae=se=null;for($ in u)if(g=u[$],u.hasOwnProperty($)&&g!=null&&!h.hasOwnProperty($))switch($){case"value":break;case"children":break;default:ut(s,a,$,null,h,g)}for(M in h)if(g=h[M],b=u[M],h.hasOwnProperty(M)&&(g!=null||b!=null))switch(M){case"value":se=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&ut(s,a,M,g,h,b)}lb(s,se,ae);return;case"option":for(var Ae in u)if(se=u[Ae],u.hasOwnProperty(Ae)&&se!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:ut(s,a,Ae,null,h,se)}for(F in h)if(se=h[F],ae=u[F],h.hasOwnProperty(F)&&se!==ae&&(se!=null||ae!=null))switch(F){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:ut(s,a,F,se,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in u)se=u[Re],u.hasOwnProperty(Re)&&se!=null&&!h.hasOwnProperty(Re)&&ut(s,a,Re,null,h,se);for(ie in h)if(se=h[ie],ae=u[ie],h.hasOwnProperty(ie)&&se!==ae&&(se!=null||ae!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:ut(s,a,ie,se,h,ae)}return;default:if($p(a)){for(var ft in u)se=u[ft],u.hasOwnProperty(ft)&&se!==void 0&&!h.hasOwnProperty(ft)&&xg(s,a,ft,void 0,h,se);for(he in h)se=h[he],ae=u[he],!h.hasOwnProperty(he)||se===ae||se===void 0&&ae===void 0||xg(s,a,he,se,h,ae);return}}for(var te in u)se=u[te],u.hasOwnProperty(te)&&se!=null&&!h.hasOwnProperty(te)&&ut(s,a,te,null,h,se);for(pe in h)se=h[pe],ae=u[pe],!h.hasOwnProperty(pe)||se===ae||se==null&&ae==null||ut(s,a,pe,se,h,ae)}function hx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yD(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var g=u[h],b=g.transferSize,M=g.initiatorType,$=g.duration;if(b&&$&&hx(M)){for(M=0,$=g.responseEnd,h+=1;h<u.length;h++){var F=u[h],ie=F.startTime;if(ie>$)break;var he=F.transferSize,pe=F.initiatorType;he&&hx(pe)&&(F=F.responseEnd,M+=he*(F<$?1:($-ie)/(F-ie)))}if(--h,a+=8*(b+M)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var wg=null,_g=null;function Zu(s){return s.nodeType===9?s:s.ownerDocument}function dx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function px(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Cg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ag=null;function vD(){var s=window.event;return s&&s.type==="popstate"?s===Ag?!1:(Ag=s,!0):(Ag=null,!1)}var mx=typeof setTimeout=="function"?setTimeout:void 0,bD=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,SD=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(s){return gx.resolve(null).then(s).catch(xD)}:mx;function xD(s){setTimeout(function(){throw s})}function cs(s){return s==="head"}function yx(s,a){var u=a,h=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(g),sa(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Al(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Al(u);for(var b=u.firstChild;b;){var M=b.nextSibling,$=b.nodeName;b[Ua]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=M}}else u==="body"&&Al(s.ownerDocument.body);u=g}while(u);sa(a)}function vx(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function Tg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Tg(u),Dp(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function wD(s,a,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ua])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=bi(s.nextSibling),s===null)break}return null}function _D(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=bi(s.nextSibling),s===null))return null;return s}function bx(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=bi(s.nextSibling),s===null))return null;return s}function Eg(s){return s.data==="$?"||s.data==="$~"}function kg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function CD(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function bi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Og=null;function Sx(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return bi(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function xx(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function wx(s,a,u){switch(a=Zu(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Al(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Dp(s)}var Si=new Map,_x=new Set;function ef(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Dr=U.d;U.d={f:AD,r:TD,D:ED,C:kD,L:OD,m:MD,X:RD,S:DD,M:ND};function AD(){var s=Dr.f(),a=Fu();return s||a}function TD(s){var a=Co(s);a!==null&&a.tag===5&&a.type==="form"?q1(a):Dr.r(s)}var na=typeof document>"u"?null:document;function Cx(s,a,u){var h=na;if(h&&typeof a=="string"&&a){var g=hi(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),_x.has(g)||(_x.add(g),s={rel:s,crossOrigin:u,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),sn(a,"link",s),Yt(a),h.head.appendChild(a)))}}function ED(s){Dr.D(s),Cx("dns-prefetch",s,null)}function kD(s,a){Dr.C(s,a),Cx("preconnect",s,a)}function OD(s,a,u){Dr.L(s,a,u);var h=na;if(h&&s&&a){var g='link[rel="preload"][as="'+hi(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+hi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+hi(u.imageSizes)+'"]')):g+='[href="'+hi(s)+'"]';var b=g;switch(a){case"style":b=ia(s);break;case"script":b=ra(s)}Si.has(b)||(s=m({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),Si.set(b,s),h.querySelector(g)!==null||a==="style"&&h.querySelector(Tl(b))||a==="script"&&h.querySelector(El(b))||(a=h.createElement("link"),sn(a,"link",s),Yt(a),h.head.appendChild(a)))}}function MD(s,a){Dr.m(s,a);var u=na;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+hi(h)+'"][href="'+hi(s)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ra(s)}if(!Si.has(b)&&(s=m({rel:"modulepreload",href:s},a),Si.set(b,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(El(b)))return}h=u.createElement("link"),sn(h,"link",s),Yt(h),u.head.appendChild(h)}}}function DD(s,a,u){Dr.S(s,a,u);var h=na;if(h&&s){var g=Ao(h).hoistableStyles,b=ia(s);a=a||"default";var M=g.get(b);if(!M){var $={loading:0,preload:null};if(M=h.querySelector(Tl(b)))$.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},u),(u=Si.get(b))&&Mg(s,u);var F=M=h.createElement("link");Yt(F),sn(F,"link",s),F._p=new Promise(function(ie,he){F.onload=ie,F.onerror=he}),F.addEventListener("load",function(){$.loading|=1}),F.addEventListener("error",function(){$.loading|=2}),$.loading|=4,tf(M,a,h)}M={type:"stylesheet",instance:M,count:1,state:$},g.set(b,M)}}}function RD(s,a){Dr.X(s,a);var u=na;if(u&&s){var h=Ao(u).hoistableScripts,g=ra(s),b=h.get(g);b||(b=u.querySelector(El(g)),b||(s=m({src:s,async:!0},a),(a=Si.get(g))&&Dg(s,a),b=u.createElement("script"),Yt(b),sn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function ND(s,a){Dr.M(s,a);var u=na;if(u&&s){var h=Ao(u).hoistableScripts,g=ra(s),b=h.get(g);b||(b=u.querySelector(El(g)),b||(s=m({src:s,async:!0,type:"module"},a),(a=Si.get(g))&&Dg(s,a),b=u.createElement("script"),Yt(b),sn(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function Ax(s,a,u,h){var g=(g=I.current)?ef(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ia(u.href),u=Ao(g).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ia(u.href);var b=Ao(g).hoistableStyles,M=b.get(s);if(M||(g=g.ownerDocument||g,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,M),(b=g.querySelector(Tl(s)))&&!b._p&&(M.instance=b,M.state.loading=5),Si.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Si.set(s,u),b||zD(g,s,u,M.state))),a&&h===null)throw Error(i(528,""));return M}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ra(u),u=Ao(g).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ia(s){return'href="'+hi(s)+'"'}function Tl(s){return'link[rel="stylesheet"]['+s+"]"}function Tx(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function zD(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),sn(a,"link",u),Yt(a),s.head.appendChild(a))}function ra(s){return'[src="'+hi(s)+'"]'}function El(s){return"script[async]"+s}function Ex(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+hi(u.href)+'"]');if(h)return a.instance=h,Yt(h),h;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Yt(h),sn(h,"style",g),tf(h,u.precedence,s),a.instance=h;case"stylesheet":g=ia(u.href);var b=s.querySelector(Tl(g));if(b)return a.state.loading|=4,a.instance=b,Yt(b),b;h=Tx(u),(g=Si.get(g))&&Mg(h,g),b=(s.ownerDocument||s).createElement("link"),Yt(b);var M=b;return M._p=new Promise(function($,F){M.onload=$,M.onerror=F}),sn(b,"link",h),a.state.loading|=4,tf(b,u.precedence,s),a.instance=b;case"script":return b=ra(u.src),(g=s.querySelector(El(b)))?(a.instance=g,Yt(g),g):(h=u,(g=Si.get(b))&&(h=m({},u),Dg(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),Yt(g),sn(g,"link",h),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,tf(h,u.precedence,s));return a.instance}function tf(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,M=0;M<h.length;M++){var $=h[M];if($.dataset.precedence===a)b=$;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Mg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Dg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var nf=null;function kx(s,a,u){if(nf===null){var h=new Map,g=nf=new Map;g.set(u,h)}else g=nf,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var b=u[g];if(!(b[Ua]||b[en]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(a)||"";M=s+M;var $=h.get(M);$?$.push(b):h.set(M,[b])}}return h}function Ox(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function $D(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Mx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function LD(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=ia(h.href),b=a.querySelector(Tl(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=rf.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=b,Yt(b);return}b=a.ownerDocument||a,h=Tx(h),(g=Si.get(g))&&Mg(h,g),b=b.createElement("link"),Yt(b);var M=b;M._p=new Promise(function($,F){M.onload=$,M.onerror=F}),sn(b,"link",h),u.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=rf.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var Rg=0;function jD(s,a){return s.stylesheets&&s.count===0&&of(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&of(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&Rg===0&&(Rg=62500*yD());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&of(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>Rg?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)of(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var sf=null;function of(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,sf=new Map,a.forEach(BD,s),sf=null,rf.call(s))}function BD(s,a){if(!(a.state.loading&4)){var u=sf.get(s);if(u)var h=u.get(null);else{u=new Map,sf.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var M=g[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),h=M)}h&&u.set(null,h)}g=a.instance,M=g.getAttribute("data-precedence"),b=u.get(M)||h,b===h&&u.set(null,g),u.set(M,g),this.count++,h=rf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var kl={$$typeof:C,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function PD(s,a,u,h,g,b,M,$,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Dx(s,a,u,h,g,b,M,$,F,ie,he,pe){return s=new PD(s,a,u,M,F,ie,he,pe,$),a=1,b===!0&&(a|=24),b=Yn(3,null,null,a),s.current=b,b.stateNode=s,a=fm(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:a},mm(b),s}function Rx(s){return s?(s=$o,s):$o}function Nx(s,a,u,h,g,b){g=Rx(g),h.context===null?h.context=g:h.pendingContext=g,h=Jr(a),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Zr(s,h,a),u!==null&&(Bn(u,s,a),ol(u,s,a))}function zx(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Ng(s,a){zx(s,a),(s=s.alternate)&&zx(s,a)}function $x(s){if(s.tag===13||s.tag===31){var a=qs(s,67108864);a!==null&&Bn(a,s,67108864),Ng(s,67108864)}}function Lx(s){if(s.tag===13||s.tag===31){var a=Zn();a=hr(a);var u=qs(s,a);u!==null&&Bn(u,s,a),Ng(s,a)}}var af=!0;function qD(s,a,u,h){var g=K.T;K.T=null;var b=U.p;try{U.p=2,zg(s,a,u,h)}finally{U.p=b,K.T=g}}function HD(s,a,u,h){var g=K.T;K.T=null;var b=U.p;try{U.p=8,zg(s,a,u,h)}finally{U.p=b,K.T=g}}function zg(s,a,u,h){if(af){var g=$g(h);if(g===null)Sg(s,a,h,lf,u),Bx(s,h);else if(UD(g,s,a,u,h))h.stopPropagation();else if(Bx(s,h),a&4&&-1<ID.indexOf(s)){for(;g!==null;){var b=Co(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=At(b.pendingLanes);if(M!==0){var $=b;for($.pendingLanes|=2,$.entangledLanes|=2;M;){var F=1<<31-hn(M);$.entanglements[1]|=F,M&=~F}Xi(b),(et&6)===0&&(Uu=ht()+500,wl(0))}}break;case 31:case 13:$=qs(b,2),$!==null&&Bn($,b,2),Fu(),Ng(b,2)}if(b=$g(h),b===null&&Sg(s,a,h,lf,u),b===g)break;g=b}g!==null&&h.stopPropagation()}else Sg(s,a,h,null,u)}}function $g(s){return s=jp(s),Lg(s)}var lf=null;function Lg(s){if(lf=null,s=_o(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return lf=s,null}function jx(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Zt:return 2;case Dt:return 8;case Bt:case ze:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var jg=!1,us=null,fs=null,hs=null,Ol=new Map,Ml=new Map,ds=[],ID="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bx(s,a){switch(s){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Ol.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(a.pointerId)}}function Dl(s,a,u,h,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},a!==null&&(a=Co(a),a!==null&&$x(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function UD(s,a,u,h,g){switch(a){case"focusin":return us=Dl(us,s,a,u,h,g),!0;case"dragenter":return fs=Dl(fs,s,a,u,h,g),!0;case"mouseover":return hs=Dl(hs,s,a,u,h,g),!0;case"pointerover":var b=g.pointerId;return Ol.set(b,Dl(Ol.get(b)||null,s,a,u,h,g)),!0;case"gotpointercapture":return b=g.pointerId,Ml.set(b,Dl(Ml.get(b)||null,s,a,u,h,g)),!0}return!1}function Px(s){var a=_o(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,Fr(s.priority,function(){Lx(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,Fr(s.priority,function(){Lx(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function cf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=$g(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Lp=h,u.target.dispatchEvent(h),Lp=null}else return a=Co(u),a!==null&&$x(a),s.blockedOn=u,!1;a.shift()}return!0}function qx(s,a,u){cf(s)&&u.delete(a)}function VD(){jg=!1,us!==null&&cf(us)&&(us=null),fs!==null&&cf(fs)&&(fs=null),hs!==null&&cf(hs)&&(hs=null),Ol.forEach(qx),Ml.forEach(qx)}function uf(s,a){s.blockedOn===a&&(s.blockedOn=null,jg||(jg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VD)))}var ff=null;function Hx(s){ff!==s&&(ff=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ff===s&&(ff=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],g=s[a+2];if(typeof h!="function"){if(Lg(h||u)===null)continue;break}var b=Co(u);b!==null&&(s.splice(a,3),a-=3,$m(b,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function sa(s){function a(F){return uf(F,s)}us!==null&&uf(us,s),fs!==null&&uf(fs,s),hs!==null&&uf(hs,s),Ol.forEach(a),Ml.forEach(a);for(var u=0;u<ds.length;u++){var h=ds[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<ds.length&&(u=ds[0],u.blockedOn===null);)Px(u),u.blockedOn===null&&ds.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],b=u[h+1],M=g[Rn]||null;if(typeof b=="function")M||Hx(u);else if(M){var $=null;if(b&&b.hasAttribute("formAction")){if(g=b,M=b[Rn]||null)$=M.formAction;else if(Lg(g)!==null)continue}else $=M.action;typeof $=="function"?u[h+1]=$:(u.splice(h,3),h-=3),Hx(u)}}}function Ix(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return g=M})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Bg(s){this._internalRoot=s}hf.prototype.render=Bg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Zn();Nx(u,h,s,a,null,null)},hf.prototype.unmount=Bg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Nx(s.current,2,null,s,null,null),Fu(),a[wo]=null}};function hf(s){this._internalRoot=s}hf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Mi();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ds.length&&a!==0&&a<ds[u].priority;u++);ds.splice(u,0,s),u===0&&Px(s)}};var Ux=e.version;if(Ux!=="19.2.1")throw Error(i(527,Ux,"19.2.1"));U.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var FD={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{$s=df.inject(FD),bn=df}catch{}}return Nl.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",g=X1,b=Q1,M=J1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError)),a=Dx(s,1,!1,null,null,u,h,null,g,b,M,Ix),s[wo]=a.current,bg(s),new Bg(a)},Nl.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,g="",b=X1,M=Q1,$=J1,F=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&($=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),a=Dx(s,1,!0,a,u??null,h,g,F,b,M,$,Ix),a.context=Rx(null),u=a.current,h=Zn(),h=hr(h),g=Jr(h),g.callback=null,Zr(u,g,h),u=h,a.current.lanes=u,li(a,u),Xi(a),s[wo]=a.current,bg(s),new hf(a)},Nl.version="19.2.1",Nl}var Zx;function tR(){if(Zx)return Hg.exports;Zx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hg.exports=eR(),Hg.exports}var nR=tR();const iR=Nc(nR);var Fg={exports:{}},Wg={};var ew;function rR(){if(ew)return Wg;ew=1;var n=$a().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Wg.c=function(e){return n.H.useMemoCache(e)},Wg}var tw;function sR(){return tw||(tw=1,Fg.exports=rR()),Fg.exports}var yn=sR();const oR=n=>{const e=yn.c(2),{children:t}=n;let i;return e[0]!==t?(i=H.jsx("div",{className:"flex justify-center min-h-screen bg-gray-100",children:t}),e[0]=t,e[1]=i):i=e[1],i};var zl={exports:{}},Kg={},Yg={exports:{}},Gg,nw;function aR(){if(nw)return Gg;nw=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Gg=n,Gg}var Xg,iw;function lR(){if(iw)return Xg;iw=1;var n=aR();function e(){}function t(){}return t.resetWarningCache=e,Xg=function(){function i(l,c,f,d,p,m){if(m!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Xg}var rw;function SA(){return rw||(rw=1,Yg.exports=lR()()),Yg.exports}function xA(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=xA(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function sw(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=xA(n))&&(i&&(i+=" "),i+=e);return i}const cR=Object.freeze(Object.defineProperty({__proto__:null,clsx:sw,default:sw},Symbol.toStringTag,{value:"Module"})),uR=KD(cR);var kt={},ms={},ow;function Kd(){if(ow)return ms;ow=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.dontSetMe=r,ms.findInArray=n,ms.int=i,ms.isFunction=e,ms.isNum=t;function n(o,l){for(let c=0,f=o.length;c<f;c++)if(l.apply(l,[o[c],c,o]))return o[c]}function e(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function t(o){return typeof o=="number"&&!isNaN(o)}function i(o){return parseInt(o,10)}function r(o,l,c){if(o[l])return new Error("Invalid prop ".concat(l," passed to ").concat(c," - do not set this, set it on the child."))}return ms}var gs={},aw;function fR(){if(aw)return gs;aw=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.browserPrefixToKey=t,gs.browserPrefixToStyle=i,gs.default=void 0,gs.getPrefix=e;const n=["Moz","Webkit","O","ms"];function e(){var o;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const c=(o=window.document)===null||o===void 0||(o=o.documentElement)===null||o===void 0?void 0:o.style;if(!c||l in c)return"";for(let f=0;f<n.length;f++)if(t(l,n[f])in c)return n[f];return""}function t(o,l){return l?"".concat(l).concat(r(o)):o}function i(o,l){return l?"-".concat(l.toLowerCase(),"-").concat(o):o}function r(o){let l="",c=!0;for(let f=0;f<o.length;f++)c?(l+=o[f].toUpperCase(),c=!1):o[f]==="-"?c=!0:l+=o[f];return l}return gs.default=e(),gs}var lw;function lv(){if(lw)return kt;lw=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.addClassName=T,kt.addEvent=c,kt.addUserSelectStyles=C,kt.createCSSTransform=x,kt.createSVGTransform=_,kt.getTouch=A,kt.getTouchIdentifier=w,kt.getTranslation=S,kt.innerHeight=m,kt.innerWidth=y,kt.matchesSelector=o,kt.matchesSelectorAndParentsTo=l,kt.offsetXYFromParent=v,kt.outerHeight=d,kt.outerWidth=p,kt.removeClassName=O,kt.removeEvent=f,kt.removeUserSelectStyles=k;var n=Kd(),e=i(fR());function t(E){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(t=function(V){return V?j:R})(E)}function i(E,R){if(E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var j=t(R);if(j&&j.has(E))return j.get(E);var V={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in E)if(q!=="default"&&Object.prototype.hasOwnProperty.call(E,q)){var X=P?Object.getOwnPropertyDescriptor(E,q):null;X&&(X.get||X.set)?Object.defineProperty(V,q,X):V[q]=E[q]}return V.default=E,j&&j.set(E,V),V}let r="";function o(E,R){return r||(r=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(j){return(0,n.isFunction)(E[j])})),(0,n.isFunction)(E[r])?E[r](R):!1}function l(E,R,j){let V=E;do{if(o(V,R))return!0;if(V===j)return!1;V=V.parentNode}while(V);return!1}function c(E,R,j,V){if(!E)return;const P={capture:!0,...V};E.addEventListener?E.addEventListener(R,j,P):E.attachEvent?E.attachEvent("on"+R,j):E["on"+R]=j}function f(E,R,j,V){if(!E)return;const P={capture:!0,...V};E.removeEventListener?E.removeEventListener(R,j,P):E.detachEvent?E.detachEvent("on"+R,j):E["on"+R]=null}function d(E){let R=E.clientHeight;const j=E.ownerDocument.defaultView.getComputedStyle(E);return R+=(0,n.int)(j.borderTopWidth),R+=(0,n.int)(j.borderBottomWidth),R}function p(E){let R=E.clientWidth;const j=E.ownerDocument.defaultView.getComputedStyle(E);return R+=(0,n.int)(j.borderLeftWidth),R+=(0,n.int)(j.borderRightWidth),R}function m(E){let R=E.clientHeight;const j=E.ownerDocument.defaultView.getComputedStyle(E);return R-=(0,n.int)(j.paddingTop),R-=(0,n.int)(j.paddingBottom),R}function y(E){let R=E.clientWidth;const j=E.ownerDocument.defaultView.getComputedStyle(E);return R-=(0,n.int)(j.paddingLeft),R-=(0,n.int)(j.paddingRight),R}function v(E,R,j){const P=R===R.ownerDocument.body?{left:0,top:0}:R.getBoundingClientRect(),q=(E.clientX+R.scrollLeft-P.left)/j,X=(E.clientY+R.scrollTop-P.top)/j;return{x:q,y:X}}function x(E,R){const j=S(E,R,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:j}}function _(E,R){return S(E,R,"")}function S(E,R,j){let{x:V,y:P}=E,q="translate(".concat(V).concat(j,",").concat(P).concat(j,")");if(R){const X="".concat(typeof R.x=="string"?R.x:R.x+j),J="".concat(typeof R.y=="string"?R.y:R.y+j);q="translate(".concat(X,", ").concat(J,")")+q}return q}function A(E,R){return E.targetTouches&&(0,n.findInArray)(E.targetTouches,j=>R===j.identifier)||E.changedTouches&&(0,n.findInArray)(E.changedTouches,j=>R===j.identifier)}function w(E){if(E.targetTouches&&E.targetTouches[0])return E.targetTouches[0].identifier;if(E.changedTouches&&E.changedTouches[0])return E.changedTouches[0].identifier}function C(E){if(!E)return;let R=E.getElementById("react-draggable-style-el");R||(R=E.createElement("style"),R.type="text/css",R.id="react-draggable-style-el",R.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,R.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,E.getElementsByTagName("head")[0].appendChild(R)),E.body&&T(E.body,"react-draggable-transparent-selection")}function k(E){if(E)try{if(E.body&&O(E.body,"react-draggable-transparent-selection"),E.selection)E.selection.empty();else{const R=(E.defaultView||window).getSelection();R&&R.type!=="Caret"&&R.removeAllRanges()}}catch{}}function T(E,R){E.classList?E.classList.add(R):E.className.match(new RegExp("(?:^|\\s)".concat(R,"(?!\\S)")))||(E.className+=" ".concat(R))}function O(E,R){E.classList?E.classList.remove(R):E.className=E.className.replace(new RegExp("(?:^|\\s)".concat(R,"(?!\\S)"),"g"),"")}return kt}var Qi={},cw;function wA(){if(cw)return Qi;cw=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.canDragX=r,Qi.canDragY=o,Qi.createCoreData=c,Qi.createDraggableData=f,Qi.getBoundPosition=t,Qi.getControlPosition=l,Qi.snapToGrid=i;var n=Kd(),e=lv();function t(m,y,v){if(!m.props.bounds)return[y,v];let{bounds:x}=m.props;x=typeof x=="string"?x:d(x);const _=p(m);if(typeof x=="string"){const{ownerDocument:S}=_,A=S.defaultView;let w;if(x==="parent"?w=_.parentNode:w=S.querySelector(x),!(w instanceof A.HTMLElement))throw new Error('Bounds selector "'+x+'" could not find an element.');const C=w,k=A.getComputedStyle(_),T=A.getComputedStyle(C);x={left:-_.offsetLeft+(0,n.int)(T.paddingLeft)+(0,n.int)(k.marginLeft),top:-_.offsetTop+(0,n.int)(T.paddingTop)+(0,n.int)(k.marginTop),right:(0,e.innerWidth)(C)-(0,e.outerWidth)(_)-_.offsetLeft+(0,n.int)(T.paddingRight)-(0,n.int)(k.marginRight),bottom:(0,e.innerHeight)(C)-(0,e.outerHeight)(_)-_.offsetTop+(0,n.int)(T.paddingBottom)-(0,n.int)(k.marginBottom)}}return(0,n.isNum)(x.right)&&(y=Math.min(y,x.right)),(0,n.isNum)(x.bottom)&&(v=Math.min(v,x.bottom)),(0,n.isNum)(x.left)&&(y=Math.max(y,x.left)),(0,n.isNum)(x.top)&&(v=Math.max(v,x.top)),[y,v]}function i(m,y,v){const x=Math.round(y/m[0])*m[0],_=Math.round(v/m[1])*m[1];return[x,_]}function r(m){return m.props.axis==="both"||m.props.axis==="x"}function o(m){return m.props.axis==="both"||m.props.axis==="y"}function l(m,y,v){const x=typeof y=="number"?(0,e.getTouch)(m,y):null;if(typeof y=="number"&&!x)return null;const _=p(v),S=v.props.offsetParent||_.offsetParent||_.ownerDocument.body;return(0,e.offsetXYFromParent)(x||m,S,v.props.scale)}function c(m,y,v){const x=!(0,n.isNum)(m.lastX),_=p(m);return x?{node:_,deltaX:0,deltaY:0,lastX:y,lastY:v,x:y,y:v}:{node:_,deltaX:y-m.lastX,deltaY:v-m.lastY,lastX:m.lastX,lastY:m.lastY,x:y,y:v}}function f(m,y){const v=m.props.scale;return{node:y.node,x:m.state.x+y.deltaX/v,y:m.state.y+y.deltaY/v,deltaX:y.deltaX/v,deltaY:y.deltaY/v,lastX:m.state.x,lastY:m.state.y}}function d(m){return{left:m.left,top:m.top,right:m.right,bottom:m.bottom}}function p(m){const y=m.findDOMNode();if(!y)throw new Error("<DraggableCore>: Unmounted during event!");return y}return Qi}var $l={},pf={},uw;function _A(){if(uw)return pf;uw=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.default=n;function n(){}return pf}var fw;function hR(){if(fw)return $l;fw=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.default=void 0;var n=d($a()),e=c(SA()),t=c(Wd()),i=lv(),r=wA(),o=Kd(),l=c(_A());function c(S){return S&&S.__esModule?S:{default:S}}function f(S){if(typeof WeakMap!="function")return null;var A=new WeakMap,w=new WeakMap;return(f=function(C){return C?w:A})(S)}function d(S,A){if(S&&S.__esModule)return S;if(S===null||typeof S!="object"&&typeof S!="function")return{default:S};var w=f(A);if(w&&w.has(S))return w.get(S);var C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in S)if(T!=="default"&&Object.prototype.hasOwnProperty.call(S,T)){var O=k?Object.getOwnPropertyDescriptor(S,T):null;O&&(O.get||O.set)?Object.defineProperty(C,T,O):C[T]=S[T]}return C.default=S,w&&w.set(S,C),C}function p(S,A,w){return A=m(A),A in S?Object.defineProperty(S,A,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[A]=w,S}function m(S){var A=y(S,"string");return typeof A=="symbol"?A:String(A)}function y(S,A){if(typeof S!="object"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var C=w.call(S,A);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(S)}const v={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let x=v.mouse,_=class extends n.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",A=>{if(this.props.onMouseDown(A),!this.props.allowAnyClick&&typeof A.button=="number"&&A.button!==0)return!1;const w=this.findDOMNode();if(!w||!w.ownerDocument||!w.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:C}=w;if(this.props.disabled||!(A.target instanceof C.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(A.target,this.props.handle,w)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(A.target,this.props.cancel,w))return;A.type==="touchstart"&&A.preventDefault();const k=(0,i.getTouchIdentifier)(A);this.touchIdentifier=k;const T=(0,r.getControlPosition)(A,k,this);if(T==null)return;const{x:O,y:E}=T,R=(0,r.createCoreData)(this,O,E);(0,l.default)("DraggableCore: handleDragStart: %j",R),(0,l.default)("calling",this.props.onStart),!(this.props.onStart(A,R)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(C),this.dragging=!0,this.lastX=O,this.lastY=E,(0,i.addEvent)(C,x.move,this.handleDrag),(0,i.addEvent)(C,x.stop,this.handleDragStop))}),p(this,"handleDrag",A=>{const w=(0,r.getControlPosition)(A,this.touchIdentifier,this);if(w==null)return;let{x:C,y:k}=w;if(Array.isArray(this.props.grid)){let E=C-this.lastX,R=k-this.lastY;if([E,R]=(0,r.snapToGrid)(this.props.grid,E,R),!E&&!R)return;C=this.lastX+E,k=this.lastY+R}const T=(0,r.createCoreData)(this,C,k);if((0,l.default)("DraggableCore: handleDrag: %j",T),this.props.onDrag(A,T)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const R=document.createEvent("MouseEvents");R.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(R)}return}this.lastX=C,this.lastY=k}),p(this,"handleDragStop",A=>{if(!this.dragging)return;const w=(0,r.getControlPosition)(A,this.touchIdentifier,this);if(w==null)return;let{x:C,y:k}=w;if(Array.isArray(this.props.grid)){let R=C-this.lastX||0,j=k-this.lastY||0;[R,j]=(0,r.snapToGrid)(this.props.grid,R,j),C=this.lastX+R,k=this.lastY+j}const T=(0,r.createCoreData)(this,C,k);if(this.props.onStop(A,T)===!1||this.mounted===!1)return!1;const E=this.findDOMNode();E&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(E.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",T),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,E&&((0,l.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(E.ownerDocument,x.move,this.handleDrag),(0,i.removeEvent)(E.ownerDocument,x.stop,this.handleDragStop))}),p(this,"onMouseDown",A=>(x=v.mouse,this.handleDragStart(A))),p(this,"onMouseUp",A=>(x=v.mouse,this.handleDragStop(A))),p(this,"onTouchStart",A=>(x=v.touch,this.handleDragStart(A))),p(this,"onTouchEnd",A=>(x=v.touch,this.handleDragStop(A)))}componentDidMount(){this.mounted=!0;const A=this.findDOMNode();A&&(0,i.addEvent)(A,v.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const A=this.findDOMNode();if(A){const{ownerDocument:w}=A;(0,i.removeEvent)(w,v.mouse.move,this.handleDrag),(0,i.removeEvent)(w,v.touch.move,this.handleDrag),(0,i.removeEvent)(w,v.mouse.stop,this.handleDragStop),(0,i.removeEvent)(w,v.touch.stop,this.handleDragStop),(0,i.removeEvent)(A,v.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(w)}}findDOMNode(){var A,w;return(A=this.props)!==null&&A!==void 0&&A.nodeRef?(w=this.props)===null||w===void 0||(w=w.nodeRef)===null||w===void 0?void 0:w.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return $l.default=_,p(_,"displayName","DraggableCore"),p(_,"propTypes",{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(S,A){if(S[A]&&S[A].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),p(_,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),$l}var hw;function dR(){return hw||(hw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),n.default=void 0;var e=y($a()),t=p(SA()),i=p(Wd()),r=p(uR),o=lv(),l=wA(),c=Kd(),f=p(hR()),d=p(_A());function p(w){return w&&w.__esModule?w:{default:w}}function m(w){if(typeof WeakMap!="function")return null;var C=new WeakMap,k=new WeakMap;return(m=function(T){return T?k:C})(w)}function y(w,C){if(w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var k=m(C);if(k&&k.has(w))return k.get(w);var T={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in w)if(E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)){var R=O?Object.getOwnPropertyDescriptor(w,E):null;R&&(R.get||R.set)?Object.defineProperty(T,E,R):T[E]=w[E]}return T.default=w,k&&k.set(w,T),T}function v(){return v=Object.assign?Object.assign.bind():function(w){for(var C=1;C<arguments.length;C++){var k=arguments[C];for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(w[T]=k[T])}return w},v.apply(this,arguments)}function x(w,C,k){return C=_(C),C in w?Object.defineProperty(w,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[C]=k,w}function _(w){var C=S(w,"string");return typeof C=="symbol"?C:String(C)}function S(w,C){if(typeof w!="object"||w===null)return w;var k=w[Symbol.toPrimitive];if(k!==void 0){var T=k.call(w,C);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(w)}class A extends e.Component{static getDerivedStateFromProps(C,k){let{position:T}=C,{prevPropsPosition:O}=k;return T&&(!O||T.x!==O.x||T.y!==O.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:O}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(C){super(C),x(this,"onDragStart",(k,T)=>{if((0,d.default)("Draggable: onDragStart: %j",T),this.props.onStart(k,(0,l.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(k,T)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",T);const O=(0,l.createDraggableData)(this,T),E={x:O.x,y:O.y,slackX:0,slackY:0};if(this.props.bounds){const{x:j,y:V}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[P,q]=(0,l.getBoundPosition)(this,E.x,E.y);E.x=P,E.y=q,E.slackX=this.state.slackX+(j-E.x),E.slackY=this.state.slackY+(V-E.y),O.x=E.x,O.y=E.y,O.deltaX=E.x-this.state.x,O.deltaY=E.y-this.state.y}if(this.props.onDrag(k,O)===!1)return!1;this.setState(E)}),x(this,"onDragStop",(k,T)=>{if(!this.state.dragging||this.props.onStop(k,(0,l.createDraggableData)(this,T))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",T);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:j,y:V}=this.props.position;E.x=j,E.y=V}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var C,k;return(C=(k=this.props)===null||k===void 0||(k=k.nodeRef)===null||k===void 0?void 0:k.current)!==null&&C!==void 0?C:i.default.findDOMNode(this)}render(){const{axis:C,bounds:k,children:T,defaultPosition:O,defaultClassName:E,defaultClassNameDragging:R,defaultClassNameDragged:j,position:V,positionOffset:P,scale:q,...X}=this.props;let J={},ce=null;const U=!!!V||this.state.dragging,ee=V||O,oe={x:(0,l.canDragX)(this)&&U?this.state.x:ee.x,y:(0,l.canDragY)(this)&&U?this.state.y:ee.y};this.state.isElementSVG?ce=(0,o.createSVGTransform)(oe,P):J=(0,o.createCSSTransform)(oe,P);const Y=(0,r.default)(T.props.className||"",E,{[R]:this.state.dragging,[j]:this.state.dragged});return e.createElement(f.default,v({},X,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(T),{className:Y,style:{...T.props.style,...J},transform:ce}))}}n.default=A,x(A,"displayName","Draggable"),x(A,"propTypes",{...f.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),x(A,"defaultProps",{...f.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Kg)),Kg}var dw;function pR(){if(dw)return zl.exports;dw=1;const{default:n,DraggableCore:e}=dR();return zl.exports=n,zl.exports.default=n,zl.exports.DraggableCore=e,zl.exports}var mR=pR();const gR=Nc(mR);var oo=Wd(),Lt=function(){return Lt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Lt.apply(this,arguments)},pw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},mw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},mf={width:"20px",height:"20px",position:"absolute",zIndex:1},yR={top:Lt(Lt({},pw),{top:"-5px"}),right:Lt(Lt({},mw),{left:void 0,right:"-5px"}),bottom:Lt(Lt({},pw),{top:void 0,bottom:"-5px"}),left:Lt(Lt({},mw),{left:"-5px"}),topRight:Lt(Lt({},mf),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Lt(Lt({},mf),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Lt(Lt({},mf),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Lt(Lt({},mf),{left:"-10px",top:"-10px",cursor:"nw-resize"})},vR=W.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,o=n.className,l=W.useCallback(function(d){e(d,t)},[e,t]),c=W.useCallback(function(d){e(d,t)},[e,t]),f=W.useMemo(function(){return Lt(Lt({position:"absolute",userSelect:"none"},yR[t]),r??{})},[r,t]);return H.jsx("div",{className:o||void 0,style:f,onMouseDown:l,onTouchStart:c,children:i})}),bR=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),nr=function(){return nr=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},nr.apply(this,arguments)},SR={width:"auto",height:"auto"},gf=function(n,e,t){return Math.max(Math.min(n,t),e)},gw=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},oa=function(n,e){return new RegExp(n,"i").test(e)},yf=function(n){return!!(n.touches&&n.touches.length)},xR=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},yw=function(n,e,t){t===void 0&&(t=0);var i=e.reduce(function(o,l,c){return Math.abs(l-n)<Math.abs(e[o]-n)?c:o},0),r=Math.abs(e[i]-n);return t===0||r<t?e[i]:n},Qg=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},vf=function(n,e,t,i){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var r=Number(n.replace("%",""))/100;return e*r}if(n.endsWith("vw")){var r=Number(n.replace("vw",""))/100;return t*r}if(n.endsWith("vh")){var r=Number(n.replace("vh",""))/100;return i*r}}return n},wR=function(n,e,t,i,r,o,l){return i=vf(i,n.width,e,t),r=vf(r,n.height,e,t),o=vf(o,n.width,e,t),l=vf(l,n.height,e,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof l>"u"?void 0:Number(l)}},_R=function(n){return Array.isArray(n)?n:[n,n]},CR=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],vw="__resizable_base__",AR=(function(n){bR(e,n);function e(t){var i,r,o,l,c=n.call(this,t)||this;return c.ratio=1,c.resizable=null,c.parentLeft=0,c.parentTop=0,c.resizableLeft=0,c.resizableRight=0,c.resizableTop=0,c.resizableBottom=0,c.targetLeft=0,c.targetTop=0,c.delta={width:0,height:0},c.appendBase=function(){if(!c.resizable||!c.window)return null;var f=c.parentNode;if(!f)return null;var d=c.window.document.createElement("div");return d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.transform="scale(0, 0)",d.style.left="0",d.style.flex="0 0 100%",d.classList?d.classList.add(vw):d.className+=vw,f.appendChild(d),d},c.removeBase=function(f){var d=c.parentNode;d&&d.removeChild(f)},c.state={isResizing:!1,width:(r=(i=c.propsSize)===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:"auto",height:(l=(o=c.propsSize)===null||o===void 0?void 0:o.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},c.onResizeStart=c.onResizeStart.bind(c),c.onMouseMove=c.onMouseMove.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||SR},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,o=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=l}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,r=function(c){var f;if(typeof t.state[c]>"u"||t.state[c]==="auto")return"auto";if(t.propsSize&&t.propsSize[c]&&(!((f=t.propsSize[c])===null||f===void 0)&&f.toString().endsWith("%"))){if(t.state[c].toString().endsWith("%"))return t.state[c].toString();var d=t.getParentSize(),p=Number(t.state[c].toString().replace("px","")),m=p/d[c]*100;return"".concat(m,"%")}return Qg(t.state[c])},o=i&&typeof i.width<"u"&&!this.state.isResizing?Qg(i.width):r("width"),l=i&&typeof i.height<"u"&&!this.state.isResizing?Qg(i.height):r("height");return{width:o,height:l}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var o={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=r),this.removeBase(t),o},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof r>"u"||r==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,o=this.state.direction,l=r&&oa("left",o),c=r&&oa("top",o),f,d;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(f=l?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),d=c?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=c?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=c?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(t=t&&t<f?t:f),d&&Number.isFinite(d)&&(i=i&&i<d?i:d),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,o=_R(this.props.resizeRatio||1),l=o[0],c=o[1],f=this.state,d=f.direction,p=f.original,m=this.props,y=m.lockAspectRatio,v=m.lockAspectRatioExtraHeight,x=m.lockAspectRatioExtraWidth,_=p.width,S=p.height,A=v||0,w=x||0;return oa("right",d)&&(_=p.width+(t-p.x)*l/r,y&&(S=(_-w)/this.ratio+A)),oa("left",d)&&(_=p.width-(t-p.x)*l/r,y&&(S=(_-w)/this.ratio+A)),oa("bottom",d)&&(S=p.height+(i-p.y)*c/r,y&&(_=(S-A)*this.ratio+w)),oa("top",d)&&(S=p.height-(i-p.y)*c/r,y&&(_=(S-A)*this.ratio+w)),{newWidth:_,newHeight:S}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,o){var l=this.props,c=l.lockAspectRatio,f=l.lockAspectRatioExtraHeight,d=l.lockAspectRatioExtraWidth,p=typeof o.width>"u"?10:o.width,m=typeof r.width>"u"||r.width<0?t:r.width,y=typeof o.height>"u"?10:o.height,v=typeof r.height>"u"||r.height<0?i:r.height,x=f||0,_=d||0;if(c){var S=(y-x)*this.ratio+_,A=(v-x)*this.ratio+_,w=(p-_)/this.ratio+x,C=(m-_)/this.ratio+x,k=Math.max(p,S),T=Math.min(m,A),O=Math.max(y,w),E=Math.min(v,C);t=gf(t,k,T),i=gf(i,O,E)}else t=gf(t,p,m),i=gf(i,y,v);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*t,this.targetTop=o.top*t}if(this.resizable){var l=this.resizable.getBoundingClientRect(),c=l.left,f=l.top,d=l.right,p=l.bottom;this.resizableLeft=c*t,this.resizableRight=d*t,this.resizableTop=f*t,this.resizableBottom=p*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,o=0;if(t.nativeEvent&&xR(t.nativeEvent)?(r=t.nativeEvent.clientX,o=t.nativeEvent.clientY):t.nativeEvent&&yf(t.nativeEvent)&&(r=t.nativeEvent.touches[0].clientX,o=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(t,i,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var c,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var d=this.parentNode;if(d){var p=this.window.getComputedStyle(d).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",c=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var m={original:{x:r,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:nr(nr({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:c};this.setState(m)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&yf(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,o=r.maxWidth,l=r.maxHeight,c=r.minWidth,f=r.minHeight,d=yf(t)?t.touches[0].clientX:t.clientX,p=yf(t)?t.touches[0].clientY:t.clientY,m=this.state,y=m.direction,v=m.original,x=m.width,_=m.height,S=this.getParentSize(),A=wR(S,this.window.innerWidth,this.window.innerHeight,o,l,c,f);o=A.maxWidth,l=A.maxHeight,c=A.minWidth,f=A.minHeight;var w=this.calculateNewSizeFromDirection(d,p),C=w.newHeight,k=w.newWidth,T=this.calculateNewMaxFromBoundary(o,l);this.props.snap&&this.props.snap.x&&(k=yw(k,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(C=yw(C,this.props.snap.y,this.props.snapGap));var O=this.calculateNewSizeFromAspectRatio(k,C,{width:T.maxWidth,height:T.maxHeight},{width:c,height:f});if(k=O.newWidth,C=O.newHeight,this.props.grid){var E=gw(k,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),R=gw(C,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),j=this.props.snapGap||0,V=j===0||Math.abs(E-k)<=j?E:k,P=j===0||Math.abs(R-C)<=j?R:C;k=V,C=P}var q={width:k-v.width,height:C-v.height};if(this.delta=q,x&&typeof x=="string"){if(x.endsWith("%")){var X=k/S.width*100;k="".concat(X,"%")}else if(x.endsWith("vw")){var J=k/this.window.innerWidth*100;k="".concat(J,"vw")}else if(x.endsWith("vh")){var ce=k/this.window.innerHeight*100;k="".concat(ce,"vh")}}if(_&&typeof _=="string"){if(_.endsWith("%")){var X=C/S.height*100;C="".concat(X,"%")}else if(_.endsWith("vw")){var J=C/this.window.innerWidth*100;C="".concat(J,"vw")}else if(_.endsWith("vh")){var ce=C/this.window.innerHeight*100;C="".concat(ce,"vh")}}var K={width:this.createSizeForCssProperty(k,"width"),height:this.createSizeForCssProperty(C,"height")};this.flexDir==="row"?K.flexBasis=K.width:this.flexDir==="column"&&(K.flexBasis=K.height);var U=this.state.width!==K.width,ee=this.state.height!==K.height,oe=this.state.flexBasis!==K.flexBasis,Y=U||ee||oe;Y&&oo.flushSync(function(){i.setState(K)}),this.props.onResize&&Y&&this.props.onResize(t,y,this.resizable,q)}},e.prototype.onMouseUp=function(t){var i,r,o=this.state,l=o.isResizing,c=o.direction;o.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,c,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:nr(nr({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(r=t.height)!==null&&r!==void 0?r:"auto"})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,o=i.handleStyles,l=i.handleClasses,c=i.handleWrapperStyle,f=i.handleWrapperClass,d=i.handleComponent;if(!r)return null;var p=Object.keys(r).map(function(m){return r[m]!==!1?H.jsx(vR,{direction:m,onResizeStart:t.onResizeStart,replaceStyles:o&&o[m],className:l&&l[m],children:d&&d[m]?d[m]:null},m):null});return H.jsx("div",{className:f,style:c,children:p})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(l,c){return CR.indexOf(c)!==-1||(l[c]=t.props[c]),l},{}),r=nr(nr(nr({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return H.jsxs(o,nr({style:r,className:this.props.className},i,{ref:function(l){l&&(t.resizable=l)},children:[this.state.isResizing&&H.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e})(W.PureComponent);var G0=function(n,e){return G0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},G0(n,e)};function TR(n,e){G0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ht=function(){return Ht=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ht.apply(this,arguments)};function ER(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}var kR={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},OR=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},MR=(function(n){TR(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,r=t.top,o=this.getDraggablePosition(),l=o.x,c=o.y;this.draggable.setState({x:l-i,y:c-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,r=t.y;return{x:i,y:r}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/i;case"body":return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/i;case"body":return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&&this.props.onDragStart(t,i);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var o=this.getParent(),l=this.props.scale,c;if(this.props.bounds==="parent")c=o;else if(this.props.bounds==="body"){var f=o.getBoundingClientRect(),d=f.left,p=f.top,m=document.body.getBoundingClientRect(),y=-(d-o.offsetLeft*l-m.left)/l,v=-(p-o.offsetTop*l-m.top)/l,x=(document.body.offsetWidth-this.resizable.size.width*l)/l+y,_=(document.body.offsetHeight-this.resizable.size.height*l)/l+v;return this.setState({bounds:{top:v,right:x,bottom:_,left:y}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var S=o.getBoundingClientRect(),A=S.left,w=S.top,C=-(A-o.offsetLeft*l)/l,k=-(w-o.offsetTop*l)/l,x=(window.innerWidth-this.resizable.size.width*l)/l+C,_=(window.innerHeight-this.resizable.size.height*l)/l+k;return this.setState({bounds:{top:k,right:x,bottom:_,left:C}})}else typeof this.props.bounds=="string"?c=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(c=this.props.bounds);if(!(!(c instanceof HTMLElement)||!(o instanceof HTMLElement))){var T=c.getBoundingClientRect(),O=T.left,E=T.top,R=o.getBoundingClientRect(),j=R.left,V=R.top,P=(O-j)/l,q=E-V;if(this.resizable){this.updateOffsetFromParent();var X=this.offsetFromParent;this.setState({bounds:{top:q-X.top,right:P+(c.offsetWidth-this.resizable.size.width)-X.left/l,bottom:q+(c.offsetHeight-this.resizable.size.height)-X.top,left:P-X.left/l}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var r=this.offsetFromParent,o=r.left,l=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,Ht(Ht({},i),{x:i.x+o,y:i.y+l}));if(this.props.dragAxis==="x")return this.props.onDrag(t,Ht(Ht({},i),{x:i.x+o,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,Ht(Ht({},i),{x:this.originalPosition.x+o,y:i.y+l,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var r=this.offsetFromParent,o=r.left,l=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,Ht(Ht({},i),{x:i.x+o,y:i.y+l}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,Ht(Ht({},i),{x:i.x+o,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,Ht(Ht({},i),{x:this.originalPosition.x+o,y:i.y+l,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,r){t.stopPropagation(),this.setState({resizing:!0});var o=this.props.scale,l=this.offsetFromParent,c=this.getDraggablePosition();if(this.resizingPosition={x:c.x+l.left,y:c.y+l.top},this.originalPosition=c,this.props.bounds){var f=this.getParent(),d=void 0;this.props.bounds==="parent"?d=f:this.props.bounds==="body"?d=document.body:this.props.bounds==="window"?d=window:typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);var p=this.getSelfElement();if(p instanceof Element&&(d instanceof HTMLElement||d===window)&&f instanceof HTMLElement){var m=this.getMaxSizesFromProps(),y=m.maxWidth,v=m.maxHeight,x=this.getParentSize();if(y&&typeof y=="string")if(y.endsWith("%")){var _=Number(y.replace("%",""))/100;y=x.width*_}else y.endsWith("px")&&(y=Number(y.replace("px","")));if(v&&typeof v=="string")if(v.endsWith("%")){var _=Number(v.replace("%",""))/100;v=x.height*_}else v.endsWith("px")&&(v=Number(v.replace("px","")));var S=p.getBoundingClientRect(),A=S.left,w=S.top,C=this.props.bounds==="window"?{left:0,top:0}:d.getBoundingClientRect(),k=C.left,T=C.top,O=this.getOffsetWidth(d),E=this.getOffsetHeight(d),R=i.toLowerCase().endsWith("left"),j=i.toLowerCase().endsWith("right"),V=i.startsWith("top"),P=i.startsWith("bottom");if((R||V)&&this.resizable){var q=(A-k)/o+this.resizable.size.width;this.setState({maxWidth:q>Number(y)?y:q})}if(j||this.props.lockAspectRatio&&!R&&!V){var q=O+(k-A)/o;this.setState({maxWidth:q>Number(y)?y:q})}if((V||R)&&this.resizable){var q=(w-T)/o+this.resizable.size.height;this.setState({maxHeight:q>Number(v)?v:q})}if(P||this.props.lockAspectRatio&&!V&&!R){var q=E+(T-w)/o;this.setState({maxHeight:q>Number(v)?v:q})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,i,r)},e.prototype.onResize=function(t,i,r,o){var l=this,c={x:this.originalPosition.x,y:this.originalPosition.y},f=-o.width,d=-o.height,p=["top","left","topLeft","bottomLeft","topRight"];p.includes(i)&&(i==="bottomLeft"?c.x+=f:(i==="topRight"||(c.x+=f),c.y+=d));var m=this.draggable.state;(c.x!==m.x||c.y!==m.y)&&oo.flushSync(function(){l.draggable.setState(c)}),this.updateOffsetFromParent();var y=this.offsetFromParent,v=this.getDraggablePosition().x+y.left,x=this.getDraggablePosition().y+y.top;this.resizingPosition={x:v,y:x},this.props.onResize&&this.props.onResize(t,i,r,o,{x:v,y:x})},e.prototype.onResizeStop=function(t,i,r,o){this.setState({resizing:!1});var l=this.getMaxSizesFromProps(),c=l.maxWidth,f=l.maxHeight;this.setState({maxWidth:c,maxHeight:f}),this.props.onResizeStop&&this.props.onResizeStop(t,i,r,o,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),r=this.getSelfElement();if(!i||r===null)return{top:0,left:0};var o=i.getBoundingClientRect(),l=o.left,c=o.top,f=r.getBoundingClientRect(),d=this.getDraggablePosition(),p=i.scrollLeft,m=i.scrollTop;this.offsetFromParent={left:f.left-l+p-d.x*t,top:f.top-c+m-d.y*t}},e.prototype.render=function(){var t=this,i=this.props,r=i.disableDragging,o=i.style,l=i.dragHandleClassName,c=i.position,f=i.onMouseDown,d=i.onMouseUp,p=i.dragAxis,m=i.dragGrid,y=i.bounds,v=i.enableUserSelectHack,x=i.cancel,_=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var S=i.resizeHandleStyles,A=i.resizeHandleClasses,w=i.resizeHandleComponent,C=i.enableResizing,k=i.resizeGrid,T=i.resizeHandleWrapperClass,O=i.resizeHandleWrapperStyle,E=i.scale,R=i.allowAnyClick,j=i.dragPositionOffset,V=ER(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),P=this.props.default?Ht({},this.props.default):void 0;delete V.default;var q=r||l?{cursor:"auto"}:{cursor:"move"},X=Ht(Ht(Ht({},kR),q),o),J=this.offsetFromParent,ce=J.left,K=J.top,U;c&&(U={x:c.x-ce,y:c.y-K});var ee=this.state.resizing?void 0:U,oe=this.state.resizing?"both":p;return W.createElement(gR,{ref:function(Y){Y&&(t.draggable=Y)},handle:l?".".concat(l):void 0,defaultPosition:P,onMouseDown:f,onMouseUp:d,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:oe,disabled:r,grid:m,bounds:y?this.state.bounds:void 0,position:ee,enableUserSelectHack:v,cancel:x,scale:E,allowAnyClick:R,nodeRef:this.resizableElement,positionOffset:j},W.createElement(AR,Ht({},V,{ref:function(Y){Y&&(t.resizable=Y,t.resizableElement.current=Y.resizable)},defaultSize:P,size:this.props.size,enable:typeof C=="boolean"?OR(C):C,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:X,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:k,handleWrapperClass:T,handleWrapperStyle:O,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:S,handleClasses:A,handleComponent:w,scale:this.props.scale}),_))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e})(W.PureComponent),CA=Symbol.for("immer-nothing"),bw=Symbol.for("immer-draftable"),Tn=Symbol.for("immer-state");function $i(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var ri=Object,Ta=ri.getPrototypeOf,nd="constructor",Yd="prototype",X0="configurable",id="enumerable",Uh="writable",sc="value",Es=n=>!!n&&!!n[Tn];function Pr(n){return n?AA(n)||Xd(n)||!!n[bw]||!!n[nd]?.[bw]||Qd(n)||Jd(n):!1}var DR=ri[Yd][nd].toString(),Sw=new WeakMap;function AA(n){if(!n||!cv(n))return!1;const e=Ta(n);if(e===null||e===ri[Yd])return!0;const t=ri.hasOwnProperty.call(e,nd)&&e[nd];if(t===Object)return!0;if(!fa(t))return!1;let i=Sw.get(t);return i===void 0&&(i=Function.toString.call(t),Sw.set(t,i)),i===DR}function Gd(n,e,t=!0){zc(n)===0?(t?Reflect.ownKeys(n):ri.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function zc(n){const e=n[Tn];return e?e.type_:Xd(n)?1:Qd(n)?2:Jd(n)?3:0}var xw=(n,e,t=zc(n))=>t===2?n.has(e):ri[Yd].hasOwnProperty.call(n,e),Q0=(n,e,t=zc(n))=>t===2?n.get(e):n[e],rd=(n,e,t,i=zc(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function RR(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Xd=Array.isArray,Qd=n=>n instanceof Map,Jd=n=>n instanceof Set,cv=n=>typeof n=="object",fa=n=>typeof n=="function",Jg=n=>typeof n=="boolean";function NR(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var $r=n=>n.copy_||n.base_,uv=n=>n.modified_?n.copy_:n.base_;function J0(n,e){if(Qd(n))return new Map(n);if(Jd(n))return new Set(n);if(Xd(n))return Array[Yd].slice.call(n);const t=AA(n);if(e===!0||e==="class_only"&&!t){const i=ri.getOwnPropertyDescriptors(n);delete i[Tn];let r=Reflect.ownKeys(i);for(let o=0;o<r.length;o++){const l=r[o],c=i[l];c[Uh]===!1&&(c[Uh]=!0,c[X0]=!0),(c.get||c.set)&&(i[l]={[X0]:!0,[Uh]:!0,[id]:c[id],[sc]:n[l]})}return ri.create(Ta(n),i)}else{const i=Ta(n);if(i!==null&&t)return{...n};const r=ri.create(i);return ri.assign(r,n)}}function oc(n,e=!1){return Zd(n)||Es(n)||!Pr(n)||(zc(n)>1&&ri.defineProperties(n,{set:bf,add:bf,clear:bf,delete:bf}),ri.freeze(n),e&&Gd(n,(t,i)=>{oc(i,!0)},!1)),n}function zR(){$i(2)}var bf={[sc]:zR};function Zd(n){return n===null||!cv(n)?!0:ri.isFrozen(n)}var sd="MapSet",Z0="Patches",ww="ArrayMethods",TA={};function po(n){const e=TA[n];return e||$i(0,n),e}var _w=n=>!!TA[n],ac,EA=()=>ac,$R=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:_w(sd)?po(sd):void 0,arrayMethodsPlugin_:_w(ww)?po(ww):void 0});function Cw(n,e){e&&(n.patchPlugin_=po(Z0),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function ey(n){ty(n),n.drafts_.forEach(LR),n.drafts_=null}function ty(n){n===ac&&(ac=n.parent_)}var Aw=n=>ac=$R(ac,n);function LR(n){const e=n[Tn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Tw(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Tn].modified_&&(ey(e),$i(4)),Pr(n)&&(n=Ew(e,n));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(t[Tn].base_,n,e)}else n=Ew(e,t);return jR(e,n,!0),ey(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==CA?n:void 0}function Ew(n,e){if(Zd(e))return e;const t=e[Tn];if(!t)return od(e,n.handledSet_,n);if(!ep(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);MA(t,n)}return t.copy_}function jR(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&oc(e,t)}function kA(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var ep=(n,e)=>n.scope_===e,BR=[];function OA(n,e,t,i){const r=$r(n),o=n.type_;if(i!==void 0&&Q0(r,i,o)===e){rd(r,i,t,o);return}if(!n.draftLocations_){const c=n.draftLocations_=new Map;Gd(r,(f,d)=>{if(Es(d)){const p=c.get(d)||[];p.push(f),c.set(d,p)}})}const l=n.draftLocations_.get(e)??BR;for(const c of l)rd(r,c,t,o)}function PR(n,e,t){n.callbacks_.push(function(r){const o=e;if(!o||!ep(o,r))return;r.mapSetPlugin_?.fixSetContents(o);const l=uv(o);OA(n,o.draft_??o,l,t),MA(o,r)})}function MA(n,e){if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(n.assigned_?.size??0)>0)){const{patchPlugin_:i}=e;if(i){const r=i.getPath(n);r&&i.generatePatches_(n,r,e)}kA(n)}}function qR(n,e,t){const{scope_:i}=n;if(Es(t)){const r=t[Tn];ep(r,i)&&r.callbacks_.push(function(){Vh(n);const l=uv(r);OA(n,t,l,e)})}else Pr(t)&&n.callbacks_.push(function(){const o=$r(n);n.type_===3?o.has(t)&&od(t,i.handledSet_,i):Q0(o,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&od(Q0(n.copy_,e,n.type_),i.handledSet_,i)})}function od(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Es(n)||e.has(n)||!Pr(n)||Zd(n)||(e.add(n),Gd(n,(i,r)=>{if(Es(r)){const o=r[Tn];if(ep(o,t)){const l=uv(o);rd(n,i,l,n.type_),kA(o)}}else Pr(r)&&od(r,e,t)})),n}function HR(n,e){const t=Xd(n),i={type_:t?1:0,scope_:e?e.scope_:EA(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,o=ad;t&&(r=[i],o=lc);const{revoke:l,proxy:c}=Proxy.revocable(r,o);return i.draft_=c,i.revoke_=l,[c,i]}var ad={get(n,e){if(e===Tn)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t?.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const r=$r(n);if(!xw(r,e,n.type_))return IR(n,r,e);const o=r[e];if(n.finalized_||!Pr(o)||i&&n.operationMethod&&t?.isMutatingArrayMethod(n.operationMethod)&&NR(e))return o;if(o===Zg(n.base_,e)){Vh(n);const l=n.type_===1?+e:e,c=iy(n.scope_,o,n,l);return n.copy_[l]=c}return o},has(n,e){return e in $r(n)},ownKeys(n){return Reflect.ownKeys($r(n))},set(n,e,t){const i=DA($r(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=Zg($r(n),e),o=r?.[Tn];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(RR(t,r)&&(t!==void 0||xw(n.base_,e,n.type_)))return!0;Vh(n),ny(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),qR(n,e,t)),!0},deleteProperty(n,e){return Vh(n),Zg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),ny(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=$r(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[Uh]:!0,[X0]:n.type_!==1||e!=="length",[id]:i[id],[sc]:t[e]}},defineProperty(){$i(11)},getPrototypeOf(n){return Ta(n.base_)},setPrototypeOf(){$i(12)}},lc={};for(let n in ad){let e=ad[n];lc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}lc.deleteProperty=function(n,e){return lc.set.call(this,n,e,void 0)};lc.set=function(n,e,t){return ad.set.call(this,n[0],e,t,n[0])};function Zg(n,e){const t=n[Tn];return(t?$r(t):n)[e]}function IR(n,e,t){const i=DA(e,t);return i?sc in i?i[sc]:i.get?.call(n.draft_):void 0}function DA(n,e){if(!(e in n))return;let t=Ta(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Ta(t)}}function ny(n){n.modified_||(n.modified_=!0,n.parent_&&ny(n.parent_))}function Vh(n){n.copy_||(n.assigned_=new Map,n.copy_=J0(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var UR=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(fa(e)&&!fa(t)){const o=t;t=e;const l=this;return function(f=o,...d){return l.produce(f,p=>t.call(this,p,...d))}}fa(t)||$i(6),i!==void 0&&!fa(i)&&$i(7);let r;if(Pr(e)){const o=Aw(this),l=iy(o,e,void 0);let c=!0;try{r=t(l),c=!1}finally{c?ey(o):ty(o)}return Cw(o,i),Tw(r,o)}else if(!e||!cv(e)){if(r=t(e),r===void 0&&(r=e),r===CA&&(r=void 0),this.autoFreeze_&&oc(r,!0),i){const o=[],l=[];po(Z0).generateReplacementPatches_(e,r,{patches_:o,inversePatches_:l}),i(o,l)}return r}else $i(1,e)},this.produceWithPatches=(e,t)=>{if(fa(e))return(l,...c)=>this.produceWithPatches(l,f=>e(f,...c));let i,r;return[this.produce(e,t,(l,c)=>{i=l,r=c}),i,r]},Jg(n?.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Jg(n?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Jg(n?.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Pr(n)||$i(8),Es(n)&&(n=VR(n));const e=Aw(this),t=iy(e,n,void 0);return t[Tn].isManual_=!0,ty(e),t}finishDraft(n,e){const t=n&&n[Tn];(!t||!t.isManual_)&&$i(9);const{scope_:i}=t;return Cw(i,e),Tw(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=po(Z0).applyPatches_;return Es(n)?i(n,e):this.produce(n,r=>i(r,e))}};function iy(n,e,t,i){const[r,o]=Qd(e)?po(sd).proxyMap_(e,t):Jd(e)?po(sd).proxySet_(e,t):HR(e,t);return(t?.scope_??EA()).drafts_.push(r),o.callbacks_=t?.callbacks_??[],o.key_=i,t&&i!==void 0?PR(t,o,i):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:d}=f;o.modified_&&d&&d.generatePatches_(o,[],f)}),r}function VR(n){return Es(n)||$i(10,n),RA(n)}function RA(n){if(!Pr(n)||Zd(n))return n;const e=n[Tn];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=J0(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=J0(n,!0);return Gd(t,(r,o)=>{rd(t,r,RA(o))},i),e&&(e.finalized_=!1),t}var FR=new UR,WR=FR.produce;function KR(n){var e=W.useState(function(){return oc(typeof n=="function"?n():n,!0)}),t=e[1];return[e[0],W.useCallback(function(i){t(typeof i=="function"?WR(i):oc(i))},[])]}function YR(n,e,t){const i=yn.c(11),r=t;let o;i[0]!==e||i[1]!==n||i[2]!==r?(o=()=>{const m=window.localStorage.getItem(n);return m?JSON.parse(m):e},i[0]=e,i[1]=n,i[2]=r,i[3]=o):o=i[3];const[l,c]=KR(o);let f,d;i[4]!==n||i[5]!==l?(f=()=>{try{localStorage.setItem(n,JSON.stringify(l))}catch(m){console.error("localStorage write failed:",m)}},d=[n,l],i[4]=n,i[5]=l,i[6]=f,i[7]=d):(f=i[6],d=i[7]),W.useEffect(f,d);let p;return i[8]!==c||i[9]!==l?(p=[l,c],i[8]=c,i[9]=l,i[10]=p):p=i[10],p}const GR={assets:{positions:[{label:"Anlagevermgen",accounts:["1000","1010"],positions:[]},{label:"Umlaufvermgen",accounts:["1200","1210"],positions:[]},{label:"Liquide Mittel",accounts:["1400"],positions:[]}],accounts:[]},liabilitiesAndEquity:{positions:[{label:"Eigenkapital",accounts:["2000"],positions:[]},{label:"Fremdkapital",accounts:["2100","2200"],positions:[]}],accounts:[]}},XR=[{id:"1000",label:"Grundstcke und Gebude"},{id:"1010",label:"Maschinen und Anlagen"},{id:"1200",label:"Forderungen aus Lieferungen und Leistungen"},{id:"1210",label:"Vorrte"},{id:"1400",label:"Bankguthaben"},{id:"2000",label:"Eigenkapital"},{id:"2100",label:"Verbindlichkeiten gegenber Banken"},{id:"2200",label:"Lieferantenverbindlichkeiten"}],QR=[{id:1,description:"Einlage des Gesellschafters zur Finanzierung von Grundstcken",entryLines:[{accountId:"1000",amount:5e4,entryType:"debit"},{accountId:"2000",amount:5e4,entryType:"credit"}]},{id:2,description:"Kauf von Maschinen auf Bankkredit",entryLines:[{accountId:"1010",amount:3e4,entryType:"debit"},{accountId:"2100",amount:3e4,entryType:"credit"}]},{id:3,description:"Warenkauf auf Ziel vom Lieferanten",entryLines:[{accountId:"1200",amount:1e4,entryType:"debit"},{accountId:"2200",amount:1e4,entryType:"credit"}]},{id:4,description:"Erhhung der Vorrte durch Eigenkapitalfinanzierung",entryLines:[{accountId:"1210",amount:5e3,entryType:"debit"},{accountId:"2000",amount:5e3,entryType:"credit"}]},{id:5,description:"Zufluss von Bankguthaben aus Darlehensaufnahme",entryLines:[{accountId:"1400",amount:15e3,entryType:"debit"},{accountId:"2100",amount:15e3,entryType:"credit"}]}],JR={balanceSheet:GR,accounts:XR,journalEntries:QR},NA={debit:0,credit:0,balance:0};function ZR(n){const e={};for(const t of n)for(const i of t.entryLines??[]){const r=e[i.accountId]??{...NA};i.entryType==="debit"?r.debit+=i.amount:r.credit+=i.amount,r.balance=r.debit-r.credit,e[i.accountId]=r}return e}function cc(n,e){return n[e]??NA}const an=[];for(let n=0;n<256;++n)an.push((n+256).toString(16).slice(1));function eN(n,e=0){return(an[n[e+0]]+an[n[e+1]]+an[n[e+2]]+an[n[e+3]]+"-"+an[n[e+4]]+an[n[e+5]]+"-"+an[n[e+6]]+an[n[e+7]]+"-"+an[n[e+8]]+an[n[e+9]]+"-"+an[n[e+10]]+an[n[e+11]]+an[n[e+12]]+an[n[e+13]]+an[n[e+14]]+an[n[e+15]]).toLowerCase()}let e0;const tN=new Uint8Array(16);function nN(){if(!e0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e0=crypto.getRandomValues.bind(crypto)}return e0(tN)}const iN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kw={randomUUID:iN};function rN(n,e,t){n=n||{};const i=n.random??n.rng?.()??nN();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,eN(i)}function fv(n,e,t){return kw.randomUUID&&!n?kw.randomUUID():rN(n)}function ry(n,e){return e.has(String(n.id))||n.id==null?n.id=void 0:e.add(String(n.id)),{...n,id:n.id!==void 0?n.id:fv(),positions:n.positions.map(t=>ry(t,e))}}function zA(n){const e=new Set;return{...n,balanceSheet:{...n.balanceSheet,assets:{...n.balanceSheet.assets,positions:n.balanceSheet.assets.positions?.map(t=>ry(t,e))},liabilitiesAndEquity:{...n.balanceSheet.liabilitiesAndEquity,positions:n.balanceSheet.liabilitiesAndEquity.positions?.map(t=>ry(t,e))}}}}function $A(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=$A(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function uo(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=$A(n))&&(i&&(i+=" "),i+=e);return i}function sN(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}sN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var $c=n=>typeof n=="number"&&!isNaN(n),mo=n=>typeof n=="string",qr=n=>typeof n=="function",oN=n=>mo(n)||$c(n),sy=n=>mo(n)||qr(n)?n:null,aN=(n,e)=>n===!1||$c(n)&&n>0?n:e,oy=n=>W.isValidElement(n)||mo(n)||qr(n)||$c(n);function lN(n,e,t=300){let{scrollHeight:i,style:r}=n;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${t}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(e,t)})})}function cN({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:o,position:l,preventExitTransition:c,done:f,nodeRef:d,isIn:p,playToast:m}){let y=t?`${n}--${l}`:n,v=t?`${e}--${l}`:e,x=W.useRef(0);return W.useLayoutEffect(()=>{let _=d.current,S=y.split(" "),A=w=>{w.target===d.current&&(m(),_.removeEventListener("animationend",A),_.removeEventListener("animationcancel",A),x.current===0&&w.type!=="animationcancel"&&_.classList.remove(...S))};_.classList.add(...S),_.addEventListener("animationend",A),_.addEventListener("animationcancel",A)},[]),W.useEffect(()=>{let _=d.current,S=()=>{_.removeEventListener("animationend",S),i?lN(_,f,r):f()};p||(c?S():(x.current=1,_.className+=` ${v}`,_.addEventListener("animationend",S)))},[p]),Ne.createElement(Ne.Fragment,null,o)}}function Ow(n,e){return{content:LA(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function LA(n,e,t=!1){return W.isValidElement(n)&&!mo(n.type)?W.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):qr(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function uN({closeToast:n,theme:e,ariaLabel:t="close"}){return Ne.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},Ne.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ne.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function fN({delay:n,isRunning:e,closeToast:t,type:i="default",hide:r,className:o,controlledProgress:l,progress:c,rtl:f,isIn:d,theme:p}){let m=r||l&&c===0,y={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};l&&(y.transform=`scaleX(${c})`);let v=uo("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),x=qr(o)?o({rtl:f,type:i,defaultClassName:v}):uo(v,o),_={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&t()}};return Ne.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Ne.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${i}`}),Ne.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:x,style:y,..._}))}var hN=1,jA=()=>`${hN++}`;function dN(n,e,t){let i=1,r=0,o=[],l=[],c=e,f=new Map,d=new Set,p=w=>(d.add(w),()=>d.delete(w)),m=()=>{l=Array.from(f.values()),d.forEach(w=>w())},y=({containerId:w,toastId:C,updateId:k})=>{let T=w?w!==n:n!==1,O=f.has(C)&&k==null;return T||O},v=(w,C)=>{f.forEach(k=>{var T;(C==null||C===k.props.toastId)&&((T=k.toggle)==null||T.call(k,w))})},x=w=>{var C,k;(k=(C=w.props)==null?void 0:C.onClose)==null||k.call(C,w.removalReason),w.isActive=!1},_=w=>{if(w==null)f.forEach(x);else{let C=f.get(w);C&&x(C)}m()},S=()=>{r-=o.length,o=[]},A=w=>{var C,k;let{toastId:T,updateId:O}=w.props,E=O==null;w.staleId&&f.delete(w.staleId),w.isActive=!0,f.set(T,w),m(),t(Ow(w,E?"added":"updated")),E&&((k=(C=w.props).onOpen)==null||k.call(C))};return{id:n,props:c,observe:p,toggle:v,removeToast:_,toasts:f,clearQueue:S,buildToast:(w,C)=>{if(y(C))return;let{toastId:k,updateId:T,data:O,staleId:E,delay:R}=C,j=T==null;j&&r++;let V={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(C).filter(([q,X])=>X!=null)),toastId:k,updateId:T,data:O,isIn:!1,className:sy(C.className||c.toastClassName),progressClassName:sy(C.progressClassName||c.progressClassName),autoClose:C.isLoading?!1:aN(C.autoClose,c.autoClose),closeToast(q){f.get(k).removalReason=q,_(k)},deleteToast(){let q=f.get(k);if(q!=null){if(t(Ow(q,"removed")),f.delete(k),r--,r<0&&(r=0),o.length>0){A(o.shift());return}m()}}};V.closeButton=c.closeButton,C.closeButton===!1||oy(C.closeButton)?V.closeButton=C.closeButton:C.closeButton===!0&&(V.closeButton=oy(c.closeButton)?c.closeButton:!0);let P={content:w,props:V,staleId:E};c.limit&&c.limit>0&&r>c.limit&&j?o.push(P):$c(R)?setTimeout(()=>{A(P)},R):A(P)},setProps(w){c=w},setToggle:(w,C)=>{let k=f.get(w);k&&(k.toggle=C)},isToastActive:w=>{var C;return(C=f.get(w))==null?void 0:C.isActive},getSnapshot:()=>l}}var Cn=new Map,uc=[],ay=new Set,pN=n=>ay.forEach(e=>e(n)),BA=()=>Cn.size>0;function mN(){uc.forEach(n=>qA(n.content,n.options)),uc=[]}var gN=(n,{containerId:e})=>{var t;return(t=Cn.get(e||1))==null?void 0:t.toasts.get(n)};function PA(n,e){var t;if(e)return!!((t=Cn.get(e))!=null&&t.isToastActive(n));let i=!1;return Cn.forEach(r=>{r.isToastActive(n)&&(i=!0)}),i}function yN(n){if(!BA()){uc=uc.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||oN(n))Cn.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Cn.get(n.containerId);e?e.removeToast(n.id):Cn.forEach(t=>{t.removeToast(n.id)})}}var vN=(n={})=>{Cn.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function qA(n,e){oy(n)&&(BA()||uc.push({content:n,options:e}),Cn.forEach(t=>{t.buildToast(n,e)}))}function bN(n){var e;(e=Cn.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function HA(n,e){Cn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function SN(n){let e=n.containerId||1;return{subscribe(t){let i=dN(e,n,pN);Cn.set(e,i);let r=i.observe(t);return mN(),()=>{r(),Cn.delete(e)}},setProps(t){var i;(i=Cn.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=Cn.get(e))==null?void 0:t.getSnapshot()}}}function xN(n){return ay.add(n),()=>{ay.delete(n)}}function wN(n){return n&&(mo(n.toastId)||$c(n.toastId))?n.toastId:jA()}function Lc(n,e){return qA(n,e),e.toastId}function tp(n,e){return{...e,type:e&&e.type||n,toastId:wN(e)}}function np(n){return(e,t)=>Lc(e,tp(n,t))}function Me(n,e){return Lc(n,tp("default",e))}Me.loading=(n,e)=>Lc(n,tp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function _N(n,{pending:e,error:t,success:i},r){let o;e&&(o=mo(e)?Me.loading(e,r):Me.loading(e.render,{...r,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(d,p,m)=>{if(p==null){Me.dismiss(o);return}let y={type:d,...l,...r,data:m},v=mo(p)?{render:p}:p;return o?Me.update(o,{...y,...v}):Me(v.render,{...y,...v}),m},f=qr(n)?n():n;return f.then(d=>c("success",i,d)).catch(d=>c("error",t,d)),f}Me.promise=_N;Me.success=np("success");Me.info=np("info");Me.error=np("error");Me.warning=np("warning");Me.warn=Me.warning;Me.dark=(n,e)=>Lc(n,tp("default",{theme:"dark",...e}));function CN(n){yN(n)}Me.dismiss=CN;Me.clearWaitingQueue=vN;Me.isActive=PA;Me.update=(n,e={})=>{let t=gN(n,e);if(t){let{props:i,content:r}=t,o={delay:100,...i,...e,toastId:e.toastId||n,updateId:jA()};o.toastId!==n&&(o.staleId=n);let l=o.render||r;delete o.render,Lc(l,o)}};Me.done=n=>{Me.update(n,{progress:1})};Me.onChange=xN;Me.play=n=>HA(!0,n);Me.pause=n=>HA(!1,n);function AN(n){var e;let{subscribe:t,getSnapshot:i,setProps:r}=W.useRef(SN(n)).current;r(n);let o=(e=W.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function l(c){if(!o)return[];let f=new Map;return n.newestOnTop&&o.reverse(),o.forEach(d=>{let{position:p}=d.props;f.has(p)||f.set(p,[]),f.get(p).push(d)}),Array.from(f,d=>c(d[0],d[1]))}return{getToastToRender:l,isToastActive:PA,count:o?.length}}function TN(n){let[e,t]=W.useState(!1),[i,r]=W.useState(!1),o=W.useRef(null),l=W.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:f,closeToast:d,onClick:p,closeOnClick:m}=n;bN({id:n.toastId,containerId:n.containerId,fn:t}),W.useEffect(()=>{if(n.pauseOnFocusLoss)return y(),()=>{v()}},[n.pauseOnFocusLoss]);function y(){document.hasFocus()||A(),window.addEventListener("focus",S),window.addEventListener("blur",A)}function v(){window.removeEventListener("focus",S),window.removeEventListener("blur",A)}function x(E){if(n.draggable===!0||n.draggable===E.pointerType){w();let R=o.current;l.canCloseOnClick=!0,l.canDrag=!0,R.style.transition="none",n.draggableDirection==="x"?(l.start=E.clientX,l.removalDistance=R.offsetWidth*(n.draggablePercent/100)):(l.start=E.clientY,l.removalDistance=R.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function _(E){let{top:R,bottom:j,left:V,right:P}=o.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&n.pauseOnHover&&E.clientX>=V&&E.clientX<=P&&E.clientY>=R&&E.clientY<=j?A():S()}function S(){t(!0)}function A(){t(!1)}function w(){l.didMove=!1,document.addEventListener("pointermove",k),document.addEventListener("pointerup",T)}function C(){document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",T)}function k(E){let R=o.current;if(l.canDrag&&R){l.didMove=!0,e&&A(),n.draggableDirection==="x"?l.delta=E.clientX-l.start:l.delta=E.clientY-l.start,l.start!==E.clientX&&(l.canCloseOnClick=!1);let j=n.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;R.style.transform=`translate3d(${j},0)`,R.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function T(){C();let E=o.current;if(l.canDrag&&l.didMove&&E){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){r(!0),n.closeToast(!0),n.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let O={onPointerDown:x,onPointerUp:_};return c&&f&&(O.onMouseEnter=A,n.stacked||(O.onMouseLeave=S)),m&&(O.onClick=E=>{p&&p(E),l.canCloseOnClick&&d(!0)}),{playToast:S,pauseToast:A,isRunning:e,preventExitTransition:i,toastRef:o,eventHandlers:O}}var EN=typeof window<"u"?W.useLayoutEffect:W.useEffect,ip=({theme:n,type:e,isLoading:t,...i})=>Ne.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function kN(n){return Ne.createElement(ip,{...n},Ne.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function ON(n){return Ne.createElement(ip,{...n},Ne.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function MN(n){return Ne.createElement(ip,{...n},Ne.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function DN(n){return Ne.createElement(ip,{...n},Ne.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function RN(){return Ne.createElement("div",{className:"Toastify__spinner"})}var ly={info:ON,warning:kN,success:MN,error:DN,spinner:RN},NN=n=>n in ly;function zN({theme:n,type:e,isLoading:t,icon:i}){let r=null,o={theme:n,type:e};return i===!1||(qr(i)?r=i({...o,isLoading:t}):W.isValidElement(i)?r=W.cloneElement(i,o):t?r=ly.spinner():NN(e)&&(r=ly[e](o))),r}var $N=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:r,playToast:o}=TN(n),{closeButton:l,children:c,autoClose:f,onClick:d,type:p,hideProgressBar:m,closeToast:y,transition:v,position:x,className:_,style:S,progressClassName:A,updateId:w,role:C,progress:k,rtl:T,toastId:O,deleteToast:E,isIn:R,isLoading:j,closeOnClick:V,theme:P,ariaLabel:q}=n,X=uo("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":V}),J=qr(_)?_({rtl:T,position:x,type:p,defaultClassName:X}):uo(X,_),ce=zN(n),K=!!k||!f,U={closeToast:y,type:p,theme:P},ee=null;return l===!1||(qr(l)?ee=l(U):W.isValidElement(l)?ee=W.cloneElement(l,U):ee=uN(U)),Ne.createElement(v,{isIn:R,done:E,position:x,preventExitTransition:t,nodeRef:i,playToast:o},Ne.createElement("div",{id:O,tabIndex:0,onClick:d,"data-in":R,className:J,...r,style:S,ref:i,...R&&{role:C,"aria-label":q}},ce!=null&&Ne.createElement("div",{className:uo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!j})},ce),LA(c,n,!e),ee,!n.customProgressBar&&Ne.createElement(fN,{...w&&!K?{key:`p-${w}`}:{},rtl:T,theme:P,delay:f,isRunning:e,isIn:R,closeToast:y,hide:m,type:p,className:A,controlledProgress:K,progress:k||0})))},LN=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),jN=cN(LN("bounce",!0)),BN={position:"top-right",transition:jN,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function PN(n){let e={...BN,...n},t=n.stacked,[i,r]=W.useState(!0),o=W.useRef(null),{getToastToRender:l,isToastActive:c,count:f}=AN(e),{className:d,style:p,rtl:m,containerId:y,hotKeys:v}=e;function x(S){let A=uo("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":m});return qr(d)?d({position:S,rtl:m,defaultClassName:A}):uo(A,sy(d))}function _(){t&&(r(!0),Me.play())}return EN(()=>{var S;if(t){let A=o.current.querySelectorAll('[data-in="true"]'),w=12,C=(S=e.position)==null?void 0:S.includes("top"),k=0,T=0;Array.from(A).reverse().forEach((O,E)=>{let R=O;R.classList.add("Toastify__toast--stacked"),E>0&&(R.dataset.collapsed=`${i}`),R.dataset.pos||(R.dataset.pos=C?"top":"bot");let j=k*(i?.2:1)+(i?0:w*E);R.style.setProperty("--y",`${C?j:j*-1}px`),R.style.setProperty("--g",`${w}`),R.style.setProperty("--s",`${1-(i?T:0)}`),k+=R.offsetHeight,T+=.025})}},[i,f,t]),W.useEffect(()=>{function S(A){var w;let C=o.current;v(A)&&((w=C.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),Me.pause()),A.key==="Escape"&&(document.activeElement===C||C!=null&&C.contains(document.activeElement))&&(r(!0),Me.play())}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[v]),Ne.createElement("section",{ref:o,className:"Toastify",id:y,onMouseEnter:()=>{t&&(r(!1),Me.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((S,A)=>{let w=A.length?{...p}:{...p,pointerEvents:"none"};return Ne.createElement("div",{tabIndex:-1,className:x(S),"data-stacked":t,style:w,key:`c-${S}`},A.map(({content:C,props:k})=>Ne.createElement($N,{...k,stacked:t,collapseAll:_,isIn:c(k.toastId,k.containerId),key:`t-${k.key}`},C)))}))}const IA=W.createContext(null),Pi=()=>{const n=W.useContext(IA);if(!n)throw new Error("useInteractiveBalanceData must be used inside <InteractiveBalanceDataProvider>");return n},qN=JR,HN=n=>{const e=yn.c(51),{children:t}=n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=zA(qN),e[0]=i):i=e[0];const[r,o]=YR("interactiveBalanceData",i,!1),[l,c]=W.useState(null);let f;e[1]!==o?(f=(z,B)=>{o(D=>{const L=I=>{for(const re of I){if(re.id===z){re.label=B;return}re.positions?.length&&L(re.positions)}};L(D.balanceSheet.assets.positions),L(D.balanceSheet.liabilitiesAndEquity.positions)})},e[1]=o,e[2]=f):f=e[2];const d=f;let p;e[3]!==o?(p=z=>{const B={label:"Neue Position",accounts:[],positions:[],id:fv()};o(D=>{const L=I=>{for(const re of I){if(re.id===z){re.positions.push(B);return}re.positions?.length&&L(re.positions)}};L(D.balanceSheet.assets.positions),L(D.balanceSheet.liabilitiesAndEquity.positions)})},e[3]=o,e[4]=p):p=e[4];const m=p;let y;e[5]!==o?(y=z=>{o(B=>{const D=L=>{for(const I of L)I.id===z?L.splice(L.findIndex(re=>re.id===z),1):D(I.positions)};D(B.balanceSheet.assets.positions),D(B.balanceSheet.liabilitiesAndEquity.positions)})},e[5]=o,e[6]=y):y=e[6];const v=y;let x;e[7]!==o?(x=z=>{if(!/^[0-9]{4}$/.test(z))throw console.log("not a valid account id"),Me.error("Account ID nicht zulssig"),new Error("Invalid account ID format");const B={id:z,label:"Neuer Account"};o(D=>{D.accounts.push(B)})},e[7]=o,e[8]=x):x=e[8];const _=x;let S;e[9]!==_||e[10]!==r.accounts||e[11]!==o?(S=(z,B)=>{try{console.log("account ID to add: ",B),r.accounts.find(D=>D.id===B)||_(B),o(D=>{if(z==="assets")D.balanceSheet.assets.accounts?.findIndex(I=>I===B)===-1?D.balanceSheet.assets.accounts?.push(B):Me.error("Konto bereits in dieser Position enthalten");else if(z==="liabilitiesAndEquity")D.balanceSheet.liabilitiesAndEquity.accounts?.findIndex(I=>I===B)===-1?D.balanceSheet.liabilitiesAndEquity.accounts?.push(B):Me.error("Konto bereits in dieser Position enthalten");else{const L=I=>{for(const re of I){if(re.id===z){re.accounts?.findIndex(ge=>ge===B)===-1?re.accounts.push(B):Me.error("Konto bereits in dieser Position enthalten");return}re.positions?.length&&L(re.positions)}};L(D.balanceSheet.assets.positions),L(D.balanceSheet.liabilitiesAndEquity.positions)}})}catch{}},e[9]=_,e[10]=r.accounts,e[11]=o,e[12]=S):S=e[12];const A=S;let w;e[13]!==o?(w=(z,B)=>{o(D=>{if(z==="assets"){const L=D.balanceSheet.assets.accounts?.findIndex(I=>I===B);L!=-1?D.balanceSheet.assets.accounts?.splice(Number(L),1):Me.error("Konto nicht enthalten")}else if(z==="liabilitiesAndEquity"){const L=D.balanceSheet.liabilitiesAndEquity.accounts?.findIndex(I=>I===B);L!=-1?D.balanceSheet.liabilitiesAndEquity.accounts?.splice(Number(L),1):Me.error("Konto nicht enthalten")}else{const L=I=>{for(const re of I)re.id===z?re.accounts.splice(re.accounts.findIndex(ue=>ue===B),1):L(re.positions)};L(D.balanceSheet.assets.positions),L(D.balanceSheet.liabilitiesAndEquity.positions)}})},e[13]=o,e[14]=w):w=e[14];const C=w;let k;e[15]!==l||e[16]!==o?(k=()=>{l&&(o(z=>{z.journalEntries.push(l)}),c(null))},e[15]=l,e[16]=o,e[17]=k):k=e[17];const T=k;let O;e[18]===Symbol.for("react.memo_cache_sentinel")?(O=()=>{c(null)},e[18]=O):O=e[18];const E=O;let R;e[19]!==o?(R=(z,B,D)=>{o(L=>{if(z==="assets"){const I=L.balanceSheet.assets.accounts?.splice(B,1)??[];L.balanceSheet.assets.accounts?.splice(D,0,I[0]);return}else if(z==="liabilitiesAndEquity"){const I=L.balanceSheet.liabilitiesAndEquity.accounts?.splice(B,1)??[];L.balanceSheet.liabilitiesAndEquity.accounts?.splice(D,0,I[0]);return}else{const I=re=>{for(const ue of re)if(ue.id===z){const ge=ue.accounts.splice(B,1);ue.accounts.splice(D,0,ge[0]);return}else I(ue.positions)};I(L.balanceSheet.assets.positions),I(L.balanceSheet.liabilitiesAndEquity.positions)}})},e[19]=o,e[20]=R):R=e[20];const j=R;let V;e[21]!==o?(V=(z,B,D)=>{o(L=>{if(z==="assets"){const I=L.balanceSheet.assets.positions?.splice(B,1)??[];L.balanceSheet.assets.positions?.splice(D,0,I[0]);return}else if(z==="liabilitiesAndEquity"){const I=L.balanceSheet.liabilitiesAndEquity.positions?.splice(B,1)??[];L.balanceSheet.liabilitiesAndEquity.positions?.splice(D,0,I[0]);return}else{const I=re=>{for(const ue of re)if(ue.id===z){const ge=ue.positions.splice(B,1);ue.positions.splice(D,0,ge[0]);return}else I(ue.positions)};I(L.balanceSheet.assets.positions),I(L.balanceSheet.liabilitiesAndEquity.positions)}})},e[21]=o,e[22]=V):V=e[22];const P=V;let q;e[23]!==o?(q=(z,B,D)=>{o(L=>{let I;if(B==="assets"){const re=L.balanceSheet.assets.positions.findIndex(ue=>ue.id===z);if(re!=-1){const[ue]=L.balanceSheet.assets.positions?.splice(re,1);I=ue}}else if(B==="liabilitiesAndEquity"){const re=L.balanceSheet.liabilitiesAndEquity.positions.findIndex(ue=>ue.id===z);if(re!=-1){const[ue]=L.balanceSheet.liabilitiesAndEquity.positions?.splice(re,1);I=ue}}else{const re=ue=>{for(const ge of ue)if(ge.id===B){const[ve]=ge.positions.splice(ge.positions.findIndex(G=>G.id===z),1);return ve}else{const ve=re(ge.positions);if(ve)return ve}};I=re(L.balanceSheet.assets.positions)??re(L.balanceSheet.liabilitiesAndEquity.positions)}if(I)if(D==="assets")L.balanceSheet.assets.positions?.push(I);else if(D==="liabilitiesAndEquity")L.balanceSheet.liabilitiesAndEquity.positions?.push(I);else{const re=ue=>{for(const ge of ue){if(ge.id===D){ge.positions?.findIndex(G=>G.id===z)===-1?ge.positions.push(I):Me.error("Position bereits in dieser Position enthalten");return}ge.positions?.length&&re(ge.positions)}};re(L.balanceSheet.assets.positions),re(L.balanceSheet.liabilitiesAndEquity.positions)}})},e[23]=o,e[24]=q):q=e[24];const X=q;let J;e[25]!==o?(J=(z,B,D)=>{o(L=>{if(B==="assets")L.balanceSheet.assets.accounts?.splice(L.balanceSheet.assets.accounts?.findIndex(I=>I===z),1);else if(B==="liabilitiesAndEquity")L.balanceSheet.liabilitiesAndEquity.accounts?.splice(L.balanceSheet.liabilitiesAndEquity.accounts?.findIndex(I=>I===z),1);else{const I=re=>{for(const ue of re)ue.id===B?ue.accounts.splice(ue.accounts.findIndex(ge=>ge===z),1):I(ue.positions)};I(L.balanceSheet.assets.positions),I(L.balanceSheet.liabilitiesAndEquity.positions)}if(D==="assets")L.balanceSheet.assets.accounts?.push(z);else if(D==="liabilitiesAndEquity")L.balanceSheet.liabilitiesAndEquity.accounts?.push(z);else{const I=re=>{for(const ue of re){if(ue.id===D){ue.accounts?.findIndex(ve=>ve===z)===-1?ue.accounts.push(z):Me.error("Konto bereits in dieser Position enthalten");return}ue.positions?.length&&I(ue.positions)}};I(L.balanceSheet.assets.positions),I(L.balanceSheet.liabilitiesAndEquity.positions)}})},e[25]=o,e[26]=J):J=e[26];const ce=J;let K;if(e[27]!==l||e[28]!==r.journalEntries){const z=r.journalEntries??[];K=l?[...z.filter(B=>B.id!==l.id),l]:z,e[27]=l,e[28]=r.journalEntries,e[29]=K}else K=e[29];const U=K;let ee;e[30]!==U?(ee=ZR(U),e[30]=U,e[31]=ee):ee=e[31];const oe=ee;let Y;e[32]!==oe||e[33]!==A||e[34]!==_||e[35]!==m||e[36]!==T||e[37]!==v||e[38]!==l||e[39]!==r||e[40]!==ce||e[41]!==X||e[42]!==C||e[43]!==j||e[44]!==P||e[45]!==o||e[46]!==d?(Y={interactiveBalanceData:r,setInteractiveBalanceData:o,draftEntry:l,setDraftEntry:c,commitDraft:T,cancelDraft:E,accountTotals:oe,updatePositionLabel:d,addNewPositionTo:m,addNewAccount:_,addAccountTo:A,deletePosition:v,removeAccountFrom:C,reorderAccountsInPosition:j,reorderPositionsInPosition:P,moveAccount:ce,movePosition:X},e[32]=oe,e[33]=A,e[34]=_,e[35]=m,e[36]=T,e[37]=v,e[38]=l,e[39]=r,e[40]=ce,e[41]=X,e[42]=C,e[43]=j,e[44]=P,e[45]=o,e[46]=d,e[47]=Y):Y=e[47];let N;return e[48]!==t||e[49]!==Y?(N=H.jsx(IA.Provider,{value:Y,children:t}),e[48]=t,e[49]=Y,e[50]=N):N=e[50],N},UA=W.createContext(null);function La(){const n=W.useContext(UA);if(!n)throw new Error("useWindowManager must be used inside <WindowManagerProvider>");return n}const VA=n=>{const e=new Set,t=i=>{i.accounts.forEach(r=>e.add(r)),i.positions.forEach(t)};return n.assets.accounts?.forEach(i=>e.add(i)),n.liabilitiesAndEquity.accounts?.forEach(i=>e.add(i)),n.assets.positions?.forEach(t),n.liabilitiesAndEquity.positions?.forEach(t),e};function IN(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return W.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ja(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function hv(n){return"nodeType"in n}function En(n){var e,t;return n?ja(n)?n:hv(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function dv(n){const{Document:e}=En(n);return n instanceof e}function jc(n){return ja(n)?!1:n instanceof En(n).HTMLElement}function FA(n){return n instanceof En(n).SVGElement}function Ba(n){return n?ja(n)?n.document:hv(n)?dv(n)?n:jc(n)||FA(n)?n.ownerDocument:document:document:document}const qi=rp?W.useLayoutEffect:W.useEffect;function sp(n){const e=W.useRef(n);return qi(()=>{e.current=n}),W.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function UN(){const n=W.useRef(null),e=W.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=W.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function fc(n,e){e===void 0&&(e=[n]);const t=W.useRef(n);return qi(()=>{t.current!==n&&(t.current=n)},e),t}function Bc(n,e){const t=W.useRef();return W.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function ld(n){const e=sp(n),t=W.useRef(null),i=W.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function cd(n){const e=W.useRef();return W.useEffect(()=>{e.current=n},[n]),e.current}let t0={};function Pc(n,e){return W.useMemo(()=>{if(e)return e;const t=t0[n]==null?0:t0[n]+1;return t0[n]=t,n+"-"+t},[n,e])}function WA(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,l)=>{const c=Object.entries(l);for(const[f,d]of c){const p=o[f];p!=null&&(o[f]=p+n*d)}return o},{...e})}}const va=WA(1),ud=WA(-1);function VN(n){return"clientX"in n&&"clientY"in n}function op(n){if(!n)return!1;const{KeyboardEvent:e}=En(n.target);return e&&n instanceof e}function FN(n){if(!n)return!1;const{TouchEvent:e}=En(n.target);return e&&n instanceof e}function fd(n){if(FN(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return VN(n)?{x:n.clientX,y:n.clientY}:null}const Hr=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Hr.Translate.toString(n),Hr.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),Mw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function WN(n){return n.matches(Mw)?n:n.querySelector(Mw)}const KN={display:"none"};function YN(n){let{id:e,value:t}=n;return Ne.createElement("div",{id:e,style:KN},t)}function GN(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ne.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function XN(){const[n,e]=W.useState("");return{announce:W.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const KA=W.createContext(null);function QN(n){const e=W.useContext(KA);W.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function JN(){const[n]=W.useState(()=>new Set),e=W.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[W.useCallback(i=>{let{type:r,event:o}=i;n.forEach(l=>{var c;return(c=l[r])==null?void 0:c.call(l,o)})},[n]),e]}const ZN={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e3={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function t3(n){let{announcements:e=e3,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=ZN}=n;const{announce:o,announcement:l}=XN(),c=Pc("DndLiveRegion"),[f,d]=W.useState(!1);if(W.useEffect(()=>{d(!0)},[]),QN(W.useMemo(()=>({onDragStart(m){let{active:y}=m;o(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:v}=m;e.onDragMove&&o(e.onDragMove({active:y,over:v}))},onDragOver(m){let{active:y,over:v}=m;o(e.onDragOver({active:y,over:v}))},onDragEnd(m){let{active:y,over:v}=m;o(e.onDragEnd({active:y,over:v}))},onDragCancel(m){let{active:y,over:v}=m;o(e.onDragCancel({active:y,over:v}))}}),[o,e])),!f)return null;const p=Ne.createElement(Ne.Fragment,null,Ne.createElement(YN,{id:i,value:r.draggable}),Ne.createElement(GN,{id:c,announcement:l}));return t?oo.createPortal(p,t):p}var It;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(It||(It={}));function hd(){}const Hi=Object.freeze({x:0,y:0});function n3(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function i3(n,e){const t=fd(n);if(!t)return"0 0";const i={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function r3(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function s3(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function o3(n){let{left:e,top:t,height:i,width:r}=n;return[{x:e,y:t},{x:e+r,y:t},{x:e,y:t+i},{x:e+r,y:t+i}]}function a3(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function l3(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),l=r-i,c=o-t;if(i<r&&t<o){const f=e.width*e.height,d=n.width*n.height,p=l*c,m=p/(f+d-p);return Number(m.toFixed(4))}return 0}const c3=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:l}=o,c=t.get(l);if(c){const f=l3(c,e);f>0&&r.push({id:l,data:{droppableContainer:o,value:f}})}}return r.sort(s3)};function u3(n,e){const{top:t,left:i,bottom:r,right:o}=e;return t<=n.y&&n.y<=r&&i<=n.x&&n.x<=o}const f3=n=>{let{droppableContainers:e,droppableRects:t,pointerCoordinates:i}=n;if(!i)return[];const r=[];for(const o of e){const{id:l}=o,c=t.get(l);if(c&&u3(i,c)){const d=o3(c).reduce((m,y)=>m+n3(i,y),0),p=Number((d/4).toFixed(4));r.push({id:l,data:{droppableContainer:o,value:p}})}}return r.sort(r3)};function h3(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function YA(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Hi}function d3(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((l,c)=>({...l,top:l.top+n*c.y,bottom:l.bottom+n*c.y,left:l.left+n*c.x,right:l.right+n*c.x}),{...t})}}const p3=d3(1);function GA(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function m3(n,e,t){const i=GA(e);if(!i)return n;const{scaleX:r,scaleY:o,x:l,y:c}=i,f=n.left-l-(1-r)*parseFloat(t),d=n.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=r?n.width/r:n.width,m=o?n.height/o:n.height;return{width:p,height:m,top:d,right:f+p,bottom:d+m,left:f}}const g3={ignoreTransform:!1};function Pa(n,e){e===void 0&&(e=g3);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=En(n).getComputedStyle(n);d&&(t=m3(t,d,p))}const{top:i,left:r,width:o,height:l,bottom:c,right:f}=t;return{top:i,left:r,width:o,height:l,bottom:c,right:f}}function Dw(n){return Pa(n,{ignoreTransform:!0})}function y3(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function v3(n,e){return e===void 0&&(e=En(n).getComputedStyle(n)),e.position==="fixed"}function b3(n,e){e===void 0&&(e=En(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function pv(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(dv(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!jc(r)||FA(r)||t.includes(r))return t;const o=En(n).getComputedStyle(r);return r!==n&&b3(r,o)&&t.push(r),v3(r,o)?t:i(r.parentNode)}return n?i(n):t}function XA(n){const[e]=pv(n,1);return e??null}function n0(n){return!rp||!n?null:ja(n)?n:hv(n)?dv(n)||n===Ba(n).scrollingElement?window:jc(n)?n:null:null}function QA(n){return ja(n)?n.scrollX:n.scrollLeft}function JA(n){return ja(n)?n.scrollY:n.scrollTop}function cy(n){return{x:QA(n),y:JA(n)}}var Xt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Xt||(Xt={}));function ZA(n){return!rp||!n?!1:n===document.scrollingElement}function eT(n){const e={x:0,y:0},t=ZA(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,l=n.scrollTop>=i.y,c=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:l,isRight:c,maxScroll:i,minScroll:e}}const S3={x:.2,y:.2};function x3(n,e,t,i,r){let{top:o,left:l,right:c,bottom:f}=t;i===void 0&&(i=10),r===void 0&&(r=S3);const{isTop:d,isBottom:p,isLeft:m,isRight:y}=eT(n),v={x:0,y:0},x={x:0,y:0},_={height:e.height*r.y,width:e.width*r.x};return!d&&o<=e.top+_.height?(v.y=Xt.Backward,x.y=i*Math.abs((e.top+_.height-o)/_.height)):!p&&f>=e.bottom-_.height&&(v.y=Xt.Forward,x.y=i*Math.abs((e.bottom-_.height-f)/_.height)),!y&&c>=e.right-_.width?(v.x=Xt.Forward,x.x=i*Math.abs((e.right-_.width-c)/_.width)):!m&&l<=e.left+_.width&&(v.x=Xt.Backward,x.x=i*Math.abs((e.left+_.width-l)/_.width)),{direction:v,speed:x}}function w3(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function tT(n){return n.reduce((e,t)=>va(e,cy(t)),Hi)}function _3(n){return n.reduce((e,t)=>e+QA(t),0)}function C3(n){return n.reduce((e,t)=>e+JA(t),0)}function nT(n,e){if(e===void 0&&(e=Pa),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);XA(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const A3=[["x",["left","right"],_3],["y",["top","bottom"],C3]];class mv{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=pv(t),r=tT(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,c]of A3)for(const f of l)Object.defineProperty(this,f,{get:()=>{const d=c(i),p=r[o]-d;return this.rect[f]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function T3(n){const{EventTarget:e}=En(n);return n instanceof e?n:Ba(n)}function i0(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var xi;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(xi||(xi={}));function Rw(n){n.preventDefault()}function E3(n){n.stopPropagation()}var tt;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(tt||(tt={}));const iT={start:[tt.Space,tt.Enter],cancel:[tt.Esc],end:[tt.Space,tt.Enter,tt.Tab]},k3=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case tt.Right:return{...t,x:t.x+25};case tt.Left:return{...t,x:t.x-25};case tt.Down:return{...t,y:t.y+25};case tt.Up:return{...t,y:t.y-25}}};class rT{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Gl(Ba(t)),this.windowListeners=new Gl(En(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xi.Resize,this.handleCancel),this.windowListeners.add(xi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&nT(i),t(Hi)}handleKeyDown(e){if(op(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=iT,coordinateGetter:l=k3,scrollBehavior:c="smooth"}=r,{code:f}=e;if(o.end.includes(f)){this.handleEnd(e);return}if(o.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:d}=i.current,p=d?{x:d.left,y:d.top}:Hi;this.referenceCoordinates||(this.referenceCoordinates=p);const m=l(e,{active:t,context:i.current,currentCoordinates:p});if(m){const y=ud(m,p),v={x:0,y:0},{scrollableAncestors:x}=i.current;for(const _ of x){const S=e.code,{isTop:A,isRight:w,isLeft:C,isBottom:k,maxScroll:T,minScroll:O}=eT(_),E=w3(_),R={x:Math.min(S===tt.Right?E.right-E.width/2:E.right,Math.max(S===tt.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(S===tt.Down?E.bottom-E.height/2:E.bottom,Math.max(S===tt.Down?E.top:E.top+E.height/2,m.y))},j=S===tt.Right&&!w||S===tt.Left&&!C,V=S===tt.Down&&!k||S===tt.Up&&!A;if(j&&R.x!==m.x){const P=_.scrollLeft+y.x,q=S===tt.Right&&P<=T.x||S===tt.Left&&P>=O.x;if(q&&!y.y){_.scrollTo({left:P,behavior:c});return}q?v.x=_.scrollLeft-P:v.x=S===tt.Right?_.scrollLeft-T.x:_.scrollLeft-O.x,v.x&&_.scrollBy({left:-v.x,behavior:c});break}else if(V&&R.y!==m.y){const P=_.scrollTop+y.y,q=S===tt.Down&&P<=T.y||S===tt.Up&&P>=O.y;if(q&&!y.x){_.scrollTo({top:P,behavior:c});return}q?v.y=_.scrollTop-P:v.y=S===tt.Down?_.scrollTop-T.y:_.scrollTop-O.y,v.y&&_.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(e,va(ud(m,this.referenceCoordinates),v))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rT.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=iT,onActivation:r}=e,{active:o}=t;const{code:l}=n.nativeEvent;if(i.start.includes(l)){const c=o.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function Nw(n){return!!(n&&"distance"in n)}function zw(n){return!!(n&&"delay"in n)}class gv{constructor(e,t,i){var r;i===void 0&&(i=T3(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:l}=o;this.props=e,this.events=t,this.document=Ba(l),this.documentListeners=new Gl(this.document),this.listeners=new Gl(i),this.windowListeners=new Gl(En(l)),this.initialCoordinates=(r=fd(o))!=null?r:Hi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(xi.Resize,this.handleCancel),this.windowListeners.add(xi.DragStart,Rw),this.windowListeners.add(xi.VisibilityChange,this.handleCancel),this.windowListeners.add(xi.ContextMenu,Rw),this.documentListeners.add(xi.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zw(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Nw(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(xi.Click,E3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xi.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!r)return;const f=(t=fd(e))!=null?t:Hi,d=ud(r,f);if(!i&&c){if(Nw(c)){if(c.tolerance!=null&&i0(d,c.tolerance))return this.handleCancel();if(i0(d,c.distance))return this.handleStart()}if(zw(c)&&i0(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),l(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===tt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const O3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sT extends gv{constructor(e){const{event:t}=e,i=Ba(t.target);super(e,O3,i)}}sT.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const M3={move:{name:"mousemove"},end:{name:"mouseup"}};var uy;(function(n){n[n.RightClick=2]="RightClick"})(uy||(uy={}));class D3 extends gv{constructor(e){super(e,M3,Ba(e.event.target))}}D3.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===uy.RightClick?!1:(i?.({event:t}),!0)}}];const r0={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class R3 extends gv{constructor(e){super(e,r0)}static setup(){return window.addEventListener(r0.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(r0.move.name,e)};function e(){}}}R3.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var Xl;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Xl||(Xl={}));var dd;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(dd||(dd={}));function N3(n){let{acceleration:e,activator:t=Xl.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:l=5,order:c=dd.TreeOrder,pointerCoordinates:f,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:y}=n;const v=$3({delta:m,disabled:!o}),[x,_]=UN(),S=W.useRef({x:0,y:0}),A=W.useRef({x:0,y:0}),w=W.useMemo(()=>{switch(t){case Xl.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Xl.DraggableRect:return r}},[t,r,f]),C=W.useRef(null),k=W.useCallback(()=>{const O=C.current;if(!O)return;const E=S.current.x*A.current.x,R=S.current.y*A.current.y;O.scrollBy(E,R)},[]),T=W.useMemo(()=>c===dd.TreeOrder?[...d].reverse():d,[c,d]);W.useEffect(()=>{if(!o||!d.length||!w){_();return}for(const O of T){if(i?.(O)===!1)continue;const E=d.indexOf(O),R=p[E];if(!R)continue;const{direction:j,speed:V}=x3(O,R,w,e,y);for(const P of["x","y"])v[P][j[P]]||(V[P]=0,j[P]=0);if(V.x>0||V.y>0){_(),C.current=O,x(k,l),S.current=V,A.current=j;return}}S.current={x:0,y:0},A.current={x:0,y:0},_()},[e,k,i,_,o,l,JSON.stringify(w),JSON.stringify(v),x,d,T,p,JSON.stringify(y)])}const z3={x:{[Xt.Backward]:!1,[Xt.Forward]:!1},y:{[Xt.Backward]:!1,[Xt.Forward]:!1}};function $3(n){let{delta:e,disabled:t}=n;const i=cd(e);return Bc(r=>{if(t||!i||!r)return z3;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Xt.Backward]:r.x[Xt.Backward]||o.x===-1,[Xt.Forward]:r.x[Xt.Forward]||o.x===1},y:{[Xt.Backward]:r.y[Xt.Backward]||o.y===-1,[Xt.Forward]:r.y[Xt.Forward]||o.y===1}}},[t,e,i])}function L3(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return Bc(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function j3(n,e){return W.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...t,...o]},[]),[n,e])}var hc;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(hc||(hc={}));var fy;(function(n){n.Optimized="optimized"})(fy||(fy={}));const $w=new Map;function B3(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,l]=W.useState(null),{frequency:c,measure:f,strategy:d}=r,p=W.useRef(n),m=S(),y=fc(m),v=W.useCallback(function(A){A===void 0&&(A=[]),!y.current&&l(w=>w===null?A:w.concat(A.filter(C=>!w.includes(C))))},[y]),x=W.useRef(null),_=Bc(A=>{if(m&&!t)return $w;if(!A||A===$w||p.current!==n||o!=null){const w=new Map;for(let C of n){if(!C)continue;if(o&&o.length>0&&!o.includes(C.id)&&C.rect.current){w.set(C.id,C.rect.current);continue}const k=C.node.current,T=k?new mv(f(k),k):null;C.rect.current=T,T&&w.set(C.id,T)}return w}return A},[n,o,t,m,f]);return W.useEffect(()=>{p.current=n},[n]),W.useEffect(()=>{m||v()},[t,m]),W.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),W.useEffect(()=>{m||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{v(),x.current=null},c))},[c,m,v,...i]),{droppableRects:_,measureDroppableContainers:v,measuringScheduled:o!=null};function S(){switch(d){case hc.Always:return!1;case hc.BeforeDragging:return t;default:return!t}}}function yv(n,e){return Bc(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function P3(n,e){return yv(n,e)}function q3(n){let{callback:e,disabled:t}=n;const i=sp(e),r=W.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return W.useEffect(()=>()=>r?.disconnect(),[r]),r}function ap(n){let{callback:e,disabled:t}=n;const i=sp(e),r=W.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return W.useEffect(()=>()=>r?.disconnect(),[r]),r}function H3(n){return new mv(Pa(n),n)}function Lw(n,e,t){e===void 0&&(e=H3);const[i,r]=W.useState(null);function o(){r(f=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=f??t)!=null?d:null}const p=e(n);return JSON.stringify(f)===JSON.stringify(p)?f:p})}const l=q3({callback(f){if(n)for(const d of f){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(n)){o();break}}}}),c=ap({callback:o});return qi(()=>{o(),n?(c?.observe(n),l?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),l?.disconnect())},[n]),i}function I3(n){const e=yv(n);return YA(n,e)}const jw=[];function U3(n){const e=W.useRef(n),t=Bc(i=>n?i&&i!==jw&&n&&e.current&&n.parentNode===e.current.parentNode?i:pv(n):jw,[n]);return W.useEffect(()=>{e.current=n},[n]),t}function V3(n){const[e,t]=W.useState(null),i=W.useRef(n),r=W.useCallback(o=>{const l=n0(o.target);l&&t(c=>c?(c.set(l,cy(l)),new Map(c)):null)},[]);return W.useEffect(()=>{const o=i.current;if(n!==o){l(o);const c=n.map(f=>{const d=n0(f);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,cy(d)]):null}).filter(f=>f!=null);t(c.length?new Map(c):null),i.current=n}return()=>{l(n),l(o)};function l(c){c.forEach(f=>{const d=n0(f);d?.removeEventListener("scroll",r)})}},[r,n]),W.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,l)=>va(o,l),Hi):tT(n):Hi,[n,e])}function Bw(n,e){e===void 0&&(e=[]);const t=W.useRef(null);return W.useEffect(()=>{t.current=null},e),W.useEffect(()=>{const i=n!==Hi;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?ud(n,t.current):Hi}function F3(n){W.useEffect(()=>{if(!rp)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function W3(n,e){return W.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=l=>{o(l,e)},t},{}),[n,e])}function oT(n){return W.useMemo(()=>n?y3(n):null,[n])}const Pw=[];function K3(n,e){e===void 0&&(e=Pa);const[t]=n,i=oT(t?En(t):null),[r,o]=W.useState(Pw);function l(){o(()=>n.length?n.map(f=>ZA(f)?i:new mv(e(f),f)):Pw)}const c=ap({callback:l});return qi(()=>{c?.disconnect(),l(),n.forEach(f=>c?.observe(f))},[n]),r}function aT(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return jc(e)?e:n}function Y3(n){let{measure:e}=n;const[t,i]=W.useState(null),r=W.useCallback(d=>{for(const{target:p}of d)if(jc(p)){i(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),o=ap({callback:r}),l=W.useCallback(d=>{const p=aT(d);o?.disconnect(),p&&o?.observe(p),i(p?e(p):null)},[e,o]),[c,f]=ld(l);return W.useMemo(()=>({nodeRef:c,rect:t,setRef:f}),[t,c,f])}const G3=[{sensor:sT,options:{}},{sensor:rT,options:{}}],X3={current:{}},Fh={draggable:{measure:Dw},droppable:{measure:Dw,strategy:hc.WhileDragging,frequency:fy.Optimized},dragOverlay:{measure:Pa}};class Ql extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const Q3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ql,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Fh,measureDroppableContainers:hd,windowRect:null,measuringScheduled:!1},lT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hd,draggableNodes:new Map,over:null,measureDroppableContainers:hd},qc=W.createContext(lT),cT=W.createContext(Q3);function J3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ql}}}function Z3(n,e){switch(e.type){case It.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case It.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case It.DragEnd:case It.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case It.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new Ql(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case It.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const l=new Ql(n.droppable.containers);return l.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:l}}}case It.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new Ql(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function e4(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=W.useContext(qc),o=cd(i),l=cd(t?.id);return W.useEffect(()=>{if(!e&&!i&&o&&l!=null){if(!op(o)||document.activeElement===o.target)return;const c=r.get(l);if(!c)return;const{activatorNode:f,node:d}=c;if(!f.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[f.current,d.current]){if(!p)continue;const m=WN(p);if(m){m.focus();break}}})}},[i,e,r,l,o]),null}function uT(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function t4(n){return W.useMemo(()=>({draggable:{...Fh.draggable,...n?.draggable},droppable:{...Fh.droppable,...n?.droppable},dragOverlay:{...Fh.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function n4(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=W.useRef(!1),{x:l,y:c}=typeof r=="boolean"?{x:r,y:r}:r;qi(()=>{if(!l&&!c||!e){o.current=!1;return}if(o.current||!i)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const p=t(d),m=YA(p,i);if(l||(m.x=0),c||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=XA(d);y&&y.scrollBy({top:m.y,left:m.x})}},[e,l,c,i,t])}const lp=W.createContext({...Hi,scaleX:1,scaleY:1});var vs;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(vs||(vs={}));const i4=W.memo(function(e){var t,i,r,o;let{id:l,accessibility:c,autoScroll:f=!0,children:d,sensors:p=G3,collisionDetection:m=c3,measuring:y,modifiers:v,...x}=e;const _=W.useReducer(Z3,void 0,J3),[S,A]=_,[w,C]=JN(),[k,T]=W.useState(vs.Uninitialized),O=k===vs.Initialized,{draggable:{active:E,nodes:R,translate:j},droppable:{containers:V}}=S,P=E!=null?R.get(E):null,q=W.useRef({initial:null,translated:null}),X=W.useMemo(()=>{var Ct;return E!=null?{id:E,data:(Ct=P?.data)!=null?Ct:X3,rect:q}:null},[E,P]),J=W.useRef(null),[ce,K]=W.useState(null),[U,ee]=W.useState(null),oe=fc(x,Object.values(x)),Y=Pc("DndDescribedBy",l),N=W.useMemo(()=>V.getEnabled(),[V]),z=t4(y),{droppableRects:B,measureDroppableContainers:D,measuringScheduled:L}=B3(N,{dragging:O,dependencies:[j.x,j.y],config:z.droppable}),I=L3(R,E),re=W.useMemo(()=>U?fd(U):null,[U]),ue=xo(),ge=P3(I,z.draggable.measure);n4({activeNode:E!=null?R.get(E):null,config:ue.layoutShiftCompensation,initialRect:ge,measure:z.draggable.measure});const ve=Lw(I,z.draggable.measure,ge),G=Lw(I?I.parentElement:null),Z=W.useRef({activatorEvent:null,active:null,activeNode:I,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fe=V.getNodeFor((t=Z.current.over)==null?void 0:t.id),ye=Y3({measure:z.dragOverlay.measure}),Se=(i=ye.nodeRef.current)!=null?i:I,Ee=O?(r=ye.rect)!=null?r:ve:null,nt=!!(ye.nodeRef.current&&ye.rect),it=I3(nt?null:ve),we=oT(Se?En(Se):null),De=U3(O?fe??I:null),je=K3(De),rt=uT(v,{transform:{x:j.x-it.x,y:j.y-it.y,scaleX:1,scaleY:1},activatorEvent:U,active:X,activeNodeRect:ve,containerNodeRect:G,draggingNodeRect:Ee,over:Z.current.over,overlayNodeRect:ye.rect,scrollableAncestors:De,scrollableAncestorRects:je,windowRect:we}),st=re?va(re,j):null,ht=V3(De),kn=Bw(ht),Zt=Bw(ht,[ve]),Dt=va(rt,kn),Bt=Ee?p3(Ee,rt):null,ze=X&&Bt?m({active:X,collisionRect:Bt,droppableRects:B,droppableContainers:N,pointerCoordinates:st}):null,Fn=a3(ze,"id"),[oi,Zc]=W.useState(null),$s=nt?rt:va(rt,Zt),bn=h3($s,(o=oi?.rect)!=null?o:null,ve),ai=W.useRef(null),hn=W.useCallback((Ct,At)=>{let{sensor:Kt,options:On}=At;if(J.current==null)return;const Mn=R.get(J.current);if(!Mn)return;const dn=Ct.nativeEvent,Dn=new Kt({active:J.current,activeNode:Mn,event:dn,options:On,context:Z,onAbort(Pt){if(!R.get(Pt))return;const{onDragAbort:Wn}=oe.current,ci={id:Pt};Wn?.(ci),w({type:"onDragAbort",event:ci})},onPending(Pt,Oi,Wn,ci){if(!R.get(Pt))return;const{onDragPending:dr}=oe.current,Mi={id:Pt,constraint:Oi,initialCoordinates:Wn,offset:ci};dr?.(Mi),w({type:"onDragPending",event:Mi})},onStart(Pt){const Oi=J.current;if(Oi==null)return;const Wn=R.get(Oi);if(!Wn)return;const{onDragStart:ci}=oe.current,hr={activatorEvent:dn,active:{id:Oi,data:Wn.data,rect:q}};oo.unstable_batchedUpdates(()=>{ci?.(hr),T(vs.Initializing),A({type:It.DragStart,initialCoordinates:Pt,active:Oi}),w({type:"onDragStart",event:hr}),K(ai.current),ee(dn)})},onMove(Pt){A({type:It.DragMove,coordinates:Pt})},onEnd:li(It.DragEnd),onCancel:li(It.DragCancel)});ai.current=Dn;function li(Pt){return async function(){const{active:Wn,collisions:ci,over:hr,scrollAdjustedTranslate:dr}=Z.current;let Mi=null;if(Wn&&dr){const{cancelDrop:Fr}=oe.current;Mi={activatorEvent:dn,active:Wn,collisions:ci,delta:dr,over:hr},Pt===It.DragEnd&&typeof Fr=="function"&&await Promise.resolve(Fr(Mi))&&(Pt=It.DragCancel)}J.current=null,oo.unstable_batchedUpdates(()=>{A({type:Pt}),T(vs.Uninitialized),Zc(null),K(null),ee(null),ai.current=null;const Fr=Pt===It.DragEnd?"onDragEnd":"onDragCancel";if(Mi){const ui=oe.current[Fr];ui?.(Mi),w({type:Fr,event:Mi})}})}}},[R]),kp=W.useCallback((Ct,At)=>(Kt,On)=>{const Mn=Kt.nativeEvent,dn=R.get(On);if(J.current!==null||!dn||Mn.dndKit||Mn.defaultPrevented)return;const Dn={active:dn};Ct(Kt,At.options,Dn)===!0&&(Mn.dndKit={capturedBy:At.sensor},J.current=On,hn(Kt,At))},[R,hn]),eu=j3(p,kp);F3(p),qi(()=>{ve&&k===vs.Initializing&&T(vs.Initialized)},[ve,k]),W.useEffect(()=>{const{onDragMove:Ct}=oe.current,{active:At,activatorEvent:Kt,collisions:On,over:Mn}=Z.current;if(!At||!Kt)return;const dn={active:At,activatorEvent:Kt,collisions:On,delta:{x:Dt.x,y:Dt.y},over:Mn};oo.unstable_batchedUpdates(()=>{Ct?.(dn),w({type:"onDragMove",event:dn})})},[Dt.x,Dt.y]),W.useEffect(()=>{const{active:Ct,activatorEvent:At,collisions:Kt,droppableContainers:On,scrollAdjustedTranslate:Mn}=Z.current;if(!Ct||J.current==null||!At||!Mn)return;const{onDragOver:dn}=oe.current,Dn=On.get(Fn),li=Dn&&Dn.rect.current?{id:Dn.id,rect:Dn.rect.current,data:Dn.data,disabled:Dn.disabled}:null,Pt={active:Ct,activatorEvent:At,collisions:Kt,delta:{x:Mn.x,y:Mn.y},over:li};oo.unstable_batchedUpdates(()=>{Zc(li),dn?.(Pt),w({type:"onDragOver",event:Pt})})},[Fn]),qi(()=>{Z.current={activatorEvent:U,active:X,activeNode:I,collisionRect:Bt,collisions:ze,droppableRects:B,draggableNodes:R,draggingNode:Se,draggingNodeRect:Ee,droppableContainers:V,over:oi,scrollableAncestors:De,scrollAdjustedTranslate:Dt},q.current={initial:Ee,translated:Bt}},[X,I,ze,Bt,R,Se,Ee,B,V,oi,De,Dt]),N3({...ue,delta:j,draggingRect:Bt,pointerCoordinates:st,scrollableAncestors:De,scrollableAncestorRects:je});const Op=W.useMemo(()=>({active:X,activeNode:I,activeNodeRect:ve,activatorEvent:U,collisions:ze,containerNodeRect:G,dragOverlay:ye,draggableNodes:R,droppableContainers:V,droppableRects:B,over:oi,measureDroppableContainers:D,scrollableAncestors:De,scrollableAncestorRects:je,measuringConfiguration:z,measuringScheduled:L,windowRect:we}),[X,I,ve,U,ze,G,ye,R,V,B,oi,D,De,je,z,L,we]),So=W.useMemo(()=>({activatorEvent:U,activators:eu,active:X,activeNodeRect:ve,ariaDescribedById:{draggable:Y},dispatch:A,draggableNodes:R,over:oi,measureDroppableContainers:D}),[U,eu,X,ve,A,Y,R,oi,D]);return Ne.createElement(KA.Provider,{value:C},Ne.createElement(qc.Provider,{value:So},Ne.createElement(cT.Provider,{value:Op},Ne.createElement(lp.Provider,{value:bn},d)),Ne.createElement(e4,{disabled:c?.restoreFocus===!1})),Ne.createElement(t3,{...c,hiddenTextDescribedById:Y}));function xo(){const Ct=ce?.autoScrollEnabled===!1,At=typeof f=="object"?f.enabled===!1:f===!1,Kt=O&&!Ct&&!At;return typeof f=="object"?{...f,enabled:Kt}:{enabled:Kt}}}),r4=W.createContext(null),qw="button",s4="Draggable";function o4(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=Pc(s4),{activators:l,activatorEvent:c,active:f,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:y}=W.useContext(qc),{role:v=qw,roleDescription:x="draggable",tabIndex:_=0}=r??{},S=f?.id===e,A=W.useContext(S?lp:r4),[w,C]=ld(),[k,T]=ld(),O=W3(l,e),E=fc(t);qi(()=>(m.set(e,{id:e,key:o,node:w,activatorNode:k,data:E}),()=>{const j=m.get(e);j&&j.key===o&&m.delete(e)}),[m,e]);const R=W.useMemo(()=>({role:v,tabIndex:_,"aria-disabled":i,"aria-pressed":S&&v===qw?!0:void 0,"aria-roledescription":x,"aria-describedby":p.draggable}),[i,v,_,S,x,p.draggable]);return{active:f,activatorEvent:c,activeNodeRect:d,attributes:R,isDragging:S,listeners:i?void 0:O,node:w,over:y,setNodeRef:C,setActivatorNodeRef:T,transform:A}}function fT(){return W.useContext(cT)}const a4="Droppable",l4={timeout:25};function hT(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=Pc(a4),{active:l,dispatch:c,over:f,measureDroppableContainers:d}=W.useContext(qc),p=W.useRef({disabled:t}),m=W.useRef(!1),y=W.useRef(null),v=W.useRef(null),{disabled:x,updateMeasurementsFor:_,timeout:S}={...l4,...r},A=fc(_??i),w=W.useCallback(()=>{if(!m.current){m.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(A.current)?A.current:[A.current]),v.current=null},S)},[S]),C=ap({callback:w,disabled:x||!l}),k=W.useCallback((R,j)=>{C&&(j&&(C.unobserve(j),m.current=!1),R&&C.observe(R))},[C]),[T,O]=ld(k),E=fc(e);return W.useEffect(()=>{!C||!T.current||(C.disconnect(),m.current=!1,C.observe(T.current))},[T,C]),W.useEffect(()=>(c({type:It.RegisterDroppable,element:{id:i,key:o,disabled:t,node:T,rect:y,data:E}}),()=>c({type:It.UnregisterDroppable,key:o,id:i})),[i]),W.useEffect(()=>{t!==p.current.disabled&&(c({type:It.SetDroppableDisabled,id:i,key:o,disabled:t}),p.current.disabled=t)},[i,o,t,c]),{active:l,rect:y,isOver:f?.id===i,node:T,over:f,setNodeRef:O}}function c4(n){let{animation:e,children:t}=n;const[i,r]=W.useState(null),[o,l]=W.useState(null),c=cd(t);return!t&&!i&&c&&r(c),qi(()=>{if(!o)return;const f=i?.key,d=i?.props.id;if(f==null||d==null){r(null);return}Promise.resolve(e(d,o)).then(()=>{r(null)})},[e,i,o]),Ne.createElement(Ne.Fragment,null,t,i?W.cloneElement(i,{ref:l}):null)}const u4={x:0,y:0,scaleX:1,scaleY:1};function f4(n){let{children:e}=n;return Ne.createElement(qc.Provider,{value:lT},Ne.createElement(lp.Provider,{value:u4},e))}const h4={position:"fixed",touchAction:"none"},d4=n=>op(n)?"transform 250ms ease":void 0,p4=W.forwardRef((n,e)=>{let{as:t,activatorEvent:i,adjustScale:r,children:o,className:l,rect:c,style:f,transform:d,transition:p=d4}=n;if(!c)return null;const m=r?d:{...d,scaleX:1,scaleY:1},y={...h4,width:c.width,height:c.height,top:c.top,left:c.left,transform:Hr.Transform.toString(m),transformOrigin:r&&i?i3(i,c):void 0,transition:typeof p=="function"?p(i):p,...f};return Ne.createElement(t,{className:l,style:y,ref:e},o)}),m4=n=>e=>{let{active:t,dragOverlay:i}=e;const r={},{styles:o,className:l}=n;if(o!=null&&o.active)for(const[c,f]of Object.entries(o.active))f!==void 0&&(r[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,f));if(o!=null&&o.dragOverlay)for(const[c,f]of Object.entries(o.dragOverlay))f!==void 0&&i.node.style.setProperty(c,f);return l!=null&&l.active&&t.node.classList.add(l.active),l!=null&&l.dragOverlay&&i.node.classList.add(l.dragOverlay),function(){for(const[f,d]of Object.entries(r))t.node.style.setProperty(f,d);l!=null&&l.active&&t.node.classList.remove(l.active)}},g4=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Hr.Transform.toString(e)},{transform:Hr.Transform.toString(t)}]},y4={duration:250,easing:"ease",keyframes:g4,sideEffects:m4({styles:{active:{opacity:"0"}}})};function v4(n){let{config:e,draggableNodes:t,droppableContainers:i,measuringConfiguration:r}=n;return sp((o,l)=>{if(e===null)return;const c=t.get(o);if(!c)return;const f=c.node.current;if(!f)return;const d=aT(l);if(!d)return;const{transform:p}=En(l).getComputedStyle(l),m=GA(p);if(!m)return;const y=typeof e=="function"?e:b4(e);return nT(f,r.draggable.measure),y({active:{id:o,data:c.data,node:f,rect:r.draggable.measure(f)},draggableNodes:t,dragOverlay:{node:l,rect:r.dragOverlay.measure(d)},droppableContainers:i,measuringConfiguration:r,transform:m})})}function b4(n){const{duration:e,easing:t,sideEffects:i,keyframes:r}={...y4,...n};return o=>{let{active:l,dragOverlay:c,transform:f,...d}=o;if(!e)return;const p={x:c.rect.left-l.rect.left,y:c.rect.top-l.rect.top},m={scaleX:f.scaleX!==1?l.rect.width*f.scaleX/c.rect.width:1,scaleY:f.scaleY!==1?l.rect.height*f.scaleY/c.rect.height:1},y={x:f.x-p.x,y:f.y-p.y,...m},v=r({...d,active:l,dragOverlay:c,transform:{initial:f,final:y}}),[x]=v,_=v[v.length-1];if(JSON.stringify(x)===JSON.stringify(_))return;const S=i?.({active:l,dragOverlay:c,...d}),A=c.node.animate(v,{duration:e,easing:t,fill:"forwards"});return new Promise(w=>{A.onfinish=()=>{S?.(),w()}})}}let Hw=0;function S4(n){return W.useMemo(()=>{if(n!=null)return Hw++,Hw},[n])}const x4=Ne.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:i,style:r,transition:o,modifiers:l,wrapperElement:c="div",className:f,zIndex:d=999}=n;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggableNodes:x,droppableContainers:_,dragOverlay:S,over:A,measuringConfiguration:w,scrollableAncestors:C,scrollableAncestorRects:k,windowRect:T}=fT(),O=W.useContext(lp),E=S4(m?.id),R=uT(l,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggingNodeRect:S.rect,over:A,overlayNodeRect:S.rect,scrollableAncestors:C,scrollableAncestorRects:k,transform:O,windowRect:T}),j=yv(y),V=v4({config:i,draggableNodes:x,droppableContainers:_,measuringConfiguration:w}),P=j?S.setRef:void 0;return Ne.createElement(f4,null,Ne.createElement(c4,{animation:V},m&&E?Ne.createElement(p4,{key:E,id:m.id,ref:P,as:c,activatorEvent:p,adjustScale:e,className:f,transition:o,rect:j,style:{zIndex:d,...r},transform:R},t):null))});function dT(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function w4(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function Sf(n){return n!==null&&n>=0}function _4(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function C4(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const pT=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=dT(e,i,t),l=e[r],c=o[r];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},mT="Sortable",gT=Ne.createContext({activeIndex:-1,containerId:mT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:pT,disabled:{draggable:!1,droppable:!1}});function pd(n){let{children:e,id:t,items:i,strategy:r=pT,disabled:o=!1}=n;const{active:l,dragOverlay:c,droppableRects:f,over:d,measureDroppableContainers:p}=fT(),m=Pc(mT,t),y=c.rect!==null,v=W.useMemo(()=>i.map(O=>typeof O=="object"&&"id"in O?O.id:O),[i]),x=l!=null,_=l?v.indexOf(l.id):-1,S=d?v.indexOf(d.id):-1,A=W.useRef(v),w=!_4(v,A.current),C=S!==-1&&_===-1||w,k=C4(o);qi(()=>{w&&x&&p(v)},[w,v,x,p]),W.useEffect(()=>{A.current=v},[v]);const T=W.useMemo(()=>({activeIndex:_,containerId:m,disabled:k,disableTransforms:C,items:v,overIndex:S,useDragOverlay:y,sortedRects:w4(v,f),strategy:r}),[_,m,k.draggable,k.droppable,C,v,S,f,y,r]);return Ne.createElement(gT.Provider,{value:T},e)}const A4=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return dT(t,i,r).indexOf(e)},T4=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:l,previousItems:c,previousContainerId:f,transition:d}=n;return!d||!i||c!==o&&r===l?!1:t?!0:l!==r&&e===f},E4={duration:200,easing:"ease"},yT="transform",k4=Hr.Transition.toString({property:yT,duration:0,easing:"linear"}),O4={roleDescription:"sortable"};function M4(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,l]=W.useState(null),c=W.useRef(t);return qi(()=>{if(!e&&t!==c.current&&i.current){const f=r.current;if(f){const d=Pa(i.current,{ignoreTransform:!0}),p={x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height};(p.x||p.y)&&l(p)}}t!==c.current&&(c.current=t)},[e,t,i,r]),W.useEffect(()=>{o&&l(null)},[o]),o}function vT(n){let{animateLayoutChanges:e=T4,attributes:t,disabled:i,data:r,getNewIndex:o=A4,id:l,strategy:c,resizeObserverConfig:f,transition:d=E4}=n;const{items:p,containerId:m,activeIndex:y,disabled:v,disableTransforms:x,sortedRects:_,overIndex:S,useDragOverlay:A,strategy:w}=W.useContext(gT),C=D4(i,v),k=p.indexOf(l),T=W.useMemo(()=>({sortable:{containerId:m,index:k,items:p},...r}),[m,r,k,p]),O=W.useMemo(()=>p.slice(p.indexOf(l)),[p,l]),{rect:E,node:R,isOver:j,setNodeRef:V}=hT({id:l,data:T,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...f}}),{active:P,activatorEvent:q,activeNodeRect:X,attributes:J,setNodeRef:ce,listeners:K,isDragging:U,over:ee,setActivatorNodeRef:oe,transform:Y}=o4({id:l,data:T,attributes:{...O4,...t},disabled:C.draggable}),N=IN(V,ce),z=!!P,B=z&&!x&&Sf(y)&&Sf(S),D=!A&&U,L=D&&B?Y:null,re=B?L??(c??w)({rects:_,activeNodeRect:X,activeIndex:y,overIndex:S,index:k}):null,ue=Sf(y)&&Sf(S)?o({id:l,items:p,activeIndex:y,overIndex:S}):k,ge=P?.id,ve=W.useRef({activeId:ge,items:p,newIndex:ue,containerId:m}),G=p!==ve.current.items,Z=e({active:P,containerId:m,isDragging:U,isSorting:z,id:l,index:k,items:p,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:d,wasDragging:ve.current.activeId!=null}),fe=M4({disabled:!Z,index:k,node:R,rect:E});return W.useEffect(()=>{z&&ve.current.newIndex!==ue&&(ve.current.newIndex=ue),m!==ve.current.containerId&&(ve.current.containerId=m),p!==ve.current.items&&(ve.current.items=p)},[z,ue,m,p]),W.useEffect(()=>{if(ge===ve.current.activeId)return;if(ge!=null&&ve.current.activeId==null){ve.current.activeId=ge;return}const Se=setTimeout(()=>{ve.current.activeId=ge},50);return()=>clearTimeout(Se)},[ge]),{active:P,activeIndex:y,attributes:J,data:T,rect:E,index:k,newIndex:ue,items:p,isOver:j,isSorting:z,isDragging:U,listeners:K,node:R,overIndex:S,over:ee,setNodeRef:N,setActivatorNodeRef:oe,setDroppableNodeRef:V,setDraggableNodeRef:ce,transform:fe??re,transition:ye()};function ye(){if(fe||G&&ve.current.newIndex===k)return k4;if(!(D&&!op(q)||!d)&&(z||Z))return Hr.Transition.toString({...d,property:yT})}}function D4(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}tt.Down,tt.Right,tt.Up,tt.Left;const bT=n=>{const e=yn.c(41),{accountId:t,account:i,teacherMode:r,onRemove:o,onOpen:l,parentId:c}=n,{accountTotals:f}=Pi();let d;e[0]!==i.label||e[1]!==t||e[2]!==c?(d={type:"account",accountId:t,label:i.label,parentId:c},e[0]=i.label,e[1]=t,e[2]=c,e[3]=d):d=e[3];const p=!r;let m;e[4]!==t||e[5]!==d||e[6]!==p?(m={id:t,data:d,disabled:p},e[4]=t,e[5]=d,e[6]=p,e[7]=m):m=e[7];const{attributes:y,listeners:v,setNodeRef:x,transform:_,transition:S,isDragging:A}=vT(m);let w;e[8]!==_?(w=Hr.Transform.toString(_),e[8]=_,e[9]=w):w=e[9];const C=A?.5:1;let k;e[10]!==w||e[11]!==C||e[12]!==S?(k={transform:w,transition:S,opacity:C},e[10]=w,e[11]=C,e[12]=S,e[13]=k):k=e[13];const T=k;let O;e[14]!==y||e[15]!==v||e[16]!==r?(O=r&&H.jsx("span",{...y,...v,className:"cursor-grab active:cursor-grabbing mr-2 text-gray-400 hover:text-gray-600",onClick:R4,children:""}),e[14]=y,e[15]=v,e[16]=r,e[17]=O):O=e[17];let E;e[18]!==i.label||e[19]!==t?(E=H.jsxs("div",{lang:"de",className:"min-w-0 hyphens-auto break-words flex-1",children:[t," ",i.label]}),e[18]=i.label,e[19]=t,e[20]=E):E=e[20];let R;e[21]!==o||e[22]!==r?(R=r&&H.jsx("button",{className:"bg-transparent hover:bg-gray-100 mr-1 px-1 py-1 rounded",onClick:J=>{J.stopPropagation(),o()},children:""}),e[21]=o,e[22]=r,e[23]=R):R=e[23];let j;e[24]!==t||e[25]!==f?(j=Math.abs(cc(f,t).balance).toFixed(2),e[24]=t,e[25]=f,e[26]=j):j=e[26];let V;e[27]!==j?(V=H.jsxs("span",{className:"text-nowrap whitespace-nowrap",children:[j," "]}),e[27]=j,e[28]=V):V=e[28];let P;e[29]!==V||e[30]!==O||e[31]!==E||e[32]!==R?(P=H.jsxs("div",{className:"flex justify-between items-center",children:[O,E,R,V]}),e[29]=V,e[30]=O,e[31]=E,e[32]=R,e[33]=P):P=e[33];let q;e[34]!==l||e[35]!==P?(q=H.jsx("button",{className:"mt-1 bg-green-100 hover:bg-green-400 border border-gray-300 rounded px-2 py-1 w-full text-left",lang:"de",onClick:l,children:P}),e[34]=l,e[35]=P,e[36]=q):q=e[36];let X;return e[37]!==x||e[38]!==T||e[39]!==q?(X=H.jsx("div",{ref:x,style:T,className:"flex",children:q}),e[37]=x,e[38]=T,e[39]=q,e[40]=X):X=e[40],X};function R4(n){return n.stopPropagation()}const ST=W.createContext(null),N4=n=>{const e=yn.c(10),{children:t}=n,[i,r]=W.useState(null);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=new Set,e[0]=o):o=e[0];const[l,c]=W.useState(o);let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=S=>{c(A=>new Set(A).add(S))},e[1]=f):f=e[1];const d=f;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{c(new Set)},e[2]=p):p=e[2];const m=p;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=S=>{c(A=>{const w=new Set(A);return w.has(S)?w.delete(S):w.add(S),w})},e[3]=y):y=e[3];const v=y;let x;e[4]!==i||e[5]!==l?(x={dropIndicator:i,setDropIndicator:r,openPositionIds:l,setOpenPositionIds:c,addOpenPositionId:d,clearOpenPositionIds:m,toggleOpenPositionId:v},e[4]=i,e[5]=l,e[6]=x):x=e[6];let _;return e[7]!==t||e[8]!==x?(_=H.jsx(ST.Provider,{value:x,children:t}),e[7]=t,e[8]=x,e[9]=_):_=e[9],_},xT=()=>{const n=W.useContext(ST);if(!n)throw new Error("useDragContext must be used inside <DragProvider>");return n},hy={standard:0,edit:1,teacher:2},wT=W.createContext(null);function ws(n,e){return hy[n]>=hy[e]}const s0=Object.entries(hy).sort((n,e)=>n[1]-e[1]).map(([n])=>n),Iw=n=>{const e=s0.indexOf(n);return s0[(e+1)%s0.length]},z4=n=>{const e=yn.c(9),{children:t}=n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new URLSearchParams(window.location.search).get("mode"),e[0]=i):i=e[0];const r=i==="teacher",[o,l]=W.useState(r?"teacher":"standard");let c;e[1]!==o?(c=()=>{let m=Iw(o);m==="teacher"&&!r&&(m=Iw(m)),l(m)},e[1]=o,e[2]=c):c=e[2];const f=c;let d;e[3]!==o||e[4]!==f?(d={appMode:o,isTeacherFromUrl:r,setAppMode:l,cycleMode:f},e[3]=o,e[4]=f,e[5]=d):d=e[5];let p;return e[6]!==t||e[7]!==d?(p=H.jsx(wT.Provider,{value:d,children:t}),e[6]=t,e[7]=d,e[8]=p):p=e[8],p},cp=()=>{const n=W.useContext(wT);if(!n)throw new Error("useTeacherMode must be used within TeacherModeProvider");return n};function dc(n,e){let t=0;for(const i of n.accounts??[])t+=cc(e,i).balance;for(const i of n.positions??[])t+=dc(i,e);return t}const _T=n=>{const e=yn.c(85),{position:t,parentId:i,level:r}=n,o=r===void 0?0:r;W.useState(!1);const{interactiveBalanceData:l,updatePositionLabel:c,addNewPositionTo:f,accountTotals:d,addAccountTo:p,deletePosition:m,removeAccountFrom:y}=Pi(),{dropIndicator:v,openPositionIds:x,toggleOpenPositionId:_}=xT();let S;e[0]!==x||e[1]!==t.id?(S=x.has(t.id),e[0]=x,e[1]=t.id,e[2]=S):S=e[2];const A=S,w=l.accounts,{openWindow:C}=La(),k=dc(t,d),T=Math.abs(k),{appMode:O}=cp(),[E,R]=W.useState(!1),[j,V]=W.useState(t.label);let P;e[3]!==l.balanceSheet?(P=VA(l.balanceSheet),e[3]=l.balanceSheet,e[4]=P):P=e[4];const q=P;let X;if(e[5]!==q||e[6]!==l.accounts){let ze;e[8]!==q?(ze=Fn=>!q.has(Fn.id),e[8]=q,e[9]=ze):ze=e[9],X=l.accounts.filter(ze),e[5]=q,e[6]=l.accounts,e[7]=X}else X=e[7];const J=X,[ce,K]=W.useState(J.length>0?J[0].id:"");let U;e[10]!==K||e[11]!==J[0]||e[12]!==J.length?(U=()=>{J.length>0?K(J[0].id):K("")},e[10]=K,e[11]=J[0],e[12]=J.length,e[13]=U):U=e[13];let ee;e[14]!==J?(ee=[J],e[14]=J,e[15]=ee):ee=e[15],W.useEffect(U,ee);const oe=W.useRef(null);let Y;e[16]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>oe.current?.getBoundingClientRect(),e[16]=Y):Y=e[16];let N;e[17]!==i||e[18]!==t.id||e[19]!==t.label?(N={type:"position",positionId:t.id,parentId:i,label:t.label,getRect:Y},e[17]=i,e[18]=t.id,e[19]=t.label,e[20]=N):N=e[20];let z;e[21]!==t.id||e[22]!==N?(z={id:t.id,data:N},e[21]=t.id,e[22]=N,e[23]=z):z=e[23];const{attributes:B,listeners:D,setNodeRef:L,transform:I,isDragging:re}=vT(z);Hr.Transform.toString(I);const ue=`ml-${o} mt-1`;let ge;e[24]!==v||e[25]!==t.id?(ge=v?.targetId===t.id&&v.intent==="before"&&H.jsx("div",{className:"h-1 bg-blue-400 rounded mx-2"}),e[24]=v,e[25]=t.id,e[26]=ge):ge=e[26];const ve="flex",G="button";let Z;e[27]!==L?(Z=ze=>{L(ze),oe.current=ze},e[27]=L,e[28]=Z):Z=e[28];const fe=0,ye=`bg-white hover:bg-blue-100 border border-gray-300 rounded px-2 py-1 w-full text-left cursor-pointer ${v?.targetId===t.id&&v.intent==="inside"?"ring-2 ring-blue-400":""}`;let Se,Ee;e[29]!==t.id||e[30]!==_?(Se=()=>_(t.id),Ee=ze=>{(ze.key==="Enter"||ze.key===" ")&&(ze.preventDefault(),_(t.id))},e[29]=t.id,e[30]=_,e[31]=Se,e[32]=Ee):(Se=e[31],Ee=e[32]);const nt="flex justify-between items-center";let it;e[33]!==O||e[34]!==B||e[35]!==D?(it=ws(O,"edit")&&H.jsx("span",{...B,...D,className:"cursor-grab mr-2",onClick:$4,children:""}),e[33]=O,e[34]=B,e[35]=D,e[36]=it):it=e[36];let we;e[37]!==E||e[38]!==j||e[39]!==t.label?(we=E?H.jsx("div",{className:"min-w-0 hyphens-auto flex-1",children:H.jsx("input",{type:"text",className:"h-5 px-1 text-sm border border-gray-300 rounded box-border",value:j,onClick:L4,onChange:ze=>{V(ze.target.value)}})}):H.jsx("div",{className:"min-w-0 hyphens-auto flex-1",children:t.label}),e[37]=E,e[38]=j,e[39]=t.label,e[40]=we):we=e[40];let De;e[41]!==O||e[42]!==m||e[43]!==E||e[44]!==j||e[45]!==t.id||e[46]!==c?(De=ws(O,"edit")&&H.jsxs("div",{children:[E?H.jsx("button",{className:"bg-transparent hover:bg-gray-100 mr-1 px-1 py-1 rounded",onClick:ze=>{ze.stopPropagation(),c(String(t.id),j),R(!1)},children:""}):H.jsx("button",{className:"bg-transparent hover:bg-gray-100 mr-1 px-1 py-1 rounded",onClick:ze=>{ze.stopPropagation(),R(!0)},children:""}),H.jsx("button",{className:"bg-transparent hover:bg-gray-100 mr-1 px-1 py-1 rounded",onClick:ze=>{ze.stopPropagation(),m(String(t.id))},children:""})]}),e[41]=O,e[42]=m,e[43]=E,e[44]=j,e[45]=t.id,e[46]=c,e[47]=De):De=e[47];const je="text-nowrap whitespace-nowrap ml-2",rt=T.toFixed(2);let st;e[48]!==rt?(st=H.jsxs("div",{className:je,children:[rt," "]}),e[48]=rt,e[49]=st):st=e[49];let ht;e[50]!==it||e[51]!==we||e[52]!==De||e[53]!==st?(ht=H.jsxs("div",{className:nt,children:[it,we,De,st]}),e[50]=it,e[51]=we,e[52]=De,e[53]=st,e[54]=ht):ht=e[54];let kn;e[55]!==Z||e[56]!==ye||e[57]!==Se||e[58]!==Ee||e[59]!==ht?(kn=H.jsx("div",{className:ve,children:H.jsx("div",{role:G,ref:Z,tabIndex:fe,className:ye,onClick:Se,onKeyDown:Ee,children:ht})}),e[55]=Z,e[56]=ye,e[57]=Se,e[58]=Ee,e[59]=ht,e[60]=kn):kn=e[60];let Zt;e[61]!==v||e[62]!==t.id?(Zt=v?.targetId===t.id&&v.intent==="after"&&H.jsx("div",{className:"h-1 bg-blue-400 rounded mx-2"}),e[61]=v,e[62]=t.id,e[63]=Zt):Zt=e[63];let Dt;e[64]!==w||e[65]!==p||e[66]!==f||e[67]!==O||e[68]!==A||e[69]!==o||e[70]!==ce||e[71]!==C||e[72]!==t.accounts||e[73]!==t.id||e[74]!==t.positions||e[75]!==y||e[76]!==K||e[77]!==J?(Dt=A&&H.jsxs("div",{className:"ml-4",children:[ws(O,"edit")&&H.jsxs("div",{className:"flex",children:[H.jsx("button",{className:"bg-green-500 hover:bg-green-700 px-1 py-1 mt-1 mr-1 rounded",onClick:ze=>f(String(t.id)),children:"+ Position"}),H.jsxs("div",{role:"button",tabIndex:0,className:"flex items-center bg-green-500 hover:bg-green-700 px-1 py-1 mt-1 mr-1 rounded gap-1",onClick:()=>{ce?p(String(t.id),ce):Me.info("Bitte ein Konto auswhlen.")},children:[H.jsx("span",{children:"+ Konto"}),H.jsx("select",{className:"h-5 w-20 text-sm rounded",onClick:ze=>{J.length===0&&Me.info("Kein verfgbares Konto. Bitte weitere Konten anlegen."),ze.stopPropagation()},onChange:ze=>{K(ze.target.value)},children:J.length>0?J.map(j4):H.jsx("option",{className:"text-xs"},"noAccAvailable")})]})]}),H.jsx(pd,{items:t.accounts??[],children:t.accounts?.map(ze=>{const Fn=w.find(oi=>oi.id===ze);if(Fn)return H.jsx(bT,{accountId:ze,account:Fn,teacherMode:ws(O,"edit"),parentId:t.id,onRemove:()=>y(t.id,ze),onOpen:()=>C({type:"Account",payload:{id:ze,label:Fn.label}})},ze)})}),H.jsx(pd,{items:t.positions.map(B4)??[],children:t.positions?.map(ze=>H.jsx(_T,{position:ze,parentId:t.id,level:o+1},ze.id))})]}),e[64]=w,e[65]=p,e[66]=f,e[67]=O,e[68]=A,e[69]=o,e[70]=ce,e[71]=C,e[72]=t.accounts,e[73]=t.id,e[74]=t.positions,e[75]=y,e[76]=K,e[77]=J,e[78]=Dt):Dt=e[78];let Bt;return e[79]!==ue||e[80]!==ge||e[81]!==kn||e[82]!==Zt||e[83]!==Dt?(Bt=H.jsxs("div",{className:ue,children:[ge,kn,Zt,Dt]}),e[79]=ue,e[80]=ge,e[81]=kn,e[82]=Zt,e[83]=Dt,e[84]=Bt):Bt=e[84],Bt};function $4(n){return n.stopPropagation()}function L4(n){return n.stopPropagation()}function j4(n){return H.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function B4(n){return n.id}const Uw=n=>{const e=yn.c(58),{title:t,positions:i,accounts:r}=n,{accountTotals:o,interactiveBalanceData:l,setInteractiveBalanceData:c,addAccountTo:f,removeAccountFrom:d}=Pi(),{appMode:p}=cp(),{openWindow:m}=La();let y;e[0]!==l.balanceSheet?(y=VA(l.balanceSheet),e[0]=l.balanceSheet,e[1]=y):y=e[1];const v=y;let x;if(e[2]!==v||e[3]!==l.accounts){let z;e[5]!==v?(z=B=>!v.has(B.id),e[5]=v,e[6]=z):z=e[6],x=l.accounts.filter(z),e[2]=v,e[3]=l.accounts,e[4]=x}else x=e[4];const _=x,[S,A]=W.useState(_.length>0?_[0].id:""),w=t==="Aktiva"?"assets":"liabilitiesAndEquity";let C;e[7]!==_[0]||e[8]!==_.length?(C=()=>{_.length>0?A(_[0].id):A("")},e[7]=_[0],e[8]=_.length,e[9]=C):C=e[9];let k;e[10]!==_?(k=[_],e[10]=_,e[11]=k):k=e[11],W.useEffect(C,k);for(const z of i??[])dc(z,o);let T;e[12]!==c||e[13]!==t?(T=()=>{const z=t==="Aktiva",B={label:"Neue Position",accounts:[],positions:[],id:fv()};c(D=>{const L=z?"assets":"liabilitiesAndEquity";return{...D,balanceSheet:{...D.balanceSheet,[L]:{...D.balanceSheet[L],positions:[...D.balanceSheet[L].positions??[],B]}}}})},e[12]=c,e[13]=t,e[14]=T):T=e[14];const O=T,E=t==="Aktiva"?"assets":"liabilitiesAndEquity",R=t==="Aktiva"?"assets":"liabilitiesAndEquity";let j;e[15]!==R?(j={type:"column",parentId:R},e[15]=R,e[16]=j):j=e[16];let V;e[17]!==E||e[18]!==j?(V={id:E,data:j},e[17]=E,e[18]=j,e[19]=V):V=e[19];const{setNodeRef:P}=hT(V);let q;e[20]!==t?(q=H.jsx("h2",{className:"text-xl font-bold mb-4",children:t}),e[20]=t,e[21]=q):q=e[21];let X;e[22]!==f||e[23]!==O||e[24]!==p||e[25]!==S||e[26]!==t||e[27]!==_?(X=ws(p,"edit")&&H.jsxs("div",{className:"flex",children:[H.jsx("button",{className:"bg-green-500 hover:bg-green-700 px-1 py-1 mt-1 mr-1 rounded",onClick:O,children:"+ Position"}),H.jsxs("div",{role:"button",tabIndex:0,className:"flex items-center bg-green-500 hover:bg-green-700 px-1 py-1 mt-1 mr-1 rounded gap-1",onClick:()=>{S?f(t==="Aktiva"?"assets":"liabilitiesAndEquity",S):Me.info("Bitte ein Konto auswhlen.")},children:[H.jsx("span",{children:"+ Konto"}),H.jsx("select",{className:"h-5 w-20 text-sm rounded",onClick:z=>{_.length===0&&Me.info("Kein verfgbares Konto. Bitte weitere Konten anlegen."),z.stopPropagation()},onChange:z=>{A(z.target.value)},children:_.length>0?_.map(P4):H.jsx("option",{className:"text-xs"},"noAccAvailable")})]})]}),e[22]=f,e[23]=O,e[24]=p,e[25]=S,e[26]=t,e[27]=_,e[28]=X):X=e[28];let J;e[29]!==P||e[30]!==q||e[31]!==X?(J=H.jsxs("div",{ref:P,children:[q,X]}),e[29]=P,e[30]=q,e[31]=X,e[32]=J):J=e[32];let ce;e[33]!==r?(ce=r??[],e[33]=r,e[34]=ce):ce=e[34];let K;e[35]!==r||e[36]!==p||e[37]!==l||e[38]!==m||e[39]!==w||e[40]!==d||e[41]!==t?(K=r?.map(z=>{const B=l.accounts.find(D=>D.id===z);if(B)return H.jsx(bT,{accountId:z,account:B,teacherMode:ws(p,"edit"),parentId:w,onRemove:()=>d(t==="Aktiva"?"assets":"liabilitiesAndEquity",z),onOpen:()=>m({type:"Account",payload:{id:z,label:B.label}})},z)}),e[35]=r,e[36]=p,e[37]=l,e[38]=m,e[39]=w,e[40]=d,e[41]=t,e[42]=K):K=e[42];let U;e[43]!==ce||e[44]!==K?(U=H.jsx(pd,{items:ce,children:K}),e[43]=ce,e[44]=K,e[45]=U):U=e[45];let ee;e[46]!==i?(ee=i?.map(q4)??[],e[46]=i,e[47]=ee):ee=e[47];let oe;e[48]!==i||e[49]!==t?(oe=i?.map(z=>H.jsx(_T,{parentId:t==="Aktiva"?"assets":"liabilitiesAndEquity",position:z},z.id)),e[48]=i,e[49]=t,e[50]=oe):oe=e[50];let Y;e[51]!==ee||e[52]!==oe?(Y=H.jsx(pd,{items:ee,strategy:H4,children:oe}),e[51]=ee,e[52]=oe,e[53]=Y):Y=e[53];let N;return e[54]!==J||e[55]!==U||e[56]!==Y?(N=H.jsxs("div",{className:"p-4",children:[J,U,Y]}),e[54]=J,e[55]=U,e[56]=Y,e[57]=N):N=e[57],N};function P4(n){return H.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function q4(n){return n.id}function H4(){return null}const I4=()=>{const{interactiveBalanceData:n,accountTotals:e,reorderAccountsInPosition:t,reorderPositionsInPosition:i,moveAccount:r,movePosition:o}=Pi(),{dropIndicator:l,setDropIndicator:c,addOpenPositionId:f,clearOpenPositionIds:d,setOpenPositionIds:p,openPositionIds:m}=xT(),[y,v]=W.useState(null),x=W.useRef({x:0,y:0}),[_,S]=W.useState(null),[A,w]=W.useState(null),[C,k]=W.useState(new Set),T=W.useRef(null),O=W.useRef(null),E=W.useRef(null);W.useEffect(()=>{const U=ee=>{if(x.current={x:ee.clientX,y:ee.clientY},_&&A&&T.current){const oe=T.current,Y=(ee.clientY-oe.top)/oe.height,N=Y<.3?"before":Y>.7?"after":"inside";c({targetId:A,intent:N})}A&&A!==E.current&&(O.current&&clearTimeout(O.current),E.current=A,O.current=setTimeout(()=>{f(A)},1e3))};return window.addEventListener("pointermove",U),()=>window.removeEventListener("pointermove",U)},[_,A]);const R=n.balanceSheet;let j=0,V=0;for(const U of R.assets.positions??[])j+=dc(U,e)??0;for(const U of R.assets.accounts??[])j+=cc(e,U).balance;for(const U of R.liabilitiesAndEquity.positions??[])V+=dc(U,e)??0;for(const U of R.liabilitiesAndEquity.accounts??[])V+=cc(e,U).balance;const P=Math.abs(j)===Math.abs(V),q=U=>{const ee=X(U.over),{active:oe,over:Y}=U;if(!Y||oe.id===Y.id)return;const N=oe.data.current?.type,z=Y.data.current?.type,B=oe.data.current?.parentId,D=Y.data.current?.parentId,L=Y.id;if(N==="position")if(z==="position")if(console.log(`Drop intent: ${ee}`),ee==="before"||ee==="after")if(B===D){const ge=J(B),ve=ge.indexOf(String(oe.id)),G=ge.indexOf(String(Y.id)),Z=ee==="after"?G+1:G;console.log(`Reordering in ${D}`),i(B,ve,Z)}else{console.log(`Moving to ${D}`),o(String(oe.id),B,D);const ge=J(D),ve=ge.indexOf(String(oe.id)),G=ge.indexOf(String(Y.id)),Z=ee==="after"?G+1:G;console.log(`Reordering in ${D}`),i(D,ve,Z)}else console.log(`Moving to ${Y.id}`),o(String(oe.id),B,String(Y.id));else z==="column"?o(String(oe.id),B,String(Y.id)):z==="account"&&oe.id!=D&&o(String(oe.id),B,D);if(N==="account"){const ge=String(oe.id);if(z==="account")if(B===D){const ve=K(D),G=ve?.findIndex(fe=>fe===oe.id),Z=ve?.findIndex(fe=>fe===Y.id);G!==void 0&&Z!==void 0&&G!==-1&&Z!==-1&&(console.log(`Reordering accounts inside ${B}`),t(B,G,Z))}else{r(ge,B,D);const ve=K(D),G=ve?.findIndex(fe=>fe===oe.id),Z=ve?.findIndex(fe=>fe===Y.id);t(D,G,Z)}else z==="position"?ee==="before"||ee==="after"?r(ge,B,D):ee==="inside"&&r(ge,B,String(L)):z==="column"&&(console.log(`Moving account from ${B} to ${L}`),r(ge,B,String(L)))}let I=[];const re=[...R.assets.positions,...R.liabilitiesAndEquity.positions];try{I=ce(z==="account"||z==="position"&&ee!="inside"?D:String(L),re)??[]}catch(ge){console.log(ge)}const ue=new Set([...Array.from(C),...I,z==="account"||z==="position"&&ee!="inside"?D:String(L)]);p(ue)};function X(U){const ee=U?.rect;if(!ee)return"inside";const oe=(x.current.y-ee.top)/ee.height;return oe<.3?"before":oe>.7?"after":"inside"}function J(U){if(U==="assets")return R.assets.positions?.map(ee=>ee.id);if(U==="liabilitiesAndEquity")return R.liabilitiesAndEquity.positions?.map(ee=>ee.id);{const ee=Y=>{for(const N of Y){if(N.id===U)return N.positions.map(z=>z.id);if(N.positions&&N.positions.length>0){const z=ee(N.positions);if(z)return z}}};let oe=ee(R.assets.positions);return(!oe||oe.length===0)&&(oe=ee(R.liabilitiesAndEquity.positions)),oe}}function ce(U,ee,oe=[]){for(const Y of ee){if(Y.id===U)return oe;const N=ce(U,Y.positions??[],[...oe,Y.id]);if(N)return N}return null}function K(U){let ee;if(U==="assets")ee=R.assets.accounts;else if(U==="liabilitiesAndEquity")ee=R.liabilitiesAndEquity.accounts;else{const oe=Y=>{for(const N of Y){if(N.id===U)return N.accounts;if(N.positions&&N.positions.length>0){const z=oe(N.positions);if(z)return z}}};ee=oe(R.assets.positions),(!ee||ee.length===0)&&(ee=oe(R.liabilitiesAndEquity.positions))}return ee}return H.jsx(i4,{collisionDetection:f3,onDragStart:U=>{k(m),S(String(U.active.id)),v({type:U.active.data.current?.type,label:U.active.data.current?.label})},onDragOver:U=>{if(!U.over){w(null),c(null),T.current=null;return}w(String(U.over.id)),T.current=U.over.rect;const ee=X(U.over);c({targetId:String(U.over.id),intent:ee})},onDragEnd:U=>{O.current&&clearTimeout(O.current),E.current=null,S(null),w(null),c(null),q(U)},children:H.jsxs("div",{className:"flex w-2/5 bg-white border-black border rounded-md border-double",children:[H.jsxs("div",{className:"w-1/2",children:[H.jsx(Uw,{title:"Aktiva",positions:R.assets.positions,accounts:R.assets.accounts}),H.jsx("div",{className:"p-4",children:H.jsxs("span",{className:`text-lg font-semibold ${P?"text-green-600":"text-red-600"}`,children:["Summe ",Math.abs(j).toFixed(2)," "]})})]}),H.jsxs("div",{className:"w-1/2",children:[H.jsx(Uw,{title:"Passiva",positions:R.liabilitiesAndEquity.positions,accounts:R.liabilitiesAndEquity.accounts}),H.jsx("div",{className:"p-4",children:H.jsxs("span",{className:`text-lg font-semibold ${P?"text-green-600":"text-red-600"}`,children:["Summe ",Math.abs(V).toFixed(2)," "]})})]}),H.jsx(x4,{children:y&&H.jsx("div",{className:"bg-white border border-gray-400 rounded px-2 py-1 shadow-lg opacity-90",children:y.label})})]})})},Vw=n=>{const e=yn.c(29),{accountId:t,lines:i,type:r}=n,{openWindow:o}=La(),{setDraftEntry:l,draftEntry:c,interactiveBalanceData:f}=Pi(),[d,p]=W.useState(""),m=Number(d);let y;e[0]!==t||e[1]!==c||e[2]!==f||e[3]!==o||e[4]!==l||e[5]!==r?(y=k=>{if(!(k<=0)){if(Number.isNaN(k)){Me.error("Bitte einen gltigen Betrag eingeben.");return}if(c)l(T=>({...T,entryLines:[...T.entryLines??[],{accountId:t,amount:k,entryType:r}]}));else{const O=(f.journalEntries??[]).reduce(U4,0)+1;l({id:O,description:"",entryLines:[{accountId:t,amount:k,entryType:r}]})}p(""),o({type:"JournalEntry",payload:{isDraft:!0}})}},e[0]=t,e[1]=c,e[2]=f,e[3]=o,e[4]=l,e[5]=r,e[6]=y):y=e[6];const v=y;let x;e[7]!==t||e[8]!==c||e[9]!==o||e[10]!==l?(x=()=>{c?.entryLines&&(l({...c,entryLines:c.entryLines.filter(k=>k.accountId!==t)}),o({type:"JournalEntry",payload:{isDraft:!0}}))},e[7]=t,e[8]=c,e[9]=o,e[10]=l,e[11]=x):x=e[11];const _=x;console.log("lines changes: ",i);let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=H.jsx("thead",{children:H.jsxs("tr",{className:"text-left border-b border-solid",children:[H.jsx("th",{className:"border-r w-[12%] px-1 border-solid",children:"ID"}),H.jsx("th",{className:"w-[45%] px-1",children:"Beschreibung"}),H.jsx("th",{className:"border-l w-[33%] px-1 border-solid",children:"Betrag"}),H.jsx("th",{className:"w-[10%]"})]})}),e[12]=S):S=e[12];let A;if(e[13]!==i||e[14]!==o||e[15]!==_){let k;e[17]!==o||e[18]!==_?(k=(T,O)=>H.jsxs("tr",{className:"cursor-pointer align-top border-t boder-solid transition-all duration-100 hover:scale-95",onClick:()=>o({type:"JournalEntry",payload:{isDraft:T.draft,id:T.draft?"Neue Buchung":T.entryId}}),children:[H.jsx("td",{className:"whitespace-nowrap border-r border-solid text-center align-middle",children:T.draft?"Neu":T.entryId}),H.jsx("td",{className:"text-xs break-words",children:T.description}),H.jsxs("td",{className:"whitespace-nowrap text-end align-middle border-l border-solid",children:[T.line.amount.toFixed(2)," "]}),H.jsx("td",{children:T.draft&&H.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:()=>_(),children:"-"})})]},O),e[17]=o,e[18]=_,e[19]=k):k=e[19],A=i.map(k),e[13]=i,e[14]=o,e[15]=_,e[16]=A}else A=e[16];let w;e[20]!==t||e[21]!==v||e[22]!==m||e[23]!==c?.entryLines||e[24]!==d?(w=!c?.entryLines.some(k=>k.accountId===t)&&H.jsxs("tr",{className:"align-top border-t boder-solid",children:[H.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap border-r border-solid",children:"Neu"}),H.jsx("td",{}),H.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-right border-l border-solid",children:H.jsx("input",{type:"text",className:"w-full text-xs",value:d,onChange:k=>p(k.target.value)})}),H.jsx("td",{children:H.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>v(m),children:"+"})})]}),e[20]=t,e[21]=v,e[22]=m,e[23]=c?.entryLines,e[24]=d,e[25]=w):w=e[25];let C;return e[26]!==A||e[27]!==w?(C=H.jsxs("table",{className:"w-full table-fixed border-collapse",children:[S,H.jsxs("tbody",{children:[A,w]})]}),e[26]=A,e[27]=w,e[28]=C):C=e[28],C};function U4(n,e){return Math.max(n,e.id)}const V4=n=>{const e=yn.c(58),{id:t}=n,{interactiveBalanceData:i,draftEntry:r,accountTotals:o}=Pi();let l,c,f;if(e[0]!==r||e[1]!==t||e[2]!==i.journalEntries){const V=r?[...i.journalEntries??[],r]:i.journalEntries??[];l=t;const P=V?.flatMap(q=>{const X=q===r,J=q.entryLines.find(ce=>ce.accountId===l);return J?[{entryId:q.id,description:q.description,line:J,draft:X}]:[]})??[];c=P.filter(F4),f=P.filter(W4),e[0]=r,e[1]=t,e[2]=i.journalEntries,e[3]=l,e[4]=c,e[5]=f}else l=e[3],c=e[4],f=e[5];const d=f;console.log("debitLines changed: ",c);let p,m,y,v,x,_,S,A,w,C;if(e[6]!==l||e[7]!==o||e[8]!==d||e[9]!==c){const V=cc(o,l),P=V.debit,q=V.credit;p=V.balance,e[20]===Symbol.for("react.memo_cache_sentinel")?(C=H.jsxs("div",{className:"flex justify-between",children:[H.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Soll"}),H.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Haben"})]}),e[20]=C):C=e[20];let X;e[21]!==l||e[22]!==c?(X=H.jsx("div",{className:"pr-1 border-r-2 border-solid border-black w-full pb-1",children:H.jsx(Vw,{lines:c,accountId:l,type:"debit"})}),e[21]=l,e[22]=c,e[23]=X):X=e[23];let J;e[24]!==l||e[25]!==d?(J=H.jsx("div",{className:"pl-1 border-l-2 border-solid border-black w-full pb-1",children:H.jsx(Vw,{lines:d,accountId:l,type:"credit"})}),e[24]=l,e[25]=d,e[26]=J):J=e[26],e[27]!==X||e[28]!==J?(m=H.jsxs("div",{className:"grid grid-cols-2 border-t-4 border-solid border-black",children:[X,J]}),e[27]=X,e[28]=J,e[29]=m):m=e[29],A="grid grid-cols-2 border-t-2 border-solid border-gray-300 -mt-1";let ce;e[30]===Symbol.for("react.memo_cache_sentinel")?(ce=H.jsxs("div",{className:"inline-flex items-center gap-1",children:[H.jsx("span",{className:"text-lg",children:"Summe"}),H.jsx("span",{className:"text-lg font-normal font-mono",children:""})]}),e[30]=ce):ce=e[30];const K=H.jsxs("div",{className:"flex justify-between items-center",children:[ce,H.jsxs("div",{className:"text-lg",children:[P.toFixed(2)," "]})]});let U;e[31]!==p?(U=p<=0&&H.jsxs("div",{className:"flex justify-between",children:[H.jsx("div",{className:"text-lg",children:"Saldo"}),H.jsxs("div",{className:"text-lg",children:[(-1*p).toFixed(2)," "]})]}),e[31]=p,e[32]=U):U=e[32],e[33]!==K||e[34]!==U?(w=H.jsxs("div",{className:" p-1 border-r-2 border-solid border-black",children:[K,U]}),e[33]=K,e[34]=U,e[35]=w):w=e[35],S=" p-1 border-l-2 boder-solid border-black",x="flex justify-between items-center",e[36]===Symbol.for("react.memo_cache_sentinel")?(_=H.jsxs("div",{className:"inline-flex items-center gap-1",children:[H.jsx("span",{className:"text-lg",children:"Summe"}),H.jsx("span",{className:"text-lg font-normal font-mono",children:""})]}),e[36]=_):_=e[36],y="text-lg",v=q.toFixed(2),e[6]=l,e[7]=o,e[8]=d,e[9]=c,e[10]=p,e[11]=m,e[12]=y,e[13]=v,e[14]=x,e[15]=_,e[16]=S,e[17]=A,e[18]=w,e[19]=C}else p=e[10],m=e[11],y=e[12],v=e[13],x=e[14],_=e[15],S=e[16],A=e[17],w=e[18],C=e[19];let k;e[37]!==y||e[38]!==v?(k=H.jsxs("div",{className:y,children:[v," "]}),e[37]=y,e[38]=v,e[39]=k):k=e[39];let T;e[40]!==k||e[41]!==x||e[42]!==_?(T=H.jsxs("div",{className:x,children:[_,k]}),e[40]=k,e[41]=x,e[42]=_,e[43]=T):T=e[43];let O;e[44]!==p?(O=p>0&&H.jsxs("div",{className:"flex justify-between",children:[H.jsx("div",{className:"text-lg",children:"Saldo"}),H.jsxs("div",{className:"text-lg",children:[p.toFixed(2)," "]})]}),e[44]=p,e[45]=O):O=e[45];let E;e[46]!==T||e[47]!==O||e[48]!==S?(E=H.jsxs("div",{className:S,children:[T,O]}),e[46]=T,e[47]=O,e[48]=S,e[49]=E):E=e[49];let R;e[50]!==E||e[51]!==A||e[52]!==w?(R=H.jsxs("div",{className:A,children:[w,E]}),e[50]=E,e[51]=A,e[52]=w,e[53]=R):R=e[53];let j;return e[54]!==m||e[55]!==R||e[56]!==C?(j=H.jsxs("div",{children:[C,m,R]}),e[54]=m,e[55]=R,e[56]=C,e[57]=j):j=e[57],j};function F4(n){return n.line.entryType==="debit"}function W4(n){return n.line.entryType==="credit"}const Fw=n=>n.reduce((e,t)=>e+t.amount,0);function K4(n){const e=yn.c(68),{entryId:t,isDraft:i}=n,r=i===void 0?!1:i,{interactiveBalanceData:o,draftEntry:l,setDraftEntry:c,cancelDraft:f,commitDraft:d}=Pi(),{openWindow:p,closeWindow:m}=La(),[y,v]=W.useState(""),[x,_]=W.useState(""),[S,A]=W.useState(""),[w,C]=W.useState(""),k=Number(S),T=Number(w),O=o.journalEntries?.find(we=>we.id===t)??null;let E,R;if(e[0]!==l||e[1]!==o.journalEntries||e[2]!==r||e[3]!==c?(E=()=>{if(console.log("effect runnung..."),console.log("isDraft: ",r),!r||l)return;const De=(o.journalEntries??[]).reduce(Z4,0)+1;c({id:De,description:"",entryLines:[]})},R=[r,l,o.journalEntries,c],e[0]=l,e[1]=o.journalEntries,e[2]=r,e[3]=c,e[4]=E,e[5]=R):(E=e[4],R=e[5]),W.useEffect(E,R),r){if(!l){let we;return e[6]===Symbol.for("react.memo_cache_sentinel")?(we=H.jsx("div",{children:"Loading draft..."}),e[6]=we):we=e[6],we}}else if(!O){let we;return e[7]===Symbol.for("react.memo_cache_sentinel")?(we=H.jsx("div",{children:"Loading entry..."}),e[7]=we):we=e[7],we}const j=r?l:O;let V;e[8]!==m||e[9]!==l||e[10]!==o.accounts||e[11]!==c?(V=we=>{const De=o.accounts.find(je=>je.id===we);l?.entryLines&&(c({...l,entryLines:l.entryLines.filter(je=>je.accountId!==we)}),m({type:"Account",payload:{id:De?.id,label:De?.label}}))},e[8]=m,e[9]=l,e[10]=o.accounts,e[11]=c,e[12]=V):V=e[12];const P=V;let q;e[13]!==l||e[14]!==o.accounts||e[15]!==p||e[16]!==c?(q=(we,De,je)=>{if(!l)return;const rt=o.accounts.find(st=>st.id===we);if(!(!rt||De<=0)){if(Number.isNaN(De)){Me.error("Bitte einen gltigen Betrag eingeben.");return}c(st=>({...st,entryLines:[...st.entryLines??[],{accountId:we,amount:De,entryType:je}]})),p({type:"Account",payload:{id:rt?.id,label:rt?.label}});e:switch(je){case"credit":{_(""),C("");break e}case"debit":v(""),A("")}}},e[13]=l,e[14]=o.accounts,e[15]=p,e[16]=c,e[17]=q):q=e[17];const X=q;let J;e[18]!==f||e[19]!==m?(J=()=>{f(),m({type:"JournalEntry",payload:{id:"Neue Buchung"}})},e[18]=f,e[19]=m,e[20]=J):J=e[20];const ce=J;let K;e[21]!==m||e[22]!==d||e[23]!==l||e[24]!==p?(K=()=>{if(l){if(z!==0){Me.error("Ungltige Buchung. Saldo muss 0,00 betragen.");return}else if(l?.entryLines.length===0){Me.error("Ungltige Buchung. Keine Buchungszeilen eingetrage.");return}else if(l?.description.length===0){Me.error("Ungltige Buchung. Keine Buchungssatz eingetragen.");return}d(),m({type:"JournalEntry",payload:{id:"Neue Buchung"}}),p({type:"JournalEntry",payload:{id:l.id}})}},e[21]=m,e[22]=d,e[23]=l,e[24]=p,e[25]=K):K=e[25];const U=K,ee=j.entryLines.filter(J4),oe=Fw(ee),Y=j.entryLines.filter(Q4),N=Fw(Y),z=oe-N;let B;e[26]!==l?.entryLines?(B=new Set(l?.entryLines?.map(X4)??[]),e[26]=l?.entryLines,e[27]=B):B=e[27];const D=B;let L;e[28]===Symbol.for("react.memo_cache_sentinel")?(L=H.jsx("div",{className:"flex items-center mb-1",children:H.jsx("span",{className:"font-semibold bg-yellow-100 rounded px-1 py-0.5",children:"Soll"})}),e[28]=L):L=e[28];let I;e[29]===Symbol.for("react.memo_cache_sentinel")?(I=H.jsx("thead",{className:"bg-yellow-50",children:H.jsxs("tr",{children:[H.jsx("th",{className:"w-[50%] px-1 py-0.5 text-left",children:"Konto"}),H.jsx("th",{className:"w-[35%] px-1 py-0.5 text-left",children:"Betrag"}),H.jsx("th",{className:"w-[15%]"})]})}),e[29]=I):I=e[29];let re;e[30]!==o.accounts||e[31]!==r||e[32]!==p||e[33]!==P?(re=(we,De)=>{const je=o.accounts.find(rt=>rt.id===we.accountId);return H.jsxs("tr",{className:"cursor-pointer transition-all border duration-100 hover:scale-95",onClick:()=>p({type:"Account",payload:{id:je?.id,label:je?.label}}),children:[H.jsxs("td",{className:"px-1 py-0.5",children:[we.accountId," ",je?.label]}),H.jsxs("td",{className:"px-1 py-0.5",children:[we.amount," "]}),r&&H.jsx("td",{className:"px-1 py-0.5 text-center",children:H.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:rt=>{rt.stopPropagation(),P(we.accountId)},children:"-"})})]},De)},e[30]=o.accounts,e[31]=r,e[32]=p,e[33]=P,e[34]=re):re=e[34];let ue;e[35]!==X||e[36]!==k||e[37]!==o.accounts||e[38]!==r||e[39]!==S||e[40]!==y||e[41]!==D?(ue=r&&H.jsxs("tr",{children:[H.jsx("td",{className:"px-1 py-0.5",children:H.jsxs("select",{className:"w-full text-xs",value:y,onChange:we=>v(we.target.value),children:[H.jsx("option",{value:"",children:"Konto auswhlen"}),o.accounts.filter(we=>!D.has(we.id)).map(G4)]})}),H.jsx("td",{className:"px-1 py-0.5",children:H.jsx("input",{className:"w-full border text-xs",type:"text",value:S,onChange:we=>A(we.target.value)})}),H.jsx("td",{className:"px-1 py-0.5 text-center",children:H.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>X(y,k,"debit"),children:"+"})})]}),e[35]=X,e[36]=k,e[37]=o.accounts,e[38]=r,e[39]=S,e[40]=y,e[41]=D,e[42]=ue):ue=e[42];let ge;e[43]===Symbol.for("react.memo_cache_sentinel")?(ge=H.jsx("div",{className:"flex items-center mb-1",children:H.jsx("span",{className:"font-semibold bg-yellow-100 rounded px-1 py-0.5",children:"Haben"})}),e[43]=ge):ge=e[43];let ve;e[44]===Symbol.for("react.memo_cache_sentinel")?(ve=H.jsx("thead",{className:"bg-yellow-50",children:H.jsxs("tr",{children:[H.jsx("th",{className:"w-[50%] px-1 py-0.5 text-left",children:"Konto"}),H.jsx("th",{className:"w-[35%] px-1 py-0.5 text-left",children:"Betrag"}),H.jsx("th",{className:"w-[15%]"})]})}),e[44]=ve):ve=e[44];let G;e[45]!==o.accounts||e[46]!==r||e[47]!==p||e[48]!==P?(G=(we,De)=>{const je=o.accounts.find(rt=>rt.id===we.accountId);return H.jsxs("tr",{className:"cursor-pointer border transition-all duration-100 hover:scale-95",onClick:()=>p({type:"Account",payload:{id:je?.id,label:je?.label}}),children:[H.jsxs("td",{className:"px-1 py-0.5",children:[we.accountId," ",je?.label]}),H.jsxs("td",{className:"px-1 py-0.5",children:[we.amount," "]}),r&&H.jsx("td",{className:"px-1 py-0.5 text-center",children:H.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:rt=>{rt.stopPropagation(),P(we.accountId)},children:"-"})})]},`entryLine-${De}`)},e[45]=o.accounts,e[46]=r,e[47]=p,e[48]=P,e[49]=G):G=e[49];let Z;e[50]!==X||e[51]!==T||e[52]!==o.accounts||e[53]!==r||e[54]!==w||e[55]!==x||e[56]!==D?(Z=r&&H.jsxs("tr",{children:[H.jsx("td",{className:"px-1 py-0.5",children:H.jsxs("select",{className:"w-full text-xs",value:x,onChange:we=>_(we.target.value),children:[H.jsx("option",{value:"",children:"Konto auswhlen"}),o.accounts.filter(we=>!D.has(we.id)).map(Y4)]})}),H.jsx("td",{className:"px-1 py-0.5",children:H.jsx("input",{className:"w-full border text-xs",type:"text",value:w,onChange:we=>C(we.target.value)})}),H.jsx("td",{className:"px-1 py-0.5 text-center",children:H.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>X(x,T,"credit"),children:"+"})})]}),e[50]=X,e[51]=T,e[52]=o.accounts,e[53]=r,e[54]=w,e[55]=x,e[56]=D,e[57]=Z):Z=e[57];const fe="flex justify-center  text-lg mt-2",ye=`text-lg font-semibold ${z!==0?"text-red-600":"text-green-600"}`,Se="Saldo: ",Ee=z.toFixed(2);let nt;e[58]!==ye||e[59]!==Ee?(nt=H.jsx("div",{className:fe,children:H.jsxs("div",{className:ye,children:[Se,Ee," "]})}),e[58]=ye,e[59]=Ee,e[60]=nt):nt=e[60];let it;return e[61]!==z||e[62]!==l?.description||e[63]!==l?.entryLines||e[64]!==ce||e[65]!==U||e[66]!==r?(it=r&&H.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[H.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200 text-xs",onClick:()=>ce(),children:"Abbrechen"}),H.jsx("button",{className:`px-2 py-1 border rounded ${z===0&&l?.entryLines.length!=0&&l?.description.length!=0?"bg-yellow-200 hover:bg-yellow-300":"bg-gray-400 "} text-xs font-semibold`,onClick:()=>U(),children:"Buchen!"})]}),e[61]=z,e[62]=l?.description,e[63]=l?.entryLines,e[64]=ce,e[65]=U,e[66]=r,e[67]=it):it=e[67],H.jsxs("div",{className:"max-w-2xl mx-auto my-2 rounded bg-white text-sm",children:[r&&H.jsx("textarea",{placeholder:"Bitte Geschftsvorfall eintragen",name:"description",className:"border w-full min-h-12",value:j?.description??"",onChange:we=>c(De=>De&&{...De,description:we.target.value})}),!r&&H.jsx("span",{className:"text-lg",children:j.description}),H.jsxs("div",{className:"flex gap-4 pt-4",children:[H.jsxs("div",{className:"flex-1",children:[L,H.jsxs("table",{className:"w-full table-fixed border divide-y text-xs",children:[I,H.jsxs("tbody",{children:[ee.map(re),ue]})]})]}),H.jsxs("div",{className:"flex-1",children:[ge,H.jsxs("table",{className:"w-full table-fixed border divide-y text-xs",children:[ve,H.jsxs("tbody",{children:[Y.map(G),Z]})]})]})]}),H.jsxs("div",{className:"flex justify-between grid-cols-2 text-lg mt-2",children:[H.jsxs("div",{className:`text-lg font-semibold ${z!==0?"text-red-600":"text-green-600"}`,children:["Sollsumme ",oe.toFixed(2)," "]}),H.jsxs("div",{className:`text-lg font-semibold ${z!==0?"text-red-600":"text-green-600"}`,children:["Habensumme ",N.toFixed(2)," "]})]}),nt,it]})}function Y4(n){return H.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function G4(n){return H.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function X4(n){return n.accountId}function Q4(n){return n.entryType==="credit"}function J4(n){return n.entryType==="debit"}function Z4(n,e){return Math.max(n,e.id)}var xf={exports:{}},o0={},Rr={},Zs={},a0={},l0={},c0={},Ww;function md(){return Ww||(Ww=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class e{}n._CodeOrName=e,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class t extends e{constructor(w){if(super(),!n.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=t;class i extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((C,k)=>`${C}${k}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((C,k)=>(k instanceof t&&(C[k.str]=(C[k.str]||0)+1),C),{})}}n._Code=i,n.nil=new i("");function r(A,...w){const C=[A[0]];let k=0;for(;k<w.length;)c(C,w[k]),C.push(A[++k]);return new i(C)}n._=r;const o=new i("+");function l(A,...w){const C=[v(A[0])];let k=0;for(;k<w.length;)C.push(o),c(C,w[k]),C.push(o,v(A[++k]));return f(C),new i(C)}n.str=l;function c(A,w){w instanceof i?A.push(...w._items):w instanceof t?A.push(w):A.push(m(w))}n.addCodeArg=c;function f(A){let w=1;for(;w<A.length-1;){if(A[w]===o){const C=d(A[w-1],A[w+1]);if(C!==void 0){A.splice(w-1,3,C);continue}A[w++]="+"}w++}}function d(A,w){if(w==='""')return A;if(A==='""')return w;if(typeof A=="string")return w instanceof t||A[A.length-1]!=='"'?void 0:typeof w!="string"?`${A.slice(0,-1)}${w}"`:w[0]==='"'?A.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(A instanceof t))return`"${A}${w.slice(1)}`}function p(A,w){return w.emptyStr()?A:A.emptyStr()?w:l`${A}${w}`}n.strConcat=p;function m(A){return typeof A=="number"||typeof A=="boolean"||A===null?A:v(Array.isArray(A)?A.join(","):A)}function y(A){return new i(v(A))}n.stringify=y;function v(A){return JSON.stringify(A).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=v;function x(A){return typeof A=="string"&&n.IDENTIFIER.test(A)?new i(`.${A}`):r`[${A}]`}n.getProperty=x;function _(A){if(typeof A=="string"&&n.IDENTIFIER.test(A))return new i(`${A}`);throw new Error(`CodeGen: invalid export name: ${A}, use explicit $id name mapping`)}n.getEsmExportName=_;function S(A){return new i(A.toString())}n.regexpCode=S})(c0)),c0}var u0={},Kw;function Yw(){return Kw||(Kw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const e=md();class t extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var i;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(i||(n.UsedValueState=i={})),n.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class r{constructor({prefixes:d,parent:p}={}){this._names={},this._prefixes=d,this._parent=p}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const p=this._names[d]||this._nameGroup(d);return`${d}${p.index++}`}_nameGroup(d){var p,m;if(!((m=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}n.Scope=r;class o extends e.Name{constructor(d,p){super(p),this.prefix=d}setValue(d,{property:p,itemIndex:m}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(p)}[${m}]`}}n.ValueScopeName=o;const l=(0,e._)`\n`;class c extends r{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?l:e.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,p){var m;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:v}=y,x=(m=p.key)!==null&&m!==void 0?m:p.ref;let _=this._values[v];if(_){const w=_.get(x);if(w)return w}else _=this._values[v]=new Map;_.set(x,y);const S=this._scope[v]||(this._scope[v]=[]),A=S.length;return S[A]=p.ref,y.setValue(p,{property:v,itemIndex:A}),y}getValue(d,p){const m=this._values[d];if(m)return m.get(p)}scopeRefs(d,p=this._values){return this._reduceValues(p,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,e._)`${d}${m.scopePath}`})}scopeCode(d=this._values,p,m){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},p,m)}_reduceValues(d,p,m={},y){let v=e.nil;for(const x in d){const _=d[x];if(!_)continue;const S=m[x]=m[x]||new Map;_.forEach(A=>{if(S.has(A))return;S.set(A,i.Started);let w=p(A);if(w){const C=this.opts.es5?n.varKinds.var:n.varKinds.const;v=(0,e._)`${v}${C} ${A} = ${w};${this.opts._n}`}else if(w=y?.(A))v=(0,e._)`${v}${w}${this.opts._n}`;else throw new t(A);S.set(A,i.Completed)})}return v}}n.ValueScope=c})(u0)),u0}var Gw;function Le(){return Gw||(Gw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const e=md(),t=Yw();var i=md();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return i.Name}});var r=Yw();Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),n.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(D,L){return this}}class l extends o{constructor(D,L,I){super(),this.varKind=D,this.name=L,this.rhs=I}render({es5:D,_n:L}){const I=D?t.varKinds.var:this.varKind,re=this.rhs===void 0?"":` = ${this.rhs}`;return`${I} ${this.name}${re};`+L}optimizeNames(D,L){if(D[this.name.str])return this.rhs&&(this.rhs=J(this.rhs,D,L)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class c extends o{constructor(D,L,I){super(),this.lhs=D,this.rhs=L,this.sideEffects=I}render({_n:D}){return`${this.lhs} = ${this.rhs};`+D}optimizeNames(D,L){if(!(this.lhs instanceof e.Name&&!D[this.lhs.str]&&!this.sideEffects))return this.rhs=J(this.rhs,D,L),this}get names(){const D=this.lhs instanceof e.Name?{}:{...this.lhs.names};return X(D,this.rhs)}}class f extends c{constructor(D,L,I,re){super(D,I,re),this.op=L}render({_n:D}){return`${this.lhs} ${this.op}= ${this.rhs};`+D}}class d extends o{constructor(D){super(),this.label=D,this.names={}}render({_n:D}){return`${this.label}:`+D}}class p extends o{constructor(D){super(),this.label=D,this.names={}}render({_n:D}){return`break${this.label?` ${this.label}`:""};`+D}}class m extends o{constructor(D){super(),this.error=D}render({_n:D}){return`throw ${this.error};`+D}get names(){return this.error.names}}class y extends o{constructor(D){super(),this.code=D}render({_n:D}){return`${this.code};`+D}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(D,L){return this.code=J(this.code,D,L),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends o{constructor(D=[]){super(),this.nodes=D}render(D){return this.nodes.reduce((L,I)=>L+I.render(D),"")}optimizeNodes(){const{nodes:D}=this;let L=D.length;for(;L--;){const I=D[L].optimizeNodes();Array.isArray(I)?D.splice(L,1,...I):I?D[L]=I:D.splice(L,1)}return D.length>0?this:void 0}optimizeNames(D,L){const{nodes:I}=this;let re=I.length;for(;re--;){const ue=I[re];ue.optimizeNames(D,L)||(ce(D,ue.names),I.splice(re,1))}return I.length>0?this:void 0}get names(){return this.nodes.reduce((D,L)=>q(D,L.names),{})}}class x extends v{render(D){return"{"+D._n+super.render(D)+"}"+D._n}}class _ extends v{}class S extends x{}S.kind="else";class A extends x{constructor(D,L){super(L),this.condition=D}render(D){let L=`if(${this.condition})`+super.render(D);return this.else&&(L+="else "+this.else.render(D)),L}optimizeNodes(){super.optimizeNodes();const D=this.condition;if(D===!0)return this.nodes;let L=this.else;if(L){const I=L.optimizeNodes();L=this.else=Array.isArray(I)?new S(I):I}if(L)return D===!1?L instanceof A?L:L.nodes:this.nodes.length?this:new A(K(D),L instanceof A?[L]:L.nodes);if(!(D===!1||!this.nodes.length))return this}optimizeNames(D,L){var I;if(this.else=(I=this.else)===null||I===void 0?void 0:I.optimizeNames(D,L),!!(super.optimizeNames(D,L)||this.else))return this.condition=J(this.condition,D,L),this}get names(){const D=super.names;return X(D,this.condition),this.else&&q(D,this.else.names),D}}A.kind="if";class w extends x{}w.kind="for";class C extends w{constructor(D){super(),this.iteration=D}render(D){return`for(${this.iteration})`+super.render(D)}optimizeNames(D,L){if(super.optimizeNames(D,L))return this.iteration=J(this.iteration,D,L),this}get names(){return q(super.names,this.iteration.names)}}class k extends w{constructor(D,L,I,re){super(),this.varKind=D,this.name=L,this.from=I,this.to=re}render(D){const L=D.es5?t.varKinds.var:this.varKind,{name:I,from:re,to:ue}=this;return`for(${L} ${I}=${re}; ${I}<${ue}; ${I}++)`+super.render(D)}get names(){const D=X(super.names,this.from);return X(D,this.to)}}class T extends w{constructor(D,L,I,re){super(),this.loop=D,this.varKind=L,this.name=I,this.iterable=re}render(D){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(D)}optimizeNames(D,L){if(super.optimizeNames(D,L))return this.iterable=J(this.iterable,D,L),this}get names(){return q(super.names,this.iterable.names)}}class O extends x{constructor(D,L,I){super(),this.name=D,this.args=L,this.async=I}render(D){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(D)}}O.kind="func";class E extends v{render(D){return"return "+super.render(D)}}E.kind="return";class R extends x{render(D){let L="try"+super.render(D);return this.catch&&(L+=this.catch.render(D)),this.finally&&(L+=this.finally.render(D)),L}optimizeNodes(){var D,L;return super.optimizeNodes(),(D=this.catch)===null||D===void 0||D.optimizeNodes(),(L=this.finally)===null||L===void 0||L.optimizeNodes(),this}optimizeNames(D,L){var I,re;return super.optimizeNames(D,L),(I=this.catch)===null||I===void 0||I.optimizeNames(D,L),(re=this.finally)===null||re===void 0||re.optimizeNames(D,L),this}get names(){const D=super.names;return this.catch&&q(D,this.catch.names),this.finally&&q(D,this.finally.names),D}}class j extends x{constructor(D){super(),this.error=D}render(D){return`catch(${this.error})`+super.render(D)}}j.kind="catch";class V extends x{render(D){return"finally"+super.render(D)}}V.kind="finally";class P{constructor(D,L={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...L,_n:L.lines?`
`:""},this._extScope=D,this._scope=new t.Scope({parent:D}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(D){return this._scope.name(D)}scopeName(D){return this._extScope.name(D)}scopeValue(D,L){const I=this._extScope.value(D,L);return(this._values[I.prefix]||(this._values[I.prefix]=new Set)).add(I),I}getScopeValue(D,L){return this._extScope.getValue(D,L)}scopeRefs(D){return this._extScope.scopeRefs(D,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(D,L,I,re){const ue=this._scope.toName(L);return I!==void 0&&re&&(this._constants[ue.str]=I),this._leafNode(new l(D,ue,I)),ue}const(D,L,I){return this._def(t.varKinds.const,D,L,I)}let(D,L,I){return this._def(t.varKinds.let,D,L,I)}var(D,L,I){return this._def(t.varKinds.var,D,L,I)}assign(D,L,I){return this._leafNode(new c(D,L,I))}add(D,L){return this._leafNode(new f(D,n.operators.ADD,L))}code(D){return typeof D=="function"?D():D!==e.nil&&this._leafNode(new y(D)),this}object(...D){const L=["{"];for(const[I,re]of D)L.length>1&&L.push(","),L.push(I),(I!==re||this.opts.es5)&&(L.push(":"),(0,e.addCodeArg)(L,re));return L.push("}"),new e._Code(L)}if(D,L,I){if(this._blockNode(new A(D)),L&&I)this.code(L).else().code(I).endIf();else if(L)this.code(L).endIf();else if(I)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(D){return this._elseNode(new A(D))}else(){return this._elseNode(new S)}endIf(){return this._endBlockNode(A,S)}_for(D,L){return this._blockNode(D),L&&this.code(L).endFor(),this}for(D,L){return this._for(new C(D),L)}forRange(D,L,I,re,ue=this.opts.es5?t.varKinds.var:t.varKinds.let){const ge=this._scope.toName(D);return this._for(new k(ue,ge,L,I),()=>re(ge))}forOf(D,L,I,re=t.varKinds.const){const ue=this._scope.toName(D);if(this.opts.es5){const ge=L instanceof e.Name?L:this.var("_arr",L);return this.forRange("_i",0,(0,e._)`${ge}.length`,ve=>{this.var(ue,(0,e._)`${ge}[${ve}]`),I(ue)})}return this._for(new T("of",re,ue,L),()=>I(ue))}forIn(D,L,I,re=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(D,(0,e._)`Object.keys(${L})`,I);const ue=this._scope.toName(D);return this._for(new T("in",re,ue,L),()=>I(ue))}endFor(){return this._endBlockNode(w)}label(D){return this._leafNode(new d(D))}break(D){return this._leafNode(new p(D))}return(D){const L=new E;if(this._blockNode(L),this.code(D),L.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(D,L,I){if(!L&&!I)throw new Error('CodeGen: "try" without "catch" and "finally"');const re=new R;if(this._blockNode(re),this.code(D),L){const ue=this.name("e");this._currNode=re.catch=new j(ue),L(ue)}return I&&(this._currNode=re.finally=new V,this.code(I)),this._endBlockNode(j,V)}throw(D){return this._leafNode(new m(D))}block(D,L){return this._blockStarts.push(this._nodes.length),D&&this.code(D).endBlock(L),this}endBlock(D){const L=this._blockStarts.pop();if(L===void 0)throw new Error("CodeGen: not in self-balancing block");const I=this._nodes.length-L;if(I<0||D!==void 0&&I!==D)throw new Error(`CodeGen: wrong number of nodes: ${I} vs ${D} expected`);return this._nodes.length=L,this}func(D,L=e.nil,I,re){return this._blockNode(new O(D,L,I)),re&&this.code(re).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(D=1){for(;D-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(D){return this._currNode.nodes.push(D),this}_blockNode(D){this._currNode.nodes.push(D),this._nodes.push(D)}_endBlockNode(D,L){const I=this._currNode;if(I instanceof D||L&&I instanceof L)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${L?`${D.kind}/${L.kind}`:D.kind}"`)}_elseNode(D){const L=this._currNode;if(!(L instanceof A))throw new Error('CodeGen: "else" without "if"');return this._currNode=L.else=D,this}get _root(){return this._nodes[0]}get _currNode(){const D=this._nodes;return D[D.length-1]}set _currNode(D){const L=this._nodes;L[L.length-1]=D}}n.CodeGen=P;function q(B,D){for(const L in D)B[L]=(B[L]||0)+(D[L]||0);return B}function X(B,D){return D instanceof e._CodeOrName?q(B,D.names):B}function J(B,D,L){if(B instanceof e.Name)return I(B);if(!re(B))return B;return new e._Code(B._items.reduce((ue,ge)=>(ge instanceof e.Name&&(ge=I(ge)),ge instanceof e._Code?ue.push(...ge._items):ue.push(ge),ue),[]));function I(ue){const ge=L[ue.str];return ge===void 0||D[ue.str]!==1?ue:(delete D[ue.str],ge)}function re(ue){return ue instanceof e._Code&&ue._items.some(ge=>ge instanceof e.Name&&D[ge.str]===1&&L[ge.str]!==void 0)}}function ce(B,D){for(const L in D)B[L]=(B[L]||0)-(D[L]||0)}function K(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,e._)`!${z(B)}`}n.not=K;const U=N(n.operators.AND);function ee(...B){return B.reduce(U)}n.and=ee;const oe=N(n.operators.OR);function Y(...B){return B.reduce(oe)}n.or=Y;function N(B){return(D,L)=>D===e.nil?L:L===e.nil?D:(0,e._)`${z(D)} ${B} ${z(L)}`}function z(B){return B instanceof e.Name?B:(0,e._)`(${B})`}})(l0)),l0}var He={},Xw;function Ye(){if(Xw)return He;Xw=1,Object.defineProperty(He,"__esModule",{value:!0}),He.checkStrictMode=He.getErrorPath=He.Type=He.useFunc=He.setEvaluated=He.evaluatedPropsToName=He.mergeEvaluated=He.eachItem=He.unescapeJsonPointer=He.escapeJsonPointer=He.escapeFragment=He.unescapeFragment=He.schemaRefOrVal=He.schemaHasRulesButRef=He.schemaHasRules=He.checkUnknownRules=He.alwaysValidSchema=He.toHash=void 0;const n=Le(),e=md();function t(T){const O={};for(const E of T)O[E]=!0;return O}He.toHash=t;function i(T,O){return typeof O=="boolean"?O:Object.keys(O).length===0?!0:(r(T,O),!o(O,T.self.RULES.all))}He.alwaysValidSchema=i;function r(T,O=T.schema){const{opts:E,self:R}=T;if(!E.strictSchema||typeof O=="boolean")return;const j=R.RULES.keywords;for(const V in O)j[V]||k(T,`unknown keyword: "${V}"`)}He.checkUnknownRules=r;function o(T,O){if(typeof T=="boolean")return!T;for(const E in T)if(O[E])return!0;return!1}He.schemaHasRules=o;function l(T,O){if(typeof T=="boolean")return!T;for(const E in T)if(E!=="$ref"&&O.all[E])return!0;return!1}He.schemaHasRulesButRef=l;function c({topSchemaRef:T,schemaPath:O},E,R,j){if(!j){if(typeof E=="number"||typeof E=="boolean")return E;if(typeof E=="string")return(0,n._)`${E}`}return(0,n._)`${T}${O}${(0,n.getProperty)(R)}`}He.schemaRefOrVal=c;function f(T){return m(decodeURIComponent(T))}He.unescapeFragment=f;function d(T){return encodeURIComponent(p(T))}He.escapeFragment=d;function p(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}He.escapeJsonPointer=p;function m(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}He.unescapeJsonPointer=m;function y(T,O){if(Array.isArray(T))for(const E of T)O(E);else O(T)}He.eachItem=y;function v({mergeNames:T,mergeToName:O,mergeValues:E,resultToName:R}){return(j,V,P,q)=>{const X=P===void 0?V:P instanceof n.Name?(V instanceof n.Name?T(j,V,P):O(j,V,P),P):V instanceof n.Name?(O(j,P,V),V):E(V,P);return q===n.Name&&!(X instanceof n.Name)?R(j,X):X}}He.mergeEvaluated={props:v({mergeNames:(T,O,E)=>T.if((0,n._)`${E} !== true && ${O} !== undefined`,()=>{T.if((0,n._)`${O} === true`,()=>T.assign(E,!0),()=>T.assign(E,(0,n._)`${E} || {}`).code((0,n._)`Object.assign(${E}, ${O})`))}),mergeToName:(T,O,E)=>T.if((0,n._)`${E} !== true`,()=>{O===!0?T.assign(E,!0):(T.assign(E,(0,n._)`${E} || {}`),_(T,E,O))}),mergeValues:(T,O)=>T===!0?!0:{...T,...O},resultToName:x}),items:v({mergeNames:(T,O,E)=>T.if((0,n._)`${E} !== true && ${O} !== undefined`,()=>T.assign(E,(0,n._)`${O} === true ? true : ${E} > ${O} ? ${E} : ${O}`)),mergeToName:(T,O,E)=>T.if((0,n._)`${E} !== true`,()=>T.assign(E,O===!0?!0:(0,n._)`${E} > ${O} ? ${E} : ${O}`)),mergeValues:(T,O)=>T===!0?!0:Math.max(T,O),resultToName:(T,O)=>T.var("items",O)})};function x(T,O){if(O===!0)return T.var("props",!0);const E=T.var("props",(0,n._)`{}`);return O!==void 0&&_(T,E,O),E}He.evaluatedPropsToName=x;function _(T,O,E){Object.keys(E).forEach(R=>T.assign((0,n._)`${O}${(0,n.getProperty)(R)}`,!0))}He.setEvaluated=_;const S={};function A(T,O){return T.scopeValue("func",{ref:O,code:S[O.code]||(S[O.code]=new e._Code(O.code))})}He.useFunc=A;var w;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(w||(He.Type=w={}));function C(T,O,E){if(T instanceof n.Name){const R=O===w.Num;return E?R?(0,n._)`"[" + ${T} + "]"`:(0,n._)`"['" + ${T} + "']"`:R?(0,n._)`"/" + ${T}`:(0,n._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return E?(0,n.getProperty)(T).toString():"/"+p(T)}He.getErrorPath=C;function k(T,O,E=T.opts.strictSchema){if(E){if(O=`strict mode: ${O}`,E===!0)throw new Error(O);T.self.logger.warn(O)}}return He.checkStrictMode=k,He}var wf={},Qw;function Ui(){if(Qw)return wf;Qw=1,Object.defineProperty(wf,"__esModule",{value:!0});const n=Le(),e={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};return wf.default=e,wf}var Jw;function up(){return Jw||(Jw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const e=Le(),t=Ye(),i=Ui();n.keywordError={message:({keyword:S})=>(0,e.str)`must pass "${S}" keyword validation`},n.keyword$DataError={message:({keyword:S,schemaType:A})=>A?(0,e.str)`"${S}" keyword must be ${A} ($data)`:(0,e.str)`"${S}" keyword is invalid ($data)`};function r(S,A=n.keywordError,w,C){const{it:k}=S,{gen:T,compositeRule:O,allErrors:E}=k,R=m(S,A,w);C??(O||E)?f(T,R):d(k,(0,e._)`[${R}]`)}n.reportError=r;function o(S,A=n.keywordError,w){const{it:C}=S,{gen:k,compositeRule:T,allErrors:O}=C,E=m(S,A,w);f(k,E),T||O||d(C,i.default.vErrors)}n.reportExtraError=o;function l(S,A){S.assign(i.default.errors,A),S.if((0,e._)`${i.default.vErrors} !== null`,()=>S.if(A,()=>S.assign((0,e._)`${i.default.vErrors}.length`,A),()=>S.assign(i.default.vErrors,null)))}n.resetErrorsCount=l;function c({gen:S,keyword:A,schemaValue:w,data:C,errsCount:k,it:T}){if(k===void 0)throw new Error("ajv implementation error");const O=S.name("err");S.forRange("i",k,i.default.errors,E=>{S.const(O,(0,e._)`${i.default.vErrors}[${E}]`),S.if((0,e._)`${O}.instancePath === undefined`,()=>S.assign((0,e._)`${O}.instancePath`,(0,e.strConcat)(i.default.instancePath,T.errorPath))),S.assign((0,e._)`${O}.schemaPath`,(0,e.str)`${T.errSchemaPath}/${A}`),T.opts.verbose&&(S.assign((0,e._)`${O}.schema`,w),S.assign((0,e._)`${O}.data`,C))})}n.extendErrors=c;function f(S,A){const w=S.const("err",A);S.if((0,e._)`${i.default.vErrors} === null`,()=>S.assign(i.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${i.default.vErrors}.push(${w})`),S.code((0,e._)`${i.default.errors}++`)}function d(S,A){const{gen:w,validateName:C,schemaEnv:k}=S;k.$async?w.throw((0,e._)`new ${S.ValidationError}(${A})`):(w.assign((0,e._)`${C}.errors`,A),w.return(!1))}const p={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function m(S,A,w){const{createErrors:C}=S.it;return C===!1?(0,e._)`{}`:y(S,A,w)}function y(S,A,w={}){const{gen:C,it:k}=S,T=[v(k,w),x(S,w)];return _(S,A,T),C.object(...T)}function v({errorPath:S},{instancePath:A}){const w=A?(0,e.str)`${S}${(0,t.getErrorPath)(A,t.Type.Str)}`:S;return[i.default.instancePath,(0,e.strConcat)(i.default.instancePath,w)]}function x({keyword:S,it:{errSchemaPath:A}},{schemaPath:w,parentSchema:C}){let k=C?A:(0,e.str)`${A}/${S}`;return w&&(k=(0,e.str)`${k}${(0,t.getErrorPath)(w,t.Type.Str)}`),[p.schemaPath,k]}function _(S,{params:A,message:w},C){const{keyword:k,data:T,schemaValue:O,it:E}=S,{opts:R,propertyName:j,topSchemaRef:V,schemaPath:P}=E;C.push([p.keyword,k],[p.params,typeof A=="function"?A(S):A||(0,e._)`{}`]),R.messages&&C.push([p.message,typeof w=="function"?w(S):w]),R.verbose&&C.push([p.schema,O],[p.parentSchema,(0,e._)`${V}${P}`],[i.default.data,T]),j&&C.push([p.propertyName,j])}})(a0)),a0}var Zw;function ez(){if(Zw)return Zs;Zw=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.boolOrEmptySchema=Zs.topBoolOrEmptySchema=void 0;const n=up(),e=Le(),t=Ui(),i={message:"boolean schema is false"};function r(c){const{gen:f,schema:d,validateName:p}=c;d===!1?l(c,!1):typeof d=="object"&&d.$async===!0?f.return(t.default.data):(f.assign((0,e._)`${p}.errors`,null),f.return(!0))}Zs.topBoolOrEmptySchema=r;function o(c,f){const{gen:d,schema:p}=c;p===!1?(d.var(f,!1),l(c)):d.var(f,!0)}Zs.boolOrEmptySchema=o;function l(c,f){const{gen:d,data:p}=c,m={gen:d,keyword:"false schema",data:p,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:c};(0,n.reportError)(m,i,void 0,f)}return Zs}var on={},eo={},e2;function CT(){if(e2)return eo;e2=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.getRules=eo.isJSONType=void 0;const n=["string","number","integer","boolean","null","object","array"],e=new Set(n);function t(r){return typeof r=="string"&&e.has(r)}eo.isJSONType=t;function i(){const r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}return eo.getRules=i,eo}var Nr={},t2;function AT(){if(t2)return Nr;t2=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.shouldUseRule=Nr.shouldUseGroup=Nr.schemaHasRulesForType=void 0;function n({schema:i,self:r},o){const l=r.RULES.types[o];return l&&l!==!0&&e(i,l)}Nr.schemaHasRulesForType=n;function e(i,r){return r.rules.some(o=>t(i,o))}Nr.shouldUseGroup=e;function t(i,r){var o;return i[r.keyword]!==void 0||((o=r.definition.implements)===null||o===void 0?void 0:o.some(l=>i[l]!==void 0))}return Nr.shouldUseRule=t,Nr}var n2;function gd(){if(n2)return on;n2=1,Object.defineProperty(on,"__esModule",{value:!0}),on.reportTypeError=on.checkDataTypes=on.checkDataType=on.coerceAndCheckDataType=on.getJSONTypes=on.getSchemaTypes=on.DataType=void 0;const n=CT(),e=AT(),t=up(),i=Le(),r=Ye();var o;(function(w){w[w.Correct=0]="Correct",w[w.Wrong=1]="Wrong"})(o||(on.DataType=o={}));function l(w){const C=c(w.type);if(C.includes("null")){if(w.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!C.length&&w.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');w.nullable===!0&&C.push("null")}return C}on.getSchemaTypes=l;function c(w){const C=Array.isArray(w)?w:w?[w]:[];if(C.every(n.isJSONType))return C;throw new Error("type must be JSONType or JSONType[]: "+C.join(","))}on.getJSONTypes=c;function f(w,C){const{gen:k,data:T,opts:O}=w,E=p(C,O.coerceTypes),R=C.length>0&&!(E.length===0&&C.length===1&&(0,e.schemaHasRulesForType)(w,C[0]));if(R){const j=x(C,T,O.strictNumbers,o.Wrong);k.if(j,()=>{E.length?m(w,C,E):S(w)})}return R}on.coerceAndCheckDataType=f;const d=new Set(["string","number","integer","boolean","null"]);function p(w,C){return C?w.filter(k=>d.has(k)||C==="array"&&k==="array"):[]}function m(w,C,k){const{gen:T,data:O,opts:E}=w,R=T.let("dataType",(0,i._)`typeof ${O}`),j=T.let("coerced",(0,i._)`undefined`);E.coerceTypes==="array"&&T.if((0,i._)`${R} == 'object' && Array.isArray(${O}) && ${O}.length == 1`,()=>T.assign(O,(0,i._)`${O}[0]`).assign(R,(0,i._)`typeof ${O}`).if(x(C,O,E.strictNumbers),()=>T.assign(j,O))),T.if((0,i._)`${j} !== undefined`);for(const P of k)(d.has(P)||P==="array"&&E.coerceTypes==="array")&&V(P);T.else(),S(w),T.endIf(),T.if((0,i._)`${j} !== undefined`,()=>{T.assign(O,j),y(w,j)});function V(P){switch(P){case"string":T.elseIf((0,i._)`${R} == "number" || ${R} == "boolean"`).assign(j,(0,i._)`"" + ${O}`).elseIf((0,i._)`${O} === null`).assign(j,(0,i._)`""`);return;case"number":T.elseIf((0,i._)`${R} == "boolean" || ${O} === null
              || (${R} == "string" && ${O} && ${O} == +${O})`).assign(j,(0,i._)`+${O}`);return;case"integer":T.elseIf((0,i._)`${R} === "boolean" || ${O} === null
              || (${R} === "string" && ${O} && ${O} == +${O} && !(${O} % 1))`).assign(j,(0,i._)`+${O}`);return;case"boolean":T.elseIf((0,i._)`${O} === "false" || ${O} === 0 || ${O} === null`).assign(j,!1).elseIf((0,i._)`${O} === "true" || ${O} === 1`).assign(j,!0);return;case"null":T.elseIf((0,i._)`${O} === "" || ${O} === 0 || ${O} === false`),T.assign(j,null);return;case"array":T.elseIf((0,i._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${O} === null`).assign(j,(0,i._)`[${O}]`)}}}function y({gen:w,parentData:C,parentDataProperty:k},T){w.if((0,i._)`${C} !== undefined`,()=>w.assign((0,i._)`${C}[${k}]`,T))}function v(w,C,k,T=o.Correct){const O=T===o.Correct?i.operators.EQ:i.operators.NEQ;let E;switch(w){case"null":return(0,i._)`${C} ${O} null`;case"array":E=(0,i._)`Array.isArray(${C})`;break;case"object":E=(0,i._)`${C} && typeof ${C} == "object" && !Array.isArray(${C})`;break;case"integer":E=R((0,i._)`!(${C} % 1) && !isNaN(${C})`);break;case"number":E=R();break;default:return(0,i._)`typeof ${C} ${O} ${w}`}return T===o.Correct?E:(0,i.not)(E);function R(j=i.nil){return(0,i.and)((0,i._)`typeof ${C} == "number"`,j,k?(0,i._)`isFinite(${C})`:i.nil)}}on.checkDataType=v;function x(w,C,k,T){if(w.length===1)return v(w[0],C,k,T);let O;const E=(0,r.toHash)(w);if(E.array&&E.object){const R=(0,i._)`typeof ${C} != "object"`;O=E.null?R:(0,i._)`!${C} || ${R}`,delete E.null,delete E.array,delete E.object}else O=i.nil;E.number&&delete E.integer;for(const R in E)O=(0,i.and)(O,v(R,C,k,T));return O}on.checkDataTypes=x;const _={message:({schema:w})=>`must be ${w}`,params:({schema:w,schemaValue:C})=>typeof w=="string"?(0,i._)`{type: ${w}}`:(0,i._)`{type: ${C}}`};function S(w){const C=A(w);(0,t.reportError)(C,_)}on.reportTypeError=S;function A(w){const{gen:C,data:k,schema:T}=w,O=(0,r.schemaRefOrVal)(w,T,"type");return{gen:C,keyword:"type",data:k,schema:T.type,schemaCode:O,schemaValue:O,parentSchema:T,params:{},it:w}}return on}var Ll={},i2;function tz(){if(i2)return Ll;i2=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.assignDefaults=void 0;const n=Le(),e=Ye();function t(r,o){const{properties:l,items:c}=r.schema;if(o==="object"&&l)for(const f in l)i(r,f,l[f].default);else o==="array"&&Array.isArray(c)&&c.forEach((f,d)=>i(r,d,f.default))}Ll.assignDefaults=t;function i(r,o,l){const{gen:c,compositeRule:f,data:d,opts:p}=r;if(l===void 0)return;const m=(0,n._)`${d}${(0,n.getProperty)(o)}`;if(f){(0,e.checkStrictMode)(r,`default is ignored for: ${m}`);return}let y=(0,n._)`${m} === undefined`;p.useDefaults==="empty"&&(y=(0,n._)`${y} || ${m} === null || ${m} === ""`),c.if(y,(0,n._)`${m} = ${(0,n.stringify)(l)}`)}return Ll}var zi={},lt={},r2;function Vi(){if(r2)return lt;r2=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.validateUnion=lt.validateArray=lt.usePattern=lt.callValidateCode=lt.schemaProperties=lt.allSchemaProperties=lt.noPropertyInData=lt.propertyInData=lt.isOwnProperty=lt.hasPropFunc=lt.reportMissingProp=lt.checkMissingProp=lt.checkReportMissingProp=void 0;const n=Le(),e=Ye(),t=Ui(),i=Ye();function r(w,C){const{gen:k,data:T,it:O}=w;k.if(p(k,T,C,O.opts.ownProperties),()=>{w.setParams({missingProperty:(0,n._)`${C}`},!0),w.error()})}lt.checkReportMissingProp=r;function o({gen:w,data:C,it:{opts:k}},T,O){return(0,n.or)(...T.map(E=>(0,n.and)(p(w,C,E,k.ownProperties),(0,n._)`${O} = ${E}`)))}lt.checkMissingProp=o;function l(w,C){w.setParams({missingProperty:C},!0),w.error()}lt.reportMissingProp=l;function c(w){return w.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}lt.hasPropFunc=c;function f(w,C,k){return(0,n._)`${c(w)}.call(${C}, ${k})`}lt.isOwnProperty=f;function d(w,C,k,T){const O=(0,n._)`${C}${(0,n.getProperty)(k)} !== undefined`;return T?(0,n._)`${O} && ${f(w,C,k)}`:O}lt.propertyInData=d;function p(w,C,k,T){const O=(0,n._)`${C}${(0,n.getProperty)(k)} === undefined`;return T?(0,n.or)(O,(0,n.not)(f(w,C,k))):O}lt.noPropertyInData=p;function m(w){return w?Object.keys(w).filter(C=>C!=="__proto__"):[]}lt.allSchemaProperties=m;function y(w,C){return m(C).filter(k=>!(0,e.alwaysValidSchema)(w,C[k]))}lt.schemaProperties=y;function v({schemaCode:w,data:C,it:{gen:k,topSchemaRef:T,schemaPath:O,errorPath:E},it:R},j,V,P){const q=P?(0,n._)`${w}, ${C}, ${T}${O}`:C,X=[[t.default.instancePath,(0,n.strConcat)(t.default.instancePath,E)],[t.default.parentData,R.parentData],[t.default.parentDataProperty,R.parentDataProperty],[t.default.rootData,t.default.rootData]];R.opts.dynamicRef&&X.push([t.default.dynamicAnchors,t.default.dynamicAnchors]);const J=(0,n._)`${q}, ${k.object(...X)}`;return V!==n.nil?(0,n._)`${j}.call(${V}, ${J})`:(0,n._)`${j}(${J})`}lt.callValidateCode=v;const x=(0,n._)`new RegExp`;function _({gen:w,it:{opts:C}},k){const T=C.unicodeRegExp?"u":"",{regExp:O}=C.code,E=O(k,T);return w.scopeValue("pattern",{key:E.toString(),ref:E,code:(0,n._)`${O.code==="new RegExp"?x:(0,i.useFunc)(w,O)}(${k}, ${T})`})}lt.usePattern=_;function S(w){const{gen:C,data:k,keyword:T,it:O}=w,E=C.name("valid");if(O.allErrors){const j=C.let("valid",!0);return R(()=>C.assign(j,!1)),j}return C.var(E,!0),R(()=>C.break()),E;function R(j){const V=C.const("len",(0,n._)`${k}.length`);C.forRange("i",0,V,P=>{w.subschema({keyword:T,dataProp:P,dataPropType:e.Type.Num},E),C.if((0,n.not)(E),j)})}}lt.validateArray=S;function A(w){const{gen:C,schema:k,keyword:T,it:O}=w;if(!Array.isArray(k))throw new Error("ajv implementation error");if(k.some(V=>(0,e.alwaysValidSchema)(O,V))&&!O.opts.unevaluated)return;const R=C.let("valid",!1),j=C.name("_valid");C.block(()=>k.forEach((V,P)=>{const q=w.subschema({keyword:T,schemaProp:P,compositeRule:!0},j);C.assign(R,(0,n._)`${R} || ${j}`),w.mergeValidEvaluated(q,j)||C.if((0,n.not)(R))})),w.result(R,()=>w.reset(),()=>w.error(!0))}return lt.validateUnion=A,lt}var s2;function nz(){if(s2)return zi;s2=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.validateKeywordUsage=zi.validSchemaType=zi.funcKeywordCode=zi.macroKeywordCode=void 0;const n=Le(),e=Ui(),t=Vi(),i=up();function r(y,v){const{gen:x,keyword:_,schema:S,parentSchema:A,it:w}=y,C=v.macro.call(w.self,S,A,w),k=d(x,_,C);w.opts.validateSchema!==!1&&w.self.validateSchema(C,!0);const T=x.name("valid");y.subschema({schema:C,schemaPath:n.nil,errSchemaPath:`${w.errSchemaPath}/${_}`,topSchemaRef:k,compositeRule:!0},T),y.pass(T,()=>y.error(!0))}zi.macroKeywordCode=r;function o(y,v){var x;const{gen:_,keyword:S,schema:A,parentSchema:w,$data:C,it:k}=y;f(k,v);const T=!C&&v.compile?v.compile.call(k.self,A,w,k):v.validate,O=d(_,S,T),E=_.let("valid");y.block$data(E,R),y.ok((x=v.valid)!==null&&x!==void 0?x:E);function R(){if(v.errors===!1)P(),v.modifying&&l(y),q(()=>y.error());else{const X=v.async?j():V();v.modifying&&l(y),q(()=>c(y,X))}}function j(){const X=_.let("ruleErrs",null);return _.try(()=>P((0,n._)`await `),J=>_.assign(E,!1).if((0,n._)`${J} instanceof ${k.ValidationError}`,()=>_.assign(X,(0,n._)`${J}.errors`),()=>_.throw(J))),X}function V(){const X=(0,n._)`${O}.errors`;return _.assign(X,null),P(n.nil),X}function P(X=v.async?(0,n._)`await `:n.nil){const J=k.opts.passContext?e.default.this:e.default.self,ce=!("compile"in v&&!C||v.schema===!1);_.assign(E,(0,n._)`${X}${(0,t.callValidateCode)(y,O,J,ce)}`,v.modifying)}function q(X){var J;_.if((0,n.not)((J=v.valid)!==null&&J!==void 0?J:E),X)}}zi.funcKeywordCode=o;function l(y){const{gen:v,data:x,it:_}=y;v.if(_.parentData,()=>v.assign(x,(0,n._)`${_.parentData}[${_.parentDataProperty}]`))}function c(y,v){const{gen:x}=y;x.if((0,n._)`Array.isArray(${v})`,()=>{x.assign(e.default.vErrors,(0,n._)`${e.default.vErrors} === null ? ${v} : ${e.default.vErrors}.concat(${v})`).assign(e.default.errors,(0,n._)`${e.default.vErrors}.length`),(0,i.extendErrors)(y)},()=>y.error())}function f({schemaEnv:y},v){if(v.async&&!y.$async)throw new Error("async keyword in sync schema")}function d(y,v,x){if(x===void 0)throw new Error(`keyword "${v}" failed to compile`);return y.scopeValue("keyword",typeof x=="function"?{ref:x}:{ref:x,code:(0,n.stringify)(x)})}function p(y,v,x=!1){return!v.length||v.some(_=>_==="array"?Array.isArray(y):_==="object"?y&&typeof y=="object"&&!Array.isArray(y):typeof y==_||x&&typeof y>"u")}zi.validSchemaType=p;function m({schema:y,opts:v,self:x,errSchemaPath:_},S,A){if(Array.isArray(S.keyword)?!S.keyword.includes(A):S.keyword!==A)throw new Error("ajv implementation error");const w=S.dependencies;if(w?.some(C=>!Object.prototype.hasOwnProperty.call(y,C)))throw new Error(`parent schema must have dependencies of ${A}: ${w.join(",")}`);if(S.validateSchema&&!S.validateSchema(y[A])){const k=`keyword "${A}" value is invalid at path "${_}": `+x.errorsText(S.validateSchema.errors);if(v.validateSchema==="log")x.logger.error(k);else throw new Error(k)}}return zi.validateKeywordUsage=m,zi}var zr={},o2;function iz(){if(o2)return zr;o2=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.extendSubschemaMode=zr.extendSubschemaData=zr.getSubschema=void 0;const n=Le(),e=Ye();function t(o,{keyword:l,schemaProp:c,schema:f,schemaPath:d,errSchemaPath:p,topSchemaRef:m}){if(l!==void 0&&f!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const y=o.schema[l];return c===void 0?{schema:y,schemaPath:(0,n._)`${o.schemaPath}${(0,n.getProperty)(l)}`,errSchemaPath:`${o.errSchemaPath}/${l}`}:{schema:y[c],schemaPath:(0,n._)`${o.schemaPath}${(0,n.getProperty)(l)}${(0,n.getProperty)(c)}`,errSchemaPath:`${o.errSchemaPath}/${l}/${(0,e.escapeFragment)(c)}`}}if(f!==void 0){if(d===void 0||p===void 0||m===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:f,schemaPath:d,topSchemaRef:m,errSchemaPath:p}}throw new Error('either "keyword" or "schema" must be passed')}zr.getSubschema=t;function i(o,l,{dataProp:c,dataPropType:f,data:d,dataTypes:p,propertyName:m}){if(d!==void 0&&c!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:y}=l;if(c!==void 0){const{errorPath:x,dataPathArr:_,opts:S}=l,A=y.let("data",(0,n._)`${l.data}${(0,n.getProperty)(c)}`,!0);v(A),o.errorPath=(0,n.str)`${x}${(0,e.getErrorPath)(c,f,S.jsPropertySyntax)}`,o.parentDataProperty=(0,n._)`${c}`,o.dataPathArr=[..._,o.parentDataProperty]}if(d!==void 0){const x=d instanceof n.Name?d:y.let("data",d,!0);v(x),m!==void 0&&(o.propertyName=m)}p&&(o.dataTypes=p);function v(x){o.data=x,o.dataLevel=l.dataLevel+1,o.dataTypes=[],l.definedProperties=new Set,o.parentData=l.data,o.dataNames=[...l.dataNames,x]}}zr.extendSubschemaData=i;function r(o,{jtdDiscriminator:l,jtdMetadata:c,compositeRule:f,createErrors:d,allErrors:p}){f!==void 0&&(o.compositeRule=f),d!==void 0&&(o.createErrors=d),p!==void 0&&(o.allErrors=p),o.jtdDiscriminator=l,o.jtdMetadata=c}return zr.extendSubschemaMode=r,zr}var xn={},f0,a2;function TT(){return a2||(a2=1,f0=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,r,o;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=i;r--!==0;){var l=o[r];if(!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),f0}var h0={exports:{}},l2;function rz(){if(l2)return h0.exports;l2=1;var n=h0.exports=function(i,r,o){typeof r=="function"&&(o=r,r={}),o=r.cb||o;var l=typeof o=="function"?o:o.pre||function(){},c=o.post||function(){};e(r,l,c,i,"",i)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(i,r,o,l,c,f,d,p,m,y){if(l&&typeof l=="object"&&!Array.isArray(l)){r(l,c,f,d,p,m,y);for(var v in l){var x=l[v];if(Array.isArray(x)){if(v in n.arrayKeywords)for(var _=0;_<x.length;_++)e(i,r,o,x[_],c+"/"+v+"/"+_,f,c,v,l,_)}else if(v in n.propsKeywords){if(x&&typeof x=="object")for(var S in x)e(i,r,o,x[S],c+"/"+v+"/"+t(S),f,c,v,l,S)}else(v in n.keywords||i.allKeys&&!(v in n.skipKeywords))&&e(i,r,o,x,c+"/"+v,f,c,v,l)}o(l,c,f,d,p,m,y)}}function t(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}return h0.exports}var c2;function fp(){if(c2)return xn;c2=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.getSchemaRefs=xn.resolveUrl=xn.normalizeId=xn._getFullPath=xn.getFullPath=xn.inlineRef=void 0;const n=Ye(),e=TT(),t=rz(),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r(_,S=!0){return typeof _=="boolean"?!0:S===!0?!l(_):S?c(_)<=S:!1}xn.inlineRef=r;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(_){for(const S in _){if(o.has(S))return!0;const A=_[S];if(Array.isArray(A)&&A.some(l)||typeof A=="object"&&l(A))return!0}return!1}function c(_){let S=0;for(const A in _){if(A==="$ref")return 1/0;if(S++,!i.has(A)&&(typeof _[A]=="object"&&(0,n.eachItem)(_[A],w=>S+=c(w)),S===1/0))return 1/0}return S}function f(_,S="",A){A!==!1&&(S=m(S));const w=_.parse(S);return d(_,w)}xn.getFullPath=f;function d(_,S){return _.serialize(S).split("#")[0]+"#"}xn._getFullPath=d;const p=/#\/?$/;function m(_){return _?_.replace(p,""):""}xn.normalizeId=m;function y(_,S,A){return A=m(A),_.resolve(S,A)}xn.resolveUrl=y;const v=/^[a-z_][-a-z0-9._]*$/i;function x(_,S){if(typeof _=="boolean")return{};const{schemaId:A,uriResolver:w}=this.opts,C=m(_[A]||S),k={"":C},T=f(w,C,!1),O={},E=new Set;return t(_,{allKeys:!0},(V,P,q,X)=>{if(X===void 0)return;const J=T+P;let ce=k[X];typeof V[A]=="string"&&(ce=K.call(this,V[A])),U.call(this,V.$anchor),U.call(this,V.$dynamicAnchor),k[P]=ce;function K(ee){const oe=this.opts.uriResolver.resolve;if(ee=m(ce?oe(ce,ee):ee),E.has(ee))throw j(ee);E.add(ee);let Y=this.refs[ee];return typeof Y=="string"&&(Y=this.refs[Y]),typeof Y=="object"?R(V,Y.schema,ee):ee!==m(J)&&(ee[0]==="#"?(R(V,O[ee],ee),O[ee]=V):this.refs[ee]=J),ee}function U(ee){if(typeof ee=="string"){if(!v.test(ee))throw new Error(`invalid anchor "${ee}"`);K.call(this,`#${ee}`)}}}),O;function R(V,P,q){if(P!==void 0&&!e(V,P))throw j(q)}function j(V){return new Error(`reference "${V}" resolves to more than one schema`)}}return xn.getSchemaRefs=x,xn}var u2;function Hc(){if(u2)return Rr;u2=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.getData=Rr.KeywordCxt=Rr.validateFunctionCode=void 0;const n=ez(),e=gd(),t=AT(),i=gd(),r=tz(),o=nz(),l=iz(),c=Le(),f=Ui(),d=fp(),p=Ye(),m=up();function y(G){if(T(G)&&(E(G),k(G))){S(G);return}v(G,()=>(0,n.topBoolOrEmptySchema)(G))}Rr.validateFunctionCode=y;function v({gen:G,validateName:Z,schema:fe,schemaEnv:ye,opts:Se},Ee){Se.code.es5?G.func(Z,(0,c._)`${f.default.data}, ${f.default.valCxt}`,ye.$async,()=>{G.code((0,c._)`"use strict"; ${w(fe,Se)}`),_(G,Se),G.code(Ee)}):G.func(Z,(0,c._)`${f.default.data}, ${x(Se)}`,ye.$async,()=>G.code(w(fe,Se)).code(Ee))}function x(G){return(0,c._)`{${f.default.instancePath}="", ${f.default.parentData}, ${f.default.parentDataProperty}, ${f.default.rootData}=${f.default.data}${G.dynamicRef?(0,c._)`, ${f.default.dynamicAnchors}={}`:c.nil}}={}`}function _(G,Z){G.if(f.default.valCxt,()=>{G.var(f.default.instancePath,(0,c._)`${f.default.valCxt}.${f.default.instancePath}`),G.var(f.default.parentData,(0,c._)`${f.default.valCxt}.${f.default.parentData}`),G.var(f.default.parentDataProperty,(0,c._)`${f.default.valCxt}.${f.default.parentDataProperty}`),G.var(f.default.rootData,(0,c._)`${f.default.valCxt}.${f.default.rootData}`),Z.dynamicRef&&G.var(f.default.dynamicAnchors,(0,c._)`${f.default.valCxt}.${f.default.dynamicAnchors}`)},()=>{G.var(f.default.instancePath,(0,c._)`""`),G.var(f.default.parentData,(0,c._)`undefined`),G.var(f.default.parentDataProperty,(0,c._)`undefined`),G.var(f.default.rootData,f.default.data),Z.dynamicRef&&G.var(f.default.dynamicAnchors,(0,c._)`{}`)})}function S(G){const{schema:Z,opts:fe,gen:ye}=G;v(G,()=>{fe.$comment&&Z.$comment&&X(G),V(G),ye.let(f.default.vErrors,null),ye.let(f.default.errors,0),fe.unevaluated&&A(G),R(G),J(G)})}function A(G){const{gen:Z,validateName:fe}=G;G.evaluated=Z.const("evaluated",(0,c._)`${fe}.evaluated`),Z.if((0,c._)`${G.evaluated}.dynamicProps`,()=>Z.assign((0,c._)`${G.evaluated}.props`,(0,c._)`undefined`)),Z.if((0,c._)`${G.evaluated}.dynamicItems`,()=>Z.assign((0,c._)`${G.evaluated}.items`,(0,c._)`undefined`))}function w(G,Z){const fe=typeof G=="object"&&G[Z.schemaId];return fe&&(Z.code.source||Z.code.process)?(0,c._)`/*# sourceURL=${fe} */`:c.nil}function C(G,Z){if(T(G)&&(E(G),k(G))){O(G,Z);return}(0,n.boolOrEmptySchema)(G,Z)}function k({schema:G,self:Z}){if(typeof G=="boolean")return!G;for(const fe in G)if(Z.RULES.all[fe])return!0;return!1}function T(G){return typeof G.schema!="boolean"}function O(G,Z){const{schema:fe,gen:ye,opts:Se}=G;Se.$comment&&fe.$comment&&X(G),P(G),q(G);const Ee=ye.const("_errs",f.default.errors);R(G,Ee),ye.var(Z,(0,c._)`${Ee} === ${f.default.errors}`)}function E(G){(0,p.checkUnknownRules)(G),j(G)}function R(G,Z){if(G.opts.jtd)return K(G,[],!1,Z);const fe=(0,e.getSchemaTypes)(G.schema),ye=(0,e.coerceAndCheckDataType)(G,fe);K(G,fe,!ye,Z)}function j(G){const{schema:Z,errSchemaPath:fe,opts:ye,self:Se}=G;Z.$ref&&ye.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(Z,Se.RULES)&&Se.logger.warn(`$ref: keywords ignored in schema at path "${fe}"`)}function V(G){const{schema:Z,opts:fe}=G;Z.default!==void 0&&fe.useDefaults&&fe.strictSchema&&(0,p.checkStrictMode)(G,"default is ignored in the schema root")}function P(G){const Z=G.schema[G.opts.schemaId];Z&&(G.baseId=(0,d.resolveUrl)(G.opts.uriResolver,G.baseId,Z))}function q(G){if(G.schema.$async&&!G.schemaEnv.$async)throw new Error("async schema in sync schema")}function X({gen:G,schemaEnv:Z,schema:fe,errSchemaPath:ye,opts:Se}){const Ee=fe.$comment;if(Se.$comment===!0)G.code((0,c._)`${f.default.self}.logger.log(${Ee})`);else if(typeof Se.$comment=="function"){const nt=(0,c.str)`${ye}/$comment`,it=G.scopeValue("root",{ref:Z.root});G.code((0,c._)`${f.default.self}.opts.$comment(${Ee}, ${nt}, ${it}.schema)`)}}function J(G){const{gen:Z,schemaEnv:fe,validateName:ye,ValidationError:Se,opts:Ee}=G;fe.$async?Z.if((0,c._)`${f.default.errors} === 0`,()=>Z.return(f.default.data),()=>Z.throw((0,c._)`new ${Se}(${f.default.vErrors})`)):(Z.assign((0,c._)`${ye}.errors`,f.default.vErrors),Ee.unevaluated&&ce(G),Z.return((0,c._)`${f.default.errors} === 0`))}function ce({gen:G,evaluated:Z,props:fe,items:ye}){fe instanceof c.Name&&G.assign((0,c._)`${Z}.props`,fe),ye instanceof c.Name&&G.assign((0,c._)`${Z}.items`,ye)}function K(G,Z,fe,ye){const{gen:Se,schema:Ee,data:nt,allErrors:it,opts:we,self:De}=G,{RULES:je}=De;if(Ee.$ref&&(we.ignoreKeywordsWithRef||!(0,p.schemaHasRulesButRef)(Ee,je))){Se.block(()=>re(G,"$ref",je.all.$ref.definition));return}we.jtd||ee(G,Z),Se.block(()=>{for(const st of je.rules)rt(st);rt(je.post)});function rt(st){(0,t.shouldUseGroup)(Ee,st)&&(st.type?(Se.if((0,i.checkDataType)(st.type,nt,we.strictNumbers)),U(G,st),Z.length===1&&Z[0]===st.type&&fe&&(Se.else(),(0,i.reportTypeError)(G)),Se.endIf()):U(G,st),it||Se.if((0,c._)`${f.default.errors} === ${ye||0}`))}}function U(G,Z){const{gen:fe,schema:ye,opts:{useDefaults:Se}}=G;Se&&(0,r.assignDefaults)(G,Z.type),fe.block(()=>{for(const Ee of Z.rules)(0,t.shouldUseRule)(ye,Ee)&&re(G,Ee.keyword,Ee.definition,Z.type)})}function ee(G,Z){G.schemaEnv.meta||!G.opts.strictTypes||(oe(G,Z),G.opts.allowUnionTypes||Y(G,Z),N(G,G.dataTypes))}function oe(G,Z){if(Z.length){if(!G.dataTypes.length){G.dataTypes=Z;return}Z.forEach(fe=>{B(G.dataTypes,fe)||L(G,`type "${fe}" not allowed by context "${G.dataTypes.join(",")}"`)}),D(G,Z)}}function Y(G,Z){Z.length>1&&!(Z.length===2&&Z.includes("null"))&&L(G,"use allowUnionTypes to allow union type keyword")}function N(G,Z){const fe=G.self.RULES.all;for(const ye in fe){const Se=fe[ye];if(typeof Se=="object"&&(0,t.shouldUseRule)(G.schema,Se)){const{type:Ee}=Se.definition;Ee.length&&!Ee.some(nt=>z(Z,nt))&&L(G,`missing type "${Ee.join(",")}" for keyword "${ye}"`)}}}function z(G,Z){return G.includes(Z)||Z==="number"&&G.includes("integer")}function B(G,Z){return G.includes(Z)||Z==="integer"&&G.includes("number")}function D(G,Z){const fe=[];for(const ye of G.dataTypes)B(Z,ye)?fe.push(ye):Z.includes("integer")&&ye==="number"&&fe.push("integer");G.dataTypes=fe}function L(G,Z){const fe=G.schemaEnv.baseId+G.errSchemaPath;Z+=` at "${fe}" (strictTypes)`,(0,p.checkStrictMode)(G,Z,G.opts.strictTypes)}class I{constructor(Z,fe,ye){if((0,o.validateKeywordUsage)(Z,fe,ye),this.gen=Z.gen,this.allErrors=Z.allErrors,this.keyword=ye,this.data=Z.data,this.schema=Z.schema[ye],this.$data=fe.$data&&Z.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(Z,this.schema,ye,this.$data),this.schemaType=fe.schemaType,this.parentSchema=Z.schema,this.params={},this.it=Z,this.def=fe,this.$data)this.schemaCode=Z.gen.const("vSchema",ve(this.$data,Z));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,fe.schemaType,fe.allowUndefined))throw new Error(`${ye} value must be ${JSON.stringify(fe.schemaType)}`);("code"in fe?fe.trackErrors:fe.errors!==!1)&&(this.errsCount=Z.gen.const("_errs",f.default.errors))}result(Z,fe,ye){this.failResult((0,c.not)(Z),fe,ye)}failResult(Z,fe,ye){this.gen.if(Z),ye?ye():this.error(),fe?(this.gen.else(),fe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Z,fe){this.failResult((0,c.not)(Z),void 0,fe)}fail(Z){if(Z===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Z),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Z){if(!this.$data)return this.fail(Z);const{schemaCode:fe}=this;this.fail((0,c._)`${fe} !== undefined && (${(0,c.or)(this.invalid$data(),Z)})`)}error(Z,fe,ye){if(fe){this.setParams(fe),this._error(Z,ye),this.setParams({});return}this._error(Z,ye)}_error(Z,fe){(Z?m.reportExtraError:m.reportError)(this,this.def.error,fe)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(Z){this.allErrors||this.gen.if(Z)}setParams(Z,fe){fe?Object.assign(this.params,Z):this.params=Z}block$data(Z,fe,ye=c.nil){this.gen.block(()=>{this.check$data(Z,ye),fe()})}check$data(Z=c.nil,fe=c.nil){if(!this.$data)return;const{gen:ye,schemaCode:Se,schemaType:Ee,def:nt}=this;ye.if((0,c.or)((0,c._)`${Se} === undefined`,fe)),Z!==c.nil&&ye.assign(Z,!0),(Ee.length||nt.validateSchema)&&(ye.elseIf(this.invalid$data()),this.$dataError(),Z!==c.nil&&ye.assign(Z,!1)),ye.else()}invalid$data(){const{gen:Z,schemaCode:fe,schemaType:ye,def:Se,it:Ee}=this;return(0,c.or)(nt(),it());function nt(){if(ye.length){if(!(fe instanceof c.Name))throw new Error("ajv implementation error");const we=Array.isArray(ye)?ye:[ye];return(0,c._)`${(0,i.checkDataTypes)(we,fe,Ee.opts.strictNumbers,i.DataType.Wrong)}`}return c.nil}function it(){if(Se.validateSchema){const we=Z.scopeValue("validate$data",{ref:Se.validateSchema});return(0,c._)`!${we}(${fe})`}return c.nil}}subschema(Z,fe){const ye=(0,l.getSubschema)(this.it,Z);(0,l.extendSubschemaData)(ye,this.it,Z),(0,l.extendSubschemaMode)(ye,Z);const Se={...this.it,...ye,items:void 0,props:void 0};return C(Se,fe),Se}mergeEvaluated(Z,fe){const{it:ye,gen:Se}=this;ye.opts.unevaluated&&(ye.props!==!0&&Z.props!==void 0&&(ye.props=p.mergeEvaluated.props(Se,Z.props,ye.props,fe)),ye.items!==!0&&Z.items!==void 0&&(ye.items=p.mergeEvaluated.items(Se,Z.items,ye.items,fe)))}mergeValidEvaluated(Z,fe){const{it:ye,gen:Se}=this;if(ye.opts.unevaluated&&(ye.props!==!0||ye.items!==!0))return Se.if(fe,()=>this.mergeEvaluated(Z,c.Name)),!0}}Rr.KeywordCxt=I;function re(G,Z,fe,ye){const Se=new I(G,fe,Z);"code"in fe?fe.code(Se,ye):Se.$data&&fe.validate?(0,o.funcKeywordCode)(Se,fe):"macro"in fe?(0,o.macroKeywordCode)(Se,fe):(fe.compile||fe.validate)&&(0,o.funcKeywordCode)(Se,fe)}const ue=/^\/(?:[^~]|~0|~1)*$/,ge=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ve(G,{dataLevel:Z,dataNames:fe,dataPathArr:ye}){let Se,Ee;if(G==="")return f.default.rootData;if(G[0]==="/"){if(!ue.test(G))throw new Error(`Invalid JSON-pointer: ${G}`);Se=G,Ee=f.default.rootData}else{const De=ge.exec(G);if(!De)throw new Error(`Invalid JSON-pointer: ${G}`);const je=+De[1];if(Se=De[2],Se==="#"){if(je>=Z)throw new Error(we("property/index",je));return ye[Z-je]}if(je>Z)throw new Error(we("data",je));if(Ee=fe[Z-je],!Se)return Ee}let nt=Ee;const it=Se.split("/");for(const De of it)De&&(Ee=(0,c._)`${Ee}${(0,c.getProperty)((0,p.unescapeJsonPointer)(De))}`,nt=(0,c._)`${nt} && ${Ee}`);return nt;function we(De,je){return`Cannot access ${De} ${je} levels up, current level is ${Z}`}}return Rr.getData=ve,Rr}var _f={},f2;function hp(){if(f2)return _f;f2=1,Object.defineProperty(_f,"__esModule",{value:!0});class n extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}return _f.default=n,_f}var Cf={},h2;function Ic(){if(h2)return Cf;h2=1,Object.defineProperty(Cf,"__esModule",{value:!0});const n=fp();class e extends Error{constructor(i,r,o,l){super(l||`can't resolve reference ${o} from id ${r}`),this.missingRef=(0,n.resolveUrl)(i,r,o),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(i,this.missingRef))}}return Cf.default=e,Cf}var ei={},d2;function dp(){if(d2)return ei;d2=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.resolveSchema=ei.getCompilingSchema=ei.resolveRef=ei.compileSchema=ei.SchemaEnv=void 0;const n=Le(),e=hp(),t=Ui(),i=fp(),r=Ye(),o=Hc();class l{constructor(A){var w;this.refs={},this.dynamicAnchors={};let C;typeof A.schema=="object"&&(C=A.schema),this.schema=A.schema,this.schemaId=A.schemaId,this.root=A.root||this,this.baseId=(w=A.baseId)!==null&&w!==void 0?w:(0,i.normalizeId)(C?.[A.schemaId||"$id"]),this.schemaPath=A.schemaPath,this.localRefs=A.localRefs,this.meta=A.meta,this.$async=C?.$async,this.refs={}}}ei.SchemaEnv=l;function c(S){const A=p.call(this,S);if(A)return A;const w=(0,i.getFullPath)(this.opts.uriResolver,S.root.baseId),{es5:C,lines:k}=this.opts.code,{ownProperties:T}=this.opts,O=new n.CodeGen(this.scope,{es5:C,lines:k,ownProperties:T});let E;S.$async&&(E=O.scopeValue("Error",{ref:e.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const R=O.scopeName("validate");S.validateName=R;const j={gen:O,allErrors:this.opts.allErrors,data:t.default.data,parentData:t.default.parentData,parentDataProperty:t.default.parentDataProperty,dataNames:[t.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:O.scopeValue("schema",this.opts.code.source===!0?{ref:S.schema,code:(0,n.stringify)(S.schema)}:{ref:S.schema}),validateName:R,ValidationError:E,schema:S.schema,schemaEnv:S,rootId:w,baseId:S.baseId||w,schemaPath:n.nil,errSchemaPath:S.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let V;try{this._compilations.add(S),(0,o.validateFunctionCode)(j),O.optimize(this.opts.code.optimize);const P=O.toString();V=`${O.scopeRefs(t.default.scope)}return ${P}`,this.opts.code.process&&(V=this.opts.code.process(V,S));const X=new Function(`${t.default.self}`,`${t.default.scope}`,V)(this,this.scope.get());if(this.scope.value(R,{ref:X}),X.errors=null,X.schema=S.schema,X.schemaEnv=S,S.$async&&(X.$async=!0),this.opts.code.source===!0&&(X.source={validateName:R,validateCode:P,scopeValues:O._values}),this.opts.unevaluated){const{props:J,items:ce}=j;X.evaluated={props:J instanceof n.Name?void 0:J,items:ce instanceof n.Name?void 0:ce,dynamicProps:J instanceof n.Name,dynamicItems:ce instanceof n.Name},X.source&&(X.source.evaluated=(0,n.stringify)(X.evaluated))}return S.validate=X,S}catch(P){throw delete S.validate,delete S.validateName,V&&this.logger.error("Error compiling schema, function code:",V),P}finally{this._compilations.delete(S)}}ei.compileSchema=c;function f(S,A,w){var C;w=(0,i.resolveUrl)(this.opts.uriResolver,A,w);const k=S.refs[w];if(k)return k;let T=y.call(this,S,w);if(T===void 0){const O=(C=S.localRefs)===null||C===void 0?void 0:C[w],{schemaId:E}=this.opts;O&&(T=new l({schema:O,schemaId:E,root:S,baseId:A}))}if(T!==void 0)return S.refs[w]=d.call(this,T)}ei.resolveRef=f;function d(S){return(0,i.inlineRef)(S.schema,this.opts.inlineRefs)?S.schema:S.validate?S:c.call(this,S)}function p(S){for(const A of this._compilations)if(m(A,S))return A}ei.getCompilingSchema=p;function m(S,A){return S.schema===A.schema&&S.root===A.root&&S.baseId===A.baseId}function y(S,A){let w;for(;typeof(w=this.refs[A])=="string";)A=w;return w||this.schemas[A]||v.call(this,S,A)}function v(S,A){const w=this.opts.uriResolver.parse(A),C=(0,i._getFullPath)(this.opts.uriResolver,w);let k=(0,i.getFullPath)(this.opts.uriResolver,S.baseId,void 0);if(Object.keys(S.schema).length>0&&C===k)return _.call(this,w,S);const T=(0,i.normalizeId)(C),O=this.refs[T]||this.schemas[T];if(typeof O=="string"){const E=v.call(this,S,O);return typeof E?.schema!="object"?void 0:_.call(this,w,E)}if(typeof O?.schema=="object"){if(O.validate||c.call(this,O),T===(0,i.normalizeId)(A)){const{schema:E}=O,{schemaId:R}=this.opts,j=E[R];return j&&(k=(0,i.resolveUrl)(this.opts.uriResolver,k,j)),new l({schema:E,schemaId:R,root:S,baseId:k})}return _.call(this,w,O)}}ei.resolveSchema=v;const x=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _(S,{baseId:A,schema:w,root:C}){var k;if(((k=S.fragment)===null||k===void 0?void 0:k[0])!=="/")return;for(const E of S.fragment.slice(1).split("/")){if(typeof w=="boolean")return;const R=w[(0,r.unescapeFragment)(E)];if(R===void 0)return;w=R;const j=typeof w=="object"&&w[this.opts.schemaId];!x.has(E)&&j&&(A=(0,i.resolveUrl)(this.opts.uriResolver,A,j))}let T;if(typeof w!="boolean"&&w.$ref&&!(0,r.schemaHasRulesButRef)(w,this.RULES)){const E=(0,i.resolveUrl)(this.opts.uriResolver,A,w.$ref);T=v.call(this,C,E)}const{schemaId:O}=this.opts;if(T=T||new l({schema:w,schemaId:O,root:C,baseId:A}),T.schema!==T.root.schema)return T}return ei}const sz="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",oz="Meta-schema for $data reference (JSON AnySchema extension proposal)",az="object",lz=["$data"],cz={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},uz=!1,fz={$id:sz,description:oz,type:az,required:lz,properties:cz,additionalProperties:uz};var Af={},jl={exports:{}},d0,p2;function ET(){if(p2)return d0;p2=1;const n=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function t(y){let v="",x=0,_=0;for(_=0;_<y.length;_++)if(x=y[_].charCodeAt(0),x!==48){if(!(x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102))return"";v+=y[_];break}for(_+=1;_<y.length;_++){if(x=y[_].charCodeAt(0),!(x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102))return"";v+=y[_]}return v}const i=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function r(y){return y.length=0,!0}function o(y,v,x){if(y.length){const _=t(y);if(_!=="")v.push(_);else return x.error=!0,!1;y.length=0}return!0}function l(y){let v=0;const x={error:!1,address:"",zone:""},_=[],S=[];let A=!1,w=!1,C=o;for(let k=0;k<y.length;k++){const T=y[k];if(!(T==="["||T==="]"))if(T===":"){if(A===!0&&(w=!0),!C(S,_,x))break;if(++v>7){x.error=!0;break}k>0&&y[k-1]===":"&&(A=!0),_.push(":");continue}else if(T==="%"){if(!C(S,_,x))break;C=r}else{S.push(T);continue}}return S.length&&(C===r?x.zone=S.join(""):w?_.push(S.join("")):_.push(t(S))),x.address=_.join(""),x}function c(y){if(f(y,":")<2)return{host:y,isIPV6:!1};const v=l(y);if(v.error)return{host:y,isIPV6:!1};{let x=v.address,_=v.address;return v.zone&&(x+="%"+v.zone,_+="%25"+v.zone),{host:x,isIPV6:!0,escapedHost:_}}}function f(y,v){let x=0;for(let _=0;_<y.length;_++)y[_]===v&&x++;return x}function d(y){let v=y;const x=[];let _=-1,S=0;for(;S=v.length;){if(S===1){if(v===".")break;if(v==="/"){x.push("/");break}else{x.push(v);break}}else if(S===2){if(v[0]==="."){if(v[1]===".")break;if(v[1]==="/"){v=v.slice(2);continue}}else if(v[0]==="/"&&(v[1]==="."||v[1]==="/")){x.push("/");break}}else if(S===3&&v==="/.."){x.length!==0&&x.pop(),x.push("/");break}if(v[0]==="."){if(v[1]==="."){if(v[2]==="/"){v=v.slice(3);continue}}else if(v[1]==="/"){v=v.slice(2);continue}}else if(v[0]==="/"&&v[1]==="."){if(v[2]==="/"){v=v.slice(2);continue}else if(v[2]==="."&&v[3]==="/"){v=v.slice(3),x.length!==0&&x.pop();continue}}if((_=v.indexOf("/",1))===-1){x.push(v);break}else x.push(v.slice(0,_)),v=v.slice(_)}return x.join("")}function p(y,v){const x=v!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=x(y.scheme)),y.userinfo!==void 0&&(y.userinfo=x(y.userinfo)),y.host!==void 0&&(y.host=x(y.host)),y.path!==void 0&&(y.path=x(y.path)),y.query!==void 0&&(y.query=x(y.query)),y.fragment!==void 0&&(y.fragment=x(y.fragment)),y}function m(y){const v=[];if(y.userinfo!==void 0&&(v.push(y.userinfo),v.push("@")),y.host!==void 0){let x=unescape(y.host);if(!e(x)){const _=c(x);_.isIPV6===!0?x=`[${_.escapedHost}]`:x=y.host}v.push(x)}return(typeof y.port=="number"||typeof y.port=="string")&&(v.push(":"),v.push(String(y.port))),v.length?v.join(""):void 0}return d0={nonSimpleDomain:i,recomposeAuthority:m,normalizeComponentEncoding:p,removeDotSegments:d,isIPv4:e,isUUID:n,normalizeIPv6:c,stringArrayToHexStripped:t},d0}var p0,m2;function hz(){if(m2)return p0;m2=1;const{isUUID:n}=ET(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,t=["http","https","ws","wss","urn","urn:uuid"];function i(T){return t.indexOf(T)!==-1}function r(T){return T.secure===!0?!0:T.secure===!1?!1:T.scheme?T.scheme.length===3&&(T.scheme[0]==="w"||T.scheme[0]==="W")&&(T.scheme[1]==="s"||T.scheme[1]==="S")&&(T.scheme[2]==="s"||T.scheme[2]==="S"):!1}function o(T){return T.host||(T.error=T.error||"HTTP URIs must have a host."),T}function l(T){const O=String(T.scheme).toLowerCase()==="https";return(T.port===(O?443:80)||T.port==="")&&(T.port=void 0),T.path||(T.path="/"),T}function c(T){return T.secure=r(T),T.resourceName=(T.path||"/")+(T.query?"?"+T.query:""),T.path=void 0,T.query=void 0,T}function f(T){if((T.port===(r(T)?443:80)||T.port==="")&&(T.port=void 0),typeof T.secure=="boolean"&&(T.scheme=T.secure?"wss":"ws",T.secure=void 0),T.resourceName){const[O,E]=T.resourceName.split("?");T.path=O&&O!=="/"?O:void 0,T.query=E,T.resourceName=void 0}return T.fragment=void 0,T}function d(T,O){if(!T.path)return T.error="URN can not be parsed",T;const E=T.path.match(e);if(E){const R=O.scheme||T.scheme||"urn";T.nid=E[1].toLowerCase(),T.nss=E[2];const j=`${R}:${O.nid||T.nid}`,V=k(j);T.path=void 0,V&&(T=V.parse(T,O))}else T.error=T.error||"URN can not be parsed.";return T}function p(T,O){if(T.nid===void 0)throw new Error("URN without nid cannot be serialized");const E=O.scheme||T.scheme||"urn",R=T.nid.toLowerCase(),j=`${E}:${O.nid||R}`,V=k(j);V&&(T=V.serialize(T,O));const P=T,q=T.nss;return P.path=`${R||O.nid}:${q}`,O.skipEscape=!0,P}function m(T,O){const E=T;return E.uuid=E.nss,E.nss=void 0,!O.tolerant&&(!E.uuid||!n(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function y(T){const O=T;return O.nss=(T.uuid||"").toLowerCase(),O}const v={scheme:"http",domainHost:!0,parse:o,serialize:l},x={scheme:"https",domainHost:v.domainHost,parse:o,serialize:l},_={scheme:"ws",domainHost:!0,parse:c,serialize:f},S={scheme:"wss",domainHost:_.domainHost,parse:_.parse,serialize:_.serialize},C={http:v,https:x,ws:_,wss:S,urn:{scheme:"urn",parse:d,serialize:p,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:m,serialize:y,skipNormalize:!0}};Object.setPrototypeOf(C,null);function k(T){return T&&(C[T]||C[T.toLowerCase()])||void 0}return p0={wsIsSecure:r,SCHEMES:C,isValidSchemeName:i,getSchemeHandler:k},p0}var g2;function dz(){if(g2)return jl.exports;g2=1;const{normalizeIPv6:n,removeDotSegments:e,recomposeAuthority:t,normalizeComponentEncoding:i,isIPv4:r,nonSimpleDomain:o}=ET(),{SCHEMES:l,getSchemeHandler:c}=hz();function f(S,A){return typeof S=="string"?S=y(x(S,A),A):typeof S=="object"&&(S=x(y(S,A),A)),S}function d(S,A,w){const C=w?Object.assign({scheme:"null"},w):{scheme:"null"},k=p(x(S,C),x(A,C),C,!0);return C.skipEscape=!0,y(k,C)}function p(S,A,w,C){const k={};return C||(S=x(y(S,w),w),A=x(y(A,w),w)),w=w||{},!w.tolerant&&A.scheme?(k.scheme=A.scheme,k.userinfo=A.userinfo,k.host=A.host,k.port=A.port,k.path=e(A.path||""),k.query=A.query):(A.userinfo!==void 0||A.host!==void 0||A.port!==void 0?(k.userinfo=A.userinfo,k.host=A.host,k.port=A.port,k.path=e(A.path||""),k.query=A.query):(A.path?(A.path[0]==="/"?k.path=e(A.path):((S.userinfo!==void 0||S.host!==void 0||S.port!==void 0)&&!S.path?k.path="/"+A.path:S.path?k.path=S.path.slice(0,S.path.lastIndexOf("/")+1)+A.path:k.path=A.path,k.path=e(k.path)),k.query=A.query):(k.path=S.path,A.query!==void 0?k.query=A.query:k.query=S.query),k.userinfo=S.userinfo,k.host=S.host,k.port=S.port),k.scheme=S.scheme),k.fragment=A.fragment,k}function m(S,A,w){return typeof S=="string"?(S=unescape(S),S=y(i(x(S,w),!0),{...w,skipEscape:!0})):typeof S=="object"&&(S=y(i(S,!0),{...w,skipEscape:!0})),typeof A=="string"?(A=unescape(A),A=y(i(x(A,w),!0),{...w,skipEscape:!0})):typeof A=="object"&&(A=y(i(A,!0),{...w,skipEscape:!0})),S.toLowerCase()===A.toLowerCase()}function y(S,A){const w={host:S.host,scheme:S.scheme,userinfo:S.userinfo,port:S.port,path:S.path,query:S.query,nid:S.nid,nss:S.nss,uuid:S.uuid,fragment:S.fragment,reference:S.reference,resourceName:S.resourceName,secure:S.secure,error:""},C=Object.assign({},A),k=[],T=c(C.scheme||w.scheme);T&&T.serialize&&T.serialize(w,C),w.path!==void 0&&(C.skipEscape?w.path=unescape(w.path):(w.path=escape(w.path),w.scheme!==void 0&&(w.path=w.path.split("%3A").join(":")))),C.reference!=="suffix"&&w.scheme&&k.push(w.scheme,":");const O=t(w);if(O!==void 0&&(C.reference!=="suffix"&&k.push("//"),k.push(O),w.path&&w.path[0]!=="/"&&k.push("/")),w.path!==void 0){let E=w.path;!C.absolutePath&&(!T||!T.absolutePath)&&(E=e(E)),O===void 0&&E[0]==="/"&&E[1]==="/"&&(E="/%2F"+E.slice(2)),k.push(E)}return w.query!==void 0&&k.push("?",w.query),w.fragment!==void 0&&k.push("#",w.fragment),k.join("")}const v=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function x(S,A){const w=Object.assign({},A),C={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let k=!1;w.reference==="suffix"&&(w.scheme?S=w.scheme+":"+S:S="//"+S);const T=S.match(v);if(T){if(C.scheme=T[1],C.userinfo=T[3],C.host=T[4],C.port=parseInt(T[5],10),C.path=T[6]||"",C.query=T[7],C.fragment=T[8],isNaN(C.port)&&(C.port=T[5]),C.host)if(r(C.host)===!1){const R=n(C.host);C.host=R.host.toLowerCase(),k=R.isIPV6}else k=!0;C.scheme===void 0&&C.userinfo===void 0&&C.host===void 0&&C.port===void 0&&C.query===void 0&&!C.path?C.reference="same-document":C.scheme===void 0?C.reference="relative":C.fragment===void 0?C.reference="absolute":C.reference="uri",w.reference&&w.reference!=="suffix"&&w.reference!==C.reference&&(C.error=C.error||"URI is not a "+w.reference+" reference.");const O=c(w.scheme||C.scheme);if(!w.unicodeSupport&&(!O||!O.unicodeSupport)&&C.host&&(w.domainHost||O&&O.domainHost)&&k===!1&&o(C.host))try{C.host=URL.domainToASCII(C.host.toLowerCase())}catch(E){C.error=C.error||"Host's domain name can not be converted to ASCII: "+E}(!O||O&&!O.skipNormalize)&&(S.indexOf("%")!==-1&&(C.scheme!==void 0&&(C.scheme=unescape(C.scheme)),C.host!==void 0&&(C.host=unescape(C.host))),C.path&&(C.path=escape(unescape(C.path))),C.fragment&&(C.fragment=encodeURI(decodeURIComponent(C.fragment)))),O&&O.parse&&O.parse(C,w)}else C.error=C.error||"URI can not be parsed.";return C}const _={SCHEMES:l,normalize:f,resolve:d,resolveComponent:p,equal:m,serialize:y,parse:x};return jl.exports=_,jl.exports.default=_,jl.exports.fastUri=_,jl.exports}var y2;function pz(){if(y2)return Af;y2=1,Object.defineProperty(Af,"__esModule",{value:!0});const n=dz();return n.code='require("ajv/dist/runtime/uri").default',Af.default=n,Af}var v2;function kT(){return v2||(v2=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var e=Hc();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var t=Le();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});const i=hp(),r=Ic(),o=CT(),l=dp(),c=Le(),f=fp(),d=gd(),p=Ye(),m=fz,y=pz(),v=(Y,N)=>new RegExp(Y,N);v.code="new RegExp";const x=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),S={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function C(Y){var N,z,B,D,L,I,re,ue,ge,ve,G,Z,fe,ye,Se,Ee,nt,it,we,De,je,rt,st,ht,kn;const Zt=Y.strict,Dt=(N=Y.code)===null||N===void 0?void 0:N.optimize,Bt=Dt===!0||Dt===void 0?1:Dt||0,ze=(B=(z=Y.code)===null||z===void 0?void 0:z.regExp)!==null&&B!==void 0?B:v,Fn=(D=Y.uriResolver)!==null&&D!==void 0?D:y.default;return{strictSchema:(I=(L=Y.strictSchema)!==null&&L!==void 0?L:Zt)!==null&&I!==void 0?I:!0,strictNumbers:(ue=(re=Y.strictNumbers)!==null&&re!==void 0?re:Zt)!==null&&ue!==void 0?ue:!0,strictTypes:(ve=(ge=Y.strictTypes)!==null&&ge!==void 0?ge:Zt)!==null&&ve!==void 0?ve:"log",strictTuples:(Z=(G=Y.strictTuples)!==null&&G!==void 0?G:Zt)!==null&&Z!==void 0?Z:"log",strictRequired:(ye=(fe=Y.strictRequired)!==null&&fe!==void 0?fe:Zt)!==null&&ye!==void 0?ye:!1,code:Y.code?{...Y.code,optimize:Bt,regExp:ze}:{optimize:Bt,regExp:ze},loopRequired:(Se=Y.loopRequired)!==null&&Se!==void 0?Se:w,loopEnum:(Ee=Y.loopEnum)!==null&&Ee!==void 0?Ee:w,meta:(nt=Y.meta)!==null&&nt!==void 0?nt:!0,messages:(it=Y.messages)!==null&&it!==void 0?it:!0,inlineRefs:(we=Y.inlineRefs)!==null&&we!==void 0?we:!0,schemaId:(De=Y.schemaId)!==null&&De!==void 0?De:"$id",addUsedSchema:(je=Y.addUsedSchema)!==null&&je!==void 0?je:!0,validateSchema:(rt=Y.validateSchema)!==null&&rt!==void 0?rt:!0,validateFormats:(st=Y.validateFormats)!==null&&st!==void 0?st:!0,unicodeRegExp:(ht=Y.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(kn=Y.int32range)!==null&&kn!==void 0?kn:!0,uriResolver:Fn}}class k{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...C(N)};const{es5:z,lines:B}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:_,es5:z,lines:B}),this.logger=q(N.logger);const D=N.validateFormats;N.validateFormats=!1,this.RULES=(0,o.getRules)(),T.call(this,S,N,"NOT SUPPORTED"),T.call(this,A,N,"DEPRECATED","warn"),this._metaOpts=V.call(this),N.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&j.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),E.call(this),N.validateFormats=D}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:z,schemaId:B}=this.opts;let D=m;B==="id"&&(D={...m},D.id=D.$id,delete D.$id),z&&N&&this.addMetaSchema(D,D[B],!1)}defaultMeta(){const{meta:N,schemaId:z}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[z]||N:void 0}validate(N,z){let B;if(typeof N=="string"){if(B=this.getSchema(N),!B)throw new Error(`no schema with key or ref "${N}"`)}else B=this.compile(N);const D=B(z);return"$async"in B||(this.errors=B.errors),D}compile(N,z){const B=this._addSchema(N,z);return B.validate||this._compileSchemaEnv(B)}compileAsync(N,z){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return D.call(this,N,z);async function D(ve,G){await L.call(this,ve.$schema);const Z=this._addSchema(ve,G);return Z.validate||I.call(this,Z)}async function L(ve){ve&&!this.getSchema(ve)&&await D.call(this,{$ref:ve},!0)}async function I(ve){try{return this._compileSchemaEnv(ve)}catch(G){if(!(G instanceof r.default))throw G;return re.call(this,G),await ue.call(this,G.missingSchema),I.call(this,ve)}}function re({missingSchema:ve,missingRef:G}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${G} cannot be resolved`)}async function ue(ve){const G=await ge.call(this,ve);this.refs[ve]||await L.call(this,G.$schema),this.refs[ve]||this.addSchema(G,ve,z)}async function ge(ve){const G=this._loading[ve];if(G)return G;try{return await(this._loading[ve]=B(ve))}finally{delete this._loading[ve]}}}addSchema(N,z,B,D=this.opts.validateSchema){if(Array.isArray(N)){for(const I of N)this.addSchema(I,void 0,B,D);return this}let L;if(typeof N=="object"){const{schemaId:I}=this.opts;if(L=N[I],L!==void 0&&typeof L!="string")throw new Error(`schema ${I} must be string`)}return z=(0,f.normalizeId)(z||L),this._checkUnique(z),this.schemas[z]=this._addSchema(N,B,z,D,!0),this}addMetaSchema(N,z,B=this.opts.validateSchema){return this.addSchema(N,z,!0,B),this}validateSchema(N,z){if(typeof N=="boolean")return!0;let B;if(B=N.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const D=this.validate(B,N);if(!D&&z){const L="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(L);else throw new Error(L)}return D}getSchema(N){let z;for(;typeof(z=O.call(this,N))=="string";)N=z;if(z===void 0){const{schemaId:B}=this.opts,D=new l.SchemaEnv({schema:{},schemaId:B});if(z=l.resolveSchema.call(this,D,N),!z)return;this.refs[N]=z}return z.validate||this._compileSchemaEnv(z)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const z=O.call(this,N);return typeof z=="object"&&this._cache.delete(z.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const z=N;this._cache.delete(z);let B=N[this.opts.schemaId];return B&&(B=(0,f.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const z of N)this.addKeyword(z);return this}addKeyword(N,z){let B;if(typeof N=="string")B=N,typeof z=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),z.keyword=B);else if(typeof N=="object"&&z===void 0){if(z=N,B=z.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(J.call(this,B,z),!z)return(0,p.eachItem)(B,L=>ce.call(this,L)),this;U.call(this,z);const D={...z,type:(0,d.getJSONTypes)(z.type),schemaType:(0,d.getJSONTypes)(z.schemaType)};return(0,p.eachItem)(B,D.type.length===0?L=>ce.call(this,L,D):L=>D.type.forEach(I=>ce.call(this,L,D,I))),this}getKeyword(N){const z=this.RULES.all[N];return typeof z=="object"?z.definition:!!z}removeKeyword(N){const{RULES:z}=this;delete z.keywords[N],delete z.all[N];for(const B of z.rules){const D=B.rules.findIndex(L=>L.keyword===N);D>=0&&B.rules.splice(D,1)}return this}addFormat(N,z){return typeof z=="string"&&(z=new RegExp(z)),this.formats[N]=z,this}errorsText(N=this.errors,{separator:z=", ",dataVar:B="data"}={}){return!N||N.length===0?"No errors":N.map(D=>`${B}${D.instancePath} ${D.message}`).reduce((D,L)=>D+z+L)}$dataMetaSchema(N,z){const B=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const D of z){const L=D.split("/").slice(1);let I=N;for(const re of L)I=I[re];for(const re in B){const ue=B[re];if(typeof ue!="object")continue;const{$data:ge}=ue.definition,ve=I[re];ge&&ve&&(I[re]=oe(ve))}}return N}_removeAllSchemas(N,z){for(const B in N){const D=N[B];(!z||z.test(B))&&(typeof D=="string"?delete N[B]:D&&!D.meta&&(this._cache.delete(D.schema),delete N[B]))}}_addSchema(N,z,B,D=this.opts.validateSchema,L=this.opts.addUsedSchema){let I;const{schemaId:re}=this.opts;if(typeof N=="object")I=N[re];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let ue=this._cache.get(N);if(ue!==void 0)return ue;B=(0,f.normalizeId)(I||B);const ge=f.getSchemaRefs.call(this,N,B);return ue=new l.SchemaEnv({schema:N,schemaId:re,meta:z,baseId:B,localRefs:ge}),this._cache.set(ue.schema,ue),L&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=ue),D&&this.validateSchema(N,!0),ue}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):l.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const z=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,N)}finally{this.opts=z}}}k.ValidationError=i.default,k.MissingRefError=r.default,n.default=k;function T(Y,N,z,B="error"){for(const D in Y){const L=D;L in N&&this.logger[B](`${z}: option ${D}. ${Y[L]}`)}}function O(Y){return Y=(0,f.normalizeId)(Y),this.schemas[Y]||this.refs[Y]}function E(){const Y=this.opts.schemas;if(Y)if(Array.isArray(Y))this.addSchema(Y);else for(const N in Y)this.addSchema(Y[N],N)}function R(){for(const Y in this.opts.formats){const N=this.opts.formats[Y];N&&this.addFormat(Y,N)}}function j(Y){if(Array.isArray(Y)){this.addVocabulary(Y);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in Y){const z=Y[N];z.keyword||(z.keyword=N),this.addKeyword(z)}}function V(){const Y={...this.opts};for(const N of x)delete Y[N];return Y}const P={log(){},warn(){},error(){}};function q(Y){if(Y===!1)return P;if(Y===void 0)return console;if(Y.log&&Y.warn&&Y.error)return Y;throw new Error("logger must implement log, warn and error methods")}const X=/^[a-z_$][a-z0-9_$:-]*$/i;function J(Y,N){const{RULES:z}=this;if((0,p.eachItem)(Y,B=>{if(z.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!X.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function ce(Y,N,z){var B;const D=N?.post;if(z&&D)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:L}=this;let I=D?L.post:L.rules.find(({type:ue})=>ue===z);if(I||(I={type:z,rules:[]},L.rules.push(I)),L.keywords[Y]=!0,!N)return;const re={keyword:Y,definition:{...N,type:(0,d.getJSONTypes)(N.type),schemaType:(0,d.getJSONTypes)(N.schemaType)}};N.before?K.call(this,I,re,N.before):I.rules.push(re),L.all[Y]=re,(B=N.implements)===null||B===void 0||B.forEach(ue=>this.addKeyword(ue))}function K(Y,N,z){const B=Y.rules.findIndex(D=>D.keyword===z);B>=0?Y.rules.splice(B,0,N):(Y.rules.push(N),this.logger.warn(`rule ${z} is not defined`))}function U(Y){let{metaSchema:N}=Y;N!==void 0&&(Y.$data&&this.opts.$data&&(N=oe(N)),Y.validateSchema=this.compile(N,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(Y){return{anyOf:[Y,ee]}}})(o0)),o0}var Tf={},Ef={},kf={},b2;function mz(){if(b2)return kf;b2=1,Object.defineProperty(kf,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return kf.default=n,kf}var ys={},S2;function vv(){if(S2)return ys;S2=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.callRef=ys.getValidate=void 0;const n=Ic(),e=Vi(),t=Le(),i=Ui(),r=dp(),o=Ye(),l={keyword:"$ref",schemaType:"string",code(d){const{gen:p,schema:m,it:y}=d,{baseId:v,schemaEnv:x,validateName:_,opts:S,self:A}=y,{root:w}=x;if((m==="#"||m==="#/")&&v===w.baseId)return k();const C=r.resolveRef.call(A,w,v,m);if(C===void 0)throw new n.default(y.opts.uriResolver,v,m);if(C instanceof r.SchemaEnv)return T(C);return O(C);function k(){if(x===w)return f(d,_,x,x.$async);const E=p.scopeValue("root",{ref:w});return f(d,(0,t._)`${E}.validate`,w,w.$async)}function T(E){const R=c(d,E);f(d,R,E,E.$async)}function O(E){const R=p.scopeValue("schema",S.code.source===!0?{ref:E,code:(0,t.stringify)(E)}:{ref:E}),j=p.name("valid"),V=d.subschema({schema:E,dataTypes:[],schemaPath:t.nil,topSchemaRef:R,errSchemaPath:m},j);d.mergeEvaluated(V),d.ok(j)}}};function c(d,p){const{gen:m}=d;return p.validate?m.scopeValue("validate",{ref:p.validate}):(0,t._)`${m.scopeValue("wrapper",{ref:p})}.validate`}ys.getValidate=c;function f(d,p,m,y){const{gen:v,it:x}=d,{allErrors:_,schemaEnv:S,opts:A}=x,w=A.passContext?i.default.this:t.nil;y?C():k();function C(){if(!S.$async)throw new Error("async schema referenced by sync schema");const E=v.let("valid");v.try(()=>{v.code((0,t._)`await ${(0,e.callValidateCode)(d,p,w)}`),O(p),_||v.assign(E,!0)},R=>{v.if((0,t._)`!(${R} instanceof ${x.ValidationError})`,()=>v.throw(R)),T(R),_||v.assign(E,!1)}),d.ok(E)}function k(){d.result((0,e.callValidateCode)(d,p,w),()=>O(p),()=>T(p))}function T(E){const R=(0,t._)`${E}.errors`;v.assign(i.default.vErrors,(0,t._)`${i.default.vErrors} === null ? ${R} : ${i.default.vErrors}.concat(${R})`),v.assign(i.default.errors,(0,t._)`${i.default.vErrors}.length`)}function O(E){var R;if(!x.opts.unevaluated)return;const j=(R=m?.validate)===null||R===void 0?void 0:R.evaluated;if(x.props!==!0)if(j&&!j.dynamicProps)j.props!==void 0&&(x.props=o.mergeEvaluated.props(v,j.props,x.props));else{const V=v.var("props",(0,t._)`${E}.evaluated.props`);x.props=o.mergeEvaluated.props(v,V,x.props,t.Name)}if(x.items!==!0)if(j&&!j.dynamicItems)j.items!==void 0&&(x.items=o.mergeEvaluated.items(v,j.items,x.items));else{const V=v.var("items",(0,t._)`${E}.evaluated.items`);x.items=o.mergeEvaluated.items(v,V,x.items,t.Name)}}}return ys.callRef=f,ys.default=l,ys}var x2;function OT(){if(x2)return Ef;x2=1,Object.defineProperty(Ef,"__esModule",{value:!0});const n=mz(),e=vv(),t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,e.default];return Ef.default=t,Ef}var Of={},Mf={},w2;function gz(){if(w2)return Mf;w2=1,Object.defineProperty(Mf,"__esModule",{value:!0});const n=Le(),e=n.operators,t={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},i={message:({keyword:o,schemaCode:l})=>(0,n.str)`must be ${t[o].okStr} ${l}`,params:({keyword:o,schemaCode:l})=>(0,n._)`{comparison: ${t[o].okStr}, limit: ${l}}`},r={keyword:Object.keys(t),type:"number",schemaType:"number",$data:!0,error:i,code(o){const{keyword:l,data:c,schemaCode:f}=o;o.fail$data((0,n._)`${c} ${t[l].fail} ${f} || isNaN(${c})`)}};return Mf.default=r,Mf}var Df={},_2;function yz(){if(_2)return Df;_2=1,Object.defineProperty(Df,"__esModule",{value:!0});const n=Le(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must be multiple of ${i}`,params:({schemaCode:i})=>(0,n._)`{multipleOf: ${i}}`},code(i){const{gen:r,data:o,schemaCode:l,it:c}=i,f=c.opts.multipleOfPrecision,d=r.let("res"),p=f?(0,n._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${f}`:(0,n._)`${d} !== parseInt(${d})`;i.fail$data((0,n._)`(${l} === 0 || (${d} = ${o}/${l}, ${p}))`)}};return Df.default=t,Df}var Rf={},Nf={},C2;function vz(){if(C2)return Nf;C2=1,Object.defineProperty(Nf,"__esModule",{value:!0});function n(e){const t=e.length;let i=0,r=0,o;for(;r<t;)i++,o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<t&&(o=e.charCodeAt(r),(o&64512)===56320&&r++);return i}return Nf.default=n,n.code='require("ajv/dist/runtime/ucs2length").default',Nf}var A2;function bz(){if(A2)return Rf;A2=1,Object.defineProperty(Rf,"__esModule",{value:!0});const n=Le(),e=Ye(),t=vz(),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:l}){const c=o==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${c} than ${l} characters`},params:({schemaCode:o})=>(0,n._)`{limit: ${o}}`},code(o){const{keyword:l,data:c,schemaCode:f,it:d}=o,p=l==="maxLength"?n.operators.GT:n.operators.LT,m=d.opts.unicode===!1?(0,n._)`${c}.length`:(0,n._)`${(0,e.useFunc)(o.gen,t.default)}(${c})`;o.fail$data((0,n._)`${m} ${p} ${f}`)}};return Rf.default=r,Rf}var zf={},T2;function Sz(){if(T2)return zf;T2=1,Object.defineProperty(zf,"__esModule",{value:!0});const n=Vi(),e=Le(),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,e._)`{pattern: ${r}}`},code(r){const{data:o,$data:l,schema:c,schemaCode:f,it:d}=r,p=d.opts.unicodeRegExp?"u":"",m=l?(0,e._)`(new RegExp(${f}, ${p}))`:(0,n.usePattern)(r,c);r.fail$data((0,e._)`!${m}.test(${o})`)}};return zf.default=i,zf}var $f={},E2;function xz(){if(E2)return $f;E2=1,Object.defineProperty($f,"__esModule",{value:!0});const n=Le(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:r}){const o=i==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${o} than ${r} properties`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:r,data:o,schemaCode:l}=i,c=r==="maxProperties"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`Object.keys(${o}).length ${c} ${l}`)}};return $f.default=t,$f}var Lf={},k2;function wz(){if(k2)return Lf;k2=1,Object.defineProperty(Lf,"__esModule",{value:!0});const n=Vi(),e=Le(),t=Ye(),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,e.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,e._)`{missingProperty: ${o}}`},code(o){const{gen:l,schema:c,schemaCode:f,data:d,$data:p,it:m}=o,{opts:y}=m;if(!p&&c.length===0)return;const v=c.length>=y.loopRequired;if(m.allErrors?x():_(),y.strictRequired){const w=o.parentSchema.properties,{definedProperties:C}=o.it;for(const k of c)if(w?.[k]===void 0&&!C.has(k)){const T=m.schemaEnv.baseId+m.errSchemaPath,O=`required property "${k}" is not defined at "${T}" (strictRequired)`;(0,t.checkStrictMode)(m,O,m.opts.strictRequired)}}function x(){if(v||p)o.block$data(e.nil,S);else for(const w of c)(0,n.checkReportMissingProp)(o,w)}function _(){const w=l.let("missing");if(v||p){const C=l.let("valid",!0);o.block$data(C,()=>A(w,C)),o.ok(C)}else l.if((0,n.checkMissingProp)(o,c,w)),(0,n.reportMissingProp)(o,w),l.else()}function S(){l.forOf("prop",f,w=>{o.setParams({missingProperty:w}),l.if((0,n.noPropertyInData)(l,d,w,y.ownProperties),()=>o.error())})}function A(w,C){o.setParams({missingProperty:w}),l.forOf(w,f,()=>{l.assign(C,(0,n.propertyInData)(l,d,w,y.ownProperties)),l.if((0,e.not)(C),()=>{o.error(),l.break()})},e.nil)}}};return Lf.default=r,Lf}var jf={},O2;function _z(){if(O2)return jf;O2=1,Object.defineProperty(jf,"__esModule",{value:!0});const n=Le(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:r}){const o=i==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${o} than ${r} items`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:r,data:o,schemaCode:l}=i,c=r==="maxItems"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`${o}.length ${c} ${l}`)}};return jf.default=t,jf}var Bf={},Pf={},M2;function bv(){if(M2)return Pf;M2=1,Object.defineProperty(Pf,"__esModule",{value:!0});const n=TT();return n.code='require("ajv/dist/runtime/equal").default',Pf.default=n,Pf}var D2;function Cz(){if(D2)return Bf;D2=1,Object.defineProperty(Bf,"__esModule",{value:!0});const n=gd(),e=Le(),t=Ye(),i=bv(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:c}})=>(0,e.str)`must NOT have duplicate items (items ## ${c} and ${l} are identical)`,params:({params:{i:l,j:c}})=>(0,e._)`{i: ${l}, j: ${c}}`},code(l){const{gen:c,data:f,$data:d,schema:p,parentSchema:m,schemaCode:y,it:v}=l;if(!d&&!p)return;const x=c.let("valid"),_=m.items?(0,n.getSchemaTypes)(m.items):[];l.block$data(x,S,(0,e._)`${y} === false`),l.ok(x);function S(){const k=c.let("i",(0,e._)`${f}.length`),T=c.let("j");l.setParams({i:k,j:T}),c.assign(x,!0),c.if((0,e._)`${k} > 1`,()=>(A()?w:C)(k,T))}function A(){return _.length>0&&!_.some(k=>k==="object"||k==="array")}function w(k,T){const O=c.name("item"),E=(0,n.checkDataTypes)(_,O,v.opts.strictNumbers,n.DataType.Wrong),R=c.const("indices",(0,e._)`{}`);c.for((0,e._)`;${k}--;`,()=>{c.let(O,(0,e._)`${f}[${k}]`),c.if(E,(0,e._)`continue`),_.length>1&&c.if((0,e._)`typeof ${O} == "string"`,(0,e._)`${O} += "_"`),c.if((0,e._)`typeof ${R}[${O}] == "number"`,()=>{c.assign(T,(0,e._)`${R}[${O}]`),l.error(),c.assign(x,!1).break()}).code((0,e._)`${R}[${O}] = ${k}`)})}function C(k,T){const O=(0,t.useFunc)(c,i.default),E=c.name("outer");c.label(E).for((0,e._)`;${k}--;`,()=>c.for((0,e._)`${T} = ${k}; ${T}--;`,()=>c.if((0,e._)`${O}(${f}[${k}], ${f}[${T}])`,()=>{l.error(),c.assign(x,!1).break(E)})))}}};return Bf.default=o,Bf}var qf={},R2;function Az(){if(R2)return qf;R2=1,Object.defineProperty(qf,"__esModule",{value:!0});const n=Le(),e=Ye(),t=bv(),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,n._)`{allowedValue: ${o}}`},code(o){const{gen:l,data:c,$data:f,schemaCode:d,schema:p}=o;f||p&&typeof p=="object"?o.fail$data((0,n._)`!${(0,e.useFunc)(l,t.default)}(${c}, ${d})`):o.fail((0,n._)`${p} !== ${c}`)}};return qf.default=r,qf}var Hf={},N2;function Tz(){if(N2)return Hf;N2=1,Object.defineProperty(Hf,"__esModule",{value:!0});const n=Le(),e=Ye(),t=bv(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,n._)`{allowedValues: ${o}}`},code(o){const{gen:l,data:c,$data:f,schema:d,schemaCode:p,it:m}=o;if(!f&&d.length===0)throw new Error("enum must have non-empty array");const y=d.length>=m.opts.loopEnum;let v;const x=()=>v??(v=(0,e.useFunc)(l,t.default));let _;if(y||f)_=l.let("valid"),o.block$data(_,S);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const w=l.const("vSchema",p);_=(0,n.or)(...d.map((C,k)=>A(w,k)))}o.pass(_);function S(){l.assign(_,!1),l.forOf("v",p,w=>l.if((0,n._)`${x()}(${c}, ${w})`,()=>l.assign(_,!0).break()))}function A(w,C){const k=d[C];return typeof k=="object"&&k!==null?(0,n._)`${x()}(${c}, ${w}[${C}])`:(0,n._)`${c} === ${k}`}}};return Hf.default=r,Hf}var z2;function MT(){if(z2)return Of;z2=1,Object.defineProperty(Of,"__esModule",{value:!0});const n=gz(),e=yz(),t=bz(),i=Sz(),r=xz(),o=wz(),l=_z(),c=Cz(),f=Az(),d=Tz(),p=[n.default,e.default,t.default,i.default,r.default,o.default,l.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},f.default,d.default];return Of.default=p,Of}var If={},aa={},$2;function DT(){if($2)return aa;$2=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.validateAdditionalItems=void 0;const n=Le(),e=Ye(),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,n.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,n._)`{limit: ${o}}`},code(o){const{parentSchema:l,it:c}=o,{items:f}=l;if(!Array.isArray(f)){(0,e.checkStrictMode)(c,'"additionalItems" is ignored when "items" is not an array of schemas');return}r(o,f)}};function r(o,l){const{gen:c,schema:f,data:d,keyword:p,it:m}=o;m.items=!0;const y=c.const("len",(0,n._)`${d}.length`);if(f===!1)o.setParams({len:l.length}),o.pass((0,n._)`${y} <= ${l.length}`);else if(typeof f=="object"&&!(0,e.alwaysValidSchema)(m,f)){const x=c.var("valid",(0,n._)`${y} <= ${l.length}`);c.if((0,n.not)(x),()=>v(x)),o.ok(x)}function v(x){c.forRange("i",l.length,y,_=>{o.subschema({keyword:p,dataProp:_,dataPropType:e.Type.Num},x),m.allErrors||c.if((0,n.not)(x),()=>c.break())})}}return aa.validateAdditionalItems=r,aa.default=i,aa}var Uf={},la={},L2;function RT(){if(L2)return la;L2=1,Object.defineProperty(la,"__esModule",{value:!0}),la.validateTuple=void 0;const n=Le(),e=Ye(),t=Vi(),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:l,it:c}=o;if(Array.isArray(l))return r(o,"additionalItems",l);c.items=!0,!(0,e.alwaysValidSchema)(c,l)&&o.ok((0,t.validateArray)(o))}};function r(o,l,c=o.schema){const{gen:f,parentSchema:d,data:p,keyword:m,it:y}=o;_(d),y.opts.unevaluated&&c.length&&y.items!==!0&&(y.items=e.mergeEvaluated.items(f,c.length,y.items));const v=f.name("valid"),x=f.const("len",(0,n._)`${p}.length`);c.forEach((S,A)=>{(0,e.alwaysValidSchema)(y,S)||(f.if((0,n._)`${x} > ${A}`,()=>o.subschema({keyword:m,schemaProp:A,dataProp:A},v)),o.ok(v))});function _(S){const{opts:A,errSchemaPath:w}=y,C=c.length,k=C===S.minItems&&(C===S.maxItems||S[l]===!1);if(A.strictTuples&&!k){const T=`"${m}" is ${C}-tuple, but minItems or maxItems/${l} are not specified or different at path "${w}"`;(0,e.checkStrictMode)(y,T,A.strictTuples)}}}return la.validateTuple=r,la.default=i,la}var j2;function Ez(){if(j2)return Uf;j2=1,Object.defineProperty(Uf,"__esModule",{value:!0});const n=RT(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,n.validateTuple)(t,"items")};return Uf.default=e,Uf}var Vf={},B2;function kz(){if(B2)return Vf;B2=1,Object.defineProperty(Vf,"__esModule",{value:!0});const n=Le(),e=Ye(),t=Vi(),i=DT(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,n.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,n._)`{limit: ${l}}`},code(l){const{schema:c,parentSchema:f,it:d}=l,{prefixItems:p}=f;d.items=!0,!(0,e.alwaysValidSchema)(d,c)&&(p?(0,i.validateAdditionalItems)(l,p):l.ok((0,t.validateArray)(l)))}};return Vf.default=o,Vf}var Ff={},P2;function Oz(){if(P2)return Ff;P2=1,Object.defineProperty(Ff,"__esModule",{value:!0});const n=Le(),e=Ye(),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:r,max:o}})=>o===void 0?(0,n.str)`must contain at least ${r} valid item(s)`:(0,n.str)`must contain at least ${r} and no more than ${o} valid item(s)`,params:({params:{min:r,max:o}})=>o===void 0?(0,n._)`{minContains: ${r}}`:(0,n._)`{minContains: ${r}, maxContains: ${o}}`},code(r){const{gen:o,schema:l,parentSchema:c,data:f,it:d}=r;let p,m;const{minContains:y,maxContains:v}=c;d.opts.next?(p=y===void 0?1:y,m=v):p=1;const x=o.const("len",(0,n._)`${f}.length`);if(r.setParams({min:p,max:m}),m===void 0&&p===0){(0,e.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&p>m){(0,e.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,e.alwaysValidSchema)(d,l)){let C=(0,n._)`${x} >= ${p}`;m!==void 0&&(C=(0,n._)`${C} && ${x} <= ${m}`),r.pass(C);return}d.items=!0;const _=o.name("valid");m===void 0&&p===1?A(_,()=>o.if(_,()=>o.break())):p===0?(o.let(_,!0),m!==void 0&&o.if((0,n._)`${f}.length > 0`,S)):(o.let(_,!1),S()),r.result(_,()=>r.reset());function S(){const C=o.name("_valid"),k=o.let("count",0);A(C,()=>o.if(C,()=>w(k)))}function A(C,k){o.forRange("i",0,x,T=>{r.subschema({keyword:"contains",dataProp:T,dataPropType:e.Type.Num,compositeRule:!0},C),k()})}function w(C){o.code((0,n._)`${C}++`),m===void 0?o.if((0,n._)`${C} >= ${p}`,()=>o.assign(_,!0).break()):(o.if((0,n._)`${C} > ${m}`,()=>o.assign(_,!1).break()),p===1?o.assign(_,!0):o.if((0,n._)`${C} >= ${p}`,()=>o.assign(_,!0)))}}};return Ff.default=i,Ff}var m0={},q2;function Sv(){return q2||(q2=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const e=Le(),t=Ye(),i=Vi();n.error={message:({params:{property:f,depsCount:d,deps:p}})=>{const m=d===1?"property":"properties";return(0,e.str)`must have ${m} ${p} when property ${f} is present`},params:({params:{property:f,depsCount:d,deps:p,missingProperty:m}})=>(0,e._)`{property: ${f},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${p}}`};const r={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(f){const[d,p]=o(f);l(f,d),c(f,p)}};function o({schema:f}){const d={},p={};for(const m in f){if(m==="__proto__")continue;const y=Array.isArray(f[m])?d:p;y[m]=f[m]}return[d,p]}function l(f,d=f.schema){const{gen:p,data:m,it:y}=f;if(Object.keys(d).length===0)return;const v=p.let("missing");for(const x in d){const _=d[x];if(_.length===0)continue;const S=(0,i.propertyInData)(p,m,x,y.opts.ownProperties);f.setParams({property:x,depsCount:_.length,deps:_.join(", ")}),y.allErrors?p.if(S,()=>{for(const A of _)(0,i.checkReportMissingProp)(f,A)}):(p.if((0,e._)`${S} && (${(0,i.checkMissingProp)(f,_,v)})`),(0,i.reportMissingProp)(f,v),p.else())}}n.validatePropertyDeps=l;function c(f,d=f.schema){const{gen:p,data:m,keyword:y,it:v}=f,x=p.name("valid");for(const _ in d)(0,t.alwaysValidSchema)(v,d[_])||(p.if((0,i.propertyInData)(p,m,_,v.opts.ownProperties),()=>{const S=f.subschema({keyword:y,schemaProp:_},x);f.mergeValidEvaluated(S,x)},()=>p.var(x,!0)),f.ok(x))}n.validateSchemaDeps=c,n.default=r})(m0)),m0}var Wf={},H2;function Mz(){if(H2)return Wf;H2=1,Object.defineProperty(Wf,"__esModule",{value:!0});const n=Le(),e=Ye(),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:r})=>(0,n._)`{propertyName: ${r.propertyName}}`},code(r){const{gen:o,schema:l,data:c,it:f}=r;if((0,e.alwaysValidSchema)(f,l))return;const d=o.name("valid");o.forIn("key",c,p=>{r.setParams({propertyName:p}),r.subschema({keyword:"propertyNames",data:p,dataTypes:["string"],propertyName:p,compositeRule:!0},d),o.if((0,n.not)(d),()=>{r.error(!0),f.allErrors||o.break()})}),r.ok(d)}};return Wf.default=i,Wf}var Kf={},I2;function NT(){if(I2)return Kf;I2=1,Object.defineProperty(Kf,"__esModule",{value:!0});const n=Vi(),e=Le(),t=Ui(),i=Ye(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,e._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:c,schema:f,parentSchema:d,data:p,errsCount:m,it:y}=l;if(!m)throw new Error("ajv implementation error");const{allErrors:v,opts:x}=y;if(y.props=!0,x.removeAdditional!=="all"&&(0,i.alwaysValidSchema)(y,f))return;const _=(0,n.allSchemaProperties)(d.properties),S=(0,n.allSchemaProperties)(d.patternProperties);A(),l.ok((0,e._)`${m} === ${t.default.errors}`);function A(){c.forIn("key",p,O=>{!_.length&&!S.length?k(O):c.if(w(O),()=>k(O))})}function w(O){let E;if(_.length>8){const R=(0,i.schemaRefOrVal)(y,d.properties,"properties");E=(0,n.isOwnProperty)(c,R,O)}else _.length?E=(0,e.or)(..._.map(R=>(0,e._)`${O} === ${R}`)):E=e.nil;return S.length&&(E=(0,e.or)(E,...S.map(R=>(0,e._)`${(0,n.usePattern)(l,R)}.test(${O})`))),(0,e.not)(E)}function C(O){c.code((0,e._)`delete ${p}[${O}]`)}function k(O){if(x.removeAdditional==="all"||x.removeAdditional&&f===!1){C(O);return}if(f===!1){l.setParams({additionalProperty:O}),l.error(),v||c.break();return}if(typeof f=="object"&&!(0,i.alwaysValidSchema)(y,f)){const E=c.name("valid");x.removeAdditional==="failing"?(T(O,E,!1),c.if((0,e.not)(E),()=>{l.reset(),C(O)})):(T(O,E),v||c.if((0,e.not)(E),()=>c.break()))}}function T(O,E,R){const j={keyword:"additionalProperties",dataProp:O,dataPropType:i.Type.Str};R===!1&&Object.assign(j,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema(j,E)}}};return Kf.default=o,Kf}var Yf={},U2;function Dz(){if(U2)return Yf;U2=1,Object.defineProperty(Yf,"__esModule",{value:!0});const n=Hc(),e=Vi(),t=Ye(),i=NT(),r={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:l,schema:c,parentSchema:f,data:d,it:p}=o;p.opts.removeAdditional==="all"&&f.additionalProperties===void 0&&i.default.code(new n.KeywordCxt(p,i.default,"additionalProperties"));const m=(0,e.allSchemaProperties)(c);for(const S of m)p.definedProperties.add(S);p.opts.unevaluated&&m.length&&p.props!==!0&&(p.props=t.mergeEvaluated.props(l,(0,t.toHash)(m),p.props));const y=m.filter(S=>!(0,t.alwaysValidSchema)(p,c[S]));if(y.length===0)return;const v=l.name("valid");for(const S of y)x(S)?_(S):(l.if((0,e.propertyInData)(l,d,S,p.opts.ownProperties)),_(S),p.allErrors||l.else().var(v,!0),l.endIf()),o.it.definedProperties.add(S),o.ok(v);function x(S){return p.opts.useDefaults&&!p.compositeRule&&c[S].default!==void 0}function _(S){o.subschema({keyword:"properties",schemaProp:S,dataProp:S},v)}}};return Yf.default=r,Yf}var Gf={},V2;function Rz(){if(V2)return Gf;V2=1,Object.defineProperty(Gf,"__esModule",{value:!0});const n=Vi(),e=Le(),t=Ye(),i=Ye(),r={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:l,schema:c,data:f,parentSchema:d,it:p}=o,{opts:m}=p,y=(0,n.allSchemaProperties)(c),v=y.filter(k=>(0,t.alwaysValidSchema)(p,c[k]));if(y.length===0||v.length===y.length&&(!p.opts.unevaluated||p.props===!0))return;const x=m.strictSchema&&!m.allowMatchingProperties&&d.properties,_=l.name("valid");p.props!==!0&&!(p.props instanceof e.Name)&&(p.props=(0,i.evaluatedPropsToName)(l,p.props));const{props:S}=p;A();function A(){for(const k of y)x&&w(k),p.allErrors?C(k):(l.var(_,!0),C(k),l.if(_))}function w(k){for(const T in x)new RegExp(k).test(T)&&(0,t.checkStrictMode)(p,`property ${T} matches pattern ${k} (use allowMatchingProperties)`)}function C(k){l.forIn("key",f,T=>{l.if((0,e._)`${(0,n.usePattern)(o,k)}.test(${T})`,()=>{const O=v.includes(k);O||o.subschema({keyword:"patternProperties",schemaProp:k,dataProp:T,dataPropType:i.Type.Str},_),p.opts.unevaluated&&S!==!0?l.assign((0,e._)`${S}[${T}]`,!0):!O&&!p.allErrors&&l.if((0,e.not)(_),()=>l.break())})})}}};return Gf.default=r,Gf}var Xf={},F2;function Nz(){if(F2)return Xf;F2=1,Object.defineProperty(Xf,"__esModule",{value:!0});const n=Ye(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:i,schema:r,it:o}=t;if((0,n.alwaysValidSchema)(o,r)){t.fail();return}const l=i.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),t.failResult(l,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};return Xf.default=e,Xf}var Qf={},W2;function zz(){if(W2)return Qf;W2=1,Object.defineProperty(Qf,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vi().validateUnion,error:{message:"must match a schema in anyOf"}};return Qf.default=e,Qf}var Jf={},K2;function $z(){if(K2)return Jf;K2=1,Object.defineProperty(Jf,"__esModule",{value:!0});const n=Le(),e=Ye(),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:r})=>(0,n._)`{passingSchemas: ${r.passing}}`},code(r){const{gen:o,schema:l,parentSchema:c,it:f}=r;if(!Array.isArray(l))throw new Error("ajv implementation error");if(f.opts.discriminator&&c.discriminator)return;const d=l,p=o.let("valid",!1),m=o.let("passing",null),y=o.name("_valid");r.setParams({passing:m}),o.block(v),r.result(p,()=>r.reset(),()=>r.error(!0));function v(){d.forEach((x,_)=>{let S;(0,e.alwaysValidSchema)(f,x)?o.var(y,!0):S=r.subschema({keyword:"oneOf",schemaProp:_,compositeRule:!0},y),_>0&&o.if((0,n._)`${y} && ${p}`).assign(p,!1).assign(m,(0,n._)`[${m}, ${_}]`).else(),o.if(y,()=>{o.assign(p,!0),o.assign(m,_),S&&r.mergeEvaluated(S,n.Name)})})}}};return Jf.default=i,Jf}var Zf={},Y2;function Lz(){if(Y2)return Zf;Y2=1,Object.defineProperty(Zf,"__esModule",{value:!0});const n=Ye(),e={keyword:"allOf",schemaType:"array",code(t){const{gen:i,schema:r,it:o}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const l=i.name("valid");r.forEach((c,f)=>{if((0,n.alwaysValidSchema)(o,c))return;const d=t.subschema({keyword:"allOf",schemaProp:f},l);t.ok(l),t.mergeEvaluated(d)})}};return Zf.default=e,Zf}var eh={},G2;function jz(){if(G2)return eh;G2=1,Object.defineProperty(eh,"__esModule",{value:!0});const n=Le(),e=Ye(),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,n.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,n._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:l,parentSchema:c,it:f}=o;c.then===void 0&&c.else===void 0&&(0,e.checkStrictMode)(f,'"if" without "then" and "else" is ignored');const d=r(f,"then"),p=r(f,"else");if(!d&&!p)return;const m=l.let("valid",!0),y=l.name("_valid");if(v(),o.reset(),d&&p){const _=l.let("ifClause");o.setParams({ifClause:_}),l.if(y,x("then",_),x("else",_))}else d?l.if(y,x("then")):l.if((0,n.not)(y),x("else"));o.pass(m,()=>o.error(!0));function v(){const _=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},y);o.mergeEvaluated(_)}function x(_,S){return()=>{const A=o.subschema({keyword:_},y);l.assign(m,y),o.mergeValidEvaluated(A,m),S?l.assign(S,(0,n._)`${_}`):o.setParams({ifClause:_})}}}};function r(o,l){const c=o.schema[l];return c!==void 0&&!(0,e.alwaysValidSchema)(o,c)}return eh.default=i,eh}var th={},X2;function Bz(){if(X2)return th;X2=1,Object.defineProperty(th,"__esModule",{value:!0});const n=Ye(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:i,it:r}){i.if===void 0&&(0,n.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};return th.default=e,th}var Q2;function zT(){if(Q2)return If;Q2=1,Object.defineProperty(If,"__esModule",{value:!0});const n=DT(),e=Ez(),t=RT(),i=kz(),r=Oz(),o=Sv(),l=Mz(),c=NT(),f=Dz(),d=Rz(),p=Nz(),m=zz(),y=$z(),v=Lz(),x=jz(),_=Bz();function S(A=!1){const w=[p.default,m.default,y.default,v.default,x.default,_.default,l.default,c.default,o.default,f.default,d.default];return A?w.push(e.default,i.default):w.push(n.default,t.default),w.push(r.default),w}return If.default=S,If}var nh={},ca={},J2;function $T(){if(J2)return ca;J2=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.dynamicAnchor=void 0;const n=Le(),e=Ui(),t=dp(),i=vv(),r={keyword:"$dynamicAnchor",schemaType:"string",code:c=>o(c,c.schema)};function o(c,f){const{gen:d,it:p}=c;p.schemaEnv.root.dynamicAnchors[f]=!0;const m=(0,n._)`${e.default.dynamicAnchors}${(0,n.getProperty)(f)}`,y=p.errSchemaPath==="#"?p.validateName:l(c);d.if((0,n._)`!${m}`,()=>d.assign(m,y))}ca.dynamicAnchor=o;function l(c){const{schemaEnv:f,schema:d,self:p}=c.it,{root:m,baseId:y,localRefs:v,meta:x}=f.root,{schemaId:_}=p.opts,S=new t.SchemaEnv({schema:d,schemaId:_,root:m,baseId:y,localRefs:v,meta:x});return t.compileSchema.call(p,S),(0,i.getValidate)(c,S)}return ca.default=r,ca}var ua={},Z2;function LT(){if(Z2)return ua;Z2=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.dynamicRef=void 0;const n=Le(),e=Ui(),t=vv(),i={keyword:"$dynamicRef",schemaType:"string",code:o=>r(o,o.schema)};function r(o,l){const{gen:c,keyword:f,it:d}=o;if(l[0]!=="#")throw new Error(`"${f}" only supports hash fragment reference`);const p=l.slice(1);if(d.allErrors)m();else{const v=c.let("valid",!1);m(v),o.ok(v)}function m(v){if(d.schemaEnv.root.dynamicAnchors[p]){const x=c.let("_v",(0,n._)`${e.default.dynamicAnchors}${(0,n.getProperty)(p)}`);c.if(x,y(x,v),y(d.validateName,v))}else y(d.validateName,v)()}function y(v,x){return x?()=>c.block(()=>{(0,t.callRef)(o,v),c.let(x,!0)}):()=>(0,t.callRef)(o,v)}}return ua.dynamicRef=r,ua.default=i,ua}var ih={},e_;function Pz(){if(e_)return ih;e_=1,Object.defineProperty(ih,"__esModule",{value:!0});const n=$T(),e=Ye(),t={keyword:"$recursiveAnchor",schemaType:"boolean",code(i){i.schema?(0,n.dynamicAnchor)(i,""):(0,e.checkStrictMode)(i.it,"$recursiveAnchor: false is ignored")}};return ih.default=t,ih}var rh={},t_;function qz(){if(t_)return rh;t_=1,Object.defineProperty(rh,"__esModule",{value:!0});const n=LT(),e={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,n.dynamicRef)(t,t.schema)};return rh.default=e,rh}var n_;function Hz(){if(n_)return nh;n_=1,Object.defineProperty(nh,"__esModule",{value:!0});const n=$T(),e=LT(),t=Pz(),i=qz(),r=[n.default,e.default,t.default,i.default];return nh.default=r,nh}var sh={},oh={},i_;function Iz(){if(i_)return oh;i_=1,Object.defineProperty(oh,"__esModule",{value:!0});const n=Sv(),e={keyword:"dependentRequired",type:"object",schemaType:"object",error:n.error,code:t=>(0,n.validatePropertyDeps)(t)};return oh.default=e,oh}var ah={},r_;function Uz(){if(r_)return ah;r_=1,Object.defineProperty(ah,"__esModule",{value:!0});const n=Sv(),e={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,n.validateSchemaDeps)(t)};return ah.default=e,ah}var lh={},s_;function Vz(){if(s_)return lh;s_=1,Object.defineProperty(lh,"__esModule",{value:!0});const n=Ye(),e={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:i,it:r}){i.contains===void 0&&(0,n.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};return lh.default=e,lh}var o_;function Fz(){if(o_)return sh;o_=1,Object.defineProperty(sh,"__esModule",{value:!0});const n=Iz(),e=Uz(),t=Vz(),i=[n.default,e.default,t.default];return sh.default=i,sh}var ch={},uh={},a_;function Wz(){if(a_)return uh;a_=1,Object.defineProperty(uh,"__esModule",{value:!0});const n=Le(),e=Ye(),t=Ui(),r={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:o})=>(0,n._)`{unevaluatedProperty: ${o.unevaluatedProperty}}`},code(o){const{gen:l,schema:c,data:f,errsCount:d,it:p}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:m,props:y}=p;y instanceof n.Name?l.if((0,n._)`${y} !== true`,()=>l.forIn("key",f,S=>l.if(x(y,S),()=>v(S)))):y!==!0&&l.forIn("key",f,S=>y===void 0?v(S):l.if(_(y,S),()=>v(S))),p.props=!0,o.ok((0,n._)`${d} === ${t.default.errors}`);function v(S){if(c===!1){o.setParams({unevaluatedProperty:S}),o.error(),m||l.break();return}if(!(0,e.alwaysValidSchema)(p,c)){const A=l.name("valid");o.subschema({keyword:"unevaluatedProperties",dataProp:S,dataPropType:e.Type.Str},A),m||l.if((0,n.not)(A),()=>l.break())}}function x(S,A){return(0,n._)`!${S} || !${S}[${A}]`}function _(S,A){const w=[];for(const C in S)S[C]===!0&&w.push((0,n._)`${A} !== ${C}`);return(0,n.and)(...w)}}};return uh.default=r,uh}var fh={},l_;function Kz(){if(l_)return fh;l_=1,Object.defineProperty(fh,"__esModule",{value:!0});const n=Le(),e=Ye(),i={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:r}})=>(0,n.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,n._)`{limit: ${r}}`},code(r){const{gen:o,schema:l,data:c,it:f}=r,d=f.items||0;if(d===!0)return;const p=o.const("len",(0,n._)`${c}.length`);if(l===!1)r.setParams({len:d}),r.fail((0,n._)`${p} > ${d}`);else if(typeof l=="object"&&!(0,e.alwaysValidSchema)(f,l)){const y=o.var("valid",(0,n._)`${p} <= ${d}`);o.if((0,n.not)(y),()=>m(y,d)),r.ok(y)}f.items=!0;function m(y,v){o.forRange("i",v,p,x=>{r.subschema({keyword:"unevaluatedItems",dataProp:x,dataPropType:e.Type.Num},y),f.allErrors||o.if((0,n.not)(y),()=>o.break())})}}};return fh.default=i,fh}var c_;function Yz(){if(c_)return ch;c_=1,Object.defineProperty(ch,"__esModule",{value:!0});const n=Wz(),e=Kz(),t=[n.default,e.default];return ch.default=t,ch}var hh={},dh={},u_;function Gz(){if(u_)return dh;u_=1,Object.defineProperty(dh,"__esModule",{value:!0});const n=Le(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must match format "${i}"`,params:({schemaCode:i})=>(0,n._)`{format: ${i}}`},code(i,r){const{gen:o,data:l,$data:c,schema:f,schemaCode:d,it:p}=i,{opts:m,errSchemaPath:y,schemaEnv:v,self:x}=p;if(!m.validateFormats)return;c?_():S();function _(){const A=o.scopeValue("formats",{ref:x.formats,code:m.code.formats}),w=o.const("fDef",(0,n._)`${A}[${d}]`),C=o.let("fType"),k=o.let("format");o.if((0,n._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>o.assign(C,(0,n._)`${w}.type || "string"`).assign(k,(0,n._)`${w}.validate`),()=>o.assign(C,(0,n._)`"string"`).assign(k,w)),i.fail$data((0,n.or)(T(),O()));function T(){return m.strictSchema===!1?n.nil:(0,n._)`${d} && !${k}`}function O(){const E=v.$async?(0,n._)`(${w}.async ? await ${k}(${l}) : ${k}(${l}))`:(0,n._)`${k}(${l})`,R=(0,n._)`(typeof ${k} == "function" ? ${E} : ${k}.test(${l}))`;return(0,n._)`${k} && ${k} !== true && ${C} === ${r} && !${R}`}}function S(){const A=x.formats[f];if(!A){T();return}if(A===!0)return;const[w,C,k]=O(A);w===r&&i.pass(E());function T(){if(m.strictSchema===!1){x.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${f}" ignored in schema at path "${y}"`}}function O(R){const j=R instanceof RegExp?(0,n.regexpCode)(R):m.code.formats?(0,n._)`${m.code.formats}${(0,n.getProperty)(f)}`:void 0,V=o.scopeValue("formats",{key:f,ref:R,code:j});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,n._)`${V}.validate`]:["string",R,V]}function E(){if(typeof A=="object"&&!(A instanceof RegExp)&&A.async){if(!v.$async)throw new Error("async format in sync schema");return(0,n._)`await ${k}(${l})`}return typeof C=="function"?(0,n._)`${k}(${l})`:(0,n._)`${k}.test(${l})`}}}};return dh.default=t,dh}var f_;function jT(){if(f_)return hh;f_=1,Object.defineProperty(hh,"__esModule",{value:!0});const e=[Gz().default];return hh.default=e,hh}var to={},h_;function BT(){return h_||(h_=1,Object.defineProperty(to,"__esModule",{value:!0}),to.contentVocabulary=to.metadataVocabulary=void 0,to.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],to.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),to}var d_;function Xz(){if(d_)return Tf;d_=1,Object.defineProperty(Tf,"__esModule",{value:!0});const n=OT(),e=MT(),t=zT(),i=Hz(),r=Fz(),o=Yz(),l=jT(),c=BT(),f=[i.default,n.default,e.default,(0,t.default)(!0),l.default,c.metadataVocabulary,c.contentVocabulary,r.default,o.default];return Tf.default=f,Tf}var ph={},Bl={},p_;function Qz(){if(p_)return Bl;p_=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.DiscrError=void 0;var n;return(function(e){e.Tag="tag",e.Mapping="mapping"})(n||(Bl.DiscrError=n={})),Bl}var m_;function PT(){if(m_)return ph;m_=1,Object.defineProperty(ph,"__esModule",{value:!0});const n=Le(),e=Qz(),t=dp(),i=Ic(),r=Ye(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:c,tagName:f}})=>c===e.DiscrError.Tag?`tag "${f}" must be string`:`value of tag "${f}" must be in oneOf`,params:({params:{discrError:c,tag:f,tagName:d}})=>(0,n._)`{error: ${c}, tag: ${d}, tagValue: ${f}}`},code(c){const{gen:f,data:d,schema:p,parentSchema:m,it:y}=c,{oneOf:v}=m;if(!y.opts.discriminator)throw new Error("discriminator: requires discriminator option");const x=p.propertyName;if(typeof x!="string")throw new Error("discriminator: requires propertyName");if(p.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const _=f.let("valid",!1),S=f.const("tag",(0,n._)`${d}${(0,n.getProperty)(x)}`);f.if((0,n._)`typeof ${S} == "string"`,()=>A(),()=>c.error(!1,{discrError:e.DiscrError.Tag,tag:S,tagName:x})),c.ok(_);function A(){const k=C();f.if(!1);for(const T in k)f.elseIf((0,n._)`${S} === ${T}`),f.assign(_,w(k[T]));f.else(),c.error(!1,{discrError:e.DiscrError.Mapping,tag:S,tagName:x}),f.endIf()}function w(k){const T=f.name("valid"),O=c.subschema({keyword:"oneOf",schemaProp:k},T);return c.mergeEvaluated(O,n.Name),T}function C(){var k;const T={},O=R(m);let E=!0;for(let P=0;P<v.length;P++){let q=v[P];if(q?.$ref&&!(0,r.schemaHasRulesButRef)(q,y.self.RULES)){const J=q.$ref;if(q=t.resolveRef.call(y.self,y.schemaEnv.root,y.baseId,J),q instanceof t.SchemaEnv&&(q=q.schema),q===void 0)throw new i.default(y.opts.uriResolver,y.baseId,J)}const X=(k=q?.properties)===null||k===void 0?void 0:k[x];if(typeof X!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${x}"`);E=E&&(O||R(q)),j(X,P)}if(!E)throw new Error(`discriminator: "${x}" must be required`);return T;function R({required:P}){return Array.isArray(P)&&P.includes(x)}function j(P,q){if(P.const)V(P.const,q);else if(P.enum)for(const X of P.enum)V(X,q);else throw new Error(`discriminator: "properties/${x}" must have "const" or "enum"`)}function V(P,q){if(typeof P!="string"||P in T)throw new Error(`discriminator: "${x}" values must be unique strings`);T[P]=q}}}};return ph.default=l,ph}var mh={};const Jz="https://json-schema.org/draft/2020-12/schema",Zz="https://json-schema.org/draft/2020-12/schema",e5={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},t5="meta",n5="Core and Validation specifications meta-schema",i5=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],r5=["object","boolean"],s5="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",o5={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},a5={$schema:Jz,$id:Zz,$vocabulary:e5,$dynamicAnchor:t5,title:n5,allOf:i5,type:r5,$comment:s5,properties:o5},l5="https://json-schema.org/draft/2020-12/schema",c5="https://json-schema.org/draft/2020-12/meta/applicator",u5={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},f5="meta",h5="Applicator vocabulary meta-schema",d5=["object","boolean"],p5={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},m5={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},g5={$schema:l5,$id:c5,$vocabulary:u5,$dynamicAnchor:f5,title:h5,type:d5,properties:p5,$defs:m5},y5="https://json-schema.org/draft/2020-12/schema",v5="https://json-schema.org/draft/2020-12/meta/unevaluated",b5={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},S5="meta",x5="Unevaluated applicator vocabulary meta-schema",w5=["object","boolean"],_5={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},C5={$schema:y5,$id:v5,$vocabulary:b5,$dynamicAnchor:S5,title:x5,type:w5,properties:_5},A5="https://json-schema.org/draft/2020-12/schema",T5="https://json-schema.org/draft/2020-12/meta/content",E5={"https://json-schema.org/draft/2020-12/vocab/content":!0},k5="meta",O5="Content vocabulary meta-schema",M5=["object","boolean"],D5={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},R5={$schema:A5,$id:T5,$vocabulary:E5,$dynamicAnchor:k5,title:O5,type:M5,properties:D5},N5="https://json-schema.org/draft/2020-12/schema",z5="https://json-schema.org/draft/2020-12/meta/core",$5={"https://json-schema.org/draft/2020-12/vocab/core":!0},L5="meta",j5="Core vocabulary meta-schema",B5=["object","boolean"],P5={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},q5={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},H5={$schema:N5,$id:z5,$vocabulary:$5,$dynamicAnchor:L5,title:j5,type:B5,properties:P5,$defs:q5},I5="https://json-schema.org/draft/2020-12/schema",U5="https://json-schema.org/draft/2020-12/meta/format-annotation",V5={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},F5="meta",W5="Format vocabulary meta-schema for annotation results",K5=["object","boolean"],Y5={format:{type:"string"}},G5={$schema:I5,$id:U5,$vocabulary:V5,$dynamicAnchor:F5,title:W5,type:K5,properties:Y5},X5="https://json-schema.org/draft/2020-12/schema",Q5="https://json-schema.org/draft/2020-12/meta/meta-data",J5={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},Z5="meta",e$="Meta-data vocabulary meta-schema",t$=["object","boolean"],n$={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},i$={$schema:X5,$id:Q5,$vocabulary:J5,$dynamicAnchor:Z5,title:e$,type:t$,properties:n$},r$="https://json-schema.org/draft/2020-12/schema",s$="https://json-schema.org/draft/2020-12/meta/validation",o$={"https://json-schema.org/draft/2020-12/vocab/validation":!0},a$="meta",l$="Validation vocabulary meta-schema",c$=["object","boolean"],u$={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},f$={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},h$={$schema:r$,$id:s$,$vocabulary:o$,$dynamicAnchor:a$,title:l$,type:c$,properties:u$,$defs:f$};var g_;function d$(){if(g_)return mh;g_=1,Object.defineProperty(mh,"__esModule",{value:!0});const n=a5,e=g5,t=C5,i=R5,r=H5,o=G5,l=i$,c=h$,f=["/properties"];function d(p){return[n,e,t,i,r,m(this,o),l,m(this,c)].forEach(y=>this.addMetaSchema(y,void 0,!1)),this;function m(y,v){return p?y.$dataMetaSchema(v,f):v}}return mh.default=d,mh}var y_;function p$(){return y_||(y_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv2020=void 0;const t=kT(),i=Xz(),r=PT(),o=d$(),l="https://json-schema.org/draft/2020-12/schema";class c extends t.default{constructor(v={}){super({...v,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),i.default.forEach(v=>this.addVocabulary(v)),this.opts.discriminator&&this.addKeyword(r.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:v,meta:x}=this.opts;x&&(o.default.call(this,v),this.refs["http://json-schema.org/schema"]=l)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.Ajv2020=c,n.exports=e=c,n.exports.Ajv2020=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var f=Hc();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var d=Le();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=hp();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var m=Ic();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return m.default}})})(xf,xf.exports)),xf.exports}var m$=p$();const g$=Nc(m$);var gh={exports:{}},g0={},v_;function y$(){return v_||(v_=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatNames=n.fastFormats=n.fullFormats=void 0;function e(P,q){return{validate:P,compare:q}}n.fullFormats={date:e(o,l),time:e(f(!0),d),"date-time":e(y(!0),v),"iso-time":e(f(),p),"iso-date-time":e(y(),x),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:A,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:V,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:C,int32:{type:"number",validate:O},int64:{type:"number",validate:E},float:{type:"number",validate:R},double:{type:"number",validate:R},password:!0,binary:!0},n.fastFormats={...n.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,l),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,v),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,x),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},n.formatNames=Object.keys(n.fullFormats);function t(P){return P%4===0&&(P%100!==0||P%400===0)}const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(P){const q=i.exec(P);if(!q)return!1;const X=+q[1],J=+q[2],ce=+q[3];return J>=1&&J<=12&&ce>=1&&ce<=(J===2&&t(X)?29:r[J])}function l(P,q){if(P&&q)return P>q?1:P<q?-1:0}const c=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function f(P){return function(X){const J=c.exec(X);if(!J)return!1;const ce=+J[1],K=+J[2],U=+J[3],ee=J[4],oe=J[5]==="-"?-1:1,Y=+(J[6]||0),N=+(J[7]||0);if(Y>23||N>59||P&&!ee)return!1;if(ce<=23&&K<=59&&U<60)return!0;const z=K-N*oe,B=ce-Y*oe-(z<0?1:0);return(B===23||B===-1)&&(z===59||z===-1)&&U<61}}function d(P,q){if(!(P&&q))return;const X=new Date("2020-01-01T"+P).valueOf(),J=new Date("2020-01-01T"+q).valueOf();if(X&&J)return X-J}function p(P,q){if(!(P&&q))return;const X=c.exec(P),J=c.exec(q);if(X&&J)return P=X[1]+X[2]+X[3],q=J[1]+J[2]+J[3],P>q?1:P<q?-1:0}const m=/t|\s/i;function y(P){const q=f(P);return function(J){const ce=J.split(m);return ce.length===2&&o(ce[0])&&q(ce[1])}}function v(P,q){if(!(P&&q))return;const X=new Date(P).valueOf(),J=new Date(q).valueOf();if(X&&J)return X-J}function x(P,q){if(!(P&&q))return;const[X,J]=P.split(m),[ce,K]=q.split(m),U=l(X,ce);if(U!==void 0)return U||d(J,K)}const _=/\/|:/,S=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function A(P){return _.test(P)&&S.test(P)}const w=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function C(P){return w.lastIndex=0,w.test(P)}const k=-2147483648,T=2**31-1;function O(P){return Number.isInteger(P)&&P<=T&&P>=k}function E(P){return Number.isInteger(P)}function R(){return!0}const j=/[^\\]\\Z/;function V(P){if(j.test(P))return!1;try{return new RegExp(P),!0}catch{return!1}}})(g0)),g0}var y0={},yh={exports:{}},vh={},b_;function v$(){if(b_)return vh;b_=1,Object.defineProperty(vh,"__esModule",{value:!0});const n=OT(),e=MT(),t=zT(),i=jT(),r=BT(),o=[n.default,e.default,(0,t.default)(),i.default,r.metadataVocabulary,r.contentVocabulary];return vh.default=o,vh}const b$="http://json-schema.org/draft-07/schema#",S$="http://json-schema.org/draft-07/schema#",x$="Core schema meta-schema",w$={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},_$=["object","boolean"],C$={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},A$={$schema:b$,$id:S$,title:x$,definitions:w$,type:_$,properties:C$,default:!0};var S_;function T$(){return S_||(S_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const t=kT(),i=v$(),r=PT(),o=A$,l=["/properties"],c="http://json-schema.org/draft-07/schema";class f extends t.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(x=>this.addVocabulary(x)),this.opts.discriminator&&this.addKeyword(r.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const x=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema(x,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}e.Ajv=f,n.exports=e=f,n.exports.Ajv=f,Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var d=Hc();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var p=Le();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var m=hp();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return m.default}});var y=Ic();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(yh,yh.exports)),yh.exports}var x_;function E$(){return x_||(x_=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatLimitDefinition=void 0;const e=T$(),t=Le(),i=t.operators,r={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},o={message:({keyword:c,schemaCode:f})=>(0,t.str)`should be ${r[c].okStr} ${f}`,params:({keyword:c,schemaCode:f})=>(0,t._)`{comparison: ${r[c].okStr}, limit: ${f}}`};n.formatLimitDefinition={keyword:Object.keys(r),type:"string",schemaType:"string",$data:!0,error:o,code(c){const{gen:f,data:d,schemaCode:p,keyword:m,it:y}=c,{opts:v,self:x}=y;if(!v.validateFormats)return;const _=new e.KeywordCxt(y,x.RULES.all.format.definition,"format");_.$data?S():A();function S(){const C=f.scopeValue("formats",{ref:x.formats,code:v.code.formats}),k=f.const("fmt",(0,t._)`${C}[${_.schemaCode}]`);c.fail$data((0,t.or)((0,t._)`typeof ${k} != "object"`,(0,t._)`${k} instanceof RegExp`,(0,t._)`typeof ${k}.compare != "function"`,w(k)))}function A(){const C=_.schema,k=x.formats[C];if(!k||k===!0)return;if(typeof k!="object"||k instanceof RegExp||typeof k.compare!="function")throw new Error(`"${m}": format "${C}" does not define "compare" function`);const T=f.scopeValue("formats",{key:C,ref:k,code:v.code.formats?(0,t._)`${v.code.formats}${(0,t.getProperty)(C)}`:void 0});c.fail$data(w(T))}function w(C){return(0,t._)`${C}.compare(${d}, ${p}) ${r[m].fail} 0`}},dependencies:["format"]};const l=c=>(c.addKeyword(n.formatLimitDefinition),c);n.default=l})(y0)),y0}var w_;function k$(){return w_||(w_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});const t=y$(),i=E$(),r=Le(),o=new r.Name("fullFormats"),l=new r.Name("fastFormats"),c=(d,p={keywords:!0})=>{if(Array.isArray(p))return f(d,p,t.fullFormats,o),d;const[m,y]=p.mode==="fast"?[t.fastFormats,l]:[t.fullFormats,o],v=p.formats||t.formatNames;return f(d,v,m,y),p.keywords&&(0,i.default)(d),d};c.get=(d,p="full")=>{const y=(p==="fast"?t.fastFormats:t.fullFormats)[d];if(!y)throw new Error(`Unknown format "${d}"`);return y};function f(d,p,m,y){var v,x;(v=(x=d.opts.code).formats)!==null&&v!==void 0||(x.formats=(0,r._)`require("ajv-formats/dist/formats").${y}`);for(const _ of p)d.addFormat(_,m[_])}n.exports=e=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c})(gh,gh.exports)),gh.exports}var O$=k$();const M$=Nc(O$),D$="https://json-schema.org/draft/2020-12/schema",R$="interactive_balance_data.schema.json",N$="2.0.0",z$="Interactive Balance Data",$$="Interactive balance data with accounts, journal entries and the balance sheet structure",L$="object",j$={schemaVersion:{type:"string"},balanceSheet:{$ref:"balance_sheet.schema.json"},accounts:{description:"List of all accounts",type:"array",items:{$ref:"account.schema.json"}},journalEntries:{description:"List of all journal Entries",type:"array",items:{$ref:"journal_entry.schema.json"}}},B$=!1,P$=["balanceSheet","accounts","journalEntries"],q$={$schema:D$,$id:R$,version:N$,title:z$,description:$$,type:L$,properties:j$,additionalProperties:B$,required:P$},H$="https://json-schema.org/draft/2020-12/schema",I$="balance_sheet.schema.json",U$="Balance Sheet",V$="The balance sheet holding the structure of accounts, sums and balance",F$="object",W$={assets:{description:"List of all positions and accounts on the assets side",type:"object",properties:{accounts:{description:"List of account ids directly assigned to this position",type:"array",items:{type:"string",pattern:"^[0-9]{4}$"}},positions:{type:"array",items:{$ref:"#/$defs/position"}}}},liabilitiesAndEquity:{description:"List of all positions and accounts on the liabilities and equity side",type:"object",properties:{accounts:{description:"List of account ids directly assigned to this position",type:"array",items:{type:"string",pattern:"^[0-9]{4}$"}},positions:{type:"array",items:{$ref:"#/$defs/position"}}}}},K$=!1,Y$=["assets","liabilitiesAndEquity"],G$={position:{type:"object",properties:{id:{type:"string"},label:{type:"string"},accounts:{description:"List of account ids directly assigned to this position",type:"array",items:{type:"string",pattern:"^[0-9]{4}$"}},positions:{type:"array",items:{$ref:"#/$defs/position"}}},additionalProperties:!1,required:["label","accounts","positions"]}},X$={$schema:H$,$id:I$,title:U$,description:V$,type:F$,properties:W$,additionalProperties:K$,required:Y$,$defs:G$},Q$="https://json-schema.org/draft/2020-12/schema",J$="account.schema.json",Z$="Account",eL="Account in the balance sheet",tL="object",nL={id:{type:"string",pattern:"^[0-9]{4}$"},label:{type:"string"}},iL=!1,rL=["id","label"],sL={$schema:Q$,$id:J$,title:Z$,description:eL,type:tL,properties:nL,additionalProperties:iL,required:rL},oL="https://json-schema.org/draft/2020-12/schema",aL="journal_entry.schema.json",lL="Journal Entry",cL="A journal entry with at least one debit-line and one credit-line",uL="object",fL={id:{type:"number"},description:{type:"string"},entryLines:{type:"array",items:{$ref:"#/$defs/entryLine"},default:[]}},hL=!1,dL=["id","description","entryLines"],pL={entryLine:{type:"object",properties:{accountId:{type:"string",pattern:"^[0-9]{4}$"},amount:{type:"number"},entryType:{enum:["credit","debit"]}},required:["accountId","amount","entryType"],additionalProperties:!1}},mL={$schema:oL,$id:aL,title:lL,description:cL,type:uL,properties:fL,additionalProperties:hL,required:dL,$defs:pL},Uc=new g$({strict:!1,allErrors:!0,allowUnionTypes:!0});M$(Uc);Uc.addSchema(X$,"balance_sheet.schema.json");Uc.addSchema(sL,"account.schema.json");Uc.addSchema(mL,"journal_entry.schema.json");const yd=Uc.compile(q$);function gL(){const n=yn.c(22),{interactiveBalanceData:e,setInteractiveBalanceData:t}=Pi(),[i,r]=W.useState(null),[o,l]=W.useState(null),{closeAllWindowsExcept:c}=La();let f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=E=>{if(l(null),!E.target.files?.[0]){l("Keine Datei gefunden"),Me.error(H.jsxs(H.Fragment,{children:["Upload fehlgeschlagen ",H.jsx("br",{}),"Keine Datei gefunden"]}));return}r(E.target.files[0]),console.log("uploaded: ",E.target.files[0])},n[0]=f):f=n[0];const d=f;let p;n[1]!==c||n[2]!==t||n[3]!==i?(p=()=>{if(l(null),!i)return;const E=new FileReader;E.readAsText(i,"UTF-8"),E.onload=R=>{const j=R.target?.result?.toString();if(!j){l("Keine Datei gefunden"),Me.error(H.jsxs(H.Fragment,{children:["Upload fehlgeschlagen ",H.jsx("br",{}),"Keine Datei gefunden"]}));return}let V;try{V=JSON.parse(j)}catch(q){console.error("Invalid JSON:",q),l("Fehler beim Parsing des JSON-String"),Me.error(H.jsxs(H.Fragment,{children:["Upload fehlgeschlagen ",H.jsx("br",{}),"Fehler beim Parsing des JSON-String"]}));return}if(!yd(V)){console.error("Validation errors:",yd.errors),l("JSON-Format ist nicht zulssig"),Me.error(H.jsxs("div",{children:["Upload fehlgeschlagen ",H.jsx("br",{}),"Format nicht zulssig ",H.jsx("br",{})]}));return}t(V),c({type:"FileHandeling",payload:{}}),console.log("Successfully loaded project:",V),Me.success("Upload erfolgreich!")}},n[1]=c,n[2]=t,n[3]=i,n[4]=p):p=n[4];const m=p;let y;n[5]!==e?(y=()=>{if(!e)return;const E=new Blob([JSON.stringify(e)],{type:"application/json"}),R=URL.createObjectURL(E),j=document.createElement("a");j.href=R,j.download="interactive_balance_data_project.json",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(R),Me.success("Downsload erfolgreich!")},n[5]=e,n[6]=y):y=n[6];const v=y;let x;n[7]===Symbol.for("react.memo_cache_sentinel")?(x=H.jsxs("label",{className:"flex flex-col w-full",children:[H.jsx("span",{className:"text-sm font-medium text-gray-700 mb-1",children:"Upload JSON"}),H.jsx("input",{type:"file",accept:".json",onChange:d,className:"block w-full text-xs text-gray-600 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-green-100 file:text-green-700 hover:file:bg-green-200"})]}),n[7]=x):x=n[7];const _=!i,S=`w-full px-3 py-1 rounded text-white text-sm font-medium transition-colors ${i?"bg-green-500 hover:bg-green-600":"bg-gray-300 cursor-not-allowed"}`;let A;n[8]!==m||n[9]!==_||n[10]!==S?(A=H.jsx("button",{disabled:_,onClick:m,className:S,children:"Upload"}),n[8]=m,n[9]=_,n[10]=S,n[11]=A):A=n[11];const w=!e,C=`w-full px-3 py-1 rounded text-white text-sm font-medium transition-colors ${e?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`;let k;n[12]!==v||n[13]!==w||n[14]!==C?(k=H.jsx("button",{disabled:w,onClick:v,className:C,children:"Download"}),n[12]=v,n[13]=w,n[14]=C,n[15]=k):k=n[15];let T;n[16]!==o?(T=o&&H.jsx("div",{className:"bg-red-100 text-red-700 border border-red-300 rounded p-2 text-sm w-full text-center",children:o}),n[16]=o,n[17]=T):T=n[17];let O;return n[18]!==T||n[19]!==A||n[20]!==k?(O=H.jsx("div",{className:"flex justify-center",children:H.jsxs("div",{className:"flex flex-col items-center space-y-2 p-4 bg-white border rounded shadow-md w-80",children:[x,A,k,T]})}),n[18]=T,n[19]=A,n[20]=k,n[21]=O):O=n[21],O}function dy(){return dy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dy.apply(null,arguments)}function yL(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}let py=[],qT=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?qT:py).push(t=t+n[e])})();function vL(n){if(n<768)return!1;for(let e=0,t=py.length;;){let i=e+t>>1;if(n<py[i])t=i;else if(n>=qT[i])e=i+1;else return!0;if(e==t)return!1}}function __(n){return n>=127462&&n<=127487}const C_=8205;function bL(n,e,t=!0,i=!0){return(t?HT:SL)(n,e,i)}function HT(n,e,t){if(e==n.length)return e;e&&IT(n.charCodeAt(e))&&UT(n.charCodeAt(e-1))&&e--;let i=v0(n,e);for(e+=A_(i);e<n.length;){let r=v0(n,e);if(i==C_||r==C_||t&&vL(r))e+=A_(r),i=r;else if(__(r)){let o=0,l=e-2;for(;l>=0&&__(v0(n,l));)o++,l-=2;if(o%2==0)break;e+=2}else break}return e}function SL(n,e,t){for(;e>0;){let i=HT(n,e-2,t);if(i<e)return i;e--}return 0}function v0(n,e){let t=n.charCodeAt(e);if(!UT(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return IT(i)?(t-55296<<10)+(i-56320)+65536:t}function IT(n){return n>=56320&&n<57344}function UT(n){return n>=55296&&n<56320}function A_(n){return n<65536?1:2}class Ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Ea(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),ir.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ea(this,e,t);let i=[];return this.decompose(e,t,i,0),ir.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Jl(this),o=new Jl(e);for(let l=t,c=t;;){if(r.next(l),o.next(l),l=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(c+=r.value.length,r.done||c>=i)return!0}}iter(e=1){return new Jl(this,e)}iterRange(e,t=this.length){return new VT(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new FT(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ze.empty:e.length<=32?new Ot(e):ir.from(Ot.split(e,[]))}}class Ot extends Ze{constructor(e,t=xL(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let l=this.text[o],c=r+l.length;if((t?i:c)>=e)return new wL(r,c,i,l);r=c+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new Ot(T_(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let l=i.pop(),c=Wh(o.text,l.text.slice(),0,o.length);if(c.length<=32)i.push(new Ot(c,l.length+o.length));else{let f=c.length>>1;i.push(new Ot(c.slice(0,f)),new Ot(c.slice(f)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Ot))return super.replace(e,t,i);[e,t]=Ea(this,e,t);let r=Wh(this.text,Wh(i.text,T_(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new Ot(r,o):ir.from(Ot.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=Ea(this,e,t);let r="";for(let o=0,l=0;o<=t&&l<this.text.length;l++){let c=this.text[l],f=o+c.length;o>e&&l&&(r+=i),e<f&&t>o&&(r+=c.slice(Math.max(0,e-o),t-o)),o=f+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new Ot(i,r)),i=[],r=-1);return r>-1&&t.push(new Ot(i,r)),t}}class ir extends Ze{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let l=this.children[o],c=r+l.length,f=i+l.lines-1;if((t?f:c)>=e)return l.lineInner(e,t,i,r);r=c+1,i=f+1}}decompose(e,t,i,r){for(let o=0,l=0;l<=t&&o<this.children.length;o++){let c=this.children[o],f=l+c.length;if(e<=f&&t>=l){let d=r&((l<=e?1:0)|(f>=t?2:0));l>=e&&f<=t&&!d?i.push(c):c.decompose(e-l,t-l,i,d)}l=f+1}}replace(e,t,i){if([e,t]=Ea(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let l=this.children[r],c=o+l.length;if(e>=o&&t<=c){let f=l.replace(e-o,t-o,i),d=this.lines-l.lines+f.lines;if(f.lines<d>>4&&f.lines>d>>6){let p=this.children.slice();return p[r]=f,new ir(p,this.length-(t-e)+i.length)}return super.replace(o,c,f)}o=c+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Ea(this,e,t);let r="";for(let o=0,l=0;o<this.children.length&&l<=t;o++){let c=this.children[o],f=l+c.length;l>e&&o&&(r+=i),e<f&&t>l&&(r+=c.sliceString(e-l,t-l,i)),l=f+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ir))return 0;let i=0,[r,o,l,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==l||o==c)return i;let f=this.children[r],d=e.children[o];if(f!=d)return i+f.scanIdentical(d,t);i+=f.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let v of e)i+=v.lines;if(i<32){let v=[];for(let x of e)x.flatten(v);return new Ot(v,t)}let r=Math.max(32,i>>5),o=r<<1,l=r>>1,c=[],f=0,d=-1,p=[];function m(v){let x;if(v.lines>o&&v instanceof ir)for(let _ of v.children)m(_);else v.lines>l&&(f>l||!f)?(y(),c.push(v)):v instanceof Ot&&f&&(x=p[p.length-1])instanceof Ot&&v.lines+x.lines<=32?(f+=v.lines,d+=v.length+1,p[p.length-1]=new Ot(x.text.concat(v.text),x.length+1+v.length)):(f+v.lines>r&&y(),f+=v.lines,d+=v.length+1,p.push(v))}function y(){f!=0&&(c.push(p.length==1?p[0]:ir.from(p,d)),d=-1,f=p.length=0)}for(let v of e)m(v);return y(),c.length==1?c[0]:new ir(c,t)}}Ze.empty=new Ot([""],0);function xL(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Wh(n,e,t=0,i=1e9){for(let r=0,o=0,l=!0;o<n.length&&r<=i;o++){let c=n[o],f=r+c.length;f>=t&&(f>i&&(c=c.slice(0,i-r)),r<t&&(c=c.slice(t-r)),l?(e[e.length-1]+=c,l=!1):e.push(c)),r=f+1}return e}function T_(n,e,t){return Wh(n,[""],e,t)}class Jl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ot?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],l=o>>1,c=r instanceof Ot?r.text.length:r.children.length;if(l==(t>0?c:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ot){let f=r.text[l+(t<0?-1:0)];if(this.offsets[i]+=t,f.length>Math.max(0,e))return this.value=e==0?f:t>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=r.children[l+(t<0?-1:0)];e>f.length?(e-=f.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(f),this.offsets.push(t>0?1:(f instanceof Ot?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class VT{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Jl(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class FT{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this.iter()},Jl.prototype[Symbol.iterator]=VT.prototype[Symbol.iterator]=FT.prototype[Symbol.iterator]=function(){return this});class wL{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function Ea(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Vt(n,e,t=!0,i=!0){return bL(n,e,t,i)}function _L(n){return n>=56320&&n<57344}function CL(n){return n>=55296&&n<56320}function Pn(n,e){let t=n.charCodeAt(e);if(!CL(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return _L(i)?(t-55296<<10)+(i-56320)+65536:t}function xv(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function rr(n){return n<65536?1:2}const my=/\r\n?|\n/;var _n=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(_n||(_n={}));class lr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],l=this.sections[t++];l<0?(e(i,r,o),r+=o):r+=l,i+=o}}iterChangedRanges(e,t=!1){gy(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new lr(e)}composeDesc(e){return this.empty?e:e.empty?this:WT(this,e)}mapDesc(e,t=!1){return e.empty?this:yy(this,e,t)}mapPos(e,t=-1,i=_n.Simple){let r=0,o=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],f=this.sections[l++],d=r+c;if(f<0){if(d>e)return o+(e-r);o+=c}else{if(i!=_n.Simple&&d>=e&&(i==_n.TrackDel&&r<e&&d>e||i==_n.TrackBefore&&r<e||i==_n.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!c)return e==r||t<0?o:o+f;o+=f}r=d}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],l=this.sections[i++],c=r+o;if(l>=0&&r<=t&&c>=e)return r<e&&c>t?"cover":!0;r=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lr(e)}static create(e){return new lr(e)}}class Ut extends lr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return gy(this,(t,i,r,o,l)=>e=e.replace(r,r+(i-t),l),!1),e}mapDesc(e,t=!1){return yy(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let l=t[r],c=t[r+1];if(c>=0){t[r]=c,t[r+1]=l;let f=r>>1;for(;i.length<f;)i.push(Ze.empty);i.push(l?e.slice(o,o+l):Ze.empty)}o+=l}return new Ut(t,i)}compose(e){return this.empty?e:e.empty?this:WT(this,e,!0)}map(e,t=!1){return e.empty?this:yy(this,e,t,!0)}iterChanges(e,t=!1){gy(this,e,t)}get desc(){return lr.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new pc(this);e:for(let l=0,c=0;;){let f=l==e.length?1e9:e[l++];for(;c<f||c==f&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,f-c);mn(r,p,-1);let m=o.ins==-1?-1:o.off==0?o.ins:0;mn(t,p,m),m>0&&_s(i,t,o.text),o.forward(p),c+=p}let d=e[l++];for(;c<d;){if(o.done)break e;let p=Math.min(o.len,d-c);mn(t,p,-1),mn(r,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),c+=p}}return{changes:new Ut(t,i),filtered:lr.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],l=0,c=null;function f(p=!1){if(!p&&!r.length)return;l<t&&mn(r,t-l,-1);let m=new Ut(r,o);c=c?c.compose(m.map(c)):m,r=[],o=[],l=0}function d(p){if(Array.isArray(p))for(let m of p)d(m);else if(p instanceof Ut){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);f(),c=c?c.compose(p.map(c)):p}else{let{from:m,to:y=m,insert:v}=p;if(m>y||m<0||y>t)throw new RangeError(`Invalid change range ${m} to ${y} (in doc of length ${t})`);let x=v?typeof v=="string"?Ze.of(v.split(i||my)):v:Ze.empty,_=x.length;if(m==y&&_==0)return;m<l&&f(),m>l&&mn(r,m-l,-1),mn(r,y-m,_),_s(o,r,x),l=y}}return d(e),f(!c),c}static empty(e){return new Ut(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(Ze.empty);i[r]=Ze.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new Ut(t,i)}static createSet(e,t){return new Ut(e,t)}}function mn(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function _s(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Ze.empty);n.push(t)}}function gy(n,e,t){let i=n.inserted;for(let r=0,o=0,l=0;l<n.sections.length;){let c=n.sections[l++],f=n.sections[l++];if(f<0)r+=c,o+=c;else{let d=r,p=o,m=Ze.empty;for(;d+=c,p+=f,f&&i&&(m=m.append(i[l-2>>1])),!(t||l==n.sections.length||n.sections[l+1]<0);)c=n.sections[l++],f=n.sections[l++];e(r,d,o,p,m),r=d,o=p}}}function yy(n,e,t,i=!1){let r=[],o=i?[]:null,l=new pc(n),c=new pc(e);for(let f=-1;;){if(l.done&&c.len||c.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&c.ins==-1){let d=Math.min(l.len,c.len);mn(r,d,-1),l.forward(d),c.forward(d)}else if(c.ins>=0&&(l.ins<0||f==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!t))){let d=c.len;for(mn(r,c.ins,-1);d;){let p=Math.min(l.len,d);l.ins>=0&&f<l.i&&l.len<=p&&(mn(r,0,l.ins),o&&_s(o,r,l.text),f=l.i),l.forward(p),d-=p}c.next()}else if(l.ins>=0){let d=0,p=l.len;for(;p;)if(c.ins==-1){let m=Math.min(p,c.len);d+=m,p-=m,c.forward(m)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;mn(r,d,f<l.i?l.ins:0),o&&f<l.i&&_s(o,r,l.text),f=l.i,l.forward(l.len-p)}else{if(l.done&&c.done)return o?Ut.createSet(r,o):lr.create(r);throw new Error("Mismatched change set lengths")}}}function WT(n,e,t=!1){let i=[],r=t?[]:null,o=new pc(n),l=new pc(e);for(let c=!1;;){if(o.done&&l.done)return r?Ut.createSet(i,r):lr.create(i);if(o.ins==0)mn(i,o.len,0,c),o.next();else if(l.len==0&&!l.done)mn(i,0,l.ins,c),r&&_s(r,i,l.text),l.next();else{if(o.done||l.done)throw new Error("Mismatched change set lengths");{let f=Math.min(o.len2,l.len),d=i.length;if(o.ins==-1){let p=l.ins==-1?-1:l.off?0:l.ins;mn(i,f,p,c),r&&p&&_s(r,i,l.text)}else l.ins==-1?(mn(i,o.off?0:o.len,f,c),r&&_s(r,i,o.textBit(f))):(mn(i,o.off?0:o.len,l.off?0:l.ins,c),r&&!l.off&&_s(r,i,l.text));c=(o.ins>f||l.ins>=0&&l.len>f)&&(c||i.length>d),o.forward2(f),l.forward(f)}}}}class pc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ze.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ze.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ao{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new ao(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return me.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return me.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return me.range(e.anchor,e.head)}static create(e,t,i){return new ao(e,t,i)}}class me{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:me.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new me([this.main],0)}addRange(e,t=!0){return me.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,me.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new me(e.ranges.map(t=>ao.fromJSON(t)),e.main)}static single(e,t=e){return new me([me.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return me.normalized(e.slice(),t);i=o.to}return new me(e,t)}static cursor(e,t=0,i,r){return ao.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?ao.create(t,e,48|o):ao.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],l=e[r-1];if(o.empty?o.from<=l.to:o.from<l.to){let c=l.from,f=Math.max(o.to,l.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?me.range(f,c):me.range(c,f))}}return new me(e,t)}}function KT(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let wv=0;class Ce{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=wv++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Ce(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:_v),!!e.static,e.enables)}of(e){return new Kh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function _v(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Kh{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=wv++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,l=e[o]>>1,c=this.type==2,f=!1,d=!1,p=[];for(let m of this.dependencies)m=="doc"?f=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[l]=i(m),1},update(m,y){if(f&&y.docChanged||d&&(y.docChanged||y.selection)||vy(m,p)){let v=i(m);if(c?!E_(v,m.values[l],r):!r(v,m.values[l]))return m.values[l]=v,1}return 0},reconfigure:(m,y)=>{let v,x=y.config.address[o];if(x!=null){let _=bd(y,x);if(this.dependencies.every(S=>S instanceof Ce?y.facet(S)===m.facet(S):S instanceof fn?y.field(S,!1)==m.field(S,!1):!0)||(c?E_(v=i(m),_,r):r(v=i(m),_)))return m.values[l]=_,0}else v=i(m);return m.values[l]=v,1}}}}function E_(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function vy(n,e){let t=!1;for(let i of e)Zl(n,i)&1&&(t=!0);return t}function AL(n,e,t){let i=t.map(f=>n[f.id]),r=t.map(f=>f.type),o=i.filter(f=>!(f&1)),l=n[e.id]>>1;function c(f){let d=[];for(let p=0;p<i.length;p++){let m=bd(f,i[p]);if(r[p]==2)for(let y of m)d.push(y);else d.push(m)}return e.combine(d)}return{create(f){for(let d of i)Zl(f,d);return f.values[l]=c(f),1},update(f,d){if(!vy(f,o))return 0;let p=c(f);return e.compare(p,f.values[l])?0:(f.values[l]=p,1)},reconfigure(f,d){let p=vy(f,i),m=d.config.facets[e.id],y=d.facet(e);if(m&&!p&&_v(t,m))return f.values[l]=y,0;let v=c(f);return e.compare(v,y)?(f.values[l]=y,0):(f.values[l]=v,1)}}}const bh=Ce.define({static:!0});class fn{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new fn(wv++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(bh).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],l=this.updateF(o,r);return this.compareF(o,l)?0:(i.values[t]=l,1)},reconfigure:(i,r)=>{let o=i.facet(bh),l=r.facet(bh),c;return(c=o.find(f=>f.field==this))&&c!=l.find(f=>f.field==this)?(i.values[t]=c.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,bh.of({field:this,create:e})]}get extension(){return this}}const ro={lowest:4,low:3,default:2,high:1,highest:0};function Pl(n){return e=>new YT(e,n)}const bo={highest:Pl(ro.highest),high:Pl(ro.high),default:Pl(ro.default),low:Pl(ro.low),lowest:Pl(ro.lowest)};class YT{constructor(e,t){this.inner=e,this.prec=t}}class pp{of(e){return new by(this,e)}reconfigure(e){return pp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class by{constructor(e,t){this.compartment=e,this.inner=t}}class vd{constructor(e,t,i,r,o,l){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),l=new Map;for(let y of TL(e,t,l))y instanceof fn?r.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let c=Object.create(null),f=[],d=[];for(let y of r)c[y.id]=d.length<<1,d.push(v=>y.slot(v));let p=i?.config.facets;for(let y in o){let v=o[y],x=v[0].facet,_=p&&p[y]||[];if(v.every(S=>S.type==0))if(c[x.id]=f.length<<1|1,_v(_,v))f.push(i.facet(x));else{let S=x.combine(v.map(A=>A.value));f.push(i&&x.compare(S,i.facet(x))?i.facet(x):S)}else{for(let S of v)S.type==0?(c[S.id]=f.length<<1|1,f.push(S.value)):(c[S.id]=d.length<<1,d.push(A=>S.dynamicSlot(A)));c[x.id]=d.length<<1,d.push(S=>AL(S,x,v))}}let m=d.map(y=>y(c));return new vd(e,l,m,c,f,o)}}function TL(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(l,c){let f=r.get(l);if(f!=null){if(f<=c)return;let d=i[f].indexOf(l);d>-1&&i[f].splice(d,1),l instanceof by&&t.delete(l.compartment)}if(r.set(l,c),Array.isArray(l))for(let d of l)o(d,c);else if(l instanceof by){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(l.compartment)||l.inner;t.set(l.compartment,d),o(d,c)}else if(l instanceof YT)o(l.inner,l.prec);else if(l instanceof fn)i[c].push(l),l.provides&&o(l.provides,c);else if(l instanceof Kh)i[c].push(l),l.facet.extensions&&o(l.facet.extensions,ro.default);else{let d=l.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,c)}}return o(n,ro.default),i.reduce((l,c)=>l.concat(c))}function Zl(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function bd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const GT=Ce.define(),Sy=Ce.define({combine:n=>n.some(e=>e),static:!0}),XT=Ce.define({combine:n=>n.length?n[0]:void 0,static:!0}),QT=Ce.define(),JT=Ce.define(),ZT=Ce.define(),eE=Ce.define({combine:n=>n.length?n[0]:!1});class cr{constructor(e,t){this.type=e,this.value=t}static define(){return new EL}}class EL{of(e){return new cr(this,e)}}class kL{constructor(e){this.map=e}of(e){return new Pe(this,e)}}class Pe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Pe(this.type,t)}is(e){return this.type==e}static define(e={}){return new kL(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}Pe.reconfigure=Pe.define();Pe.appendConfig=Pe.define();class Ft{constructor(e,t,i,r,o,l){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=l,this._doc=null,this._state=null,i&&KT(i,t.newLength),o.some(c=>c.type==Ft.time)||(this.annotations=o.concat(Ft.time.of(Date.now())))}static create(e,t,i,r,o,l){return new Ft(e,t,i,r,o,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ft.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ft.time=cr.define();Ft.userEvent=cr.define();Ft.addToHistory=cr.define();Ft.remote=cr.define();function OL(n,e){let t=[];for(let i=0,r=0;;){let o,l;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],l=n[i++];else if(r<e.length)o=e[r++],l=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function tE(n,e,t){var i;let r,o,l;return t?(r=e.changes,o=Ut.empty(e.changes.length),l=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),l=n.changes.compose(r)),{changes:l,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:Pe.mapEffects(n.effects,r).concat(Pe.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function xy(n,e,t){let i=e.selection,r=ba(e.annotations);return e.userEvent&&(r=r.concat(Ft.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ut?e.changes:Ut.of(e.changes||[],t,n.facet(XT)),selection:i&&(i instanceof me?i:me.single(i.anchor,i.head)),effects:ba(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function nE(n,e,t){let i=xy(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let l=!!e[o].sequential;i=tE(i,xy(n,e[o],l?i.changes.newLength:n.doc.length),l)}let r=Ft.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return DL(t?ML(r):r)}function ML(n){let e=n.startState,t=!0;for(let r of e.facet(QT)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:OL(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=Ut.empty(e.doc.length);else{let l=n.changes.filter(t);r=l.changes,o=l.filtered.mapDesc(l.changes).invertedDesc}n=Ft.create(e,r,n.selection&&n.selection.map(o),Pe.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(JT);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof Ft?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ft?n=o[0]:n=nE(e,ba(o),!1)}return n}function DL(n){let e=n.startState,t=e.facet(ZT),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=tE(i,xy(e,o,n.changes.newLength),!0))}return i==n?n:Ft.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const RL=[];function ba(n){return n==null?RL:Array.isArray(n)?n:[n]}var xt=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(xt||(xt={}));const NL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wy;try{wy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function zL(n){if(wy)return wy.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||NL.test(t)))return!0}return!1}function $L(n){return e=>{if(!/\S/.test(e))return xt.Space;if(zL(e))return xt.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return xt.Word;return xt.Other}}class Xe{constructor(e,t,i,r,o,l){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Zl(this,c<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Zl(this,i),bd(this,i)}update(...e){return nE(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let c of e.effects)c.is(pp.reconfigure)?(t&&(r=new Map,t.compartments.forEach((f,d)=>r.set(d,f)),t=null),r.set(c.value.compartment,c.value.extension)):c.is(Pe.reconfigure)?(t=null,i=c.value):c.is(Pe.appendConfig)&&(t=null,i=ba(i).concat(c.value));let o;t?o=e.startState.values.slice():(t=vd.resolve(i,r,this),o=new Xe(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(f,d)=>d.reconfigure(f,this),null).values);let l=e.startState.facet(Sy)?e.newSelection:e.newSelection.asSingle();new Xe(t,e.newDoc,l,o,(c,f)=>f.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:me.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],l=ba(i.effects);for(let c=1;c<t.ranges.length;c++){let f=e(t.ranges[c]),d=this.changes(f.changes),p=d.map(r);for(let y=0;y<c;y++)o[y]=o[y].map(p);let m=r.mapDesc(d,!0);o.push(f.range.map(m)),r=r.compose(p),l=Pe.mapEffects(l,p).concat(Pe.mapEffects(ba(f.effects),m))}return{changes:r,selection:me.create(o,t.mainIndex),effects:l}}changes(e=[]){return e instanceof Ut?e:Ut.of(e,this.doc.length,this.facet(Xe.lineSeparator))}toText(e){return Ze.of(e.split(this.facet(Xe.lineSeparator)||my))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Zl(this,t),bd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof fn&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let l=i[o],c=e[o];r.push(l.init(f=>l.spec.fromJSON(c,f)))}}return Xe.create({doc:e.doc,selection:me.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=vd.resolve(e.extensions||[],new Map),i=e.doc instanceof Ze?e.doc:Ze.of((e.doc||"").split(t.staticFacet(Xe.lineSeparator)||my)),r=e.selection?e.selection instanceof me?e.selection:me.single(e.selection.anchor,e.selection.head):me.single(0);return KT(r,i.length),t.staticFacet(Sy)||(r=r.asSingle()),new Xe(t,i,r,t.dynamicSlots.map(()=>null),(o,l)=>l.create(o),null)}get tabSize(){return this.facet(Xe.tabSize)}get lineBreak(){return this.facet(Xe.lineSeparator)||`
`}get readOnly(){return this.facet(eE)}phrase(e,...t){for(let i of this.facet(Xe.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(GT))for(let l of o(this,t,i))Object.prototype.hasOwnProperty.call(l,e)&&r.push(l[e]);return r}charCategorizer(e){return $L(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),l=e-i,c=e-i;for(;l>0;){let f=Vt(t,l,!1);if(o(t.slice(f,l))!=xt.Word)break;l=f}for(;c<r;){let f=Vt(t,c);if(o(t.slice(c,f))!=xt.Word)break;c=f}return l==c?null:me.range(l+i,c+i)}}Xe.allowMultipleSelections=Sy;Xe.tabSize=Ce.define({combine:n=>n.length?n[0]:4});Xe.lineSeparator=XT;Xe.readOnly=eE;Xe.phrases=Ce.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});Xe.languageData=GT;Xe.changeFilter=QT;Xe.transactionFilter=JT;Xe.transactionExtender=ZT;pp.reconfigure=Pe.define();function ur(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let l=r[o],c=i[o];if(c===void 0)i[o]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](c,l);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class ks{eq(e){return this==e}range(e,t=e){return _y.create(e,t,this)}}ks.prototype.startSide=ks.prototype.endSide=0;ks.prototype.point=!1;ks.prototype.mapMode=_n.TrackDel;let _y=class iE{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new iE(e,t,i)}};function Cy(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Cv{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let l=r,c=o.length;;){if(l==c)return l;let f=l+c>>1,d=o[f]-e||(i?this.value[f].endSide:this.value[f].startSide)-t;if(f==l)return d>=0?l:c;d>=0?c=f:l=f+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),l=this.findIndex(i,1e9,!1,o);o<l;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],l=-1,c=-1;for(let f=0;f<this.value.length;f++){let d=this.value[f],p=this.from[f]+e,m=this.to[f]+e,y,v;if(p==m){let x=t.mapPos(p,d.startSide,d.mapMode);if(x==null||(y=v=x,d.startSide!=d.endSide&&(v=t.mapPos(p,d.endSide),v<y)))continue}else if(y=t.mapPos(p,d.startSide),v=t.mapPos(m,d.endSide),y>v||y==v&&d.startSide>0&&d.endSide<=0)continue;(v-y||d.endSide-d.startSide)<0||(l<0&&(l=y),d.point&&(c=Math.max(c,v-y)),i.push(d),r.push(y-l),o.push(v-l))}return{mapped:i.length?new Cv(r,o,i,c):null,pos:l}}}class Ke{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Ke(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(i&&(t=t.slice().sort(Cy)),this.isEmpty)return t.length?Ke.of(t):this;let c=new rE(this,null,-1).goto(0),f=0,d=[],p=new Ir;for(;c.value||f<t.length;)if(f<t.length&&(c.from-t[f].from||c.startSide-t[f].value.startSide)>=0){let m=t[f++];p.addInner(m.from,m.to,m.value)||d.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(f==t.length||this.chunkEnd(c.chunkIndex)<t[f].from)&&(!l||r>this.chunkEnd(c.chunkIndex)||o<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||r>c.to||o<c.from||l(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(_y.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Ke.empty:this.nextLayer.update({add:d,filter:l,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],f=this.chunk[l],d=e.touchesRange(c,c+f.length);if(d===!1)r=Math.max(r,f.maxPoint),t.push(f),i.push(e.mapPos(c));else if(d===!0){let{mapped:p,pos:m}=f.map(c,e);p&&(r=Math.max(r,p.maxPoint),t.push(p),i.push(m))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ke(i,t,o||Ke.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],l=this.chunk[r];if(t>=o&&e<=o+l.length&&l.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return mc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return mc.from(e).goto(t)}static compare(e,t,i,r,o=-1){let l=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=o),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=o),f=k_(l,c,i),d=new ql(l,f,o),p=new ql(c,f,o);i.iterGaps((m,y,v)=>O_(d,m,p,y,v,r)),i.empty&&i.length==0&&O_(d,0,p,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),l=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=l.length)return!1;if(!o.length)return!0;let c=k_(o,l),f=new ql(o,c,0).goto(i),d=new ql(l,c,0).goto(i);for(;;){if(f.to!=d.to||!Ay(f.active,d.active)||f.point&&(!d.point||!f.point.eq(d.point)))return!1;if(f.to>r)return!0;f.next(),d.next()}}static spans(e,t,i,r,o=-1){let l=new ql(e,null,o).goto(t),c=t,f=l.openStart;for(;;){let d=Math.min(l.to,i);if(l.point){let p=l.activeForPoint(l.to),m=l.pointFrom<t?p.length+1:l.point.startSide<0?p.length:Math.min(p.length,f);r.point(c,d,l.point,p,m,l.pointRank),f=Math.min(l.openEnd(d),p.length)}else d>c&&(r.span(c,d,l.active,f),f=l.openEnd(d));if(l.to>i)return f+(l.point&&l.to>i?1:0);c=l.to,l.next()}}static of(e,t=!1){let i=new Ir;for(let r of e instanceof _y?[e]:t?LL(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Ke.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Ke.empty;r=r.nextLayer)t=new Ke(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Ke.empty=new Ke([],[],null,-1);function LL(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Cy(e,i)>0)return n.slice().sort(Cy);e=i}return n}Ke.empty.nextLayer=Ke.empty;class Ir{finishChunk(e){this.chunks.push(new Cv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ir)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ke.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ke.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function k_(n,e,t){let i=new Map;for(let o of n)for(let l=0;l<o.chunk.length;l++)o.chunk[l].maxPoint<=0&&i.set(o.chunk[l],o.chunkPos[l]);let r=new Set;for(let o of e)for(let l=0;l<o.chunk.length;l++){let c=i.get(o.chunk[l]);c!=null&&(t?t.mapPos(c):c)==o.chunkPos[l]&&!t?.touchesRange(c,c+o.chunk[l].length)&&r.add(o.chunk[l])}return r}class rE{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class mc{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let l=e[o];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&r.push(new rE(l,t,i,o));return r.length==1?r[0]:new mc(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)b0(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)b0(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),b0(this.heap,0)}}}function b0(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class ql{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=mc.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Sh(this.active,e),Sh(this.activeTo,e),Sh(this.activeRank,e),this.minActive=M_(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;xh(this.active,t,i),xh(this.activeTo,t,r),xh(this.activeRank,t,o),e&&xh(e,t,this.cursor.from),this.minActive=M_(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Sh(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function O_(n,e,t,i,r,o){n.goto(e),t.goto(i);let l=i+r,c=i,f=i-e;for(;;){let d=n.to+f-t.to,p=d||n.endSide-t.endSide,m=p<0?n.to+f:t.to,y=Math.min(m,l);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Ay(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(c,y,n.point,t.point):y>c&&!Ay(n.active,t.active)&&o.compareRange(c,y,n.active,t.active),m>l)break;(d||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(m),c=m,p<=0&&n.next(),p>=0&&t.next()}}function Ay(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Sh(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function xh(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function M_(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function qa(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Vt(n,r));return i}function Ty(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=Vt(n,r)}return i===!0?-1:n.length}const Ey="",D_=typeof Symbol>"u"?"__"+Ey:Symbol.for(Ey),ky=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Os{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function o(l,c,f,d){let p=[],m=/^@(\w+)\b/.exec(l[0]),y=m&&m[1]=="keyframes";if(m&&c==null)return f.push(l[0]+";");for(let v in c){let x=c[v];if(/&/.test(v))o(v.split(/,\s*/).map(_=>l.map(S=>_.replace(/&/,S))).reduce((_,S)=>_.concat(S)),x,f);else if(x&&typeof x=="object"){if(!m)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(r(v),x,p,y)}else x!=null&&p.push(v.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+x+";")}(p.length||y)&&f.push((i&&!m&&!d?l.map(i):l).join(", ")+" {"+p.join(" ")+"}")}for(let l in e)o(r(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=R_[D_]||1;return R_[D_]=e+1,Ey+e.toString(36)}static mount(e,t,i){let r=e[ky],o=i&&i.nonce;r?o&&r.setNonce(o):r=new jL(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let N_=new Map;class jL{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=N_.get(i);if(o)return e[ky]=o;this.sheet=new r.CSSStyleSheet,N_.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[ky]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let l=0;l<e.length;l++){let c=e[l],f=this.modules.indexOf(c);if(f<o&&f>-1&&(this.modules.splice(f,1),o--,f=-1),f==-1){if(this.modules.splice(o++,0,c),i)for(let d=0;d<c.rules.length;d++)i.insertRule(c.rules[d],r++)}else{for(;o<f;)r+=this.modules[o++].rules.length;r+=c.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let l="";for(let f=0;f<this.modules.length;f++)l+=this.modules[f].getRules()+`
`;this.styleTag.textContent=l;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ms={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},BL=typeof navigator<"u"&&/Mac/.test(navigator.platform),PL=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var cn=0;cn<10;cn++)Ms[48+cn]=Ms[96+cn]=String(cn);for(var cn=1;cn<=24;cn++)Ms[cn+111]="F"+cn;for(var cn=65;cn<=90;cn++)Ms[cn]=String.fromCharCode(cn+32),gc[cn]=String.fromCharCode(cn);for(var S0 in Ms)gc.hasOwnProperty(S0)||(gc[S0]=Ms[S0]);function qL(n){var e=BL&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||PL&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gc:Ms)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function pt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)sE(n,arguments[e]);return n}function sE(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)sE(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let wn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Oy=typeof document<"u"?document:{documentElement:{style:{}}};const My=/Edge\/(\d+)/.exec(wn.userAgent),oE=/MSIE \d/.test(wn.userAgent),Dy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wn.userAgent),mp=!!(oE||Dy||My),z_=!mp&&/gecko\/(\d+)/i.test(wn.userAgent),x0=!mp&&/Chrome\/(\d+)/.exec(wn.userAgent),HL="webkitFontSmoothing"in Oy.documentElement.style,Ry=!mp&&/Apple Computer/.test(wn.vendor),$_=Ry&&(/Mobile\/\w+/.test(wn.userAgent)||wn.maxTouchPoints>2);var _e={mac:$_||/Mac/.test(wn.platform),windows:/Win/.test(wn.platform),linux:/Linux|X11/.test(wn.platform),ie:mp,ie_version:oE?Oy.documentMode||6:Dy?+Dy[1]:My?+My[1]:0,gecko:z_,gecko_version:z_?+(/Firefox\/(\d+)/.exec(wn.userAgent)||[0,0])[1]:0,chrome:!!x0,chrome_version:x0?+x0[1]:0,ios:$_,android:/Android\b/.test(wn.userAgent),webkit_version:HL?+(/\bAppleWebKit\/(\d+)/.exec(wn.userAgent)||[0,0])[1]:0,safari:Ry,safari_version:Ry?+(/\bVersion\/(\d+(\.\d+)?)/.exec(wn.userAgent)||[0,0])[1]:0,tabSize:Oy.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Av(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Sd=Object.create(null);function Tv(n,e,t){if(n==e)return!0;n||(n=Sd),e||(e=Sd);let i=Object.keys(n),r=Object.keys(e);if(i.length-0!=r.length-0)return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function IL(n,e){for(let t=n.attributes.length-1;t>=0;t--){let i=n.attributes[t].name;e[i]==null&&n.removeAttribute(i)}for(let t in e){let i=e[t];t=="style"?n.style.cssText=i:n.getAttribute(t)!=i&&n.setAttribute(t,i)}}function L_(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function UL(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class fr{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var un=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(un||(un={}));class Oe extends ks{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Vc(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new go(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:l}=aE(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(l?t?2e8:1:-6e8)+1}return new go(e,i,r,t,e.widget||null,!0)}static line(e){return new Fc(e)}static set(e,t=!1){return Ke.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Oe.none=Ke.empty;class Vc extends Oe{constructor(e){let{start:t,end:i}=aE(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Av(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Sd}eq(e){return this==e||e instanceof Vc&&this.tagName==e.tagName&&Tv(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Vc.prototype.point=!1;class Fc extends Oe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fc&&this.spec.class==e.spec.class&&Tv(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Fc.prototype.mapMode=_n.TrackBefore;Fc.prototype.point=!0;class go extends Oe{constructor(e,t,i,r,o,l){super(t,i,o,e),this.block=r,this.isReplace=l,this.mapMode=r?t<=0?_n.TrackBefore:_n.TrackAfter:_n.TrackDel}get type(){return this.startSide!=this.endSide?un.WidgetRange:this.startSide<=0?un.WidgetBefore:un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof go&&VL(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}go.prototype.point=!0;function aE(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function VL(n,e){return n==e||!!(n&&e&&n.compare(e))}function Sa(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class yc extends ks{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof yc&&this.tagName==e.tagName&&Tv(this.attributes,e.attributes)}static create(e){return new yc(e.tagName,e.attributes||Sd)}static set(e,t=!1){return Ke.of(e,t)}}yc.prototype.startSide=yc.prototype.endSide=-1;function vc(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Ny(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Yh(n,e){if(!e.anchorNode)return!1;try{return Ny(n,e.anchorNode)}catch{return!1}}function ec(n){return n.nodeType==3?Sc(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function tc(n,e,t,i){return t?j_(n,e,t,i,-1)||j_(n,e,t,i,1):!1}function Ds(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function xd(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function j_(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Ur(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Ds(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Ur(n):0}else return!1}}function Ur(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function bc(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function FL(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function lE(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function WL(n,e,t,i,r,o,l,c){let f=n.ownerDocument,d=f.defaultView||window;for(let p=n,m=!1;p&&!m;)if(p.nodeType==1){let y,v=p==f.body,x=1,_=1;if(v)y=FL(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let w=p.getBoundingClientRect();({scaleX:x,scaleY:_}=lE(p,w)),y={left:w.left,right:w.left+p.clientWidth*x,top:w.top,bottom:w.top+p.clientHeight*_}}let S=0,A=0;if(r=="nearest")e.top<y.top?(A=e.top-(y.top+l),t>0&&e.bottom>y.bottom+A&&(A=e.bottom-y.bottom+l)):e.bottom>y.bottom&&(A=e.bottom-y.bottom+l,t<0&&e.top-A<y.top&&(A=e.top-(y.top+l)));else{let w=e.bottom-e.top,C=y.bottom-y.top;A=(r=="center"&&w<=C?e.top+w/2-C/2:r=="start"||r=="center"&&t<0?e.top-l:e.bottom-C+l)-y.top}if(i=="nearest"?e.left<y.left?(S=e.left-(y.left+o),t>0&&e.right>y.right+S&&(S=e.right-y.right+o)):e.right>y.right&&(S=e.right-y.right+o,t<0&&e.left<y.left+S&&(S=e.left-(y.left+o))):S=(i=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:i=="start"==c?e.left-o:e.right-(y.right-y.left)+o)-y.left,S||A)if(v)d.scrollBy(S,A);else{let w=0,C=0;if(A){let k=p.scrollTop;p.scrollTop+=A/_,C=(p.scrollTop-k)*_}if(S){let k=p.scrollLeft;p.scrollLeft+=S/x,w=(p.scrollLeft-k)*x}e={left:e.left-w,top:e.top-C,right:e.right-w,bottom:e.bottom-C},w&&Math.abs(w-S)<1&&(i="nearest"),C&&Math.abs(C-A)<1&&(r="nearest")}if(v)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function KL(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class YL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Ur(t):0),i,Math.min(e.focusOffset,i?Ur(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let io=null;_e.safari&&_e.safari_version>=26&&(io=!1);function cE(n){if(n.setActive)return n.setActive();if(io)return n.focus(io);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(io==null?{get preventScroll(){return io={preventScroll:!0},!0}}:void 0),!io){io=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let B_;function Sc(n,e,t=e){let i=B_||(B_=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function xa(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let l=new KeyboardEvent("keyup",r);return l.synthetic=!0,n.dispatchEvent(l),o.defaultPrevented||l.defaultPrevented}function GL(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function XL(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Ur(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Ur(t))}else{if(t==n)return!0;i=Ds(t),t=t.parentNode}}function uE(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function fE(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Ur(t)}else if(t.parentNode&&!xd(t))i=Ds(t),t=t.parentNode;else return null}}function hE(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!xd(t))i=Ds(t)+1,t=t.parentNode;else return null}}class ji{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ji(e.parentNode,Ds(e),t)}static after(e,t){return new ji(e.parentNode,Ds(e)+1,t)}}var gt=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(gt||(gt={}));const yo=gt.LTR,Ev=gt.RTL;function dE(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const QL=dE("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),JL=dE("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zy=Object.create(null),Ji=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);zy[e]=t,zy[t]=-e}function pE(n){return n<=247?QL[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?JL[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const ZL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Br{get dir(){return this.level%2?Ev:yo}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=t&&c.to>=t){if(c.level==i)return l;(o<0||(r!=0?r<0?c.from<t:c.to>t:e[o].level>c.level))&&(o=l)}}if(o<0)throw new RangeError("Index out of range");return o}}function mE(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!mE(i.inner,r.inner))return!1}return!0}const mt=[];function ej(n,e,t,i,r){for(let o=0;o<=i.length;o++){let l=o?i[o-1].to:e,c=o<i.length?i[o].from:t,f=o?256:r;for(let d=l,p=f,m=f;d<c;d++){let y=pE(n.charCodeAt(d));y==512?y=p:y==8&&m==4&&(y=16),mt[d]=y==4?2:y,y&7&&(m=y),p=y}for(let d=l,p=f,m=f;d<c;d++){let y=mt[d];if(y==128)d<c-1&&p==mt[d+1]&&p&24?y=mt[d]=p:mt[d]=256;else if(y==64){let v=d+1;for(;v<c&&mt[v]==64;)v++;let x=d&&p==8||v<t&&mt[v]==8?m==1?1:8:256;for(let _=d;_<v;_++)mt[_]=x;d=v-1}else y==8&&m==1&&(mt[d]=1);p=y,y&7&&(m=y)}}}function tj(n,e,t,i,r){let o=r==1?2:1;for(let l=0,c=0,f=0;l<=i.length;l++){let d=l?i[l-1].to:e,p=l<i.length?i[l].from:t;for(let m=d,y,v,x;m<p;m++)if(v=zy[y=n.charCodeAt(m)])if(v<0){for(let _=c-3;_>=0;_-=3)if(Ji[_+1]==-v){let S=Ji[_+2],A=S&2?r:S&4?S&1?o:r:0;A&&(mt[m]=mt[Ji[_]]=A),c=_;break}}else{if(Ji.length==189)break;Ji[c++]=m,Ji[c++]=y,Ji[c++]=f}else if((x=mt[m])==2||x==1){let _=x==r;f=_?0:1;for(let S=c-3;S>=0;S-=3){let A=Ji[S+2];if(A&2)break;if(_)Ji[S+2]|=2;else{if(A&4)break;Ji[S+2]|=4}}}}}function nj(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let l=r?t[r-1].to:n,c=r<t.length?t[r].from:e;for(let f=l;f<c;){let d=mt[f];if(d==256){let p=f+1;for(;;)if(p==c){if(r==t.length)break;p=t[r++].to,c=r<t.length?t[r].from:e}else if(mt[p]==256)p++;else break;let m=o==1,y=(p<e?mt[p]:i)==1,v=m==y?m?1:2:i;for(let x=p,_=r,S=_?t[_-1].to:n;x>f;)x==S&&(x=t[--_].from,S=_?t[_-1].to:n),mt[--x]=v;f=p}else o=d,f++}}}function $y(n,e,t,i,r,o,l){let c=i%2?2:1;if(i%2==r%2)for(let f=e,d=0;f<t;){let p=!0,m=!1;if(d==o.length||f<o[d].from){let _=mt[f];_!=c&&(p=!1,m=_==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,x=f;e:for(;;)if(d<o.length&&x==o[d].from){if(m)break e;let _=o[d];if(!p)for(let S=_.to,A=d+1;;){if(S==t)break e;if(A<o.length&&o[A].from==S)S=o[A++].to;else{if(mt[S]==c)break e;break}}if(d++,y)y.push(_);else{_.from>f&&l.push(new Br(f,_.from,v));let S=_.direction==yo!=!(v%2);Ly(n,S?i+1:i,r,_.inner,_.from,_.to,l),f=_.to}x=_.to}else{if(x==t||(p?mt[x]!=c:mt[x]==c))break;x++}y?$y(n,f,x,i+1,r,y,l):f<x&&l.push(new Br(f,x,v)),f=x}else for(let f=t,d=o.length;f>e;){let p=!0,m=!1;if(!d||f>o[d-1].to){let _=mt[f-1];_!=c&&(p=!1,m=_==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,x=f;e:for(;;)if(d&&x==o[d-1].to){if(m)break e;let _=o[--d];if(!p)for(let S=_.from,A=d;;){if(S==e)break e;if(A&&o[A-1].to==S)S=o[--A].from;else{if(mt[S-1]==c)break e;break}}if(y)y.push(_);else{_.to<f&&l.push(new Br(_.to,f,v));let S=_.direction==yo!=!(v%2);Ly(n,S?i+1:i,r,_.inner,_.from,_.to,l),f=_.from}x=_.from}else{if(x==e||(p?mt[x-1]!=c:mt[x-1]==c))break;x--}y?$y(n,x,f,i+1,r,y,l):x<f&&l.push(new Br(x,f,v)),f=x}}function Ly(n,e,t,i,r,o,l){let c=e%2?2:1;ej(n,r,o,i,c),tj(n,r,o,i,c),nj(r,o,i,c),$y(n,r,o,e,t,i,l)}function ij(n,e,t){if(!n)return[new Br(0,0,e==Ev?1:0)];if(e==yo&&!t.length&&!ZL.test(n))return gE(n.length);if(t.length)for(;n.length>mt.length;)mt[mt.length]=256;let i=[],r=e==yo?0:1;return Ly(n,r,r,t,0,n.length,i),i}function gE(n){return[new Br(0,n,0)]}let yE="";function rj(n,e,t,i,r){var o;let l=i.head-n.from,c=Br.find(e,l,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),f=e[c],d=f.side(r,t);if(l==d){let y=c+=r?1:-1;if(y<0||y>=e.length)return null;f=e[c=y],l=f.side(!r,t),d=f.side(r,t)}let p=Vt(n.text,l,f.forward(r,t));(p<f.from||p>f.to)&&(p=d),yE=n.text.slice(Math.min(l,p),Math.max(l,p));let m=c==(r?e.length-1:0)?null:e[c+(r?1:-1)];return m&&p==d&&m.level+(r?0:1)<f.level?me.cursor(m.side(!r,t)+n.from,m.forward(r,t)?1:-1,m.level):me.cursor(p+n.from,f.forward(r,t)?-1:1,f.level)}function sj(n,e,t){for(let i=e;i<t;i++){let r=pE(n.charCodeAt(i));if(r==1)return yo;if(r==2||r==4)return Ev}return yo}const vE=Ce.define(),bE=Ce.define(),SE=Ce.define(),xE=Ce.define(),jy=Ce.define(),wE=Ce.define(),_E=Ce.define(),kv=Ce.define(),Ov=Ce.define(),CE=Ce.define({combine:n=>n.some(e=>e)}),AE=Ce.define({combine:n=>n.some(e=>e)}),TE=Ce.define();class wa{constructor(e,t="nearest",i="nearest",r=5,o=5,l=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=l}map(e){return e.empty?this:new wa(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new wa(me.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const wh=Pe.define({map:(n,e)=>n.map(e)}),EE=Pe.define();function In(n,e,t){let i=n.facet(xE);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const jr=Ce.define({combine:n=>n.length?n[0]:!0});let oj=0;const pa=Ce.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class Mt{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(pa.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(pa.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:l}=t||{};return new Mt(oj++,e,i,r,c=>{let f=[];return l&&f.push(xc.of(d=>{let p=d.plugin(c);return p?l(p):Oe.none})),o&&f.push(o(c)),f})}static fromClass(e,t){return Mt.define((i,r)=>new e(i,r),t)}}class w0{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(In(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){In(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){In(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const kE=Ce.define(),Mv=Ce.define(),xc=Ce.define(),OE=Ce.define(),ME=Ce.define(),Wc=Ce.define(),DE=Ce.define();function P_(n,e){let t=n.state.facet(DE);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Ke.spans(i,e.from,e.to,{point(){},span(o,l,c,f){let d=o-e.from,p=l-e.from,m=r;for(let y=c.length-1;y>=0;y--,f--){let v=c[y].spec.bidiIsolate,x;if(v==null&&(v=sj(e.text,d,p)),f>0&&m.length&&(x=m[m.length-1]).to==d&&x.direction==v)x.to=p,m=x.inner;else{let _={from:d,to:p,direction:v,inner:[]};m.push(_),m=_.inner}}}}),r}const RE=Ce.define();function Dv(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(RE)){let l=o(n);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(t=Math.max(t,l.right)),l.top!=null&&(i=Math.max(i,l.top)),l.bottom!=null&&(r=Math.max(r,l.bottom)))}return{left:e,right:t,top:i,bottom:r}}const Fl=Ce.define();class _i{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new _i(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,l=0;;){let c=r<e.length?e[r].fromB:1e9,f=o<t.length?t[o]:1e9,d=Math.min(c,f);if(d==1e9)break;let p=d+l,m=d,y=p;for(;;)if(o<t.length&&t[o]<=m){let v=t[o+1];o+=2,m=Math.max(m,v);for(let x=r;x<e.length&&e[x].fromB<=m;x++)l=e[x].toA-e[x].toB;y=Math.max(y,v+l)}else if(r<e.length&&e[r].fromB<=m){let v=e[r++];m=Math.max(m,v.toB),y=Math.max(y,v.toA),l=v.toA-v.toB}else break;i.push(new _i(p,y,d,m))}return i}}class wd{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ut.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,l,c,f)=>r.push(new _i(o,l,c,f))),this.changedRanges=r}static create(e,t,i){return new wd(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const aj=[];class Wt{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return aj}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&IL(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let r of this.children){if(r==e)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=Ds(this.dom),r=this.length?e>0:t>0;return new ji(this.parent.dom,i+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof yp)return e;return null}static get(e){return e.cmTile}}class gp extends Wt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,i=null,r,o=e?.node==t?e:null,l=0;for(let c of this.children){if(c.sync(e),l+=c.length+c.breakAfter,r=i?i.nextSibling:t.firstChild,o&&r!=c.dom&&(o.written=!0),c.dom.parentNode==t)for(;r&&r!=c.dom;)r=q_(r);else t.insertBefore(c.dom,r);i=c.dom}for(r=i?i.nextSibling:t.firstChild,o&&r&&(o.written=!0);r;)r=q_(r);this.length=l}}function q_(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class yp extends gp{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=Wt.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,r=0,o=0;;)if(r==i.children.length){if(!t.length)return;i=i.parent,i.breakAfter&&o++,r=t.pop()}else{let l=i.children[r++];if(l instanceof As)t.push(r),i=l,r=0;else{let c=o+l.length,f=e(l,o);if(f!==void 0)return f;o=c+l.breakAfter}}}resolveBlock(e,t){let i,r=-1,o,l=-1;if(this.blockTiles((c,f)=>{let d=f+c.length;if(e>=f&&e<=d){if(c.isWidget()&&t>=-1&&t<=1){if(c.flags&32)return!0;c.flags&16&&(i=void 0)}(f<e||e==d&&(t<-1?c.length:c.covers(1)))&&(!i||!c.isWidget()&&i.isWidget())&&(i=c,r=e-f),(d>e||e==f&&(t>1?c.length:c.covers(-1)))&&(!o||!c.isWidget()&&o.isWidget())&&(o=c,l=e-f)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&t<0||!o?{tile:i,offset:r}:{tile:o,offset:l}}}class As extends gp{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let i=new As(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class ka extends gp{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,i){let r=new ka(t||document.createElement("div"),e);return(!t||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,i){let r=null,o=-1,l=null,c=-1;function f(p,m){for(let y=0,v=0;y<p.children.length&&v<=m;y++){let x=p.children[y],_=v+x.length;_>=m&&(x.isComposite()?f(x,m-v):(!l||l.isHidden&&(t>0||i&&cj(l,x)))&&(_>m||x.flags&32)?(l=x,c=m-v):(v<m||x.flags&16&&!x.isHidden)&&(r=x,o=m-v)),v=_}}f(this,e);let d=(t<0?r:l)||r||l;return d?{tile:d,offset:d==r?o:c}:null}coordsIn(e,t){let i=this.resolveInline(e,t,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),t):lj(this)}domIn(e,t){let i=this.resolveInline(e,t);if(i){let{tile:r,offset:o}=i;if(this.dom.contains(r.dom))return r.isText()?new ji(r.dom,Math.min(r.dom.nodeValue.length,o)):r.domPosFor(o,r.flags&16?1:r.flags&32?-1:t);let l=i.tile.parent,c=!1;for(let f of l.children){if(c)return new ji(f.dom,0);f==i.tile&&(c=!0)}}return new ji(this.dom,0)}}function lj(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ec(e);return t[t.length-1]||null}function cj(n,e){let t=n.coordsIn(0,1),i=e.coordsIn(0,1);return t&&i&&i.top<t.bottom}class Hn extends gp{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let i=new Hn(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class lo extends Wt{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let i=this.dom.nodeValue.length;e>i&&(e=i);let r=e,o=e,l=0;e==0&&t<0||e==i&&t>=0?_e.chrome||_e.gecko||(e?(r--,l=1):o<i&&(o++,l=-1)):t<0?r--:o<i&&o++;let c=Sc(this.dom,r,o).getClientRects();if(!c.length)return null;let f=c[(l?l<0:t>=0)?0:c.length-1];return _e.safari&&!l&&f.width==0&&(f=Array.prototype.find.call(c,d=>d.width)||f),l?bc(f,l<0):f||null}static of(e,t){let i=new lo(t||document.createTextNode(e),e);return t||(i.flags|=2),i}}class Oa extends Wt{constructor(e,t,i,r){super(e,t,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,i){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(i)return bc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),l=null;if(!o.length)return null;let c=this.flags&16?!0:this.flags&32?!1:e>0;for(let f=c?o.length-1:0;l=o[f],!(e>0?f==0:f==o.length-1||l.top<l.bottom);f+=c?-1:1);return bc(l,!c)}}get overrideDOMText(){if(!this.length)return Ze.empty;let{root:e}=this;if(!e)return Ze.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,i,r,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new Oa(o,i,e,r)}}class _d extends Wt{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!1}get overrideDOMText(){return Ze.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class uj{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:r,index:o,beforeBreak:l,parents:c}=this;for(;e||t>0;)if(r.isComposite())if(l){if(!e)break;i&&i.break(),e--,l=!1}else if(o==r.children.length){if(!e&&!c.length)break;i&&i.leave(r),l=!!r.breakAfter,{tile:r,index:o}=c.pop(),o++}else{let f=r.children[o],d=f.breakAfter;(t>0?f.length<=e:f.length<e)&&(!i||i.skip(f,0,f.length)!==!1||!f.isComposite)?(l=!!d,o++,e-=f.length):(c.push({tile:r,index:o}),r=f,o=0,i&&f.isComposite()&&i.enter(f))}else if(o==r.length)l=!!r.breakAfter,{tile:r,index:o}=c.pop(),o++;else if(e){let f=Math.min(e,r.length-o);i&&i.skip(r,o,o+f),e-=f,o+=f}else break;return this.tile=r,this.index=o,this.beforeBreak=l,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class fj{constructor(e,t,i,r){this.from=e,this.to=t,this.wrapper=i,this.rank=r}}class hj{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,r){var o;this.flushBuffer();let l=this.ensureMarks(t,i),c=l.lastChild;if(c&&c.isText()&&!(c.flags&8)){this.cache.reused.set(c,2);let f=l.children[l.children.length-1]=new lo(c.dom,c.text+e);f.parent=l}else l.append(r||lo.of(e,(o=this.cache.find(lo))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?_0(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=i;for(let l=t.marks.length-1;l>=0;l--){let c=t.marks[l],f=r.lastChild;if(f instanceof Hn&&f.mark.eq(c.mark))f.dom!=c.dom&&f.setDOM(_0(c.dom)),r=f;else{if(this.cache.reused.get(c)){let p=Wt.get(c.dom);p&&p.setDOM(_0(c.dom))}let d=Hn.of(c.mark,c.dom);r.append(d),r=d}this.cache.reused.set(c,2)}let o=new lo(e.text,e.text.nodeValue);o.flags|=8,r.append(o)}addInlineWidget(e,t,i){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let o=this.ensureMarks(t,i);!r&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=NE);let r=ka.start(e,t||((i=this.cache.find(ka))===null||i===void 0?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let r=this.curLine;for(let o=e.length-1;o>=0;o--){let l=e[o],c;if(t>0&&(c=r.lastChild)&&c instanceof Hn&&c.mark.eq(l))r=c,t--;else{let f=Hn.of(l,(i=this.cache.find(Hn,d=>d.mark.eq(l)))===null||i===void 0?void 0:i.dom);r.append(f),r=f,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!H_(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(_e.ios&&H_(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(C0,0,32)||new Oa(C0.toDOM(),0,C0,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new fj(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to)<0;)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let r=t.lastChild;if(i.from<this.pos&&r instanceof As&&r.wrapper.eq(i.wrapper))t=r;else{let o=As.of(i.wrapper,(e=this.cache.find(As,l=>l.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(_d,void 0,1);return i&&(i.flags=t),i||new _d(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class dj{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skipCount);if(this.skipCount=0,l)throw new Error("Ran out of text content when drawing inline views");this.text=r;let c=this.textOff=Math.min(e,r.length);return o?null:r.slice(0,c)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}}const Cd=[Oa,ka,lo,Hn,_d,As,yp];for(let n=0;n<Cd.length;n++)Cd[n].bucket=n;class pj{constructor(e){this.view=e,this.buckets=Cd.map(()=>[]),this.index=Cd.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let r=e.bucket,o=this.buckets[r],l=this.index[r];for(let c=o.length-1;c>=0;c--){let f=(c+l)%o.length,d=o[f];if((!t||t(d))&&!this.reused.has(d))return o.splice(f,1),f<l&&this.index[r]--,this.reused.set(d,i),d}return null}findWidget(e,t,i){let r=this.buckets[0];if(r.length)for(let o=0,l=0;;o++){if(o==r.length){if(l)return null;l=1,o=0}let c=r[o];if(!this.reused.has(c)&&(l==0?c.widget.compare(e):c.widget.constructor==e.constructor&&e.updateDOM(c.dom,this.view)))return r.splice(o,1),o<this.index[0]&&this.index[0]--,this.reused.set(c,1),c.length=t,c.flags=c.flags&-498|i,c}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}}class mj{constructor(e,t,i,r,o){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new pj(e),this.text=new dj(e.state.doc),this.builder=new hj(this.cache,new yp(e,e.contentDOM),Ke.iter(i)),this.cache.reused.set(t,2),this.old=new uj(t)}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let r=0,o=0,l=0;;){let c=l<e.length?e[l++]:null,f=c?c.fromA:this.old.root.length;if(f>r){let d=f-r;this.preserve(d,!l,!c),r=f,o+=d}if(!c)break;this.forward(c.fromA,c.toA),t&&c.fromA<=t.range.fromA&&c.toA>=t.range.toA?(this.emit(o,t.range.fromB),this.builder.addComposition(t,i),this.emit(t.range.toB,c.toB)):this.emit(o,c.toB),o=c.toB,r=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let r=vj(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(l,c,f)=>{if(l.isWidget())if(this.openWidget)this.builder.continueWidget(f-c);else{let d=f>0||c<l.length?Oa.of(l.widget,this.view,f-c,l.flags&496,this.cache.maybeReuse(l)):this.cache.reuse(l);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,r,o),o=r.length)}else if(l.isText())this.builder.ensureLine(null),!c&&f==l.length?this.builder.addText(l.text,r,o,this.cache.reuse(l)):(this.cache.add(l),this.builder.addText(l.text.slice(c,f),r,o)),o=r.length;else if(l.isLine())l.flags&=-2,this.cache.reused.set(l,1),this.builder.addLine(l);else if(l instanceof _d)this.cache.add(l);else if(l instanceof Hn)this.builder.ensureLine(null),this.builder.addMark(l,r,o),this.cache.reused.set(l,1),o=r.length;else return!1;this.openWidget=!1},enter:l=>{l.isLine()?this.builder.addLineStart(l.attrs,this.cache.maybeReuse(l)):(this.cache.add(l),l instanceof Hn&&r.unshift(l.mark)),this.openWidget=!1},leave:l=>{l.isLine()?r.length&&(r.length=o=0):l instanceof Hn&&(r.shift(),o=Math.min(o,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,r=this.builder,o=0,l=Ke.spans(this.decorations,e,t,{point:(c,f,d,p,m,y)=>{if(d instanceof go){if(this.disallowBlockEffectsFor[y]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(f>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,m>p.length)r.continueWidget(f-c);else{let v=d.widget||(d.block?Ma.block:Ma.inline),x=gj(d),_=this.cache.findWidget(v,f-c,x)||Oa.of(v,this.view,f-c,x);d.block?(d.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(_)):(r.ensureLine(i),r.addInlineWidget(_,p,m))}i=null}else i=yj(i,d);f>c&&this.text.skip(f-c)},span:(c,f,d,p)=>{for(let m=c;m<f;){let y=this.text.next(Math.min(512,f-m));y==null?(r.addLineStartIfNotCovered(i),r.addBreak(),m++):(r.ensureLine(i),r.addText(y,d,p),m+=y.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=l>o,this.openMarks=l}forward(e,t){this.old.advance(t-e,1,{skip:(i,r,o)=>{(i.isText()||o==i.length)&&this.cache.add(i)},enter:i=>this.cache.add(i),leave:()=>{},break:()=>{}})}getCompositionContext(e){let t=[],i=null;for(let r=e.parentNode;;r=r.parentNode){let o=Wt.get(r);if(r==this.view.contentDOM)break;o instanceof Hn?t.push(o):o?.isLine()?i=o:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new ka(r,NE):t.push(Hn.of(new Vc({tagName:r.nodeName.toLowerCase(),attributes:UL(r)}),r))}return{line:i,marks:t}}}function H_(n,e){let t=i=>{for(let r of i.children)if((e?r.isText():r.length)||t(r))return!0;return!1};return t(n)}function gj(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const NE={class:"cm-line"};function yj(n,e){let t=e.spec.attributes,i=e.spec.class;return!t&&!i||(n||(n={class:"cm-line"}),t&&Av(t,n),i&&(n.class+=" "+i)),n}function vj(n){let e=[];for(let t=n.parents.length;t>1;t--){let i=t==n.parents.length?n.tile:n.parents[t].tile;i instanceof Hn&&e.push(i.mark)}return e}function _0(n){let e=Wt.get(n);return e&&e.setDOM(n.cloneNode()),n}class Ma extends fr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ma.inline=new Ma("span");Ma.block=new Ma("div");const C0=new class extends fr{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class I_{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Oe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new yp(e,e.contentDOM),this.updateInner([new _i(0,0,0,e.state.doc.length)],null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:m})=>m<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Ej(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?Sj(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:m}=this.hasComposition;i=new _i(p,m,e.changes.mapPos(p,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(_e.ie||_e.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,c=this.blockWrappers;this.updateDeco();let f=_j(l,this.decorations,e.changes);f.length&&(i=_i.extendWithRanges(i,f));let d=Aj(c,this.blockWrappers,e.changes);return d.length&&(i=_i.extendWithRanges(i,d)),o&&!i.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let l=this.tile,c=new mj(this.view,l,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(e,t),By(l,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof A0&&r.push(o.dom);i.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(EE)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,o=r==i,l=!o&&!(this.view.state.facet(jr)||i.tabIndex>-1)&&Yh(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(o||t||l))return;let c=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d,p;if(f.empty?p=d=this.inlineDOMNearPos(f.anchor,f.assoc||1):(p=this.inlineDOMNearPos(f.head,f.head==f.from?1:-1),d=this.inlineDOMNearPos(f.anchor,f.anchor==f.from?1:-1)),_e.gecko&&f.empty&&!this.hasComposition&&bj(d)){let y=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(y,d.node.childNodes[d.offset]||null)),d=p=new ji(y,0),c=!0}let m=this.view.observer.selectionRange;(c||!m.focusNode||(!tc(d.node,d.offset,m.anchorNode,m.anchorOffset)||!tc(p.node,p.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,f))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&i.contains(m.focusNode)&&Tj(m.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let y=vc(this.view.root);if(y)if(f.empty){if(_e.gecko){let v=xj(d.node,d.offset);if(v&&v!=3){let x=(v==1?fE:hE)(d.node,d.offset);x&&(d=new ji(x.node,x.offset))}}y.collapse(d.node,d.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(d.node,d.offset);try{y.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();f.anchor>f.head&&([d,p]=[p,d]),v.setEnd(p.node,p.offset),v.setStart(d.node,d.offset),y.removeAllRanges(),y.addRange(v)}l&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new ji(m.anchorNode,m.anchorOffset),this.impreciseHead=p.precise?null:new ji(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&tc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=vc(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let l=this.lineAt(t.head,t.assoc);if(!l)return;let c=l.posAtStart;if(t.head==c||t.head==c+l.length)return;let f=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!f||!d||f.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(p.node,p.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&i.collapse(r,o)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[t];else{let l=Ur(e)==0?0:t==0?-1:1;for(;;){let c=e.parentNode;if(c==i.dom)break;l==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?l=-1:l=1),e=c}l<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return r;for(;o&&!Wt.get(o);)o=o.nextSibling;if(!o)return r+i.length;for(let l=0,c=r;;l++){let f=i.children[l];if(f.dom==o)return c;c+=f.length+f.breakAfter}}else return i.isText()?e==i.dom?r+t:r+(t?i.length:0):r}domAtPos(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(r,t)}inlineDOMNearPos(e,t){let i,r=-1,o=!1,l,c=-1,f=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=e)return!0;d.flags&16&&(o=!0)}else{let m=p+d.length;if(p<=e&&(i=d,r=e-p,o=m<e),m>=e&&!l&&(l=d,c=e-p,f=p>e),p>e&&l)return!0}}),!i&&!l?this.domAtPos(e,t):(o&&l?i=null:f&&i&&(l=null),i&&t<0||!l?i.domIn(r,t):l.domIn(c,t))}coordsAt(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof A0?null:i.coordsInWidget(r,t,!0):i.coordsIn(r,t)}lineAt(e,t){let{tile:i}=this.tile.resolveBlock(e,t);return i.isLine()?i:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function r(o,l){if(o.isComposite())for(let c of o.children){if(c.length>=l){let f=r(c,l);if(f)return f}if(l-=c.length,l<0)break}else if(o.isText()&&l<o.length){let c=Vt(o.text,l);if(c==l)return null;let f=Sc(o.dom,l,c).getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(d==f.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return r(t,i)}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,l=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==gt.LTR,d=0,p=(m,y,v)=>{for(let x=0;x<m.children.length&&!(y>r);x++){let _=m.children[x],S=y+_.length,A=_.dom.getBoundingClientRect(),{height:w}=A;if(v&&!x&&(d+=A.top-v.top),_ instanceof As)S>i&&p(_,y,A);else if(y>=i&&(d>0&&t.push(-d),t.push(w+d),d=0,l)){let C=_.dom.lastChild,k=C?ec(C):[];if(k.length){let T=k[k.length-1],O=f?T.right-A.left:A.right-T.left;O>c&&(c=O,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=S)}}v&&x==m.children.length-1&&(d+=v.bottom-A.bottom),y=S+_.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?gt.RTL:gt.LTR}measureTextSize(){let e=this.tile.blockTiles(l=>{if(l.isLine()&&l.children.length&&l.length<=20){let c=0,f;for(let d of l.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=ec(d.dom);if(p.length!=1)return;c+=p[0].width,f=p[0].height}if(c)return{lineHeight:l.dom.getBoundingClientRect().height,charWidth:c/l.length,textHeight:f}}});if(e)return e;let t=document.createElement("div"),i,r,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let l=ec(t.firstChild)[0];i=t.getBoundingClientRect().height,r=l&&l.width?l.width/27:7,o=l&&l.height?l.height:i,t.remove()}),{lineHeight:i,charWidth:r,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],l=o?o.from-1:this.view.state.doc.length;if(l>i){let c=(t.lineBlockAt(l).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Oe.replace({widget:new A0(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!o)break;i=o.to+1}return Oe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(xc).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(ME).map((o,l)=>{let c=typeof o=="function";return c&&(i=!0),c?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ke.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(OE).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(TE))try{if(d(this.view,e.range,e))return!0}catch(p){In(this.view.state,p,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=Dv(this.view),l={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:c,offsetHeight:f}=this.view.scrollDOM;WL(this.view.scrollDOM,l,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,f),-f),this.view.textDirection==gt.LTR)}lineHasWidget(e){let t=i=>i.isWidget()||i.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){By(this.tile)}}function By(n,e){let t=e?.get(n);if(t!=1){t==null&&n.destroy();for(let i of n.children)By(i,e)}}function bj(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function zE(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=fE(t.focusNode,t.focusOffset),r=hE(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let c=Wt.get(r.node);if(!c||c.isText()&&c.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let f=Wt.get(i.node);!f||f.isText()&&f.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let l=e-o.offset;return{from:l,to:l+o.node.nodeValue.length,node:o.node}}function Sj(n,e,t){let i=zE(n,t);if(!i)return null;let{node:r,from:o,to:l}=i,c=r.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(i.from,i.to)!=c)return null;let f=e.invertedDesc;return{range:new _i(f.mapPos(o),f.mapPos(l),o,l),text:r}}function xj(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let wj=class{constructor(){this.changes=[]}compareRange(e,t){Sa(e,t,this.changes)}comparePoint(e,t){Sa(e,t,this.changes)}boundChange(e){Sa(e,e,this.changes)}};function _j(n,e,t){let i=new wj;return Ke.compare(n,e,t,i),i.changes}class Cj{constructor(){this.changes=[]}compareRange(e,t){Sa(e,t,this.changes)}comparePoint(){}boundChange(e){Sa(e,e,this.changes)}}function Aj(n,e,t){let i=new Cj;return Ke.compare(n,e,t,i),i.changes}function Tj(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Ej(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}class A0 extends fr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function kj(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return me.cursor(e);o==0?t=1:o==r.length&&(t=-1);let l=o,c=o;t<0?l=Vt(r.text,o,!1):c=Vt(r.text,o);let f=i(r.text.slice(l,c));for(;l>0;){let d=Vt(r.text,l,!1);if(i(r.text.slice(d,l))!=f)break;l=d}for(;c<r.length;){let d=Vt(r.text,c);if(i(r.text.slice(c,d))!=f)break;c=d}return me.range(l+r.from,c+r.from)}function Oj(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,f=Math.floor((r-t.top-(n.defaultLineHeight-c)*.5)/c);o+=f*n.viewState.heightOracle.lineLength}let l=n.state.sliceDoc(t.from,t.to);return t.from+Ty(l,o,n.state.tabSize)}function Py(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==un.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function Mj(n,e,t,i){let r=Py(n,e.head,e.assoc||-1),o=!i||r.type!=un.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let l=n.dom.getBoundingClientRect(),c=n.textDirectionAt(r.from),f=n.posAtCoords({x:t==(c==gt.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(f!=null)return me.cursor(f,t?-1:1)}return me.cursor(t?r.to:r.from,t?-1:1)}function U_(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),l=n.textDirectionAt(r.from);for(let c=e,f=null;;){let d=rj(r,o,l,c,t),p=yE;if(!d){if(r.number==(t?n.state.doc.lines:1))return c;p=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),d=n.visualLineSide(r,!t)}if(f){if(!f(p))return c}else{if(!i)return d;f=i(p)}c=d}}function Dj(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let l=i(o);return r==xt.Space&&(r=l),r==l}}function Rj(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return me.cursor(r,e.assoc);let l=e.goalColumn,c,f=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(r,e.assoc||-1),p=n.documentTop;if(d)l==null&&(l=d.left-f.left),c=o<0?d.top:d.bottom;else{let v=n.viewState.lineBlockAt(r);l==null&&(l=Math.min(f.right-f.left,n.defaultCharacterWidth*(r-v.from))),c=(o<0?v.top:v.bottom)+p}let m=f.left+l,y=i??n.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let x=c+(y+v)*o,_=qy(n,{x:m,y:x},!1,o);return me.cursor(_.pos,_.assoc,void 0,l)}}function nc(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,l,c)=>{if(e>o&&e<l){let f=i||t||(e-o<l-e?-1:1);e=f<0?o:l,i=f}});if(!i)return e}}function $E(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let l=nc(n,r.from,0);l!=r.from&&(o=me.cursor(l,-1))}else{let l=nc(n,r.from,-1),c=nc(n,r.to,1);(l!=r.from||c!=r.to)&&(o=me.range(r.from==r.anchor?l:c,r.from==r.head?l:c))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?me.create(t,e.mainIndex):e}function T0(n,e,t){let i=nc(n.state.facet(Wc).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:me.cursor(i,i<t.from?1:-1)}class sr{constructor(e,t){this.pos=e,this.assoc=t}}function qy(n,e,t,i){let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,{x:l,y:c}=e,f=c-o,d;for(;;){if(f<0)return new sr(0,1);if(f>n.viewState.docHeight)return new sr(n.state.doc.length,-1);if(d=n.elementAtHeight(f),i==null)break;if(d.type==un.Text){let y=n.docView.coordsAt(i<0?d.from:d.to,i);if(y&&(i<0?y.top<=f+o:y.bottom>=f+o))break}let m=n.viewState.heightOracle.textHeight/2;f=i>0?d.bottom+m:d.top-m}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==un.Text){let m=Oj(n,r,d,l,c);return new sr(m,m==d.from?1:-1)}}if(d.type!=un.Text)return f<(d.top+d.bottom)/2?new sr(d.from,1):new sr(d.to,-1);let p=n.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=n.docView.lineAt(d.from,-2)),LE(n,p,d.from,l,c)}function LE(n,e,t,i,r){let o=-1,l=null,c=1e9,f=1e9,d=r,p=r,m=(y,v)=>{for(let x=0;x<y.length;x++){let _=y[x];if(_.top==_.bottom)continue;let S=_.left>i?_.left-i:_.right<i?i-_.right:0,A=_.top>r?_.top-r:_.bottom<r?r-_.bottom:0;_.top<=p&&_.bottom>=d&&(d=Math.min(_.top,d),p=Math.max(_.bottom,p),A=0),(o<0||(A-f||S-c)<0)&&(o>=0&&f&&c<S&&l.top<=p-2&&l.bottom>=d+2?f=0:(o=v,c=S,f=A,l=_))}};if(e.isText()){for(let v=0;v<e.length;){let x=Vt(e.text,v);if(m(Sc(e.dom,v,x).getClientRects(),v),!c&&!f)break;v=x}return i>(l.left+l.right)/2==(V_(n,o+t)==gt.LTR)?new sr(t+Vt(e.text,o),-1):new sr(t+o,1)}else{if(!e.length)return new sr(t,1);for(let _=0;_<e.children.length;_++){let S=e.children[_];if(S.flags&48)continue;let A=(S.dom.nodeType==1?S.dom:Sc(S.dom,0,S.length)).getClientRects();if(m(A,_),!c&&!f)break}let y=e.children[o],v=e.posBefore(y,t);return y.isComposite()||y.isText()?LE(n,y,v,Math.max(l.left,Math.min(l.right,i)),r):i>(l.left+l.right)/2==(V_(n,o+t)==gt.LTR)?new sr(v+y.length,-1):new sr(v,1)}}function V_(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[Br.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const Wl="";class Nj{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Xe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Wl}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let l=Wt.get(r),c=r.nextSibling;if(c==t){l?.breakAfter&&!c&&this.lineBreak();break}let f=Wt.get(c);(l&&f?l.breakAfter:(l?l.breakAfter:xd(r))||xd(c)&&(r.nodeName!="BR"||l?.isWidget())&&this.text.length>o)&&!$j(c,t)&&this.lineBreak(),r=c}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,l=1,c;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(c=r.exec(t))&&(o=c.index,l=c[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),l>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=l-1);i=o+l}}readNode(e){let t=Wt.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(zj(e,i.node,i.offset)?t:0))}}function zj(n,e,t){for(;;){if(!e||t<Ur(e))return!1;if(e==n)return!0;t=Ds(e)+1,e=e.parentNode}}function $j(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Wt.get(n);if(!i?.isWidget())return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class F_{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Lj{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=jE(e.docView.tile,t,i,0))){let c=o||l?[]:Bj(e),f=new Nj(c,e.state);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=Pj(c,this.bounds.from)}else{let c=e.observer.selectionRange,f=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!Ny(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!Ny(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&f!=d&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(f,d),y=Math.max(f,d),v=p.from-m,x=p.to-y;(v==0||v==1||m==0)&&(x==0||x==-1||y==e.state.doc.length)&&(f=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(me.range(d,f)):this.newSel=me.single(d,f)}}}function jE(n,e,t,i){if(n.isComposite()){let r=-1,o=-1,l=-1,c=-1;for(let f=0,d=i,p=i;f<n.children.length;f++){let m=n.children[f],y=d+m.length;if(d<e&&y>t)return jE(m,e,t,d);if(y>=e&&r==-1&&(r=f,o=d),d>t&&m.dom.parentNode==n.dom){l=f,c=p;break}p=y,d=y+m.breakAfter}return{from:o,to:c<0?i+n.length:c,startDOM:(r?n.children[r-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:l<n.children.length&&l>=0?n.children[l].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function BE(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:c}=e.bounds,f=r.from,d=null;(o===8||_e.android&&e.text.length<c-l)&&(f=r.to,d="end");let p=PE(n.state.doc.sliceString(l,c,Wl),e.text,f-l,d);p&&(_e.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Wl+Wl&&p.toB--,t={from:l+p.from,to:l+p.toA,insert:Ze.of(e.text.slice(p.from,p.toB).split(Wl))})}else i&&(!n.hasFocus&&n.state.facet(jr)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=me.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:Ze.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:_e.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=me.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:Ze.of([" "])}),t)return Rv(n,t,i,o);if(i&&!i.main.eq(r)){let l=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(l=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(i=$E(n.state.facet(Wc).map(f=>f(n)),i))),n.dispatch({selection:i,scrollIntoView:l,userEvent:c}),!0}else return!1}function Rv(n,e,t,i=-1){if(_e.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&xa(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&xa(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&xa(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let l,c=()=>l||(l=jj(n,e,t));return n.state.facet(wE).some(f=>f(n,e.from,e.to,o,c))||n.dispatch(c()),!0}function jj(n,e,t){let i,r=n.state,o=r.selection.main,l=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let f=e.from<o.from?-1:1,d=f<0?o.from:o.to,p=nc(r.facet(Wc).map(m=>m(n)),d,f);e.from==p&&(l=p)}if(l>-1)i={changes:e,selection:me.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let f=o.from<e.from?r.sliceDoc(o.from,e.from):"",d=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(f+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let f=r.changes(e),d=t&&t.main.to<=f.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=n.state.sliceDoc(e.from,e.to),m,y=t&&zE(n,t.main.head);if(y){let x=e.insert.length-(e.to-e.from);m={from:y.from,to:y.to-x}}else m=n.state.doc.lineAt(o.head);let v=o.to-e.to;i=r.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:d||x.map(f)};let _=x.to-v,S=_-p.length;if(n.state.sliceDoc(S,_)!=p||_>=m.from&&S<=m.to)return{range:x};let A=r.changes({from:S,to:_,insert:e.insert}),w=x.to-o.to;return{changes:A,range:d?me.range(Math.max(0,d.anchor+w),Math.max(0,d.head+w)):x.map(A)}})}else i={changes:f,selection:d&&r.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:c,scrollIntoView:!0})}function PE(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let l=n.length,c=e.length;for(;l>0&&c>0&&n.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(i=="end"){let f=Math.max(0,o-Math.min(l,c));t-=l+f-o}if(l<o&&n.length<e.length){let f=t<=o&&t>=l?o-t:0;o-=f,c=o+(c-l),l=o}else if(c<o){let f=t<=o&&t>=c?o-t:0;o-=f,l=o+(l-c),c=o}return{from:o,toA:l,toB:c}}function Bj(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new F_(t,i)),(r!=t||o!=i)&&e.push(new F_(r,o))),e}function Pj(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?me.single(t+e,i+e):null}class qj{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&tB(e.contentDOM.ownerDocument)}handleEvent(e){!Yj(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Hj(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let l=!t[o].handlers.length,c=i[o];c&&l!=!c.handlers.length&&(r.removeEventListener(o,this.handleEvent),c=null),c||r.addEventListener(o,this.handleEvent,{passive:l})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&HE.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=qE.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Ij.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,xa(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function W_(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){In(t.state,r)}}}function Hj(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,l=r&&r.plugin.domEventObservers;if(o)for(let c in o){let f=o[c];f&&t(c).handlers.push(W_(i.value,f))}if(l)for(let c in l){let f=l[c];f&&t(c).observers.push(W_(i.value,f))}}for(let i in Ii)t(i).handlers.push(Ii[i]);for(let i in Ei)t(i).observers.push(Ei[i]);return e}const qE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ij="dthko",HE=[16,17,18,20,91,92,224,225],_h=6;function Ch(n){return Math.max(0,n)*.7+8}function Uj(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class Vj{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=KL(e.contentDOM),this.atoms=e.state.facet(Wc).map(l=>l(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Xe.allowMultipleSelections)&&Fj(e,t),this.dragging=Kj(e,t)&&VE(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Uj(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,l=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:c}=this.scrollParents.y.getBoundingClientRect());let f=Dv(this.view);e.clientX-f.left<=r+_h?t=-Ch(r-e.clientX):e.clientX+f.right>=l-_h&&(t=Ch(e.clientX-l)),e.clientY-f.top<=o+_h?i=-Ch(o-e.clientY):e.clientY+f.bottom>=c-_h&&(i=Ch(e.clientY-c)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=$E(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Fj(n,e){let t=n.state.facet(vE);return t.length?t[0](e):_e.mac?e.metaKey:e.ctrlKey}function Wj(n,e){let t=n.state.facet(bE);return t.length?t[0](e):_e.mac?!e.altKey:!e.ctrlKey}function Kj(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=vc(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let l=r[o];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Yj(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Wt.get(t))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const Ii=Object.create(null),Ei=Object.create(null),IE=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function Gj(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),UE(n,t.value)},50)}function vp(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function UE(n,e){e=vp(n.state,kv,e);let{state:t}=n,i,r=1,o=t.toText(e),l=o.lines==t.selection.ranges.length;if(Hy!=null&&t.selection.ranges.every(f=>f.empty)&&Hy==o.toString()){let f=-1;i=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==f)return{range:d};f=p.from;let m=t.toText((l?o.line(r++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:m},range:me.cursor(d.from+m.length)}})}else l?i=t.changeByRange(f=>{let d=o.line(r++);return{changes:{from:f.from,to:f.to,insert:d.text},range:me.cursor(f.from+d.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ei.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ii.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ei.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ei.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ii.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(SE))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Qj(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new Vj(n,e,t,i)),i&&n.observer.ignore(()=>{cE(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function K_(n,e,t,i){if(i==1)return me.cursor(e,t);if(i==2)return kj(n.state,e,t);{let r=n.docView.lineAt(e,t),o=n.state.doc.lineAt(r?r.posAtEnd:e),l=r?r.posAtStart:o.from,c=r?r.posAtEnd:o.to;return c<n.state.doc.length&&c==o.to&&c++,me.range(l,c)}}const Xj=_e.ie&&_e.ie_version<=11;let Y_=null,G_=0,X_=0;function VE(n){if(!Xj)return n.detail;let e=Y_,t=X_;return Y_=n,X_=Date.now(),G_=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(G_+1)%3:1}function Qj(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=VE(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,l,c){let f=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),d,p=K_(n,f.pos,f.assoc,i);if(t.pos!=f.pos&&!l){let m=K_(n,t.pos,t.assoc,i),y=Math.min(m.from,p.from),v=Math.max(m.to,p.to);p=y<p.from?me.range(y,v):me.range(v,y)}return l?r.replaceRange(r.main.extend(p.from,p.to)):c&&i==1&&r.ranges.length>1&&(d=Jj(r,f.pos))?d:c?r.addRange(p):me.create([p])}}}function Jj(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return me.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ii.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.tile.nearest(e.target);if(r&&r.isWidget()){let o=r.posAtStart,l=o+r.length;(o>=t.to||l<=t.from)&&(t=me.range(o,l))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",vp(n.state,Ov,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ii.dragend=n=>(n.inputState.draggedContent=null,!1);function Q_(n,e,t,i){if(t=vp(n.state,kv,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,l=i&&o&&Wj(n,e)?{from:o.from,to:o.to}:null,c={from:r,insert:t},f=n.state.changes(l?[l,c]:c);n.focus(),n.dispatch({changes:f,selection:{anchor:f.mapPos(r,-1),head:f.mapPos(r,1)},userEvent:l?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ii.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&Q_(n,e,i.filter(l=>l!=null).join(n.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let c=new FileReader;c.onerror=o,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[l]=c.result),o()},c.readAsText(t[l])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Q_(n,e,i,!0),!0}return!1};Ii.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=IE?null:e.clipboardData;return t?(UE(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Gj(n),!1)};function Zj(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function eB(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let l=n.doc.lineAt(o);l.number>r&&(e.push(l.text),t.push({from:l.from,to:Math.min(n.doc.length,l.to+1)})),r=l.number}i=!0}return{text:vp(n,Ov,e.join(n.lineBreak)),ranges:t,linewise:i}}let Hy=null;Ii.copy=Ii.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=eB(n.state);if(!t&&!r)return!1;Hy=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=IE?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(Zj(n,t),!1)};const FE=cr.define();function WE(n,e){let t=[];for(let i of n.facet(_E)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:FE.of(!0)}):null}function KE(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=WE(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ei.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),KE(n)};Ei.blur=n=>{n.observer.clearSelectionRange(),KE(n)};Ei.compositionstart=Ei.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ei.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,_e.chrome&&_e.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ei.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ii.beforeinput=(n,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),l=e.getTargetRanges();if(o&&l.length){let c=l[0],f=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return Rv(n,{from:f,to:d,insert:n.state.toText(o)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=qE.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ei.compositionend(n,e),20),!1};const J_=new Set;function tB(n){J_.has(n)||(J_.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Z_=["pre-wrap","normal","pre-line","break-spaces"];let Da=!1;function eC(){Da=!1}class nB{constructor(e){this.lineWrapping=e,this.doc=Ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Z_.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,l){let c=Z_.indexOf(e)>-1,f=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,f){this.heightSamples={};for(let d=0;d<l.length;d++){let p=l[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return f}}class iB{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Li{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?un.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof go?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Li(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var yt=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(yt||(yt={}));const Gh=.001;class An{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Gh&&(Da=!0),this.height=e)}replace(e,t,i){return An.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,l=i.doc;for(let c=r.length-1;c>=0;c--){let{fromA:f,toA:d,fromB:p,toB:m}=r[c],y=o.lineAt(f,yt.ByPosNoHeight,i.setDoc(t),0,0),v=y.to>=d?y:o.lineAt(d,yt.ByPosNoHeight,i,0,0);for(m+=v.to-d,d=v.to;c>0&&y.from<=r[c-1].toA;)f=r[c-1].fromA,p=r[c-1].fromB,c--,f<y.from&&(y=o.lineAt(f,yt.ByPosNoHeight,i,0,0));p+=y.from-f,f=y.from;let x=Nv.build(i.setDoc(l),e,p,m);o=Ad(o,o.replace(f,d,x))}return o.updateHeight(i,0)}static empty(){return new ii(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),i+=1+c.break,r-=c.size}else if(o>r*2){let c=e[i];c.break?e.splice(i,1,c.left,null,c.right):e.splice(i,1,c.left,c.right),i+=2+c.break,o-=c.size}else break;else if(r<o){let c=e[t++];c&&(r+=c.size)}else{let c=e[--i];c&&(o+=c.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,i++),new sB(An.of(e.slice(0,t)),l,An.of(e.slice(i)))}}function Ad(n,e){return n==e?n:(n.constructor!=e.constructor&&(Da=!0),e)}An.prototype.size=1;const rB=Oe.replace({});class YE extends An{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new Li(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,r){return this.spaceAbove&&e<i+this.spaceAbove?new Li(r,0,i,this.spaceAbove,rB):this.mainBlock(i,r)}lineAt(e,t,i,r,o){let l=this.mainBlock(r,o);return this.spaceAbove?this.blockAt(0,i,r,o).join(l):l}forEachLine(e,t,i,r,o,l){e<=o+this.length&&t>=o&&l(this.lineAt(0,yt.ByPos,i,r,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ii extends YE{constructor(e,t,i){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,t){return new Li(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof ii||r instanceof ln&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof ln?r=new ii(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):An.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ln extends An{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,l,c=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*o);l=f/o,this.length>o+1&&(c=(this.height-f)/(this.length-o-1))}else l=this.height/o;return{firstLine:i,lastLine:r,perLine:l,perChar:c}}blockAt(e,t,i,r){let{firstLine:o,lastLine:l,perLine:c,perChar:f}=this.heightMetrics(t,r);if(t.lineWrapping){let d=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),p=t.doc.lineAt(d),m=c+p.length*f,y=Math.max(i,e-m/2);return new Li(p.from,p.length,y,m,0)}else{let d=Math.max(0,Math.min(l-o,Math.floor((e-i)/c))),{from:p,length:m}=t.doc.line(o+d);return new Li(p,m,i+c*d,c,0)}}lineAt(e,t,i,r,o){if(t==yt.ByHeight)return this.blockAt(e,i,r,o);if(t==yt.ByPosNoHeight){let{from:v,to:x}=i.doc.lineAt(e);return new Li(v,x-v,0,0,0)}let{firstLine:l,perLine:c,perChar:f}=this.heightMetrics(i,o),d=i.doc.lineAt(e),p=c+d.length*f,m=d.number-l,y=r+c*m+f*(d.from-o-m);return new Li(d.from,d.length,Math.max(r,Math.min(y,r+this.height-p)),p,0)}forEachLine(e,t,i,r,o,l){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:c,perLine:f,perChar:d}=this.heightMetrics(i,o);for(let p=e,m=r;p<=t;){let y=i.doc.lineAt(p);if(p==e){let x=y.number-c;m+=f*x+d*(e-o-x)}let v=f+d*y.length;l(new Li(y.from,y.length,m,v,0)),m+=v,p=y.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof ln?i[i.length-1]=new ln(o.length+r):i.push(null,new ln(r-1))}if(e>0){let o=i[0];o instanceof ln?i[0]=new ln(e+o.length):i.unshift(new ln(e-1),null)}return An.of(i)}decomposeLeft(e,t){t.push(new ln(e-1),null)}decomposeRight(e,t){t.push(null,new ln(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let l=[],c=Math.max(t,r.from),f=-1;for(r.from>t&&l.push(new ln(r.from-t-1).updateHeight(e,t));c<=o&&r.more;){let p=e.doc.lineAt(c).length;l.length&&l.push(null);let m=r.heights[r.index++],y=0;m<0&&(y=-m,m=r.heights[r.index++]),f==-1?f=m:Math.abs(m-f)>=Gh&&(f=-2);let v=new ii(p,m,y);v.outdated=!1,l.push(v),c+=p+1}c<=o&&l.push(null,new ln(o-c).updateHeight(e,c));let d=An.of(l);return(f<0||Math.abs(d.height-this.height)>=Gh||Math.abs(f-this.heightMetrics(e,t).perLine)>=Gh)&&(Da=!0),Ad(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class sB extends An{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let l=r+this.left.height,c=o+this.left.length+this.break,f=t==yt.ByHeight?e<l:e<c,d=f?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,l,c);if(this.break||(f?d.to<c:d.from>c))return d;let p=t==yt.ByPosNoHeight?yt.ByPosNoHeight:yt.ByPos;return f?d.join(this.right.lineAt(c,p,i,l,c)):this.left.lineAt(c,p,i,r,o).join(d)}forEachLine(e,t,i,r,o,l){let c=r+this.left.height,f=o+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,t,i,r,o,l),t>=f&&this.right.forEachLine(e,t,i,c,f,l);else{let d=this.lineAt(f,yt.ByPos,i,r,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,r,o,l),d.to>=e&&d.from<=t&&l(d),t>d.to&&this.right.forEachLine(d.to+1,t,i,c,f,l)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let l=o.length;for(let c of i)o.push(c);if(e>0&&tC(o,l-1),t<this.length){let c=o.length;this.decomposeRight(t,o),tC(o,c)}return An.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?An.of(this.break?[e,null,t]:[e,t]):(this.left=Ad(this.left,e),this.right=Ad(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:l}=this,c=t+o.length+this.break,f=null;return r&&r.from<=t+o.length&&r.more?f=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=c+l.length&&r.more?f=l=l.updateHeight(e,c,i,r):l.updateHeight(e,c,i),f?this.balanced(o,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tC(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof ln&&(i=n[e+1])instanceof ln&&n.splice(e-1,3,new ln(t.length+1+i.length))}const oB=5;class Nv{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ii?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ii(i-this.pos,-1,0)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let l=t-e;i.block?this.addBlock(new YE(l,r,i)):(l||o||r>=oB)&&this.addLineDeco(r,o,l)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ii(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let i=new ln(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ii)return e;let t=new ii(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ii)&&!this.isCovered?this.nodes.push(new ii(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof ii&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new Nv(i,e);return Ke.spans(t,i,r,o,0),o.finish(i)}}function aB(n,e,t){let i=new lB;return Ke.compare(n,e,t,i,0),i.changes}class lB{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Sa(e,t,this.changes,5)}}function cB(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),l=Math.min(r.innerWidth,t.right),c=Math.max(0,t.top),f=Math.min(r.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=i.body;)if(d.nodeType==1){let p=d,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),l=Math.min(l,y.right),c=Math.max(c,y.top),f=Math.min(d==n.parentNode?r.innerHeight:f,y.bottom)}d=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-t.left,right:Math.max(o,l)-t.left,top:c-(t.top+e),bottom:Math.max(c,f)-(t.top+e)}}function uB(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function fB(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class E0{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return Oe.replace({widget:new hB(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class hB extends fr{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=iC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=gt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Mv).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new nB(t),this.stateDeco=e.facet(xc).filter(i=>typeof i!="function"),this.heightMap=An.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle.setDoc(e.doc),[new _i(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Oe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:l})=>r>=o&&r<=l)){let{from:o,to:l}=this.lineBlockAt(r);e.push(new Ah(o,l))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?iC:new zv(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Kl(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(xc).filter(p=>typeof p!="function");let r=e.changedRanges,o=_i.extendWithRanges(r,aB(i,this.stateDeco,e?e.changes:Ut.empty(this.state.doc.length))),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);eC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=l||Da)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let f=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<f.from||t.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,t));let d=f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(AE)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?gt.RTL:gt.LTR;let l=this.heightOracle.mustRefreshForWrapping(o),c=t.getBoundingClientRect(),f=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:k,scaleY:T}=lE(t,c);(k>.005&&Math.abs(this.scaleX-k)>.005||T>.005&&Math.abs(this.scaleY-T)>.005)&&(this.scaleX=k,this.scaleY=T,d|=16,l=f=!0)}let m=(parseInt(i.paddingTop)||0)*this.scaleY,y=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=y)&&(this.paddingTop=m,this.paddingBottom=y,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=uE(e.scrollDOM);let x=(this.printing?fB:cB)(t,this.paddingTop),_=x.top-this.pixelViewport.top,S=x.bottom-this.pixelViewport.bottom;this.pixelViewport=x;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(f=!0)),!this.inView&&!this.scrollTarget&&!uB(e.dom))return 0;let w=c.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),f){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(l=!0),l||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:T,charWidth:O,textHeight:E}=e.docView.measureTextSize();l=T>0&&r.refresh(o,T,O,E,Math.max(5,w/O),k),l&&(e.docView.minWidth=0,d|=16)}_>0&&S>0?p=Math.max(_,S):_<0&&S<0&&(p=Math.min(_,S)),eC();for(let T of this.viewports){let O=T.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(T);this.heightMap=(l?An.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle,[new _i(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,l,new iB(T.from,O))}Da&&(d|=2)}let C=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return C&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||C)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,f=new Ah(r.lineAt(l-i*1e3,yt.ByHeight,o,0,0).from,r.lineAt(c+(1-i)*1e3,yt.ByHeight,o,0,0).to);if(t){let{head:d}=t.range;if(d<f.from||d>f.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=r.lineAt(d,yt.ByPos,o,0,0),y;t.y=="center"?y=(m.top+m.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<f.from?y=m.top:y=m.bottom-p,f=new Ah(r.lineAt(y-1e3/2,yt.ByHeight,o,0,0).from,r.lineAt(y+p+1e3/2,yt.ByHeight,o,0,0).to)}}return f}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ah(this.heightMap.lineAt(i,yt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,yt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,yt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,yt.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||r<=l-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=c+Math.max(10,Math.min(i,250)))&&r>l-2*1e3&&o<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new E0(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,l=r<<1;if(this.defaultTextDirection!=gt.LTR&&!i)return[];let c=[],f=(p,m,y,v)=>{if(m-p<o)return;let x=this.state.selection.main,_=[x.from];x.empty||_.push(x.to);for(let A of _)if(A>p&&A<m){f(p,A-10,y,v),f(A+10,m,y,v);return}let S=pB(e,A=>A.from>=y.from&&A.to<=y.to&&Math.abs(A.from-p)<o&&Math.abs(A.to-m)<o&&!_.some(w=>A.from<w&&A.to>w));if(!S){if(m<y.to&&t&&i&&t.visibleRanges.some(C=>C.from<=m&&C.to>=m)){let C=t.moveToLineBoundary(me.cursor(m),!1,!0).head;C>p&&(m=C)}let A=this.gapSize(y,p,m,v),w=i||A<2e6?A:2e6;S=new E0(p,m,A,w)}c.push(S)},d=p=>{if(p.length<l||p.type!=un.Text)return;let m=dB(p.from,p.to,this.stateDeco);if(m.total<l)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,v,x;if(i){let _=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,A;if(y!=null){let w=Eh(m,y),C=((this.visibleBottom-this.visibleTop)/2+_)/p.height;S=w-C,A=w+C}else S=(this.visibleTop-p.top-_)/p.height,A=(this.visibleBottom-p.top+_)/p.height;v=Th(m,S),x=Th(m,A)}else{let _=m.total*this.heightOracle.charWidth,S=r*this.heightOracle.charWidth,A=0;if(_>2e6)for(let O of e)O.from>=p.from&&O.from<p.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+A<this.pixelViewport.left&&(A=O.size-O.displaySize);let w=this.pixelViewport.left+A,C=this.pixelViewport.right+A,k,T;if(y!=null){let O=Eh(m,y),E=((C-w)/2+S)/_;k=O-E,T=O+E}else k=(w-S)/_,T=(C+S)/_;v=Th(m,k),x=Th(m,T)}v>p.from&&f(p.from,v,p,m),x<p.to&&f(x,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(e,t,i,r){let o=Eh(r,i)-Eh(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){E0.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Oe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ke.spans(t,this.viewport.from,this.viewport.to,{span(o,l){i.push({from:o,to:l})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let l=this.visibleRanges[o],c=i[o];(l.from!=c.from||l.to!=c.to)&&(r|=4,e&&e.mapPos(l.from,-1)==c.from&&e.mapPos(l.to,1)==c.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Kl(this.heightMap.lineAt(e,yt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Kl(this.heightMap.lineAt(this.scaler.fromDOM(e),yt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Kl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ah{constructor(e,t){this.from=e,this.to=t}}function dB(n,e,t){let i=[],r=n,o=0;return Ke.spans(t,n,e,{span(){},point(l,c){l>r&&(i.push({from:r,to:l}),o+=l-r),r=c}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function Th({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:l}=e[r],c=l-o;if(i<=c)return o+i;i-=c}}function Eh(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function pB(n,e){for(let t of n)if(e(t))return t}const iC={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class zv{constructor(e,t,i){let r=0,o=0,l=0;this.viewports=i.map(({from:c,to:f})=>{let d=t.lineAt(c,yt.ByPos,e,0,0).top,p=t.lineAt(f,yt.ByPos,e,0,0).bottom;return r+=p-d,{from:c,to:f,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let c of this.viewports)c.domTop=l+(c.top-o)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),o=c.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof zv?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Kl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Li(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>Kl(r,e)):n._content)}const kh=Ce.define({combine:n=>n.join(" ")}),Iy=Ce.define({combine:n=>n.indexOf(!0)>-1}),Uy=Os.newName(),GE=Os.newName(),XE=Os.newName(),QE={"&light":"."+GE,"&dark":"."+XE};function Vy(n,e,t){return new Os(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const mB=Vy("."+Uy,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},QE),gB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},k0=_e.ie&&_e.ie_version<=11;class yB{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new YL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new bB(e),e.state.facet(jr)&&(e.contentDOM.editContext=this.editContext.editContext)),k0&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(jr)?i.root.activeElement!=this.dom:!Yh(this.dom,r))return;let o=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&tc(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=vc(e.root);if(!t)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&vB(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=Yh(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&XL(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,gB),k0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),k0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&xa(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let l=this.readMutation(o);l&&(l.typeOver&&(r=!0),t==-1?{from:t,to:i}=l:(t=Math.min(l.from,t),i=Math.max(l.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Yh(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Lj(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=BE(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let i=rC(t,e.previousSibling||e.target.previousSibling,-1),r=rC(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(jr)!=e.state.facet(jr)&&(e.view.contentDOM.editContext=e.state.facet(jr)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function rC(n,e,t){for(;e;){let i=Wt.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function sC(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor,1);return tc(l.node,l.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function vB(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return sC(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?sC(n,t):null}class bB{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:l}=r,c=this.toEditorPos(i.updateRangeStart),f=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:c,drifted:!1});let d=f-c>i.text.length;c==this.from&&o<this.from?c=o:f==this.to&&o>this.to&&(f=o);let p=PE(e.state.sliceDoc(c,f),i.text,(d?r.from:r.to)-c,d?"end":null);if(!p){let y=me.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));y.main.eq(r)||e.dispatch({selection:y,userEvent:"select"});return}let m={from:p.from+c,to:p.toA+c,insert:Ze.of(i.text.slice(p.from,p.toB).split(`
`))};if((_e.mac||_e.android)&&m.from==l-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:f,insert:Ze.of([i.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let y=this.to-this.from+(m.to-m.from+m.insert.length);Rv(e,m,me.single(this.toEditorPos(i.selectionStart,y),this.toEditorPos(i.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);l<c;l++){let f=e.coordsForChar(l);o=f&&new DOMRect(f.left,f.top,f.right-f.left,f.bottom-f.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let l=o.underlineStyle,c=o.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(c)){let f=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(f<d){let p=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;r.push(Oe.mark({attributes:{style:p}}).range(f,d))}}}e.dispatch({effects:EE.of(Oe.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=vc(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,l,c,f,d)=>{if(i)return;let p=d.length-(l-o);if(r&&l>=r.to)if(r.from==o&&r.to==l&&r.insert.eq(d)){r=this.pendingContextChange=null,t+=p,this.to+=p;return}else r=null,this.revertPending(e.state);if(o+=t,l+=t,l<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||l>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(l),d.toString()),this.to+=p}t+=p}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class xe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||GL(e.parent)||document,this.viewState=new nC(e.state||Xe.create(e)),e.scrollTo&&e.scrollTo.is(wh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(pa).map(r=>new w0(r));for(let r of this.plugins)r.update(this);this.observer=new yB(this),this.inputState=new qj(this),this.inputState.ensureHandlers(this.plugins),this.docView=new I_(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ft?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let l=this.hasFocus,c=0,f=null;e.some(y=>y.annotation(FE))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,f=WE(o,l),f||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(Xe.phrases)!=this.state.facet(Xe.phrases))return this.setState(o);r=wd.create(this,o,e),r.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(m&&(m=m.map(y.changes)),y.scrollIntoView){let{main:v}=y.state.selection;m=new wa(v.empty?v:me.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of y.effects)v.is(wh)&&(m=v.value.clip(this.state))}this.viewState.update(r,m),this.bidiCache=Td.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(Fl)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(kh)!=r.state.facet(kh)&&(this.viewState.mustMeasureContent=!0),(t||i||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let y of this.state.facet(jy))try{y(r)}catch(v){In(this.state,v,"update listener")}(f||p)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),p&&!BE(this,p)&&d.force&&xa(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new nC(e),this.plugins=e.facet(pa).map(i=>new w0(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new I_(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(pa),i=e.state.facet(pa);if(t!=i){let r=[];for(let o of i){let l=t.indexOf(o);if(l<0)r.push(new w0(o));else{let c=this.plugins[l];c.mustUpdate=e,r.push(c)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){In(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:l}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(uE(i))o=-1,l=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(r);o=v.from,l=v.top}this.updateState=1;let f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];f&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(v=>{try{return v.read(this)}catch(x){return In(this.state,x),oC}}),m=wd.create(this,this.state,[]),y=!1;m.flags|=f,t?t.flags|=f:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),y=this.docView.update(m),y&&this.docViewUpdate());for(let v=0;v<d.length;v++)if(p[v]!=oC)try{let x=d[v];x.write&&x.write(p[v],this)}catch(x){In(this.state,x)}if(y&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let x=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-l;if(x>1||x<-1){r=r+x,i.scrollTop=r/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(jy))c(t)}get themeClasses(){return Uy+" "+(this.state.facet(Iy)?XE:GE)+" "+this.state.facet(kh)}updateAttrs(){let e=aC(this,kE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(jr)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),aC(this,Mv,t);let i=this.observer.ignore(()=>{let r=L_(this.contentDOM,this.contentAttrs,t),o=L_(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(xe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Fl);let e=this.state.facet(xe.cspNonce);Os.mount(this.root,this.styleModules.concat(mB).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return T0(this,e,U_(this,e,t,i))}moveByGroup(e,t){return T0(this,e,U_(this,e,t,i=>Dj(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return me.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Mj(this,e,t,i)}moveVertically(e,t,i){return T0(this,e,Rj(this,e,t,i))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let i=qy(this,e,t);return i&&i.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),qy(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),l=o[Br.find(o,e-r.from,-1,t)];return bc(i,l.dir==gt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(CE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>SB)return gE(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||mE(o.isolates,i=P_(this,e))))return o.order;i||(i=P_(this,e));let r=ij(e.text,t,i);return this.bidiCache.push(new Td(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cE(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return wh.of(new wa(typeof e=="number"?me.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return wh.of(new wa(me.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Mt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Mt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Os.newName(),r=[kh.of(i),Fl.of(Vy(`.${i}`,e))];return t&&t.dark&&r.push(Iy.of(!0)),r}static baseTheme(e){return bo.lowest(Fl.of(Vy("."+Uy,e,QE)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Wt.get(i)||Wt.get(e);return((t=r?.root)===null||t===void 0?void 0:t.view)||null}}xe.styleModule=Fl;xe.inputHandler=wE;xe.clipboardInputFilter=kv;xe.clipboardOutputFilter=Ov;xe.scrollHandler=TE;xe.focusChangeEffect=_E;xe.perLineTextDirection=CE;xe.exceptionSink=xE;xe.updateListener=jy;xe.editable=jr;xe.mouseSelectionStyle=SE;xe.dragMovesSelection=bE;xe.clickAddsSelectionRange=vE;xe.decorations=xc;xe.blockWrappers=OE;xe.outerDecorations=ME;xe.atomicRanges=Wc;xe.bidiIsolatedRanges=DE;xe.scrollMargins=RE;xe.darkTheme=Iy;xe.cspNonce=Ce.define({combine:n=>n.length?n[0]:""});xe.contentAttributes=Mv;xe.editorAttributes=kE;xe.lineWrapping=xe.contentAttributes.of({class:"cm-lineWrapping"});xe.announce=Pe.define();const SB=4096,oC={};class Td{constructor(e,t,i,r,o,l){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=l}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:gt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let l=e[o];l.dir==r&&!t.touchesRange(l.from,l.to)&&i.push(new Td(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return i}}function aC(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],l=typeof o=="function"?o(n):o;l&&Av(l,t)}return t}const xB=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function wB(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,l,c;for(let f=0;f<t.length-1;++f){const d=t[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),c&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Oh(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const _B=bo.default(xe.domEventHandlers({keydown(n,e){return ZE(JE(e.state),n,e,"editor")}})),bp=Ce.define({enables:_B}),lC=new WeakMap;function JE(n){let e=n.facet(bp),t=lC.get(e);return t||lC.set(e,t=TB(e.reduce((i,r)=>i.concat(r),[]))),t}function CB(n,e,t){return ZE(JE(n.state),e,n,t)}let xs=null;const AB=4e3;function TB(n,e=xB){let t=Object.create(null),i=Object.create(null),r=(l,c)=>{let f=i[l];if(f==null)i[l]=c;else if(f!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},o=(l,c,f,d,p)=>{var m,y;let v=t[l]||(t[l]=Object.create(null)),x=c.split(/ (?!$)/).map(A=>wB(A,e));for(let A=1;A<x.length;A++){let w=x.slice(0,A).join(" ");r(w,!0),v[w]||(v[w]={preventDefault:!0,stopPropagation:!1,run:[C=>{let k=xs={view:C,prefix:w,scope:l};return setTimeout(()=>{xs==k&&(xs=null)},AB),!0}]})}let _=x.join(" ");r(_,!1);let S=v[_]||(v[_]={preventDefault:!1,stopPropagation:!1,run:((y=(m=v._any)===null||m===void 0?void 0:m.run)===null||y===void 0?void 0:y.slice())||[]});f&&S.run.push(f),d&&(S.preventDefault=!0),p&&(S.stopPropagation=!0)};for(let l of n){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let d of c){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=l;for(let y in p)p[y].run.push(v=>m(v,Fy))}let f=l[e]||l.key;if(f)for(let d of c)o(d,f,l.run,l.preventDefault,l.stopPropagation),l.shift&&o(d,"Shift-"+f,l.shift,l.preventDefault,l.stopPropagation)}return t}let Fy=null;function ZE(n,e,t,i){Fy=e;let r=qL(e),o=Pn(r,0),l=rr(o)==r.length&&r!=" ",c="",f=!1,d=!1,p=!1;xs&&xs.view==t&&xs.scope==i&&(c=xs.prefix+" ",HE.indexOf(e.keyCode)<0&&(d=!0,xs=null));let m=new Set,y=S=>{if(S){for(let A of S.run)if(!m.has(A)&&(m.add(A),A(t)))return S.stopPropagation&&(p=!0),!0;S.preventDefault&&(S.stopPropagation&&(p=!0),d=!0)}return!1},v=n[i],x,_;return v&&(y(v[c+Oh(r,e,!l)])?f=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&!(_e.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(x=Ms[e.keyCode])&&x!=r?(y(v[c+Oh(x,e,!0)])||e.shiftKey&&(_=gc[e.keyCode])!=r&&_!=x&&y(v[c+Oh(_,e,!1)]))&&(f=!0):l&&e.shiftKey&&y(v[c+Oh(r,e,!0)])&&(f=!0),!f&&y(v._any)&&(f=!0)),d&&(f=!0),f&&p&&e.stopPropagation(),Fy=null,f}class Kc{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=ek(e);return[new Kc(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return EB(e,t,i)}}function ek(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==gt.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function cC(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),l=(r.top+r.bottom)/2,c=n.posAtCoords({x:o.left+1,y:l}),f=n.posAtCoords({x:o.right-1,y:l});return c==null||f==null?i:{from:Math.max(i.from,Math.min(c,f)),to:Math.min(i.to,Math.max(c,f))}}function EB(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==gt.LTR,l=n.contentDOM,c=l.getBoundingClientRect(),f=ek(n),d=l.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),m=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),y=c.right-(p?parseInt(p.paddingRight):0),v=Py(n,i,1),x=Py(n,r,-1),_=v.type==un.Text?v:null,S=x.type==un.Text?x:null;if(_&&(n.lineWrapping||v.widgetLineBreaks)&&(_=cC(n,i,1,_)),S&&(n.lineWrapping||x.widgetLineBreaks)&&(S=cC(n,r,-1,S)),_&&S&&_.from==S.from&&_.to==S.to)return w(C(t.from,t.to,_));{let T=_?C(t.from,null,_):k(v,!1),O=S?C(null,t.to,S):k(x,!0),E=[];return(_||v).to<(S||x).from-(_&&S?1:0)||v.widgetLineBreaks>1&&T.bottom+n.defaultLineHeight/2<O.top?E.push(A(m,T.bottom,y,O.top)):T.bottom<O.top&&n.elementAtHeight((T.bottom+O.top)/2).type==un.Text&&(T.bottom=O.top=(T.bottom+O.top)/2),w(T).concat(E).concat(w(O))}function A(T,O,E,R){return new Kc(e,T-f.left,O-f.top,E-T,R-O)}function w({top:T,bottom:O,horizontal:E}){let R=[];for(let j=0;j<E.length;j+=2)R.push(A(E[j],T,E[j+1],O));return R}function C(T,O,E){let R=1e9,j=-1e9,V=[];function P(J,ce,K,U,ee){let oe=n.coordsAtPos(J,J==E.to?-2:2),Y=n.coordsAtPos(K,K==E.from?2:-2);!oe||!Y||(R=Math.min(oe.top,Y.top,R),j=Math.max(oe.bottom,Y.bottom,j),ee==gt.LTR?V.push(o&&ce?m:oe.left,o&&U?y:Y.right):V.push(!o&&U?m:Y.left,!o&&ce?y:oe.right))}let q=T??E.from,X=O??E.to;for(let J of n.visibleRanges)if(J.to>q&&J.from<X)for(let ce=Math.max(J.from,q),K=Math.min(J.to,X);;){let U=n.state.doc.lineAt(ce);for(let ee of n.bidiSpans(U)){let oe=ee.from+U.from,Y=ee.to+U.from;if(oe>=K)break;Y>ce&&P(Math.max(oe,ce),T==null&&oe<=q,Math.min(Y,K),O==null&&Y>=X,ee.dir)}if(ce=U.to+1,ce>=K)break}return V.length==0&&P(q,T==null,X,O==null,n.textDirection),{top:R,bottom:j,horizontal:V}}function k(T,O){let E=c.top+(O?T.top:T.bottom);return{top:E,bottom:E,horizontal:[]}}}function kB(n,e){return n.constructor==e.constructor&&n.eq(e)}class OB{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Xh)!=e.state.facet(Xh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Xh);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!kB(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,_e.safari&&_e.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xh=Ce.define();function tk(n){return[Mt.define(e=>new OB(e,n)),Xh.of(n)]}const wc=Ce.define({combine(n){return ur(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function MB(n={}){return[wc.of(n),DB,RB,NB,AE.of(!0)]}function nk(n){return n.startState.facet(wc)!=n.state.facet(wc)}const DB=tk({above:!0,markers(n){let{state:e}=n,t=e.facet(wc),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let l=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=r.empty?r:me.cursor(r.head,r.head>r.anchor?-1:1);for(let f of Kc.forRange(n,l,c))i.push(f)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=nk(n);return t&&uC(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){uC(e.state,n)},class:"cm-cursorLayer"});function uC(n,e){e.style.animationDuration=n.facet(wc).cursorBlinkRate+"ms"}const RB=tk({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Kc.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||nk(n)},class:"cm-selectionLayer"}),NB=bo.highest(xe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),ik=Pe.define({map(n,e){return n==null?null:e.mapPos(n)}}),Yl=fn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(ik)?i.value:t,n)}}),zB=Mt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Yl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Yl)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Yl),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Yl)!=n&&this.view.dispatch({effects:ik.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function $B(){return[Yl,zB]}function fC(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),l=t,c;!o.next().done;l+=o.value.length)if(!o.lineBreak)for(;c=e.exec(o.value);)r(l+c.index,c)}function LB(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class jB{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(c,f,d,p)=>r(p,d,d+c[0].length,c,f);else if(typeof i=="function")this.addMatch=(c,f,d,p)=>{let m=i(c,f,d);m&&p(d,d+c[0].length,m)};else if(i)this.addMatch=(c,f,d,p)=>p(d,d+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=l}createDeco(e){let t=new Ir,i=t.add.bind(t);for(let{from:r,to:o}of LB(e,this.maxLength))fC(e.state.doc,this.regexp,r,o,(l,c)=>this.addMatch(c,e,l,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,l,c,f)=>{f>=e.view.viewport.from&&c<=e.view.viewport.to&&(i=Math.min(c,i),r=Math.max(f,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let l=Math.max(o.from,i),c=Math.min(o.to,r);if(c>=l){let f=e.state.doc.lineAt(l),d=f.to<c?e.state.doc.lineAt(c):f,p=Math.max(o.from,f.from),m=Math.min(o.to,d.to);if(this.boundary){for(;l>f.from;l--)if(this.boundary.test(f.text[l-1-f.from])){p=l;break}for(;c<d.to;c++)if(this.boundary.test(d.text[c-d.from])){m=c;break}}let y=[],v,x=(_,S,A)=>y.push(A.range(_,S));if(f==d)for(this.regexp.lastIndex=p-f.from;(v=this.regexp.exec(f.text))&&v.index<m-f.from;)this.addMatch(v,e,v.index+f.from,x);else fC(e.state.doc,this.regexp,p,m,(_,S)=>this.addMatch(S,e,_,x));t=t.update({filterFrom:p,filterTo:m,filter:(_,S)=>_<p||S>m,add:y})}}return t}}const Wy=/x/.unicode!=null?"gu":"g",BB=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Wy),PB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let O0=null;function qB(){var n;if(O0==null&&typeof document<"u"&&document.body){let e=document.body.style;O0=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return O0||!1}const Qh=Ce.define({combine(n){let e=ur(n,{render:null,specialChars:BB,addSpecialChars:null});return(e.replaceTabs=!qB())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Wy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Wy)),e}});function HB(n={}){return[Qh.of(n),IB()]}let hC=null;function IB(){return hC||(hC=Mt.fromClass(class{constructor(n){this.view=n,this.decorations=Oe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Qh)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new jB({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=Pn(e[0],0);if(o==9){let l=r.lineAt(i),c=t.state.tabSize,f=qa(l.text,c,i-l.from);return Oe.replace({widget:new WB((c-f%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Oe.replace({widget:new FB(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Qh);n.startState.facet(Qh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const UB="";function VB(n){return n>=32?UB:n==10?"":String.fromCharCode(9216+n)}class FB extends fr{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=VB(this.code),i=e.state.phrase("Control character")+" "+(PB[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class WB extends fr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function KB(){return GB}const YB=Oe.line({class:"cm-activeLine"}),GB=Mt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(YB.range(r.from)),e=r.from)}return Oe.set(t)}},{decorations:n=>n.decorations});class XB extends fr{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?ec(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),r=bc(t[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return r.bottom-r.top>o*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+o}:r}ignoreEvent(){return!1}}function QB(n){let e=Mt.fromClass(class{constructor(t){this.view=t,this.placeholder=n?Oe.set([Oe.widget({widget:new XB(n),side:1}).range(0)]):Oe.none}get decorations(){return this.view.state.doc.length?Oe.none:this.placeholder}},{decorations:t=>t.decorations});return typeof n=="string"?[e,xe.contentAttributes.of({"aria-placeholder":n})]:e}const Ky=2e3;function JB(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>Ky||t.off>Ky||e.col<0||t.col<0){let l=Math.min(e.off,t.off),c=Math.max(e.off,t.off);for(let f=i;f<=r;f++){let d=n.doc.line(f);d.length<=c&&o.push(me.range(d.from+l,d.to+c))}}else{let l=Math.min(e.col,t.col),c=Math.max(e.col,t.col);for(let f=i;f<=r;f++){let d=n.doc.line(f),p=Ty(d.text,l,n.tabSize,!0);if(p<0)o.push(me.cursor(d.to));else{let m=Ty(d.text,c,n.tabSize);o.push(me.range(d.from+p,d.from+m))}}}return o}function ZB(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function dC(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>Ky?-1:r==i.length?ZB(n,e.clientX):qa(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function e6(n,e){let t=dC(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),l=r.state.doc.lineAt(o);t={line:l.number,col:t.col,off:Math.min(t.off,l.length)},i=i.map(r.changes)}},get(r,o,l){let c=dC(n,r);if(!c)return i;let f=JB(n.state,t,c);return f.length?l?me.create(f.concat(i.ranges)):me.create(f):i}}:null}function t6(n){let e=(t=>t.altKey&&t.button==0);return xe.mouseSelectionStyle.of((t,i)=>e(i)?e6(t,i):null)}const n6={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},i6={style:"cursor: crosshair"};function r6(n={}){let[e,t]=n6[n.key||"Alt"],i=Mt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,xe.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?i6:null})]}const Mh="-10000px";class rk{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(l=>l);let o=null;this.tooltipViews=this.tooltips.map(l=>o=i(l,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(f=>f);if(r===this.input){for(let f of this.tooltipViews)f.update&&f.update(e);return!1}let l=[],c=t?[]:null;for(let f=0;f<o.length;f++){let d=o[f],p=-1;if(d){for(let m=0;m<this.tooltips.length;m++){let y=this.tooltips[m];y&&y.create==d.create&&(p=m)}if(p<0)l[f]=this.createTooltipView(d,f?l[f-1]:null),c&&(c[f]=!!d.above);else{let m=l[f]=this.tooltipViews[p];c&&(c[f]=t[p]),m.update&&m.update(e)}}}for(let f of this.tooltipViews)l.indexOf(f)<0&&(this.removeTooltipView(f),(i=f.destroy)===null||i===void 0||i.call(f));return t&&(c.forEach((f,d)=>t[d]=f),t.length=c.length),this.input=r,this.tooltips=o,this.tooltipViews=l,!0}}function s6(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const M0=Ce.define({combine:n=>{var e,t,i;return{position:_e.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||s6}}}),pC=new WeakMap,$v=Mt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(M0);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new rk(n,Lv,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(M0);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Mh,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(_e.safari){let l=o.getBoundingClientRect();t=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}else t=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=Dv(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,l)=>{let c=this.manager.tooltipViews[l];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(M0).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,l=[];for(let c=0;c<this.manager.tooltips.length;c++){let f=this.manager.tooltips[c],d=this.manager.tooltipViews[c],{dom:p}=d,m=n.pos[c],y=n.size[c];if(!m||f.clip!==!1&&(m.bottom<=Math.max(t.top,i.top)||m.top>=Math.min(t.bottom,i.bottom)||m.right<Math.max(t.left,i.left)-.1||m.left>Math.min(t.right,i.right)+.1)){p.style.top=Mh;continue}let v=f.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,x=v?7:0,_=y.right-y.left,S=(e=pC.get(d))!==null&&e!==void 0?e:y.bottom-y.top,A=d.offset||a6,w=this.view.textDirection==gt.LTR,C=y.width>i.right-i.left?w?i.left:i.right-y.width:w?Math.max(i.left,Math.min(m.left-(v?14:0)+A.x,i.right-_)):Math.min(Math.max(i.left,m.left-_+(v?14:0)-A.x),i.right-_),k=this.above[c];!f.strictSide&&(k?m.top-S-x-A.y<i.top:m.bottom+S+x+A.y>i.bottom)&&k==i.bottom-m.bottom>m.top-i.top&&(k=this.above[c]=!k);let T=(k?m.top-i.top:i.bottom-m.bottom)-x;if(T<S&&d.resize!==!1){if(T<this.view.defaultLineHeight){p.style.top=Mh;continue}pC.set(d,S),p.style.height=(S=T)/o+"px"}else p.style.height&&(p.style.height="");let O=k?m.top-S-x-A.y:m.bottom+x+A.y,E=C+_;if(d.overlap!==!0)for(let R of l)R.left<E&&R.right>C&&R.top<O+S&&R.bottom>O&&(O=k?R.top-S-2-x:R.bottom+x+2);if(this.position=="absolute"?(p.style.top=(O-n.parent.top)/o+"px",mC(p,(C-n.parent.left)/r)):(p.style.top=O/o+"px",mC(p,C/r)),v){let R=m.left+(w?A.x:-A.x)-(C+14-7);v.style.left=R/r+"px"}d.overlap!==!0&&l.push({left:C,top:O,right:E,bottom:O+S}),p.classList.toggle("cm-tooltip-above",k),p.classList.toggle("cm-tooltip-below",!k),d.positioned&&d.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Mh}},{eventObservers:{scroll(){this.maybeMeasure()}}});function mC(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const o6=xe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),a6={x:0,y:0},Lv=Ce.define({enables:[$v,o6]}),Ed=Ce.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Sp{static create(e){return new Sp(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rk(e,Ed,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const l6=Lv.compute([Ed],n=>{let e=n.facet(Ed);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Sp.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class c6{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let r,o=1;if(i.isWidget())r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let c=e.coordsAtPos(r);if(!c||t.y<c.top||t.y>c.bottom||t.x<c.left-e.defaultCharacterWidth||t.x>c.right+e.defaultCharacterWidth)return;let f=e.bidiSpans(e.state.doc.lineAt(r)).find(p=>p.from<=r&&p.to>=r),d=f&&f.dir==gt.RTL?-1:1;o=t.x<c.left?-d:d}let l=this.source(e,r,o);if(l?.then){let c=this.pending={pos:r};l.then(f=>{this.pending==c&&(this.pending=null,f&&!(Array.isArray(f)&&!f.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])}))},f=>In(e.state,f,"hover tooltip"))}else l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])})}get tooltip(){let e=this.view.plugin($v),t=e?e.manager.tooltips.findIndex(i=>i.create==Sp.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!u6(o.dom,e)||this.pending){let{pos:l}=r[0]||this.pending,c=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:l;(l==c?this.view.posAtCoords(this.lastMove)!=l:!f6(this.view,l,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Dh=4;function u6(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),l;if(l=n.querySelector(".cm-tooltip-arrow")){let c=l.getBoundingClientRect();r=Math.min(c.top,r),o=Math.max(c.bottom,o)}return e.clientX>=t-Dh&&e.clientX<=i+Dh&&e.clientY>=r-Dh&&e.clientY<=o+Dh}function f6(n,e,t,i,r,o){let l=n.scrollDOM.getBoundingClientRect(),c=n.documentTop+n.documentPadding.top+n.contentHeight;if(l.left>i||l.right<i||l.top>r||Math.min(l.bottom,c)<r)return!1;let f=n.posAtCoords({x:i,y:r},!1);return f>=e&&f<=t}function h6(n,e={}){let t=Pe.define(),i=fn.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(l=>!e.hideOn(o,l))),o.docChanged)){let l=[];for(let c of r){let f=o.changes.mapPos(c.pos,-1,_n.TrackDel);if(f!=null){let d=Object.assign(Object.create(null),c);d.pos=f,d.end!=null&&(d.end=o.changes.mapPos(d.end)),l.push(d)}}r=l}for(let l of o.effects)l.is(t)&&(r=l.value),l.is(d6)&&(r=[]);return r},provide:r=>Ed.from(r)});return{active:i,extension:[i,Mt.define(r=>new c6(r,n,i,t,e.hoverTime||300)),l6]}}function sk(n,e){let t=n.plugin($v);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const d6=Pe.define(),gC=Ce.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function _c(n,e){let t=n.plugin(ok),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ok=Mt.fromClass(class{constructor(n){this.input=n.state.facet(Cc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(gC);this.top=new Rh(n,!0,e.topContainer),this.bottom=new Rh(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(gC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Rh(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Rh(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Cc);if(t!=this.input){let i=t.filter(f=>f),r=[],o=[],l=[],c=[];for(let f of i){let d=this.specs.indexOf(f),p;d<0?(p=f(n.view),c.push(p)):(p=this.panels[d],p.update&&p.update(n)),r.push(p),(p.top?o:l).push(p)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(l);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>xe.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Rh{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=yC(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=yC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yC(n){let e=n.nextSibling;return n.remove(),e}const Cc=Ce.define({enables:ok});class Vr extends ks{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Vr.prototype.elementClass="";Vr.prototype.toDOM=void 0;Vr.prototype.mapMode=_n.TrackBefore;Vr.prototype.startSide=Vr.prototype.endSide=-1;Vr.prototype.point=!0;const Jh=Ce.define(),p6=Ce.define(),m6={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ke.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ic=Ce.define();function g6(n){return[ak(),ic.of({...m6,...n})]}const vC=Ce.define({combine:n=>n.some(e=>e)});function ak(n){return[y6]}const y6=Mt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ic).map(e=>new SC(n,e)),this.fixed=!n.state.facet(vC);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(vC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ke.iter(this.view.state.facet(Jh),this.view.viewport.from),i=[],r=this.gutters.map(o=>new v6(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let l=!0;for(let c of o.type)if(c.type==un.Text&&l){Yy(t,i,c.from);for(let f of r)f.line(this.view,c,i);l=!1}else if(c.widget)for(let f of r)f.widget(this.view,c)}else if(o.type==un.Text){Yy(t,i,o.from);for(let l of r)l.line(this.view,o,i)}else if(o.widget)for(let l of r)l.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(ic),t=n.state.facet(ic),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ke.eq(n.startState.facet(Jh),n.state.facet(Jh),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let l=e.indexOf(o);l<0?r.push(new SC(this.view,o)):(this.gutters[l].update(n),r.push(this.gutters[l]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>xe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==gt.LTR?{left:i,right:r}:{right:i,left:r}})});function bC(n){return Array.isArray(n)?n:[n]}function Yy(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class v6{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ke.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,l=t.height/e.scaleY;if(this.i==r.elements.length){let c=new lk(e,l,o,i);r.elements.push(c),r.dom.appendChild(c.dom)}else r.elements[this.i].update(e,l,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];Yy(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let l=this.gutter;r.length==0&&!l.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(p6)){let l=o(e,t.widget,t);l&&(r||(r=[])).push(l)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class SC{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,l;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let f=o.getBoundingClientRect();l=(f.top+f.bottom)/2}else l=r.clientY;let c=e.lineBlockAtHeight(l-e.documentTop);t.domEventHandlers[i](e,c,r)&&r.preventDefault()});this.markers=bC(t.markers(e)),t.initialSpacer&&(this.spacer=new lk(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=bC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Ke.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class lk{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),b6(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,l=0;;){let c=l,f=o<t.length?t[o++]:null,d=!1;if(f){let p=f.elementClass;p&&(i+=" "+p);for(let m=l;m<this.markers.length;m++)if(this.markers[m].compare(f)){c=m,d=!0;break}}else c=this.markers.length;for(;l<c;){let p=this.markers[l++];if(p.toDOM){p.destroy(r);let m=r.nextSibling;r.remove(),r=m}}if(!f)break;f.toDOM&&(d?r=r.nextSibling:this.dom.insertBefore(f.toDOM(e),r)),d&&l++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function b6(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const S6=Ce.define(),x6=Ce.define(),ma=Ce.define({combine(n){return ur(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],l=t[r];i[r]=o?(c,f,d)=>o(c,f,d)||l(c,f,d):l}return i}})}});class D0 extends Vr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function R0(n,e){return n.state.facet(ma).formatNumber(e,n.state)}const w6=ic.compute([ma],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(S6)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new D0(R0(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(x6)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(ma)!=e.state.facet(ma),initialSpacer(e){return new D0(R0(e,xC(e.state.doc.lines)))},updateSpacer(e,t){let i=R0(t.view,xC(t.view.state.doc.lines));return i==e.number?e:new D0(i)},domEventHandlers:n.facet(ma).domEventHandlers,side:"before"}));function _6(n={}){return[ma.of(n),ak(),w6]}function xC(n){let e=9;for(;e<n;)e=e*10+9;return e}const C6=new class extends Vr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},A6=Jh.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(C6.range(r)))}return Ke.of(e)});function T6(){return A6}const ck=1024;let E6=0;class N0{constructor(e,t){this.from=e,this.to=t}}class Ie{constructor(e={}){this.id=E6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Vn.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Ie.closedBy=new Ie({deserialize:n=>n.split(" ")});Ie.openedBy=new Ie({deserialize:n=>n.split(" ")});Ie.group=new Ie({deserialize:n=>n.split(" ")});Ie.isolate=new Ie({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ie.contextHash=new Ie({perNode:!0});Ie.lookAhead=new Ie({perNode:!0});Ie.mounted=new Ie({perNode:!0});class kd{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Ie.mounted.id]}}const k6=Object.create(null);class Vn{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):k6,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Vn(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ie.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Ie.group),o=-1;o<(r?r.length:0);o++){let l=t[o<0?i.name:r[o]];if(l)return l}}}}Vn.none=new Vn("",Object.create(null),0,8);class jv{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let l=o(i);if(l){r||(r=Object.assign({},i.props));let c=l[1],f=l[0];f.combine&&f.id in r&&(c=f.combine(r[f.id],c)),r[f.id]=c}}t.push(r?new Vn(i.name,r,i.id,i.flags):i)}return new jv(t)}}const Nh=new WeakMap,wC=new WeakMap;var Qt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Qt||(Qt={}));class jt{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[l,c]of o)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=kd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xy(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Nh.get(this)||this.topNode,o=new Xy(r);return o.moveTo(e,t),Nh.set(this,o._tree),o}get topNode(){return new Ti(this,0,0,null)}resolve(e,t=0){let i=Ac(Nh.get(this)||this.topNode,e,t,!1);return Nh.set(this,i),i}resolveInner(e,t=0){let i=Ac(wC.get(this)||this.topNode,e,t,!0);return wC.set(this,i),i}resolveStack(e,t=0){return D6(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,l=e.mode||0,c=(l&Qt.IncludeAnonymous)>0;for(let f=this.cursor(l|Qt.IncludeAnonymous);;){let d=!1;if(f.from<=o&&f.to>=r&&(!c&&f.type.isAnonymous||t(f)!==!1)){if(f.firstChild())continue;d=!0}for(;d&&i&&(c||!f.type.isAnonymous)&&i(f),!f.nextSibling();){if(!f.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:qv(Vn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new jt(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new jt(Vn.none,t,i,r)))}static build(e){return R6(e)}}jt.empty=new jt(Vn.none,[],[],0);class Bv{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Bv(this.buffer,this.index)}}class Rs{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Vn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return o+"("+l.join(",")+")"}findChild(e,t,i,r,o){let{buffer:l}=this,c=-1;for(let f=e;f!=t&&!(uk(o,r,l[f+1],l[f+2])&&(c=f,i>0));f=l[f+3]);return c}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),l=0;for(let c=e,f=0;c<t;){o[f++]=r[c++],o[f++]=r[c++]-i;let d=o[f++]=r[c++]-i;o[f++]=r[c++]-e,l=Math.max(l,d)}return new Rs(o,l,this.set)}}function uk(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Ac(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let l=!i&&n instanceof Ti&&n.index<0?null:n.parent;if(!l)return n;n=l}let o=i?0:Qt.IgnoreOverlays;if(i)for(let l=n,c=l.parent;c;l=c,c=l.parent)l instanceof Ti&&l.index<0&&((r=c.enter(e,t,o))===null||r===void 0?void 0:r.from)!=l.from&&(n=c);for(;;){let l=n.enter(e,t,o);if(!l)return n;n=l}}class fk{cursor(e=0){return new Xy(this,e)}getChild(e,t=null,i=null){let r=_C(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return _C(this,e,t,i)}resolve(e,t=0){return Ac(this,e,t,!1)}resolveInner(e,t=0){return Ac(this,e,t,!0)}matchContext(e){return Gy(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class Ti extends fk{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let l=this;;){for(let{children:c,positions:f}=l._tree,d=t>0?c.length:-1;e!=d;e+=t){let p=c[e],m=f[e]+l.from;if(uk(r,i,m,m+p.length)){if(p instanceof Rs){if(o&Qt.ExcludeBuffers)continue;let y=p.findChild(0,p.buffer.length,t,i-m,r);if(y>-1)return new Cs(new O6(l,p,e,m),null,y)}else if(o&Qt.IncludeAnonymous||!p.type.isAnonymous||Pv(p)){let y;if(!(o&Qt.IgnoreMounts)&&(y=kd.get(p))&&!y.overlay)return new Ti(y.tree,m,e,l);let v=new Ti(p,m,e,l);return o&Qt.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?p.children.length-1:0,t,i,r)}}}if(o&Qt.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,i=0){let r;if(!(i&Qt.IgnoreOverlays)&&(r=kd.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:l,to:c}of r.overlay)if((t>0?l<=o:l<o)&&(t<0?c>=o:c>o))return new Ti(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function _C(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let l=!1;!l;)if(l=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function Gy(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class O6{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Cs extends fk{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Cs(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,i=0){if(i&Qt.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Cs(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Cs(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Cs(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let l=i.buffer[this.index+1];e.push(i.slice(r,o,l)),t.push(0)}return new jt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function hk(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let l=n[o];(l.from>t.from||l.to<t.to)&&(t=l,e=o)}let i=t instanceof Ti&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new M6(r,t)}class M6{constructor(e,t){this.heads=e,this.node=t}get next(){return hk(this.heads)}}function D6(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof Ti?i:i.context.parent;o;o=o.parent)if(o.index<0){let l=o.parent;(r||(r=[i])).push(l.resolve(e,t)),o=l}else{let l=kd.get(o.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let c=new Ti(l.tree,l.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(Ac(c,e,t,!1))}}return r?hk(r):i}class Xy{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ti)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Ti?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Qt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Qt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Qt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,l=e<0?-1:i._tree.children.length;o!=l;o+=e){let c=i._tree.children[o];if(this.mode&Qt.IncludeAnonymous||c instanceof Rs||!c.type.isAnonymous||Pv(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let l=e;l;l=l._parent)if(l.index==r){if(r==this.index)return l;t=l,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Cs(this.buffer,t,this.stack[r]);return this.bufferNode=new Cs(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Gy(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return Gy(this._tree,e,r);let l=i[t.buffer[this.stack[o]]];if(!l.isAnonymous){if(e[r]&&e[r]!=l.name)return!1;r--}}return!0}}function Pv(n){return n.children.some(e=>e instanceof Rs||!e.type.isAnonymous||Pv(e))}function R6(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=ck,reused:o=[],minRepeatType:l=i.types.length}=n,c=Array.isArray(t)?new Bv(t,t.length):t,f=i.types,d=0,p=0;function m(T,O,E,R,j,V){let{id:P,start:q,end:X,size:J}=c,ce=p,K=d;if(J<0)if(c.next(),J==-1){let N=o[P];E.push(N),R.push(q-T);return}else if(J==-3){d=P;return}else if(J==-4){p=P;return}else throw new RangeError(`Unrecognized record size: ${J}`);let U=f[P],ee,oe,Y=q-T;if(X-q<=r&&(oe=S(c.pos-O,j))){let N=new Uint16Array(oe.size-oe.skip),z=c.pos-oe.size,B=N.length;for(;c.pos>z;)B=A(oe.start,N,B);ee=new Rs(N,X-oe.start,i),Y=oe.start-T}else{let N=c.pos-J;c.next();let z=[],B=[],D=P>=l?P:-1,L=0,I=X;for(;c.pos>N;)D>=0&&c.id==D&&c.size>=0?(c.end<=I-r&&(x(z,B,q,L,c.end,I,D,ce,K),L=z.length,I=c.end),c.next()):V>2500?y(q,N,z,B):m(q,N,z,B,D,V+1);if(D>=0&&L>0&&L<z.length&&x(z,B,q,L,q,I,D,ce,K),z.reverse(),B.reverse(),D>-1&&L>0){let re=v(U,K);ee=qv(U,z,B,0,z.length,0,X-q,re,re)}else ee=_(U,z,B,X-q,ce-X,K)}E.push(ee),R.push(Y)}function y(T,O,E,R){let j=[],V=0,P=-1;for(;c.pos>O;){let{id:q,start:X,end:J,size:ce}=c;if(ce>4)c.next();else{if(P>-1&&X<P)break;P<0&&(P=J-r),j.push(q,X,J),V++,c.next()}}if(V){let q=new Uint16Array(V*4),X=j[j.length-2];for(let J=j.length-3,ce=0;J>=0;J-=3)q[ce++]=j[J],q[ce++]=j[J+1]-X,q[ce++]=j[J+2]-X,q[ce++]=ce;E.push(new Rs(q,j[2]-X,i)),R.push(X-T)}}function v(T,O){return(E,R,j)=>{let V=0,P=E.length-1,q,X;if(P>=0&&(q=E[P])instanceof jt){if(!P&&q.type==T&&q.length==j)return q;(X=q.prop(Ie.lookAhead))&&(V=R[P]+q.length+X)}return _(T,E,R,j,V,O)}}function x(T,O,E,R,j,V,P,q,X){let J=[],ce=[];for(;T.length>R;)J.push(T.pop()),ce.push(O.pop()+E-j);T.push(_(i.types[P],J,ce,V-j,q-V,X)),O.push(j-E)}function _(T,O,E,R,j,V,P){if(V){let q=[Ie.contextHash,V];P=P?[q].concat(P):[q]}if(j>25){let q=[Ie.lookAhead,j];P=P?[q].concat(P):[q]}return new jt(T,O,E,R,P)}function S(T,O){let E=c.fork(),R=0,j=0,V=0,P=E.end-r,q={size:0,start:0,skip:0};e:for(let X=E.pos-T;E.pos>X;){let J=E.size;if(E.id==O&&J>=0){q.size=R,q.start=j,q.skip=V,V+=4,R+=4,E.next();continue}let ce=E.pos-J;if(J<0||ce<X||E.start<P)break;let K=E.id>=l?4:0,U=E.start;for(E.next();E.pos>ce;){if(E.size<0)if(E.size==-3||E.size==-4)K+=4;else break e;else E.id>=l&&(K+=4);E.next()}j=U,R+=J,V+=K}return(O<0||R==T)&&(q.size=R,q.start=j,q.skip=V),q.size>4?q:void 0}function A(T,O,E){let{id:R,start:j,end:V,size:P}=c;if(c.next(),P>=0&&R<l){let q=E;if(P>4){let X=c.pos-(P-4);for(;c.pos>X;)E=A(T,O,E)}O[--E]=q,O[--E]=V-T,O[--E]=j-T,O[--E]=R}else P==-3?d=R:P==-4&&(p=R);return E}let w=[],C=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,w,C,-1,0);let k=(e=n.length)!==null&&e!==void 0?e:w.length?C[0]+w[0].length:0;return new jt(f[n.topID],w.reverse(),C.reverse(),k)}const CC=new WeakMap;function Zh(n,e){if(!n.isAnonymous||e instanceof Rs||e.type!=n)return 1;let t=CC.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof jt)){t=1;break}t+=Zh(n,i)}CC.set(e,t)}return t}function qv(n,e,t,i,r,o,l,c,f){let d=0;for(let x=i;x<r;x++)d+=Zh(n,e[x]);let p=Math.ceil(d*1.5/8),m=[],y=[];function v(x,_,S,A,w){for(let C=S;C<A;){let k=C,T=_[C],O=Zh(n,x[C]);for(C++;C<A;C++){let E=Zh(n,x[C]);if(O+E>=p)break;O+=E}if(C==k+1){if(O>p){let E=x[k];v(E.children,E.positions,0,E.children.length,_[k]+w);continue}m.push(x[k])}else{let E=_[C-1]+x[C-1].length-T;m.push(qv(n,x,_,k,C,T,E,null,f))}y.push(T+w-o)}}return v(e,t,i,r,0),(c||f)(m,y,l)}class fo{constructor(e,t,i,r,o=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new fo(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,l=e.length?e[0]:null;for(let c=0,f=0,d=0;;c++){let p=c<t.length?t[c]:null,m=p?p.fromA:1e9;if(m-f>=i)for(;l&&l.from<m;){let y=l;if(f>=y.from||m<=y.to||d){let v=Math.max(y.from,f)-d,x=Math.min(y.to,m)-d;y=v>=x?null:new fo(v,x,y.tree,y.offset+d,c>0,!!p)}if(y&&r.push(y),l.to>m)break;l=o<e.length?e[o++]:null}if(!p)break;f=p.toA,d=p.toA-p.toB}return r}}class dk{startParse(e,t,i){return typeof e=="string"&&(e=new N6(e)),i=i?i.length?i.map(r=>new N0(r.from,r.to)):[new N0(0,0)]:[new N0(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class N6{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ie({perNode:!0});let z6=0;class wi{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=z6++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof wi&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new wi(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new Od(e);return i=>i.modified.indexOf(t)>-1?i:Od.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let $6=0;class Od{constructor(e){this.name=e,this.instances=[],this.id=$6++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(c=>c.base==e&&L6(t,c.modified));if(i)return i;let r=[],o=new wi(e.name,r,e,t);for(let c of t)c.instances.push(o);let l=j6(t);for(let c of e.set)if(!c.modified.length)for(let f of l)r.push(Od.get(c,f));return o}}function L6(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function j6(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function pk(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],l=2,c=r;for(let m=0;;){if(c=="..."&&m>0&&m+3==r.length){l=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!y)throw new RangeError("Invalid path: "+r);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),m+=y[0].length,m==r.length)break;let v=r[m++];if(m==r.length&&v=="!"){l=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);c=r.slice(m)}let f=o.length-1,d=o[f];if(!d)throw new RangeError("Invalid path: "+r);let p=new Tc(i,l,f>0?o.slice(0,f):null);e[d]=p.sort(e[d])}}return mk.add(e)}const mk=new Ie({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new Tc(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class Tc{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Tc.empty=new Tc([],2,null);function gk(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let l of o.tag)t[l.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let l=r;for(let c of o)for(let f of c.set){let d=t[f.id];if(d){l=l?l+" "+d:d;break}}return l},scope:i}}function B6(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function P6(n,e,t,i=0,r=n.length){let o=new q6(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class q6{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:l,from:c,to:f}=e;if(c>=i||f<=t)return;l.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(l)));let d=r,p=H6(e)||Tc.empty,m=B6(o,p.tags);if(m&&(d&&(d+=" "),d+=m,p.mode==1&&(r+=(r?" ":"")+m)),this.startSpan(Math.max(t,c),d),p.opaque)return;let y=e.tree&&e.tree.prop(Ie.mounted);if(y&&y.overlay){let v=e.node.enter(y.overlay[0].from+c,1),x=this.highlighters.filter(S=>!S.scope||S.scope(y.tree.type)),_=e.firstChild();for(let S=0,A=c;;S++){let w=S<y.overlay.length?y.overlay[S]:null,C=w?w.from+c:f,k=Math.max(t,A),T=Math.min(i,C);if(k<T&&_)for(;e.from<T&&(this.highlightRange(e,k,T,r,o),this.startSpan(Math.min(T,e.to),d),!(e.to>=C||!e.nextSibling())););if(!w||C>i)break;A=w.to+c,A>t&&(this.highlightRange(v.cursor(),Math.max(t,w.from+c),Math.min(i,A),"",x),this.startSpan(Math.min(i,A),d))}_&&e.parent()}else if(e.firstChild()){y&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function H6(n){let e=n.type.prop(mk);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const be=wi.define,zh=be(),bs=be(),AC=be(bs),TC=be(bs),Ss=be(),$h=be(Ss),z0=be(Ss),tr=be(),no=be(tr),Zi=be(),er=be(),Qy=be(),Hl=be(Qy),Lh=be(),le={comment:zh,lineComment:be(zh),blockComment:be(zh),docComment:be(zh),name:bs,variableName:be(bs),typeName:AC,tagName:be(AC),propertyName:TC,attributeName:be(TC),className:be(bs),labelName:be(bs),namespace:be(bs),macroName:be(bs),literal:Ss,string:$h,docString:be($h),character:be($h),attributeValue:be($h),number:z0,integer:be(z0),float:be(z0),bool:be(Ss),regexp:be(Ss),escape:be(Ss),color:be(Ss),url:be(Ss),keyword:Zi,self:be(Zi),null:be(Zi),atom:be(Zi),unit:be(Zi),modifier:be(Zi),operatorKeyword:be(Zi),controlKeyword:be(Zi),definitionKeyword:be(Zi),moduleKeyword:be(Zi),operator:er,derefOperator:be(er),arithmeticOperator:be(er),logicOperator:be(er),bitwiseOperator:be(er),compareOperator:be(er),updateOperator:be(er),definitionOperator:be(er),typeOperator:be(er),controlOperator:be(er),punctuation:Qy,separator:be(Qy),bracket:Hl,angleBracket:be(Hl),squareBracket:be(Hl),paren:be(Hl),brace:be(Hl),content:tr,heading:no,heading1:be(no),heading2:be(no),heading3:be(no),heading4:be(no),heading5:be(no),heading6:be(no),contentSeparator:be(tr),list:be(tr),quote:be(tr),emphasis:be(tr),strong:be(tr),link:be(tr),monospace:be(tr),strikethrough:be(tr),inserted:be(),deleted:be(),changed:be(),invalid:be(),meta:Lh,documentMeta:be(Lh),annotation:be(Lh),processingInstruction:be(Lh),definition:wi.defineModifier("definition"),constant:wi.defineModifier("constant"),function:wi.defineModifier("function"),standard:wi.defineModifier("standard"),local:wi.defineModifier("local"),special:wi.defineModifier("special")};for(let n in le){let e=le[n];e instanceof wi&&(e.name=n)}gk([{tag:le.link,class:"tok-link"},{tag:le.heading,class:"tok-heading"},{tag:le.emphasis,class:"tok-emphasis"},{tag:le.strong,class:"tok-strong"},{tag:le.keyword,class:"tok-keyword"},{tag:le.atom,class:"tok-atom"},{tag:le.bool,class:"tok-bool"},{tag:le.url,class:"tok-url"},{tag:le.labelName,class:"tok-labelName"},{tag:le.inserted,class:"tok-inserted"},{tag:le.deleted,class:"tok-deleted"},{tag:le.literal,class:"tok-literal"},{tag:le.string,class:"tok-string"},{tag:le.number,class:"tok-number"},{tag:[le.regexp,le.escape,le.special(le.string)],class:"tok-string2"},{tag:le.variableName,class:"tok-variableName"},{tag:le.local(le.variableName),class:"tok-variableName tok-local"},{tag:le.definition(le.variableName),class:"tok-variableName tok-definition"},{tag:le.special(le.variableName),class:"tok-variableName2"},{tag:le.definition(le.propertyName),class:"tok-propertyName tok-definition"},{tag:le.typeName,class:"tok-typeName"},{tag:le.namespace,class:"tok-namespace"},{tag:le.className,class:"tok-className"},{tag:le.macroName,class:"tok-macroName"},{tag:le.propertyName,class:"tok-propertyName"},{tag:le.operator,class:"tok-operator"},{tag:le.comment,class:"tok-comment"},{tag:le.meta,class:"tok-meta"},{tag:le.invalid,class:"tok-invalid"},{tag:le.punctuation,class:"tok-punctuation"}]);var $0;const ga=new Ie;function I6(n){return Ce.define({combine:n?e=>e.concat(n):void 0})}const U6=new Ie;class Bi{constructor(e,t,i=[],r=""){this.data=e,this.name=r,Xe.prototype.hasOwnProperty("tree")||Object.defineProperty(Xe.prototype,"tree",{get(){return gn(this)}}),this.parser=t,this.extension=[Ns.of(this),Xe.languageData.of((o,l,c)=>{let f=EC(o,l,c),d=f.type.prop(ga);if(!d)return[];let p=o.facet(d),m=f.type.prop(U6);if(m){let y=f.resolve(l-f.from,c);for(let v of m)if(v.test(y,o)){let x=o.facet(v.facet);return v.type=="replace"?x:x.concat(p)}}return p})].concat(i)}isActiveAt(e,t,i=-1){return EC(e,t,i).type.prop(ga)==this.data}findRegions(e){let t=e.facet(Ns);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,l)=>{if(o.prop(ga)==this.data){i.push({from:l,to:l+o.length});return}let c=o.prop(Ie.mounted);if(c){if(c.tree.prop(ga)==this.data){if(c.overlay)for(let f of c.overlay)i.push({from:f.from+l,to:f.to+l});else i.push({from:l,to:l+o.length});return}else if(c.overlay){let f=i.length;if(r(c.tree,c.overlay[0].from+l),i.length>f)return}}for(let f=0;f<o.children.length;f++){let d=o.children[f];d instanceof jt&&r(d,o.positions[f]+l)}};return r(gn(e),0),i}get allowsNesting(){return!0}}Bi.setState=Pe.define();function EC(n,e,t){let i=n.facet(Ns),r=gn(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Qt.ExcludeBuffers))o.type.isTop&&(r=o);return r}class Md extends Bi{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=I6(e.languageData);return new Md(t,e.parser.configure({props:[ga.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Md(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function gn(n){let e=n.field(Bi.state,!1);return e?e.tree:jt.empty}class V6{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Il=null;class Dd{constructor(e,t,i=[],r,o,l,c,f){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=l,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Dd(e,t,[],jt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new V6(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=jt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(fo.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(fo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Il;Il=this;try{return e()}finally{Il=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=kC(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((d,p,m,y)=>f.push({fromA:d,toA:p,fromB:m,toB:y})),i=fo.applyChanges(i,f),r=jt.empty,o=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);p<m&&c.push({from:p,to:m})}}}return new Dd(this.parser,t,i,r,o,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=kC(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends dk{createParse(t,i,r){let o=r[0].from,l=r[r.length-1].to;return{parsedPos:o,advance(){let f=Il;if(f){for(let d of r)f.tempSkipped.push(d);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=l,new jt(Vn.none,[],[],l-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Il}}function kC(n,e,t){return fo.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ra{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Ra(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Dd.create(e.facet(Ns).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Ra(i)}}Bi.state=fn.define({create:Ra.init,update(n,e){for(let t of e.effects)if(t.is(Bi.setState))return t.value;return e.startState.facet(Ns)!=e.state.facet(Ns)?Ra.init(e.state):n.apply(e)}});let yk=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(yk=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const L0=typeof navigator<"u"&&(!(($0=navigator.scheduling)===null||$0===void 0)&&$0.isInputPending)?()=>navigator.scheduling.isInputPending():null,F6=Mt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Bi.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Bi.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=yk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(Bi.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!L0?Math.max(25,e.timeRemaining()-5):1e9),c=o.context.treeLen<r&&i.doc.length>r+1e3,f=o.context.work(()=>L0&&L0()||Date.now()>l,r+(c?0:1e5));this.chunkBudget-=Date.now()-t,(f||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Bi.setState.of(new Ra(o.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>In(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ns=Ce.define({combine(n){return n.length?n[0]:null},enables:n=>[Bi.state,F6,xe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class W6{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const K6=Ce.define(),Yc=Ce.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Rd(n){let e=n.facet(Yc);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Ec(n,e){let t="",i=n.tabSize,r=n.facet(Yc)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function Hv(n,e){n instanceof Xe&&(n=new xp(n));for(let i of n.state.facet(K6)){let r=i(n,e);if(r!==void 0)return r}let t=gn(n.state);return t.length>=e?Y6(n,t,e):null}class xp{constructor(e,t={}){this.state=e,this.options=t,this.unit=Rd(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),l=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return l>-1&&(o+=l-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return qa(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let l=o(r);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const vk=new Ie;function Y6(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let l=r;l&&!(l.from<i.node.from||l.to>i.node.to||l.from==i.node.from&&l.type==i.node.type);l=l.parent)o.push(l);for(let l=o.length-1;l>=0;l--)i={node:o[l],next:i}}return bk(i,n,t)}function bk(n,e,t){for(let i=n;i;i=i.next){let r=X6(i.node);if(r)return r(Iv.create(e,t,i))}return 0}function G6(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function X6(n){let e=n.type.prop(vk);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Ie.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return l=>eP(l,!0,1,void 0,o&&!G6(l)?r.from:void 0)}return n.parent==null?Q6:null}function Q6(){return 0}class Iv extends xp{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Iv(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(J6(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return bk(this.context.next,this.base,this.pos)}}function J6(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Z6(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),l=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let c=t.to;;){let f=e.childAfter(c);if(!f||f==i)return null;if(!f.type.isSkipped){if(f.from>=l)return null;let d=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+d}}c=f.to}}function eP(n,e,t,i,r){let o=n.textAfter,l=o.match(/^\s*/)[0].length,c=i&&o.slice(l,l+i.length)==i||r==n.pos+l,f=Z6(n);return f?c?n.column(f.from):n.column(f.to):n.baseIndent+(c?0:n.unit*t)}function OC({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const tP=200;function nP(){return Xe.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+tP)return n;let o=t.sliceString(r.from,i);if(!e.some(d=>d.test(o)))return n;let{state:l}=n,c=-1,f=[];for(let{head:d}of l.selection.ranges){let p=l.doc.lineAt(d);if(p.from==c)continue;c=p.from;let m=Hv(l,p.from);if(m==null)continue;let y=/^\s*/.exec(p.text)[0],v=Ec(l,m);y!=v&&f.push({from:p.from,to:p.from+y.length,insert:v})}return f.length?[n,{changes:f,sequential:!0}]:n})}const iP=Ce.define(),Sk=new Ie;function rP(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function sP(n,e,t){let i=gn(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let l=r;l;l=l.next){let c=l.node;if(c.to<=t||c.from>t)continue;if(o&&c.from<e)break;let f=c.type.prop(Sk);if(f&&(c.to<i.length-50||i.length==n.doc.length||!oP(c))){let d=f(c,n);d&&d.from<=t&&d.from>=e&&d.to>t&&(o=d)}}return o}function oP(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Nd(n,e,t){for(let i of n.facet(iP)){let r=i(n,e,t);if(r)return r}return sP(n,e,t)}function xk(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const wp=Pe.define({map:xk}),Gc=Pe.define({map:xk});function wk(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const vo=fn.define({create(){return Oe.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=MC(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(wp)&&!aP(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Ak),r=i?Oe.replace({widget:new pP(i(e.state,t.value))}):DC;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Gc)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=MC(n,e.selection.main.head)),n},provide:n=>xe.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(DC.range(i,r))}return Oe.set(e,!0)}});function MC(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function zd(n,e,t){var i;let r=null;return(i=n.field(vo,!1))===null||i===void 0||i.between(e,t,(o,l)=>{(!r||r.from>o)&&(r={from:o,to:l})}),r}function aP(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function _k(n,e){return n.field(vo,!1)?e:e.concat(Pe.appendConfig.of(Tk()))}const lP=n=>{for(let e of wk(n)){let t=Nd(n.state,e.from,e.to);if(t)return n.dispatch({effects:_k(n.state,[wp.of(t),Ck(n,t)])}),!0}return!1},cP=n=>{if(!n.state.field(vo,!1))return!1;let e=[];for(let t of wk(n)){let i=zd(n.state,t.from,t.to);i&&e.push(Gc.of(i),Ck(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Ck(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return xe.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const uP=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=Nd(e,r.from,r.to);o&&t.push(wp.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:_k(n.state,t)}),!!t.length},fP=n=>{let e=n.state.field(vo,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(Gc.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},hP=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:lP},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:cP},{key:"Ctrl-Alt-[",run:uP},{key:"Ctrl-Alt-]",run:fP}],dP={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ak=Ce.define({combine(n){return ur(n,dP)}});function Tk(n){return[vo,yP]}function Ek(n,e){let{state:t}=n,i=t.facet(Ak),r=l=>{let c=n.lineBlockAt(n.posAtDOM(l.target)),f=zd(n.state,c.from,c.to);f&&n.dispatch({effects:Gc.of(f)}),l.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const DC=Oe.replace({widget:new class extends fr{toDOM(n){return Ek(n,null)}}});class pP extends fr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Ek(e,this.value)}}const mP={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class j0 extends Vr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function gP(n={}){let e={...mP,...n},t=new j0(e,!0),i=new j0(e,!1),r=Mt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Ns)!=l.state.facet(Ns)||l.startState.field(vo,!1)!=l.state.field(vo,!1)||gn(l.startState)!=gn(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let c=new Ir;for(let f of l.viewportLineBlocks){let d=zd(l.state,f.from,f.to)?i:Nd(l.state,f.from,f.to)?t:null;d&&c.add(f.from,f.from,d)}return c.finish()}}),{domEventHandlers:o}=e;return[r,g6({class:"cm-foldGutter",markers(l){var c;return((c=l.plugin(r))===null||c===void 0?void 0:c.markers)||Ke.empty},initialSpacer(){return new j0(e,!1)},domEventHandlers:{...o,click:(l,c,f)=>{if(o.click&&o.click(l,c,f))return!0;let d=zd(l.state,c.from,c.to);if(d)return l.dispatch({effects:Gc.of(d)}),!0;let p=Nd(l.state,c.from,c.to);return p?(l.dispatch({effects:wp.of(p)}),!0):!1}}}),Tk()]}const yP=xe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Xc{constructor(e,t){this.specs=e;let i;function r(c){let f=Os.newName();return(i||(i=Object.create(null)))["."+f]=c,f}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,l=t.scope;this.scope=l instanceof Bi?c=>c.prop(ga)==l.data:l?c=>c==l:void 0,this.style=gk(e.map(c=>({tag:c.tag,class:c.class||r(Object.assign({},c,{tag:null}))})),{all:o}).style,this.module=i?new Os(i):null,this.themeType=t.themeType}static define(e,t){return new Xc(e,t||{})}}const Jy=Ce.define(),kk=Ce.define({combine(n){return n.length?[n[0]]:null}});function B0(n){let e=n.facet(Jy);return e.length?e:n.facet(kk)}function Ok(n,e){let t=[bP],i;return n instanceof Xc&&(n.module&&t.push(xe.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(kk.of(n)):i?t.push(Jy.computeN([xe.darkTheme],r=>r.facet(xe.darkTheme)==(i=="dark")?[n]:[])):t.push(Jy.of(n)),t}class vP{constructor(e){this.markCache=Object.create(null),this.tree=gn(e.state),this.decorations=this.buildDeco(e,B0(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=gn(e.state),i=B0(e.state),r=i!=B0(e.startState),{viewport:o}=e.view,l=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&l>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Oe.none;let i=new Ir;for(let{from:r,to:o}of e.visibleRanges)P6(this.tree,t,(l,c,f)=>{i.add(l,c,this.markCache[f]||(this.markCache[f]=Oe.mark({class:f})))},r,o);return i.finish()}}const bP=bo.high(Mt.fromClass(vP,{decorations:n=>n.decorations})),SP=Xc.define([{tag:le.meta,color:"#404740"},{tag:le.link,textDecoration:"underline"},{tag:le.heading,textDecoration:"underline",fontWeight:"bold"},{tag:le.emphasis,fontStyle:"italic"},{tag:le.strong,fontWeight:"bold"},{tag:le.strikethrough,textDecoration:"line-through"},{tag:le.keyword,color:"#708"},{tag:[le.atom,le.bool,le.url,le.contentSeparator,le.labelName],color:"#219"},{tag:[le.literal,le.inserted],color:"#164"},{tag:[le.string,le.deleted],color:"#a11"},{tag:[le.regexp,le.escape,le.special(le.string)],color:"#e40"},{tag:le.definition(le.variableName),color:"#00f"},{tag:le.local(le.variableName),color:"#30a"},{tag:[le.typeName,le.namespace],color:"#085"},{tag:le.className,color:"#167"},{tag:[le.special(le.variableName),le.macroName],color:"#256"},{tag:le.definition(le.propertyName),color:"#00c"},{tag:le.comment,color:"#940"},{tag:le.invalid,color:"#f00"}]),xP=xe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Mk=1e4,Dk="()[]{}",Rk=Ce.define({combine(n){return ur(n,{afterCursor:!0,brackets:Dk,maxScanDistance:Mk,renderMatch:CP})}}),wP=Oe.mark({class:"cm-matchingBracket"}),_P=Oe.mark({class:"cm-nonmatchingBracket"});function CP(n){let e=[],t=n.matched?wP:_P;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const AP=fn.define({create(){return Oe.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Rk);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=or(e.state,r.head,-1,i)||r.head>0&&or(e.state,r.head-1,1,i)||i.afterCursor&&(or(e.state,r.head,1,i)||r.head<e.state.doc.length&&or(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Oe.set(t,!0)},provide:n=>xe.decorations.from(n)}),TP=[AP,xP];function EP(n={}){return[Rk.of(n),TP]}const kP=new Ie;function Zy(n,e,t){let i=n.prop(e<0?Ie.openedBy:Ie.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function ev(n){let e=n.type.prop(kP);return e?e(n.node):n}function or(n,e,t,i={}){let r=i.maxScanDistance||Mk,o=i.brackets||Dk,l=gn(n),c=l.resolveInner(e,t);for(let f=c;f;f=f.parent){let d=Zy(f.type,t,o);if(d&&f.from<f.to){let p=ev(f);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return OP(n,e,t,f,p,d,o)}}return MP(n,e,t,l,c.type,r,o)}function OP(n,e,t,i,r,o,l){let c=i.parent,f={from:r.from,to:r.to},d=0,p=c?.cursor();if(p&&(t<0?p.childBefore(i.from):p.childAfter(i.to)))do if(t<0?p.to<=i.from:p.from>=i.to){if(d==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let m=ev(p);return{start:f,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Zy(p.type,t,l))d++;else if(Zy(p.type,-t,l)){if(d==0){let m=ev(p);return{start:f,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:f,matched:!1}}function MP(n,e,t,i,r,o,l){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),f=l.indexOf(c);if(f<0||f%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let y=0;!p.next().done&&y<=o;){let v=p.value;t<0&&(y+=v.length);let x=e+y*t;for(let _=t>0?0:v.length-1,S=t>0?v.length:-1;_!=S;_+=t){let A=l.indexOf(v[_]);if(!(A<0||i.resolveInner(x+_,1).type!=r))if(A%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:x+_,to:x+_+1},matched:A>>1==f>>1};m--}}t>0&&(y+=v.length)}return p.done?{start:d,matched:!1}:null}const DP=Object.create(null),RC=[Vn.none],NC=[],zC=Object.create(null),RP=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])RP[n]=NP(DP,e);function P0(n,e){NC.indexOf(n)>-1||(NC.push(n),console.warn(e))}function NP(n,e){let t=[];for(let c of e.split(" ")){let f=[];for(let d of c.split(".")){let p=n[d]||le[d];p?typeof p=="function"?f.length?f=f.map(p):P0(d,`Modifier ${d} used at start of tag`):f.length?P0(d,`Tag ${d} used as modifier`):f=Array.isArray(p)?p:[p]:P0(d,`Unknown highlighting tag ${d}`)}for(let d of f)t.push(d)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(c=>c.id),o=zC[r];if(o)return o.id;let l=zC[r]=Vn.define({id:RC.length,name:i,props:[pk({[i]:t})]});return RC.push(l),l.id}gt.RTL,gt.LTR;const zP=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Vv(n.state,t.from);return i.line?$P(n):i.block?jP(n):!1};function Uv(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const $P=Uv(qP,0),LP=Uv(Nk,0),jP=Uv((n,e)=>Nk(n,e,PP(e)),0);function Vv(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Ul=50;function BP(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-Ul,i),l=n.sliceDoc(r,r+Ul),c=/\s*$/.exec(o)[0].length,f=/^\s*/.exec(l)[0].length,d=o.length-c;if(o.slice(d-e.length,d)==e&&l.slice(f,f+t.length)==t)return{open:{pos:i-c,margin:c&&1},close:{pos:r+f,margin:f&&1}};let p,m;r-i<=2*Ul?p=m=n.sliceDoc(i,r):(p=n.sliceDoc(i,i+Ul),m=n.sliceDoc(r-Ul,r));let y=/^\s*/.exec(p)[0].length,v=/\s*$/.exec(m)[0].length,x=m.length-v-t.length;return p.slice(y,y+e.length)==e&&m.slice(x,x+t.length)==t?{open:{pos:i+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:r-v-t.length,margin:/\s/.test(m.charAt(x-1))?1:0}}:null}function PP(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Nk(n,e,t=e.selection.ranges){let i=t.map(o=>Vv(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,l)=>BP(e,i[l],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,l)=>r[l]?[]:[{from:o.from,insert:i[l].open+" "},{from:o.to,insert:" "+i[l].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let l=0,c;l<r.length;l++)if(c=r[l]){let f=i[l],{open:d,close:p}=c;o.push({from:d.pos-f.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+f.close.length})}return{changes:o}}return null}function qP(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:l}of t){let c=i.length,f=1e9,d=Vv(e,o).line;if(d){for(let p=o;p<=l;){let m=e.doc.lineAt(p);if(m.from>r&&(o==l||l>m.from)){r=m.from;let y=/^\s*/.exec(m.text)[0].length,v=y==m.length,x=m.text.slice(y,y+d.length)==d?y:-1;y<m.text.length&&y<f&&(f=y),i.push({line:m,comment:x,token:d,indent:y,empty:v,single:!1})}p=m.to+1}if(f<1e9)for(let p=c;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=f);i.length==c+1&&(i[c].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:c,token:f,indent:d,empty:p,single:m}of i)(m||!p)&&o.push({from:c.from+d,insert:f+" "});let l=e.changes(o);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:l,comment:c,token:f}of i)if(c>=0){let d=l.from+c,p=d+f.length;l.text[p-l.from]==" "&&p++,o.push({from:d,to:p})}return{changes:o}}return null}const tv=cr.define(),HP=cr.define(),IP=Ce.define(),zk=Ce.define({combine(n){return ur(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),$k=fn.define({create(){return ar.empty},update(n,e){let t=e.state.facet(zk),i=e.annotation(tv);if(i){let f=Un.fromTransaction(e,i.selection),d=i.side,p=d==0?n.undone:n.done;return f?p=$d(p,p.length,t.minDepth,f):p=Bk(p,e.startState.selection),new ar(d==0?i.rest:p,d==0?p:i.rest)}let r=e.annotation(HP);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Ft.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Un.fromTransaction(e),l=e.annotation(Ft.time),c=e.annotation(Ft.userEvent);return o?n=n.addChanges(o,l,c,t,e):e.selection&&(n=n.addSelection(e.startState.selection,l,c,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new ar(n.done.map(Un.fromJSON),n.undone.map(Un.fromJSON))}});function UP(n={}){return[$k,zk.of(n),xe.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Lk:e.inputType=="historyRedo"?nv:null;return i?(e.preventDefault(),i(t)):!1}})]}function _p(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field($k,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const Lk=_p(0,!1),nv=_p(1,!1),VP=_p(0,!0),FP=_p(1,!0);class Un{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Un(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Un(e.changes&&Ut.fromJSON(e.changes),[],e.mapped&&lr.fromJSON(e.mapped),e.startSelection&&me.fromJSON(e.startSelection),e.selectionsAfter.map(me.fromJSON))}static fromTransaction(e,t){let i=Ci;for(let r of e.startState.facet(IP)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Un(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ci)}static selection(e){return new Un(void 0,Ci,void 0,void 0,e)}}function $d(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function WP(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,l,c)=>{for(let f=0;f<t.length;){let d=t[f++],p=t[f++];c>=d&&l<=p&&(i=!0)}}),i}function KP(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function jk(n,e){return n.length?e.length?n.concat(e):n:e}const Ci=[],YP=200;function Bk(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-YP));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),$d(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Un.selection([e])]}function GP(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function q0(n,e){if(!n.length)return n;let t=n.length,i=Ci;for(;t;){let r=XP(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Un.selection(i)]:Ci}function XP(n,e,t){let i=jk(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(e)):Ci,t);if(!n.changes)return Un.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),l=n.mapped?n.mapped.composeDesc(o):o;return new Un(r,Pe.mapEffects(n.effects,e),l,n.startSelection.map(o),i)}const QP=/^(input\.type|delete)($|\.)/;class ar{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new ar(this.done,this.undone):this}addChanges(e,t,i,r,o){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!i||QP.test(i))&&(!c.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,WP(c.changes,e.changes))||i=="input.type.compose")?l=$d(l,l.length-1,r.minDepth,new Un(e.changes.compose(c.changes),jk(Pe.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,Ci)):l=$d(l,l.length,r.minDepth,e),new ar(l,Ci,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Ci;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&KP(o[o.length-1],e)?this:new ar(Bk(this.done,e),this.undone,t,i)}addMapping(e){return new ar(q0(this.done,e),q0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],l=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:tv.of({side:e,rest:GP(r),selection:l}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let c=r.length==1?Ci:r.slice(0,r.length-1);return o.mapped&&(c=q0(c,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:tv.of({side:e,rest:c,selection:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ar.empty=new ar(Ci,Ci);const JP=[{key:"Mod-z",run:Lk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:nv,preventDefault:!0},{linux:"Ctrl-Shift-z",run:nv,preventDefault:!0},{key:"Mod-u",run:VP,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:FP,preventDefault:!0}];function Ha(n,e){return me.create(n.ranges.map(e),n.mainIndex)}function Fi(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wi({state:n,dispatch:e},t){let i=Ha(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Fi(n,i)),!0)}function Cp(n,e){return me.cursor(e?n.to:n.from)}function Pk(n,e){return Wi(n,t=>t.empty?n.moveByChar(t,e):Cp(t,e))}function vn(n){return n.textDirectionAt(n.state.selection.main.head)==gt.LTR}const qk=n=>Pk(n,!vn(n)),Hk=n=>Pk(n,vn(n));function Ik(n,e){return Wi(n,t=>t.empty?n.moveByGroup(t,e):Cp(t,e))}const ZP=n=>Ik(n,!vn(n)),e8=n=>Ik(n,vn(n));function t8(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Ap(n,e,t){let i=gn(n).resolveInner(e.head),r=t?Ie.closedBy:Ie.openedBy;for(let f=e.head;;){let d=t?i.childAfter(f):i.childBefore(f);if(!d)break;t8(n,d,r)?i=d:f=t?d.to:d.from}let o=i.type.prop(r),l,c;return o&&(l=t?or(n,i.from,1):or(n,i.to,-1))&&l.matched?c=t?l.end.to:l.end.from:c=t?i.to:i.from,me.cursor(c,t?-1:1)}const n8=n=>Wi(n,e=>Ap(n.state,e,!vn(n))),i8=n=>Wi(n,e=>Ap(n.state,e,vn(n)));function Uk(n,e){return Wi(n,t=>{if(!t.empty)return Cp(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Vk=n=>Uk(n,!1),Fk=n=>Uk(n,!0);function Wk(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(xe.scrollMargins)){let l=o(n);l?.top&&(t=Math.max(l?.top,t)),l?.bottom&&(i=Math.max(l?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Kk(n,e){let t=Wk(n),{state:i}=n,r=Ha(i.selection,l=>l.empty?n.moveVertically(l,e,t.height):Cp(l,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let l=n.coordsAtPos(i.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),f=c.top+t.marginTop,d=c.bottom-t.marginBottom;l&&l.top>f&&l.bottom<d&&(o=xe.scrollIntoView(r.main.head,{y:"start",yMargin:l.top-f}))}return n.dispatch(Fi(i,r),{effects:o}),!0}const $C=n=>Kk(n,!1),iv=n=>Kk(n,!0);function zs(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=me.cursor(i.from+o))}return r}const r8=n=>Wi(n,e=>zs(n,e,!0)),s8=n=>Wi(n,e=>zs(n,e,!1)),o8=n=>Wi(n,e=>zs(n,e,!vn(n))),a8=n=>Wi(n,e=>zs(n,e,vn(n))),l8=n=>Wi(n,e=>me.cursor(n.lineBlockAt(e.head).from,1)),c8=n=>Wi(n,e=>me.cursor(n.lineBlockAt(e.head).to,-1));function u8(n,e,t){let i=!1,r=Ha(n.selection,o=>{let l=or(n,o.head,-1)||or(n,o.head,1)||o.head>0&&or(n,o.head-1,1)||o.head<n.doc.length&&or(n,o.head+1,-1);if(!l||!l.end)return o;i=!0;let c=l.start.from==o.head?l.end.to:l.end.from;return me.cursor(c)});return i?(e(Fi(n,r)),!0):!1}const f8=({state:n,dispatch:e})=>u8(n,e);function ki(n,e){let t=Ha(n.state.selection,i=>{let r=e(i);return me.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Fi(n.state,t)),!0)}function Yk(n,e){return ki(n,t=>n.moveByChar(t,e))}const Gk=n=>Yk(n,!vn(n)),Xk=n=>Yk(n,vn(n));function Qk(n,e){return ki(n,t=>n.moveByGroup(t,e))}const h8=n=>Qk(n,!vn(n)),d8=n=>Qk(n,vn(n)),p8=n=>ki(n,e=>Ap(n.state,e,!vn(n))),m8=n=>ki(n,e=>Ap(n.state,e,vn(n)));function Jk(n,e){return ki(n,t=>n.moveVertically(t,e))}const Zk=n=>Jk(n,!1),eO=n=>Jk(n,!0);function tO(n,e){return ki(n,t=>n.moveVertically(t,e,Wk(n).height))}const LC=n=>tO(n,!1),jC=n=>tO(n,!0),g8=n=>ki(n,e=>zs(n,e,!0)),y8=n=>ki(n,e=>zs(n,e,!1)),v8=n=>ki(n,e=>zs(n,e,!vn(n))),b8=n=>ki(n,e=>zs(n,e,vn(n))),S8=n=>ki(n,e=>me.cursor(n.lineBlockAt(e.head).from)),x8=n=>ki(n,e=>me.cursor(n.lineBlockAt(e.head).to)),BC=({state:n,dispatch:e})=>(e(Fi(n,{anchor:0})),!0),PC=({state:n,dispatch:e})=>(e(Fi(n,{anchor:n.doc.length})),!0),qC=({state:n,dispatch:e})=>(e(Fi(n,{anchor:n.selection.main.anchor,head:0})),!0),HC=({state:n,dispatch:e})=>(e(Fi(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),w8=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),_8=({state:n,dispatch:e})=>{let t=Tp(n).map(({from:i,to:r})=>me.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:me.create(t),userEvent:"select"})),!0},C8=({state:n,dispatch:e})=>{let t=Ha(n.selection,i=>{let r=gn(n),o=r.resolveStack(i.from,1);if(i.empty){let l=r.resolveStack(i.from,-1);l.node.from>=o.node.from&&l.node.to<=o.node.to&&(o=l)}for(let l=o;l;l=l.next){let{node:c}=l;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&l.next)return me.range(c.to,c.from)}return i});return t.eq(n.selection)?!1:(e(Fi(n,t)),!0)};function nO(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let l=t.doc.lineAt(o.head);if(e?l.to<n.state.doc.length:l.from>0)for(let c=o;;){let f=n.moveVertically(c,e);if(f.head<l.from||f.head>l.to){r.some(d=>d.head==f.head)||r.push(f);break}else{if(f.head==c.head)break;c=f}}}return r.length==i.ranges.length?!1:(n.dispatch(Fi(t,me.create(r,r.length-1))),!0)}const A8=n=>nO(n,!1),T8=n=>nO(n,!0),E8=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=me.create([t.main]):t.main.empty||(i=me.create([me.cursor(t.main.head)])),i?(e(Fi(n,i)),!0):!1};function Qc(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:l,to:c}=o;if(l==c){let f=e(o);f<l?(t="delete.backward",f=jh(n,f,!1)):f>l&&(t="delete.forward",f=jh(n,f,!0)),l=Math.min(l,f),c=Math.max(c,f)}else l=jh(n,l,!1),c=jh(n,c,!0);return l==c?{range:o}:{changes:{from:l,to:c},range:me.cursor(l,l<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?xe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function jh(n,e,t){if(n instanceof xe)for(let i of n.state.facet(xe.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const iO=(n,e,t)=>Qc(n,i=>{let r=i.from,{state:o}=n,l=o.doc.lineAt(r),c,f;if(t&&!e&&r>l.from&&r<l.from+200&&!/[^ \t]/.test(c=l.text.slice(0,r-l.from))){if(c[c.length-1]=="	")return r-1;let d=qa(c,o.tabSize),p=d%Rd(o)||Rd(o);for(let m=0;m<p&&c[c.length-1-m]==" ";m++)r--;f=r}else f=Vt(l.text,r-l.from,e,e)+l.from,f==r&&l.number!=(e?o.doc.lines:1)?f+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(f-l.from,r-l.from))&&(f=Vt(l.text,f-l.from,!1,!1)+l.from);return f}),rv=n=>iO(n,!1,!0),rO=n=>iO(n,!0,!1),sO=(n,e)=>Qc(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),l=r.charCategorizer(i);for(let c=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let f=Vt(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,f)-o.from,Math.max(i,f)-o.from),p=l(d);if(c!=null&&p!=c)break;(d!=" "||i!=t.head)&&(c=p),i=f}return i}),oO=n=>sO(n,!1),k8=n=>sO(n,!0),O8=n=>Qc(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),M8=n=>Qc(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),D8=n=>Qc(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),R8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ze.of(["",""])},range:me.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},N8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),l=r==o.from?r-1:Vt(o.text,r-o.from,!1)+o.from,c=r==o.to?r+1:Vt(o.text,r-o.from,!0)+o.from;return{changes:{from:l,to:c,insert:n.doc.slice(r,c).append(n.doc.slice(l,r))},range:me.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Tp(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let l=e[e.length-1];l.to=o.to,l.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function aO(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of Tp(n)){if(t?o.to==n.doc.length:o.from==0)continue;let l=n.doc.lineAt(t?o.to+1:o.from-1),c=l.length+1;if(t){i.push({from:o.to,to:l.to},{from:o.from,insert:l.text+n.lineBreak});for(let f of o.ranges)r.push(me.range(Math.min(n.doc.length,f.anchor+c),Math.min(n.doc.length,f.head+c)))}else{i.push({from:l.from,to:o.from},{from:o.to,insert:n.lineBreak+l.text});for(let f of o.ranges)r.push(me.range(f.anchor-c,f.head-c))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:me.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const z8=({state:n,dispatch:e})=>aO(n,e,!1),$8=({state:n,dispatch:e})=>aO(n,e,!0);function lO(n,e,t){if(n.readOnly)return!1;let i=[];for(let o of Tp(n))t?i.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):i.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});let r=n.changes(i);return e(n.update({changes:r,selection:n.selection.map(r,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const L8=({state:n,dispatch:e})=>lO(n,e,!1),j8=({state:n,dispatch:e})=>lO(n,e,!0),B8=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Tp(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Ha(e.selection,r=>{let o;if(n.lineWrapping){let l=n.lineBlockAt(r.head),c=n.coordsAtPos(r.head,r.assoc||1);c&&(o=l.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function P8(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=gn(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(Ie.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const IC=cO(!1),q8=cO(!0);function cO(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:l}=r,c=e.doc.lineAt(o),f=!n&&o==l&&P8(e,o);n&&(o=l=(l<=c.to?c:e.doc.lineAt(l)).to);let d=new xp(e,{simulateBreak:o,simulateDoubleBreak:!!f}),p=Hv(d,o);for(p==null&&(p=qa(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));l<c.to&&/\s/.test(c.text[l-c.from]);)l++;f?{from:o,to:l}=f:o>c.from&&o<c.from+100&&!/\S/.test(c.text.slice(0,o))&&(o=c.from);let m=["",Ec(e,p)];return f&&m.push(Ec(e,d.lineIndent(c.from,-1))),{changes:{from:o,to:l,insert:Ze.of(m)},range:me.cursor(o+1+m[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Fv(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let l=i.from;l<=i.to;){let c=n.doc.lineAt(l);c.number>t&&(i.empty||i.to>c.from)&&(e(c,r,i),t=c.number),l=c.to+1}let o=n.changes(r);return{changes:r,range:me.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const H8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new xp(n,{overrideIndentation:o=>{let l=t[o];return l??-1}}),r=Fv(n,(o,l,c)=>{let f=Hv(i,o.from);if(f==null)return;/\S/.test(o.text)||(f=0);let d=/^\s*/.exec(o.text)[0],p=Ec(n,f);(d!=p||c.from<o.from+d.length)&&(t[o.from]=f,l.push({from:o.from,to:o.from+d.length,insert:p}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},uO=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Fv(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Yc)})}),{userEvent:"input.indent"})),!0),fO=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Fv(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=qa(r,n.tabSize),l=0,c=Ec(n,Math.max(0,o-Rd(n)));for(;l<r.length&&l<c.length&&r.charCodeAt(l)==c.charCodeAt(l);)l++;i.push({from:t.from+l,to:t.from+r.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0),I8=n=>(n.setTabFocusMode(),!0),U8=[{key:"Ctrl-b",run:qk,shift:Gk,preventDefault:!0},{key:"Ctrl-f",run:Hk,shift:Xk},{key:"Ctrl-p",run:Vk,shift:Zk},{key:"Ctrl-n",run:Fk,shift:eO},{key:"Ctrl-a",run:l8,shift:S8},{key:"Ctrl-e",run:c8,shift:x8},{key:"Ctrl-d",run:rO},{key:"Ctrl-h",run:rv},{key:"Ctrl-k",run:O8},{key:"Ctrl-Alt-h",run:oO},{key:"Ctrl-o",run:R8},{key:"Ctrl-t",run:N8},{key:"Ctrl-v",run:iv}],V8=[{key:"ArrowLeft",run:qk,shift:Gk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ZP,shift:h8,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:o8,shift:v8,preventDefault:!0},{key:"ArrowRight",run:Hk,shift:Xk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e8,shift:d8,preventDefault:!0},{mac:"Cmd-ArrowRight",run:a8,shift:b8,preventDefault:!0},{key:"ArrowUp",run:Vk,shift:Zk,preventDefault:!0},{mac:"Cmd-ArrowUp",run:BC,shift:qC},{mac:"Ctrl-ArrowUp",run:$C,shift:LC},{key:"ArrowDown",run:Fk,shift:eO,preventDefault:!0},{mac:"Cmd-ArrowDown",run:PC,shift:HC},{mac:"Ctrl-ArrowDown",run:iv,shift:jC},{key:"PageUp",run:$C,shift:LC},{key:"PageDown",run:iv,shift:jC},{key:"Home",run:s8,shift:y8,preventDefault:!0},{key:"Mod-Home",run:BC,shift:qC},{key:"End",run:r8,shift:g8,preventDefault:!0},{key:"Mod-End",run:PC,shift:HC},{key:"Enter",run:IC,shift:IC},{key:"Mod-a",run:w8},{key:"Backspace",run:rv,shift:rv,preventDefault:!0},{key:"Delete",run:rO,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:oO,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:k8,preventDefault:!0},{mac:"Mod-Backspace",run:M8,preventDefault:!0},{mac:"Mod-Delete",run:D8,preventDefault:!0}].concat(U8.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),F8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:n8,shift:p8},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:i8,shift:m8},{key:"Alt-ArrowUp",run:z8},{key:"Shift-Alt-ArrowUp",run:L8},{key:"Alt-ArrowDown",run:$8},{key:"Shift-Alt-ArrowDown",run:j8},{key:"Mod-Alt-ArrowUp",run:A8},{key:"Mod-Alt-ArrowDown",run:T8},{key:"Escape",run:E8},{key:"Mod-Enter",run:q8},{key:"Alt-l",mac:"Ctrl-l",run:_8},{key:"Mod-i",run:C8,preventDefault:!0},{key:"Mod-[",run:fO},{key:"Mod-]",run:uO},{key:"Mod-Alt-\\",run:H8},{key:"Shift-Mod-k",run:B8},{key:"Shift-Mod-\\",run:f8},{key:"Mod-/",run:zP},{key:"Alt-A",run:LP},{key:"Ctrl-m",mac:"Shift-Alt-m",run:I8}].concat(V8),W8={key:"Tab",run:uO,shift:fO},UC=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Na{constructor(e,t,i=0,r=e.length,o,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?c=>o(UC(c)):UC,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Pn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=xv(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=rr(e);let r=this.normalize(t);if(r.length)for(let o=0,l=i;;o++){let c=r.charCodeAt(o),f=this.match(c,l,this.bufferPos+this.bufferStart);if(o==r.length-1){if(f)return this.value=f,this;break}l==i&&o<t.length&&t.charCodeAt(o)==c&&l++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let l=this.matches[o],c=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Na.prototype[Symbol.iterator]=function(){return this});const hO={from:-1,to:-1,match:/.*/.exec("")},Wv="gm"+(/x/.unicode==null?"":"u");class dO{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=hO,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new pO(e,t,i,r,o);this.re=new RegExp(t,Wv+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let l=e.lineAt(r);this.curLineStart=l.from,this.matchPos=Ld(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=Ld(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const H0=new WeakMap;class _a{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=H0.get(e);if(!r||r.from>=i||r.to<=t){let c=new _a(t,e.sliceString(t,i));return H0.set(e,c),c}if(r.from==t&&r.to==i)return r;let{text:o,from:l}=r;return l>t&&(o=e.sliceString(t,l)+o,l=t),r.to<i&&(o+=e.sliceString(r.to,i)),H0.set(e,new _a(l,o)),new _a(t,o.slice(t-l,i-l))}}class pO{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=hO,this.matchPos=Ld(e,r),this.re=new RegExp(t,Wv+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=_a.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=Ld(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=_a.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(dO.prototype[Symbol.iterator]=pO.prototype[Symbol.iterator]=function(){return this});function K8(n){try{return new RegExp(n,Wv),!0}catch{return!1}}function Ld(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function sv(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=pt("input",{class:"cm-textfield",name:"line",value:e}),i=pt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:rc.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},pt("label",n.state.phrase("Go to line"),": ",t)," ",pt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),pt("button",{name:"close",onclick:()=>{n.dispatch({effects:rc.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:l}=n,c=l.doc.lineAt(l.selection.main.head),[,f,d,p,m]=o,y=p?+p.slice(1):0,v=d?+d:c.number;if(d&&m){let S=v/100;f&&(S=S*(f=="-"?-1:1)+c.number/l.doc.lines),v=Math.round(l.doc.lines*S)}else d&&f&&(v=v*(f=="-"?-1:1)+c.number);let x=l.doc.line(Math.max(1,Math.min(l.doc.lines,v))),_=me.cursor(x.from+Math.max(0,Math.min(y,x.length)));n.dispatch({effects:[rc.of(!1),xe.scrollIntoView(_.from,{y:"center"})],selection:_}),n.focus()}return{dom:i}}const rc=Pe.define(),VC=fn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(rc)&&(n=t.value);return n},provide:n=>Cc.from(n,e=>e?sv:null)}),Y8=n=>{let e=_c(n,sv);if(!e){let t=[rc.of(!0)];n.state.field(VC,!1)==null&&t.push(Pe.appendConfig.of([VC,G8])),n.dispatch({effects:t}),e=_c(n,sv)}return e&&e.dom.querySelector("input").select(),!0},G8=xe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),X8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Q8=Ce.define({combine(n){return ur(n,X8,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function J8(n){return[i9,n9]}const Z8=Oe.mark({class:"cm-selectionMatch"}),e9=Oe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function FC(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=xt.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=xt.Word)}function t9(n,e,t,i){return n(e.sliceDoc(t,t+1))==xt.Word&&n(e.sliceDoc(i-1,i))==xt.Word}const n9=Mt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Q8),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Oe.none;let r=i.main,o,l=null;if(r.empty){if(!e.highlightWordAroundCursor)return Oe.none;let f=t.wordAt(r.head);if(!f)return Oe.none;l=t.charCategorizer(r.head),o=t.sliceDoc(f.from,f.to)}else{let f=r.to-r.from;if(f<e.minSelectionLength||f>200)return Oe.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),l=t.charCategorizer(r.head),!(FC(l,t,r.from,r.to)&&t9(l,t,r.from,r.to)))return Oe.none}else if(o=t.sliceDoc(r.from,r.to),!o)return Oe.none}let c=[];for(let f of n.visibleRanges){let d=new Na(t.doc,o,f.from,f.to);for(;!d.next().done;){let{from:p,to:m}=d.value;if((!l||FC(l,t,p,m))&&(r.empty&&p<=r.from&&m>=r.to?c.push(e9.range(p,m)):(p>=r.to||m<=r.from)&&c.push(Z8.range(p,m)),c.length>e.maxMatches))return Oe.none}}return Oe.set(c)}},{decorations:n=>n.decorations}),i9=xe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),r9=({state:n,dispatch:e})=>{let{selection:t}=n,i=me.create(t.ranges.map(r=>n.wordAt(r.head)||me.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function s9(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let l=!1,c=new Na(n.doc,e,i[i.length-1].to);;)if(c.next(),c.done){if(l)return null;c=new Na(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),l=!0}else{if(l&&i.some(f=>f.from==c.value.from))continue;if(o){let f=n.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}}const o9=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return r9({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=s9(n,i);return r?(e(n.update({selection:n.selection.addRange(me.range(r.from,r.to),!1),effects:xe.scrollIntoView(r.to)})),!0):!1},Ia=Ce.define({combine(n){return ur(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new v9(e),scrollToMatch:e=>xe.scrollIntoView(e)})}});class mO{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||K8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new u9(this):new l9(this)}getCursor(e,t=0,i){let r=e.doc?e:Xe.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?da(this,r,t,i):ha(this,r,t,i)}}class gO{constructor(e){this.spec=e}}function ha(n,e,t,i){return new Na(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?a9(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function a9(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(jd(r,t-o))!=xt.Word||e(Bd(r,t-o))!=xt.Word)&&(e(Bd(r,i-o))!=xt.Word||e(jd(r,i-o))!=xt.Word))}class l9 extends gO{constructor(e){super(e)}nextMatch(e,t,i){let r=ha(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=ha(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),l=ha(this.spec,e,o,r),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=ha(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=ha(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function da(n,e,t,i){return new dO(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?c9(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function jd(n,e){return n.slice(Vt(n,e,!1),e)}function Bd(n,e){return n.slice(e,Vt(n,e))}function c9(n){return(e,t,i)=>!i[0].length||(n(jd(i.input,i.index))!=xt.Word||n(Bd(i.input,i.index))!=xt.Word)&&(n(Bd(i.input,i.index+i[0].length))!=xt.Word||n(jd(i.input,i.index+i[0].length))!=xt.Word)}class u9 extends gO{nextMatch(e,t,i){let r=da(this.spec,e,i,e.doc.length).next();return r.done&&(r=da(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),l=da(this.spec,e,o,i),c=null;for(;!l.next().done;)c=l.value;if(c&&(o==t||c.from>o+10))return c;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=da(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=da(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const kc=Pe.define(),Kv=Pe.define(),Ts=fn.define({create(n){return new I0(ov(n).create(),null)},update(n,e){for(let t of e.effects)t.is(kc)?n=new I0(t.value.create(),n.panel):t.is(Kv)&&(n=new I0(n.query,t.value?Yv:null));return n},provide:n=>Cc.from(n,e=>e.panel)});class I0{constructor(e,t){this.query=e,this.panel=t}}const f9=Oe.mark({class:"cm-searchMatch"}),h9=Oe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),d9=Mt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ts))}update(n){let e=n.state.field(Ts);(e!=n.startState.field(Ts)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Oe.none;let{view:t}=this,i=new Ir;for(let r=0,o=t.visibleRanges,l=o.length;r<l;r++){let{from:c,to:f}=o[r];for(;r<l-1&&f>o[r+1].from-500;)f=o[++r].to;n.highlight(t.state,c,f,(d,p)=>{let m=t.state.selection.ranges.some(y=>y.from==d&&y.to==p);i.add(d,p,m?h9:f9)})}return i.finish()}},{decorations:n=>n.decorations});function Jc(n){return e=>{let t=e.state.field(Ts,!1);return t&&t.query.spec.valid?n(e,t):bO(e)}}const Pd=Jc((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=me.single(i.from,i.to),o=n.state.facet(Ia);return n.dispatch({selection:r,effects:[Gv(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),vO(n),!0}),qd=Jc((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=me.single(r.from,r.to),l=n.state.facet(Ia);return n.dispatch({selection:o,effects:[Gv(n,r),l.scrollToMatch(o.main,n)],userEvent:"select.search"}),vO(n),!0}),p9=Jc((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:me.create(t.map(i=>me.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),m9=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],l=0;for(let c=new Na(n.doc,n.sliceDoc(i,r));!c.next().done;){if(o.length>1e3)return!1;c.value.from==i&&(l=o.length),o.push(me.range(c.value.from,c.value.to))}return e(n.update({selection:me.create(o,l),userEvent:"select.search.matches"})),!0},WC=Jc((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let l=o,c=[],f,d,p=[];l.from==i&&l.to==r&&(d=t.toText(e.getReplacement(l)),c.push({from:l.from,to:l.to,insert:d}),l=e.nextMatch(t,l.from,l.to),p.push(xe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let m=n.state.changes(c);return l&&(f=me.single(l.from,l.to).map(m),p.push(Gv(n,l)),p.push(t.facet(Ia).scrollToMatch(f.main,n))),n.dispatch({changes:m,selection:f,effects:p,userEvent:"input.replace"}),!0}),g9=Jc((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:l}=r;return{from:o,to:l,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:xe.announce.of(i),userEvent:"input.replace.all"}),!0});function Yv(n){return n.state.facet(Ia).createPanel(n)}function ov(n,e){var t,i,r,o,l;let c=n.selection.main,f=c.empty||c.to>c.from+100?"":n.sliceDoc(c.from,c.to);if(e&&!f)return e;let d=n.facet(Ia);return new mO({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:d.wholeWord})}function yO(n){let e=_c(n,Yv);return e&&e.dom.querySelector("[main-field]")}function vO(n){let e=yO(n);e&&e==n.root.activeElement&&e.select()}const bO=n=>{let e=n.state.field(Ts,!1);if(e&&e.panel){let t=yO(n);if(t&&t!=n.root.activeElement){let i=ov(n.state,e.query.spec);i.valid&&n.dispatch({effects:kc.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Kv.of(!0),e?kc.of(ov(n.state,e.query.spec)):Pe.appendConfig.of(S9)]});return!0},SO=n=>{let e=n.state.field(Ts,!1);if(!e||!e.panel)return!1;let t=_c(n,Yv);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Kv.of(!1)}),!0},y9=[{key:"Mod-f",run:bO,scope:"editor search-panel"},{key:"F3",run:Pd,shift:qd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Pd,shift:qd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:SO,scope:"editor search-panel"},{key:"Mod-Shift-l",run:m9},{key:"Mod-Alt-g",run:Y8},{key:"Mod-d",run:o9,preventDefault:!0}];class v9{constructor(e){this.view=e;let t=this.query=e.state.field(Ts).query.spec;this.commit=this.commit.bind(this),this.searchField=pt("input",{value:t.search,placeholder:ti(e,"Find"),"aria-label":ti(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=pt("input",{value:t.replace,placeholder:ti(e,"Replace"),"aria-label":ti(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=pt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=pt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=pt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,l){return pt("button",{class:"cm-button",name:r,onclick:o,type:"button"},l)}this.dom=pt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>Pd(e),[ti(e,"next")]),i("prev",()=>qd(e),[ti(e,"previous")]),i("select",()=>p9(e),[ti(e,"all")]),pt("label",null,[this.caseField,ti(e,"match case")]),pt("label",null,[this.reField,ti(e,"regexp")]),pt("label",null,[this.wordField,ti(e,"by word")]),...e.state.readOnly?[]:[pt("br"),this.replaceField,i("replace",()=>WC(e),[ti(e,"replace")]),i("replaceAll",()=>g9(e),[ti(e,"replace all")])],pt("button",{name:"close",onclick:()=>SO(e),"aria-label":ti(e,"close"),type:"button"},[""])])}commit(){let e=new mO({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:kc.of(e)}))}keydown(e){CB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qd:Pd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),WC(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(kc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ia).top}}function ti(n,e){return n.state.phrase(e)}const Bh=30,Ph=/[\s\.,:;?!]/;function Gv(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Bh),l=Math.min(r,t+Bh),c=n.state.sliceDoc(o,l);if(o!=i.from){for(let f=0;f<Bh;f++)if(!Ph.test(c[f+1])&&Ph.test(c[f])){c=c.slice(f);break}}if(l!=r){for(let f=c.length-1;f>c.length-Bh;f--)if(!Ph.test(c[f-1])&&Ph.test(c[f])){c=c.slice(0,f);break}}return xe.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${i.number}.`)}const b9=xe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),S9=[Ts,bo.low(d9),b9];class xO{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=gn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(wO(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function KC(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function x9(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=KC(e)+KC(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function w9(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:x9(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class YC{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function ho(n){return n.selection.main.from}function wO(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const _O=cr.define();function _9(n,e,t,i){let{main:r}=n.selection,o=t-r.from,l=i-r.from;return{...n.changeByRange(c=>{if(c!=r&&t!=i&&n.sliceDoc(c.from+o,c.from+l)!=n.sliceDoc(t,i))return{range:c};let f=n.toText(e);return{changes:{from:c.from+o,to:i==r.from?c.to:c.from+l,insert:f},range:me.cursor(c.from+o+f.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const GC=new WeakMap;function C9(n){if(!Array.isArray(n))return n;let e=GC.get(n);return e||GC.set(n,e=w9(n)),e}const Hd=Pe.define(),Oc=Pe.define();class A9{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Pn(e,t),r=rr(i);this.chars.push(i);let o=e.slice(t,t+r),l=o.toUpperCase();this.folded.push(Pn(l==o?o.toLowerCase():l,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:l}=this;if(t.length==1){let w=Pn(e,0),C=rr(w),k=C==e.length?0:-100;if(w!=t[0])if(w==i[0])k+=-200;else return null;return this.ret(k,[0,C])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let f=t.length,d=0;if(c<0){for(let w=0,C=Math.min(e.length,200);w<C&&d<f;){let k=Pn(e,w);(k==t[d]||k==i[d])&&(r[d++]=w),w+=rr(k)}if(d<f)return null}let p=0,m=0,y=!1,v=0,x=-1,_=-1,S=/[a-z]/.test(e),A=!0;for(let w=0,C=Math.min(e.length,200),k=0;w<C&&m<f;){let T=Pn(e,w);c<0&&(p<f&&T==t[p]&&(o[p++]=w),v<f&&(T==t[v]||T==i[v]?(v==0&&(x=w),_=w+1,v++):v=0));let O,E=T<255?T>=48&&T<=57||T>=97&&T<=122?2:T>=65&&T<=90?1:0:(O=xv(T))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!w||E==1&&S||k==0&&E!=0)&&(t[m]==T||i[m]==T&&(y=!0)?l[m++]=w:l.length&&(A=!1)),k=E,w+=rr(T)}return m==f&&l[0]==0&&A?this.result(-100+(y?-200:0),l,e):v==f&&x==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):v==f?this.ret(-900-e.length,[x,_]):m==f?this.result(-100+(y?-200:0)+-700+(A?0:-1100),l,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let l of t){let c=l+(this.astral?rr(Pn(i,l)):1);o&&r[o-1]==l?r[o-1]=c:(r[o++]=l,r[o++]=c)}return this.ret(e-i.length,r)}}class T9{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Jt=Ce.define({combine(n){return ur(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:E9,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>XC(e(i),t(i)),optionClass:(e,t)=>i=>XC(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function XC(n,e){return n?e?n+" "+e:n:e}function E9(n,e,t,i,r,o){let l=n.textDirection==gt.RTL,c=l,f=!1,d="top",p,m,y=e.left-r.left,v=r.right-e.right,x=i.right-i.left,_=i.bottom-i.top;if(c&&y<Math.min(x,v)?c=!1:!c&&v<Math.min(x,y)&&(c=!0),x<=(c?y:v))p=Math.max(r.top,Math.min(t.top,r.bottom-_))-e.top,m=Math.min(400,c?y:v);else{f=!0,m=Math.min(400,(l?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=_||w>e.top?p=t.bottom-e.top:(d="bottom",p=e.bottom-t.top)}let S=(e.bottom-e.top)/o.offsetHeight,A=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${p/S}px; max-width: ${m/A}px`,class:"cm-completionInfo-"+(f?l?"left-narrow":"right-narrow":c?"left":"right")}}function k9(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let l=document.createElement("span");l.className="cm-completionLabel";let c=t.displayLabel||t.label,f=0;for(let d=0;d<o.length;){let p=o[d++],m=o[d++];p>f&&l.appendChild(document.createTextNode(c.slice(f,p)));let y=l.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(c.slice(p,m))),y.className="cm-completionMatchedText",f=m}return f<c.length&&l.appendChild(document.createTextNode(c.slice(f))),l},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function U0(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class O9{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:f=>this.placeInfo(f),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:l}=r.open,c=e.state.facet(Jt);this.optionContent=k9(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=U0(o.length,l,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",f=>{let{options:d}=e.state.field(t).open;for(let p=f.target,m;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(m=/-(\d+)$/.exec(p.id))&&+m[1]<d.length){this.applyCompletion(e,d[+m[1]]),f.preventDefault();return}}),this.dom.addEventListener("focusout",f=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Jt).closeOnBlur&&f.relatedTarget!=e.contentDOM&&e.dispatch({effects:Oc.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:l,disabled:c}=i.open;(!r.open||r.open.options!=o)&&(this.range=U0(o.length,l,e.state.facet(Jt).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),c!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=U0(t.options.length,t.selected,this.view.state.facet(Jt).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(r);if(!l)return;"then"in l?l.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,r)}).catch(c=>In(this.view.state,c,"completion info")):(this.addInfoPane(l,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&D9(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let l=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:l.clientWidth,bottom:l.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Jt).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",l=>{l.target==r&&l.preventDefault()});let o=null;for(let l=i.from;l<i.to;l++){let{completion:c,match:f}=e[l],{section:d}=c;if(d){let y=typeof d=="string"?d:d.name;if(y!=o&&(l>i.from||i.from==0))if(o=y,typeof d!="string"&&d.header)r.appendChild(d.header(d));else{let v=r.appendChild(document.createElement("completion-section"));v.textContent=y}}const p=r.appendChild(document.createElement("li"));p.id=t+"-"+l,p.setAttribute("role","option");let m=this.optionClass(c);m&&(p.className=m);for(let y of this.optionContent){let v=y(c,this.view.state,this.view,f);v&&p.appendChild(v)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function M9(n,e){return t=>new O9(t,n,e)}function D9(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function QC(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function R9(n,e){let t=[],i=null,r=null,o=p=>{t.push(p);let{section:m}=p.completion;if(m){i||(i=[]);let y=typeof m=="string"?m:m.name;i.some(v=>v.name==y)||i.push(typeof m=="string"?{name:y}:m)}},l=e.facet(Jt);for(let p of n)if(p.hasResult()){let m=p.result.getMatch;if(p.result.filter===!1)for(let y of p.result.options)o(new YC(y,p.source,m?m(y):[],1e9-t.length));else{let y=e.sliceDoc(p.from,p.to),v,x=l.filterStrict?new T9(y):new A9(y);for(let _ of p.result.options)if(v=x.match(_.label)){let S=_.displayLabel?m?m(_,v.matched):[]:v.matched,A=v.score+(_.boost||0);if(o(new YC(_,p.source,S,A)),typeof _.section=="object"&&_.section.rank==="dynamic"){let{name:w}=_.section;r||(r=Object.create(null)),r[w]=Math.max(A,r[w]||-1e9)}}}}if(i){let p=Object.create(null),m=0,y=(v,x)=>(v.rank==="dynamic"&&x.rank==="dynamic"?r[x.name]-r[v.name]:0)||(typeof v.rank=="number"?v.rank:1e9)-(typeof x.rank=="number"?x.rank:1e9)||(v.name<x.name?-1:1);for(let v of i.sort(y))m-=1e5,p[v.name]=m;for(let v of t){let{section:x}=v.completion;x&&(v.score+=p[typeof x=="string"?x:x.name])}}let c=[],f=null,d=l.compareCompletions;for(let p of t.sort((m,y)=>y.score-m.score||d(m.completion,y.completion))){let m=p.completion;!f||f.label!=m.label||f.detail!=m.detail||f.type!=null&&m.type!=null&&f.type!=m.type||f.apply!=m.apply||f.boost!=m.boost?c.push(p):QC(p.completion)>QC(f)&&(c[c.length-1]=p),f=p.completion}return c}class ya{constructor(e,t,i,r,o,l){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ya(this.options,JC(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,l){if(r&&!l&&e.some(d=>d.isPending))return r.setDisabled();let c=R9(e,t);if(!c.length)return r&&e.some(d=>d.isPending)?r.setDisabled():null;let f=t.facet(Jt).selectOnOpen?0:-1;if(r&&r.selected!=f&&r.selected!=-1){let d=r.options[r.selected].completion;for(let p=0;p<c.length;p++)if(c[p].completion==d){f=p;break}}return new ya(c,JC(i,f),{pos:e.reduce((d,p)=>p.hasResult()?Math.min(d,p.from):d,1e8),create:B9,above:o.aboveCursor},r?r.timestamp:Date.now(),f,!1)}map(e){return new ya(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new ya(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Id{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Id(L9,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Jt),o=(i.override||t.languageDataAt("autocomplete",ho(t)).map(C9)).map(f=>(this.active.find(p=>p.source==f)||new Ai(f,this.active.some(p=>p.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((f,d)=>f==this.active[d])&&(o=this.active);let l=this.open,c=e.effects.some(f=>f.is(Xv));l&&e.docChanged&&(l=l.map(e.changes)),e.selection||o.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!N9(o,this.active)||c?l=ya.build(o,t,this.id,l,i,c):l&&l.disabled&&!o.some(f=>f.isPending)&&(l=null),!l&&o.every(f=>!f.isPending)&&o.some(f=>f.hasResult())&&(o=o.map(f=>f.hasResult()?new Ai(f.source,0):f));for(let f of e.effects)f.is(AO)&&(l=l&&l.setSelected(f.value,this.id));return o==this.active&&l==this.open?this:new Id(o,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?z9:$9}}function N9(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const z9={"aria-autocomplete":"list"},$9={};function JC(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const L9=[];function CO(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(_O);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Ai{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=CO(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new Ai(r.source,0)),i&4&&r.state==0&&(r=new Ai(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(Hd))r=new Ai(r.source,1,o.value);else if(o.is(Oc))r=new Ai(r.source,0);else if(o.is(Xv))for(let l of o.value)l.source==r.source&&(r=l);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ho(e.state))}}class Ca extends Ai{constructor(e,t,i,r,o,l){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=l}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=ho(e.state);if(c>l||!r||t&2&&(ho(e.startState)==this.from||c<this.limit))return new Ai(this.source,t&4?1:0);let f=e.changes.mapPos(this.limit);return j9(r.validFor,e.state,o,l)?new Ca(this.source,this.explicit,f,r,o,l):r.update&&(r=r.update(r,o,l,new xO(e.state,c,!1)))?new Ca(this.source,this.explicit,f,r,r.from,(i=r.to)!==null&&i!==void 0?i:ho(e.state)):new Ai(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ca(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ai(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function j9(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):wO(n,!0).test(r)}const Xv=Pe.define({map(n,e){return n.map(t=>t.map(e))}}),AO=Pe.define(),qn=fn.define({create(){return Id.start()},update(n,e){return n.update(e)},provide:n=>[Lv.from(n,e=>e.tooltip),xe.contentAttributes.from(n,e=>e.attrs)]});function Qv(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(qn).active.find(r=>r.source==e.source);return i instanceof Ca?(typeof t=="string"?n.dispatch({..._9(n.state,t,i.from,i.to),annotations:_O.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const B9=M9(qn,Qv);function qh(n,e="option"){return t=>{let i=t.state.field(qn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Jt).interactionDelay)return!1;let r=1,o;e=="page"&&(o=sk(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,c=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),t.dispatch({effects:AO.of(c)}),!0}}const P9=n=>{let e=n.state.field(qn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Jt).interactionDelay?!1:Qv(n,e.open.options[e.open.selected])},V0=n=>n.state.field(qn,!1)?(n.dispatch({effects:Hd.of(!0)}),!0):!1,q9=n=>{let e=n.state.field(qn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Oc.of(null)}),!0)};class H9{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const I9=50,U9=1e3,V9=Mt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(qn).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(qn),t=n.state.facet(Jt);if(!n.selectionSet&&!n.docChanged&&n.startState.field(qn)==e)return;let i=n.transactions.some(o=>{let l=CO(o,t);return l&8||(o.selection||o.docChanged)&&!(l&3)});for(let o=0;o<this.running.length;o++){let l=this.running[o];if(i||l.context.abortOnDocChange&&n.docChanged||l.updates.length+n.transactions.length>I9&&Date.now()-l.time>U9){for(let c of l.context.abortListeners)try{c()}catch(f){In(this.view.state,f)}l.context.abortListeners=null,this.running.splice(o--,1)}else l.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(l=>l.is(Hd)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(l=>l.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(qn);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Jt).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=ho(e),i=new xO(e,t,n.explicit,this.view),r=new H9(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Oc.of(null)}),In(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Jt).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Jt),i=this.view.state.field(qn);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let c=ho(o.updates.length?o.updates[0].startState:this.view.state),f=Math.min(c,o.done.from+(o.active.explicit?0:1)),d=new Ca(o.active.source,o.active.explicit,f,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:c);for(let p of o.updates)d=d.update(p,t);if(d.hasResult()){e.push(d);continue}}let l=i.active.find(c=>c.source==o.active.source);if(l&&l.isPending)if(o.done==null){let c=new Ai(o.active.source,0);for(let f of o.updates)c=c.update(f,t);c.isPending||e.push(c)}else this.startQuery(l)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Xv.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(qn,!1);if(e&&e.tooltip&&this.view.state.facet(Jt).closeOnBlur){let t=e.open&&sk(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Oc.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Hd.of(!1)}),20),this.composing=0}}}),F9=typeof navigator=="object"&&/Win/.test(navigator.platform),W9=bo.highest(xe.domEventHandlers({keydown(n,e){let t=e.state.field(qn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(F9&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(l=>l.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&Qv(e,i),!1}})),K9=xe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Mc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},co=Pe.define({map(n,e){let t=e.mapPos(n,-1,_n.TrackAfter);return t??void 0}}),Jv=new class extends ks{};Jv.startSide=1;Jv.endSide=-1;const TO=fn.define({create(){return Ke.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(co)&&(n=n.update({add:[Jv.range(t.value,t.value+1)]}));return n}});function Y9(){return[X9,TO]}const F0="()[]{}<>";function EO(n){for(let e=0;e<F0.length;e+=2)if(F0.charCodeAt(e)==n)return F0.charAt(e+1);return xv(n<128?n:n+1)}function kO(n,e){return n.languageDataAt("closeBrackets",e)[0]||Mc}const G9=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),X9=xe.inputHandler.of((n,e,t,i)=>{if((G9?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&rr(Pn(i,0))==1||e!=r.from||t!=r.to)return!1;let o=Z9(n.state,i);return o?(n.dispatch(o),!0):!1}),Q9=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=kO(n,n.selection.main.head).brackets||Mc.brackets,r=null,o=n.changeByRange(l=>{if(l.empty){let c=eq(n.doc,l.head);for(let f of i)if(f==c&&Ep(n.doc,l.head)==EO(Pn(f,0)))return{changes:{from:l.head-f.length,to:l.head+f.length},range:me.cursor(l.head-f.length)}}return{range:r=l}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},J9=[{key:"Backspace",run:Q9}];function Z9(n,e){let t=kO(n,n.selection.main.head),i=t.brackets||Mc.brackets;for(let r of i){let o=EO(Pn(r,0));if(e==r)return o==r?iq(n,r,i.indexOf(r+r+r)>-1,t):tq(n,r,o,t.before||Mc.before);if(e==o&&OO(n,n.selection.main.from))return nq(n,r,o)}return null}function OO(n,e){let t=!1;return n.field(TO).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function Ep(n,e){let t=n.sliceString(e,e+2);return t.slice(0,rr(Pn(t,0)))}function eq(n,e){let t=n.sliceString(e-2,e);return rr(Pn(t,0))==t.length?t:t.slice(1)}function tq(n,e,t,i){let r=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:t,from:l.to}],effects:co.of(l.to+e.length),range:me.range(l.anchor+e.length,l.head+e.length)};let c=Ep(n.doc,l.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:e+t,from:l.head},effects:co.of(l.head+e.length),range:me.cursor(l.head+e.length)}:{range:r=l}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function nq(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&Ep(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:me.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function iq(n,e,t,i){let r=i.stringPrefixes||Mc.stringPrefixes,o=null,l=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:co.of(c.to+e.length),range:me.range(c.anchor+e.length,c.head+e.length)};let f=c.head,d=Ep(n.doc,f),p;if(d==e){if(ZC(n,f))return{changes:{insert:e+e,from:f},effects:co.of(f+e.length),range:me.cursor(f+e.length)};if(OO(n,f)){let y=t&&n.sliceDoc(f,f+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:f,to:f+y.length,insert:y},range:me.cursor(f+y.length)}}}else{if(t&&n.sliceDoc(f-2*e.length,f)==e+e&&(p=eA(n,f-2*e.length,r))>-1&&ZC(n,p))return{changes:{insert:e+e+e+e,from:f},effects:co.of(f+e.length),range:me.cursor(f+e.length)};if(n.charCategorizer(f)(d)!=xt.Word&&eA(n,f,r)>-1&&!rq(n,f,e,r))return{changes:{insert:e+e,from:f},effects:co.of(f+e.length),range:me.cursor(f+e.length)}}return{range:o=c}});return o?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function ZC(n,e){let t=gn(n).resolveInner(e+1);return t.parent&&t.from==e}function rq(n,e,t,i){let r=gn(n).resolveInner(e,-1),o=i.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),f=c.indexOf(t);if(!f||f>-1&&i.indexOf(c.slice(0,f))>-1){let p=r.firstChild;for(;p&&p.from==r.from&&p.to-p.from>t.length+f;){if(n.sliceDoc(p.to-t.length,p.to)==t)return!1;p=p.firstChild}return!0}let d=r.to==e&&r.parent;if(!d)break;r=d}return!1}function eA(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=xt.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=xt.Word)return o}return-1}function sq(n={}){return[W9,qn,Jt.of(n),V9,oq,K9]}const MO=[{key:"Ctrl-Space",run:V0},{mac:"Alt-`",run:V0},{mac:"Alt-i",run:V0},{key:"Escape",run:q9},{key:"ArrowDown",run:qh(!0)},{key:"ArrowUp",run:qh(!1)},{key:"PageDown",run:qh(!0,"page")},{key:"PageUp",run:qh(!1,"page")},{key:"Enter",run:P9}],oq=bo.highest(bp.computeN([Jt],n=>n.facet(Jt).defaultKeymap?[MO]:[]));class tA{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class so{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Dc).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((v,x)=>v.from-x.from||v.to-x.to),l=new Ir,c=[],f=0,d=i.doc.iter(),p=0,m=i.doc.length;for(let v=0;;){let x=v==o.length?null:o[v];if(!x&&!c.length)break;let _,S;if(c.length)_=f,S=c.reduce((C,k)=>Math.min(C,k.to),x&&x.from>_?x.from:1e8);else{if(_=x.from,_>m)break;S=x.to,c.push(x),v++}for(;v<o.length;){let C=o[v];if(C.from==_&&(C.to>C.from||C.to==_))c.push(C),v++,S=Math.min(C.to,S);else{S=Math.min(C.from,S);break}}S=Math.min(S,m);let A=!1;if(c.some(C=>C.from==_&&(C.to==S||S==m))&&(A=_==S,!A&&S-_<10)){let C=_-(p+d.value.length);C>0&&(d.next(C),p=_);for(let k=_;;){if(k>=S){A=!0;break}if(!d.lineBreak&&p+d.value.length>k)break;k=p+d.value.length,p+=d.value.length,d.next()}}let w=bq(c);if(A)l.add(_,_,Oe.widget({widget:new mq(w),diagnostics:c.slice()}));else{let C=c.reduce((k,T)=>T.markClass?k+" "+T.markClass:k,"");l.add(_,S,Oe.mark({class:"cm-lintRange cm-lintRange-"+w+C,diagnostics:c.slice(),inclusiveEnd:c.some(k=>k.to>S)}))}if(f=S,f==m)break;for(let C=0;C<c.length;C++)c[C].to<=f&&c.splice(C--,1)}let y=l.finish();return new so(y,t,za(y))}}function za(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:l})=>{if(!(e&&l.diagnostics.indexOf(e)<0))if(!i)i=new tA(r,o,e||l.diagnostics[0]);else{if(l.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new tA(i.from,o,i.diagnostic)}}),i}function aq(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Dc).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(l=>l.is(DO))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function lq(n,e){return n.field(si,!1)?e:e.concat(Pe.appendConfig.of(Sq))}const DO=Pe.define(),Zv=Pe.define(),RO=Pe.define(),si=fn.define({create(){return new so(Oe.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=za(t,n.selected.diagnostic,o)||za(t,null,o)}!t.size&&r&&e.state.facet(Dc).autoPanel&&(r=null),n=new so(t,r,i)}for(let t of e.effects)if(t.is(DO)){let i=e.state.facet(Dc).autoPanel?t.value.length?Rc.open:null:n.panel;n=so.init(t.value,i,e.state)}else t.is(Zv)?n=new so(n.diagnostics,t.value?Rc.open:null,n.selected):t.is(RO)&&(n=new so(n.diagnostics,n.panel,t.value));return n},provide:n=>[Cc.from(n,e=>e.panel),xe.decorations.from(n,e=>e.diagnostics)]}),cq=Oe.mark({class:"cm-lintRange cm-lintRange-active"});function uq(n,e,t){let{diagnostics:i}=n.state.field(si),r,o=-1,l=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(f,d,{spec:p})=>{if(e>=f&&e<=d&&(f==d||(e>f||t>0)&&(e<d||t<0)))return r=p.diagnostics,o=f,l=d,!1});let c=n.state.facet(Dc).tooltipFilter;return r&&c&&(r=c(r,n.state)),r?{pos:o,end:l,above:n.state.doc.lineAt(o).to<l,create(){return{dom:fq(n,r)}}}:null}function fq(n,e){return pt("ul",{class:"cm-tooltip-lint"},e.map(t=>zO(n,t,!1)))}const hq=n=>{let e=n.state.field(si,!1);(!e||!e.panel)&&n.dispatch({effects:lq(n.state,[Zv.of(!0)])});let t=_c(n,Rc.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},nA=n=>{let e=n.state.field(si,!1);return!e||!e.panel?!1:(n.dispatch({effects:Zv.of(!1)}),!0)},dq=n=>{let e=n.state.field(si,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},pq=[{key:"Mod-Shift-m",run:hq,preventDefault:!0},{key:"F8",run:dq}],Dc=Ce.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...ur(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:iA,tooltipFilter:iA,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function iA(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function NO(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function zO(n,e,t){var i;let r=t?NO(e.actions):[];return pt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},pt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,l)=>{let c=!1,f=v=>{if(v.preventDefault(),c)return;c=!0;let x=za(n.state.field(si).diagnostics,e);x&&o.apply(n,x.from,x.to)},{name:d}=o,p=r[l]?d.indexOf(r[l]):-1,m=p<0?d:[d.slice(0,p),pt("u",d.slice(p,p+1)),d.slice(p+1)],y=o.markClass?" "+o.markClass:"";return pt("button",{type:"button",class:"cm-diagnosticAction"+y,onclick:f,onmousedown:f,"aria-label":` Action: ${d}${p<0?"":` (access key "${r[l]})"`}.`},m)}),e.source&&pt("div",{class:"cm-diagnosticSource"},e.source))}class mq extends fr{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return pt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class rA{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=zO(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Rc{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)nA(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],l=NO(o.actions);for(let c=0;c<l.length;c++)if(l[c].toUpperCase().charCodeAt(0)==r.keyCode){let f=za(this.view.state.field(si).diagnostics,o);f&&o.actions[c].apply(e,f.from,f.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=pt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=pt("div",{class:"cm-panel-lint"},this.list,pt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nA(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(si).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(si),i=0,r=!1,o=null,l=new Set;for(e.between(0,this.view.state.doc.length,(c,f,{spec:d})=>{for(let p of d.diagnostics){if(l.has(p))continue;l.add(p);let m=-1,y;for(let v=i;v<this.items.length;v++)if(this.items[v].diagnostic==p){m=v;break}m<0?(y=new rA(this.view,p),this.items.splice(i,0,y),r=!0):(y=this.items[m],m>i&&(this.items.splice(i,m-i),r=!0)),t&&y.diagnostic==t.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),o=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new rA(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:f})=>{let d=f.height/this.list.offsetHeight;c.top<f.top?this.list.scrollTop-=(f.top-c.top)/d:c.bottom>f.bottom&&(this.list.scrollTop+=(c.bottom-f.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(si),i=za(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:RO.of(i)})}static open(e){return new Rc(e)}}function gq(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Hh(n){return gq(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const yq=xe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Hh("#d11")},".cm-lintRange-warning":{backgroundImage:Hh("orange")},".cm-lintRange-info":{backgroundImage:Hh("#999")},".cm-lintRange-hint":{backgroundImage:Hh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function vq(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function bq(n){let e="hint",t=1;for(let i of n){let r=vq(i.severity);r>t&&(t=r,e=i.severity)}return e}const Sq=[si,xe.decorations.compute([si],n=>{let{selected:e,panel:t}=n.field(si);return!e||!t||e.from==e.to?Oe.none:Oe.set([cq.range(e.from,e.to)])}),h6(uq,{hideOn:aq}),yq];var sA=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(J9)),e.defaultKeymap!==!1&&(i=i.concat(F8)),e.searchKeymap!==!1&&(i=i.concat(y9)),e.historyKeymap!==!1&&(i=i.concat(JP)),e.foldKeymap!==!1&&(i=i.concat(hP)),e.completionKeymap!==!1&&(i=i.concat(MO)),e.lintKeymap!==!1&&(i=i.concat(pq));var r=[];return e.lineNumbers!==!1&&r.push(_6()),e.highlightActiveLineGutter!==!1&&r.push(T6()),e.highlightSpecialChars!==!1&&r.push(HB()),e.history!==!1&&r.push(UP()),e.foldGutter!==!1&&r.push(gP()),e.drawSelection!==!1&&r.push(MB()),e.dropCursor!==!1&&r.push($B()),e.allowMultipleSelections!==!1&&r.push(Xe.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(nP()),e.syntaxHighlighting!==!1&&r.push(Ok(SP,{fallback:!0})),e.bracketMatching!==!1&&r.push(EP()),e.closeBrackets!==!1&&r.push(Y9()),e.autocompletion!==!1&&r.push(sq()),e.rectangularSelection!==!1&&r.push(t6()),t!==!1&&r.push(r6()),e.highlightActiveLine!==!1&&r.push(KB()),e.highlightSelectionMatches!==!1&&r.push(J8()),e.tabSize&&typeof e.tabSize=="number"&&r.push(Yc.of(" ".repeat(e.tabSize))),r.concat([bp.of(i.flat())]).filter(Boolean)};const xq="#e5c07b",oA="#e06c75",wq="#56b6c2",_q="#ffffff",ed="#abb2bf",av="#7d8799",Cq="#61afef",Aq="#98c379",aA="#d19a66",Tq="#c678dd",Eq="#21252b",lA="#2c313a",cA="#282c34",W0="#353a42",kq="#3E4451",uA="#528bff",Oq=xe.theme({"&":{color:ed,backgroundColor:cA},".cm-content":{caretColor:uA},".cm-cursor, .cm-dropCursor":{borderLeftColor:uA},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:kq},".cm-panels":{backgroundColor:Eq,color:ed},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:cA,color:av,border:"none"},".cm-activeLineGutter":{backgroundColor:lA},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:W0},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:W0,borderBottomColor:W0},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:lA,color:ed}}},{dark:!0}),Mq=Xc.define([{tag:le.keyword,color:Tq},{tag:[le.name,le.deleted,le.character,le.propertyName,le.macroName],color:oA},{tag:[le.function(le.variableName),le.labelName],color:Cq},{tag:[le.color,le.constant(le.name),le.standard(le.name)],color:aA},{tag:[le.definition(le.name),le.separator],color:ed},{tag:[le.typeName,le.className,le.number,le.changed,le.annotation,le.modifier,le.self,le.namespace],color:xq},{tag:[le.operator,le.operatorKeyword,le.url,le.escape,le.regexp,le.link,le.special(le.string)],color:wq},{tag:[le.meta,le.comment],color:av},{tag:le.strong,fontWeight:"bold"},{tag:le.emphasis,fontStyle:"italic"},{tag:le.strikethrough,textDecoration:"line-through"},{tag:le.link,color:av,textDecoration:"underline"},{tag:le.heading,fontWeight:"bold",color:oA},{tag:[le.atom,le.bool,le.special(le.variableName)],color:aA},{tag:[le.processingInstruction,le.string,le.inserted],color:Aq},{tag:le.invalid,color:_q}]),Dq=[Oq,Ok(Mq)];var Rq=xe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Nq=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:r=!1,theme:o="light",placeholder:l="",basicSetup:c=!0}=e,f=[];switch(t&&f.unshift(bp.of([W8])),c&&(typeof c=="boolean"?f.unshift(sA()):f.unshift(sA(c))),l&&f.unshift(QB(l)),o){case"light":f.push(Rq);break;case"dark":f.push(Dq);break;case"none":break;default:f.push(o);break}return i===!1&&f.push(xe.editable.of(!1)),r&&f.push(Xe.readOnly.of(!0)),[...f]},zq=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)});class $q{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(t=>{try{t()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class fA{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var K0=null,Lq=()=>typeof window>"u"?new fA:(K0||(K0=new fA),K0),hA=cr.define(),jq=200,Bq=[];function Pq(n){var{value:e,selection:t,onChange:i,onStatistics:r,onCreateEditor:o,onUpdate:l,extensions:c=Bq,autoFocus:f,theme:d="light",height:p=null,minHeight:m=null,maxHeight:y=null,width:v=null,minWidth:x=null,maxWidth:_=null,placeholder:S="",editable:A=!0,readOnly:w=!1,indentWithTab:C=!0,basicSetup:k=!0,root:T,initialState:O}=n,[E,R]=W.useState(),[j,V]=W.useState(),[P,q]=W.useState(),X=W.useState(()=>({current:null}))[0],J=W.useState(()=>({current:null}))[0],ce=xe.theme({"&":{height:p,minHeight:m,maxHeight:y,width:v,minWidth:x,maxWidth:_},"& .cm-scroller":{height:"100% !important"}}),K=xe.updateListener.of(oe=>{if(oe.docChanged&&typeof i=="function"&&!oe.transactions.some(z=>z.annotation(hA))){X.current?X.current.reset():(X.current=new $q(()=>{if(J.current){var z=J.current;J.current=null,z()}X.current=null},jq),Lq().add(X.current));var Y=oe.state.doc,N=Y.toString();i(N,oe)}r&&r(zq(oe))}),U=Nq({theme:d,editable:A,readOnly:w,placeholder:S,indentWithTab:C,basicSetup:k}),ee=[K,ce,...U];return l&&typeof l=="function"&&ee.push(xe.updateListener.of(l)),ee=ee.concat(c),W.useLayoutEffect(()=>{if(E&&!P){var oe={doc:e,selection:t,extensions:ee},Y=O?Xe.fromJSON(O.json,oe,O.fields):Xe.create(oe);if(q(Y),!j){var N=new xe({state:Y,parent:E,root:T});V(N),o&&o(N,Y)}}return()=>{j&&(q(void 0),V(void 0))}},[E,P]),W.useEffect(()=>{n.container&&R(n.container)},[n.container]),W.useEffect(()=>()=>{j&&(j.destroy(),V(void 0)),X.current&&(X.current.cancel(),X.current=null)},[j]),W.useEffect(()=>{f&&j&&j.focus()},[f,j]),W.useEffect(()=>{j&&j.dispatch({effects:Pe.reconfigure.of(ee)})},[d,c,p,m,y,v,x,_,S,A,w,C,k,i,l]),W.useEffect(()=>{if(e!==void 0){var oe=j?j.state.doc.toString():"";if(j&&e!==oe){var Y=X.current&&!X.current.isDone,N=()=>{j&&e!==j.state.doc.toString()&&j.dispatch({changes:{from:0,to:j.state.doc.toString().length,insert:e||""},annotations:[hA.of(!0)]})};Y?J.current=N:N()}}},[e,j]),{state:P,setState:q,view:j,setView:V,container:E,setContainer:R}}var qq=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],$O=W.forwardRef((n,e)=>{var{className:t,value:i="",selection:r,extensions:o=[],onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:d,autoFocus:p,theme:m="light",height:y,minHeight:v,maxHeight:x,width:_,minWidth:S,maxWidth:A,basicSetup:w,placeholder:C,indentWithTab:k,editable:T,readOnly:O,root:E,initialState:R}=n,j=yL(n,qq),V=W.useRef(null),{state:P,view:q,container:X,setContainer:J}=Pq({root:E,value:i,autoFocus:p,theme:m,height:y,minHeight:v,maxHeight:x,width:_,minWidth:S,maxWidth:A,basicSetup:w,placeholder:C,indentWithTab:k,editable:T,readOnly:O,selection:r,onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:d,extensions:o,initialState:R});W.useImperativeHandle(e,()=>({editor:V.current,state:P,view:q}),[V,X,P,q]);var ce=W.useCallback(U=>{V.current=U,J(U)},[J]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var K=typeof m=="string"?"cm-theme-"+m:"cm-theme";return H.jsx("div",dy({ref:ce,className:""+K+(t?" "+t:"")},j))});$O.displayName="CodeMirror";var dA={};class Ud{constructor(e,t,i,r,o,l,c,f,d,p=0,m){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=l,this.buffer=c,this.bufferBase=f,this.curContext=d,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new Ud(e,[],t,i,i,0,[],0,r?new pA(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,l=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),c=o.dynamicPrecedence(r);if(c&&(this.score+=c),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,l?8:4,!0),this.reduceContext(r,this.reducePos);return}let f=this.stack.length-(i-1)*3-(e&262144?6:0),d=f?this.stack[f-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let m=f?this.stack[f-1]:0,y=this.bufferBase+this.buffer.length-m;if(r<o.minRepeatTerm||e&131072){let v=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,d,v,y+4,!0)}if(e&262144)this.state=this.stack[f];else{let v=this.stack[f-3];this.state=o.getGoto(v,r,!0)}for(;this.stack.length>f;)this.stack.pop();this.reduceContext(r,d)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,c=this.buffer.length;if(c==0&&l.parent&&(c=l.bufferBase-l.parent.bufferBase,l=l.parent),c>0&&l.buffer[c-4]==0&&l.buffer[c-1]>-1){if(t==i)return;if(l.buffer[c-2]>=t){l.buffer[c-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let l=this.buffer.length;if(l>0&&(this.buffer[l-4]!=0||this.buffer[l-1]<0)){let c=!1;for(let f=l;f>0&&this.buffer[f-2]>i;f-=4)if(this.buffer[f-1]>=0){c=!0;break}if(c)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,r>4&&(r-=4)}this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:l}=this.p;(r>this.pos||t<=l.maxNode)&&(this.pos=r,l.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=l.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Ud(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Hq(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,l;o<t.length;o+=2)(l=t[o+1])!=this.state&&this.p.parser.hasAction(l,e)&&r.push(t[o],l);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let l=t[o+1];r.some((c,f)=>f&1&&c==l)||r.push(t[o],l)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let l=this.split();l.pushState(o,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[r],this.pos),l.reducePos=this.pos,l.score-=200,i.push(l)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let l=this.findForcedReduction();if(l==null)return!1;t=l}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,l=>{if(!(l&393216))if(l&65536){let c=(l>>19)-o;if(c>1){let f=l&65535,d=this.stack.length-c*3;if(d>=0&&e.getGoto(this.stack[d],f,!1)>=0)return c<<19|65536|f}}else{let c=i(l,o+1);if(c!=null)return c}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new pA(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class pA{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Hq{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Vd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Vd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Vd(this.stack,this.pos,this.index)}}function Ih(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let l=n.charCodeAt(i++),c=!1;if(l==126){o=65535;break}l>=92&&l--,l>=34&&l--;let f=l-32;if(f>=46&&(f-=46,c=!0),o+=f,c)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class td{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const mA=new td;class Iq{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=mA,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let l=this.ranges[--r];o-=i.from-l.to,i=l}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let l=this.ranges[++r];o+=l.from-i.to,i=l}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,c=this.range;for(;c.to<=i;)c=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=mA,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Aa{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Uq(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Aa.prototype.contextual=Aa.prototype.fallback=Aa.prototype.extend=!1;Aa.prototype.fallback=Aa.prototype.extend=!1;function Uq(n,e,t,i,r,o){let l=0,c=1<<i,{dialect:f}=t.p.parser;e:for(;(c&n[l])!=0;){let d=n[l+1];for(let v=l+3;v<d;v+=2)if((n[v+1]&c)>0){let x=n[v];if(f.allows(x)&&(e.token.value==-1||e.token.value==x||Vq(x,e.token.value,r,o))){e.acceptToken(x);break}}let p=e.next,m=0,y=n[l+2];if(e.next<0&&y>m&&n[d+y*3-3]==65535){l=n[d+y*3-1];continue e}for(;m<y;){let v=m+y>>1,x=d+v+(v<<1),_=n[x],S=n[x+1]||65536;if(p<_)y=v;else if(p>=S)m=v+1;else{l=n[x+2],e.advance();continue e}}break}}function gA(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Vq(n,e,t,i){let r=gA(t,i,e);return r<0||gA(t,i,n)<r}const ni=typeof process<"u"&&dA&&/\bparse\b/.test(dA.LOG);let Y0=null;function yA(n,e,t){let i=n.cursor(Qt.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Fq{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?yA(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?yA(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],l=this.start[t]+i.positions[r];if(l>e)return this.nextStart=l,null;if(o instanceof jt){if(l==e){if(l<this.safeFrom)return null;let c=l+o.length;if(c<=this.safeTo){let f=o.prop(Ie.lookAhead);if(!f||c+f<this.fragment.to)return o}}this.index[t]++,l+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+o.length}}}class Wq{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new td)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,l=r.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,f=0;for(let d=0;d<o.length;d++){if((1<<d&l)==0)continue;let p=o[d],m=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=l||m.context!=c)&&(this.updateCachedToken(m,p,e),m.mask=l,m.context=c),m.lookAhead>m.end+25&&(f=Math.max(m.lookAhead,f)),m.value!=0)){let y=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!p.extend&&(i=m,t>y))break}}for(;this.actions.length>t;)this.actions.pop();return f&&e.setLookAhead(f),!i&&e.pos==this.stream.end&&(i=new td,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new td,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let l=0;l<o.specialized.length;l++)if(o.specialized[l]==e.value){let c=o.specializers[l](this.stream.read(e.start,e.end),i);if(c>=0&&i.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:l}=e.p,{data:c}=l;for(let f=0;f<2;f++)for(let d=l.stateSlot(o,f?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=Lr(c,d+2);else{r==0&&c[d+1]==2&&(r=this.putAction(Lr(c,d+2),t,i,r));break}c[d]==t&&(r=this.putAction(Lr(c,d+1),t,i,r))}return r}}class Kq{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Iq(t,r),this.tokens=new Wq(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[Ud.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Fq(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let c=e[l];for(;;){if(this.tokens.mainToken=null,c.pos>t)i.push(c);else{if(this.advanceStack(c,i,e))continue;{r||(r=[],o=[]),r.push(c);let f=this.tokens.getMainToken(c);o.push(f.value,f.end)}}break}}if(!i.length){let l=r&&Gq(r);if(l)return ni&&console.log("Finish with "+this.stackID(l)),this.stackToTree(l);if(this.parser.strict)throw ni&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let l=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(l)return ni&&console.log("Force-finish "+this.stackID(l)),this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((c,f)=>f.score-c.score);i.length>l;)i.pop();i.some(c=>c.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let c=i[l];for(let f=l+1;f<i.length;f++){let d=i[f];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)i.splice(f--,1);else{i.splice(l--,1);continue e}}}i.length>12&&(i.sort((l,c)=>c.score-l.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,l=ni?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let m=this.fragments.nodeAt(r);m;){let y=this.parser.nodeSet.types[m.type.id]==m.type?o.getGoto(e.state,m.type.id):-1;if(y>-1&&m.length&&(!d||(m.prop(Ie.contextHash)||0)==p))return e.useNode(m,y),ni&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(m.type.id)})`),!0;if(!(m instanceof jt)||m.children.length==0||m.positions[0]>0)break;let v=m.children[0];if(v instanceof jt&&m.positions[0]==0)m=v;else break}}let c=o.stateSlot(e.state,4);if(c>0)return e.reduce(c),ni&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let d=0;d<f.length;){let p=f[d++],m=f[d++],y=f[d++],v=d==f.length||!i,x=v?e:e.split(),_=this.tokens.mainToken;if(x.apply(p,m,_?_.start:x.pos,y),ni&&console.log(l+this.stackID(x)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(m)} @ ${r}${x==e?"":", split"})`),v)return!0;x.pos>r?t.push(x):i.push(x)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return vA(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let l=0;l<e.length;l++){let c=e[l],f=t[l<<1],d=t[(l<<1)+1],p=ni?this.stackID(c)+" -> ":"";if(c.deadEnd&&(o||(o=!0,c.restart(),ni&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,i))))continue;let m=c.split(),y=p;for(let v=0;v<10&&m.forceReduce()&&(ni&&console.log(y+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,i));v++)ni&&(y=this.stackID(m)+" -> ");for(let v of c.recoverByInsert(f))ni&&console.log(p+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,i);this.stream.end>c.pos?(d==c.pos&&(d++,f=0),c.recoverByDelete(f,d),ni&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(f)})`),vA(c,i)):(!r||r.score<c.score)&&(r=c)}return r}stackToTree(e){return e.close(),jt.build({buffer:Vd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Y0||(Y0=new WeakMap)).get(e);return t||Y0.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function vA(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Yq{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Fd extends dk{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let i=Object.keys(e.topRules).map(c=>e.topRules[c][1]),r=[];for(let c=0;c<t.length;c++)r.push([]);function o(c,f,d){r[c].push([f,f.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let f=c[0];typeof f=="string"&&(f=Ie[f]);for(let d=1;d<c.length;){let p=c[d++];if(p>=0)o(p,f,c[d++]);else{let m=c[d+-p];for(let y=-p;y>0;y--)o(c[d++],f,m);d++}}}this.nodeSet=new jv(t.map((c,f)=>Vn.define({name:f>=this.minRepeatTerm?void 0:c,id:f,props:r[f],top:i.indexOf(f)>-1,error:f==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=ck;let l=Ih(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(bA),this.states=Ih(e.states,Uint32Array),this.data=Ih(e.stateData),this.goto=Ih(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new Aa(l,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Kq(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let l=r[o++],c=l&1,f=r[o++];if(c&&i)return f;for(let d=o+(l>>1);o<d;o++)if(r[o]==e)return f;if(c)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),l;;o+=3){if((l=i[o])==65535)if(i[o+1]==1)l=i[o=Lr(i,o+2)];else{if(i[o+1]==2)return Lr(i,o+2);break}if(l==t||l==0)return Lr(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Lr(this.data,o+2);else break;r=t(Lr(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Lr(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,l)=>l&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(Fd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(c=>c.from==i.external);if(!o)return i;let l=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=bA(l),l})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let l=t.indexOf(o);l>=0&&(i[l]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let l=this.dialects[t[o]],c;(c=this.data[l++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[c]=1;return new Yq(e,i,r)}static deserialize(e){return new Fd(e)}}function Lr(n,e){return n[e]|n[e+1]<<16}function Gq(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function bA(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Xq=pk({String:le.string,Number:le.number,"True False":le.bool,PropertyName:le.propertyName,Null:le.null,", :":le.separator,"[ ]":le.squareBracket,"{ }":le.brace}),Qq=Fd.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Xq],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Jq=Md.define({name:"json",parser:Qq.configure({props:[vk.add({Object:OC({except:/^\s*\}/}),Array:OC({except:/^\s*\]/})}),Sk.add({"Object Array":rP})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Zq(){return new W6(Jq)}function eH(n,e){const t=yn.c(4),i=e,[r,o]=W.useState(n);let l,c;return t[0]!==i||t[1]!==n?(l=()=>{const f=setTimeout(()=>{o(n)},i);return()=>{clearTimeout(f)}},c=[n,i],t[0]=i,t[1]=n,t[2]=l,t[3]=c):(l=t[2],c=t[3]),W.useEffect(l,c),r}const tH=()=>{const{interactiveBalanceData:n,setInteractiveBalanceData:e}=Pi(),[t,i]=W.useState(!1),[r,o]=W.useState(""),[l,c]=W.useState(0),f=eH(r,500),[d,p]=W.useState("valid");W.useEffect(()=>{if(!n)return;const y=(()=>{try{return JSON.parse(r)}catch{return null}})();if(JSON.stringify(y)===JSON.stringify(n))return;const v=JSON.stringify(n,null,4);i(!0),o(v)},[n]),W.useEffect(()=>{if(t)try{const y=JSON.parse(f);if(yd(y)){const x=zA(y);e(x),p("valid")}else p("invalid-schema"),console.group("Schema Validation Errors:"),yd.errors?.forEach((x,_)=>{console.log(`Error ${_+1}:`),console.log(`  Path: ${x.instancePath||"(root)"}`),console.log(`  Message: ${x.message}`),console.log("  Details:",x)}),console.groupEnd()}catch(y){p("invalid-json"),console.log(`Invalid JSON, not applying
${y}`)}},[f,t]);const m=()=>{try{const y=JSON.parse(r);console.log("parsed successfully");const v=JSON.stringify(y,null,4);console.log("formatted successfully"),o(v),c(x=>x+1),Me.success("Erfolgreich formatiert")}catch{Me.error("Ungltiges JSON-Format")}};return t?H.jsxs("div",{className:"",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsxs("div",{className:"flex items-center gap-2",children:[d==="valid"&&H.jsx("span",{className:"text-green-600 text-sm",children:" Gltig - nderungen werden angewendet..."}),d==="invalid-json"&&H.jsx("span",{className:"text-red-600 text-sm",children:" Ungltiges JSON-Format. Details in Entwicklerkonsole (F12)"}),d==="invalid-schema"&&H.jsx("span",{className:"text-orange-600 text-sm",children:" JSON entspricht nicht dem erwarteten Schema. Details in Entwicklerkonsole (F12)"})]}),H.jsx("div",{className:"flex justify-end",children:H.jsx("button",{onClick:m,className:"bg-green-500 px-3 py-1 rounded mb-2 ml-2",children:"Formatieren"})})]}),H.jsx($O,{value:r,extensions:[Zq(),Yc.of("    ")],height:"80vh",theme:"light",onChange:y=>{o(y),console.log("value Changed")}},l)]}):null},nH={standard:"Standard",edit:"Edit",teacher:"Teacher"};function iH(){const n=yn.c(36),{openWindow:e}=La(),{appMode:t,cycleMode:i}=cp(),[r,o]=W.useState(!0);let l;n[0]!==r?(l=()=>{o(!r)},n[0]=r,n[1]=l):l=n[1];const c=l,f=`Men ${r?"ausklappen":"einklappen"}`;let d;n[2]!==r?(d=r?H.jsx("span",{children:""}):H.jsx("span",{children:""}),n[2]=r,n[3]=d):d=n[3];let p;n[4]!==f||n[5]!==d||n[6]!==c?(p=H.jsx("button",{title:f,className:"fixed top-8 left-4 z-[1001] bg-gray-300 rounded-xl size-14 text-3xl flex items-center justify-center",onClick:c,children:d}),n[4]=f,n[5]=d,n[6]=c,n[7]=p):p=n[7];const m=`fixed top-20 left-0 h-2/3 w-20 z-[1000] transition-transform duration-200 ${r?"-translate-x-full":"translate-x-0"}`;let y;n[8]!==e?(y=()=>e({type:"FileHandeling",payload:{}}),n[8]=e,n[9]=y):y=n[9];let v,x;n[10]===Symbol.for("react.memo_cache_sentinel")?(v=H.jsx("span",{className:"absolute top-1 left-0 leading-none",children:""}),x=H.jsx("span",{className:"absolute bottom-3 right-0 leading-none",children:""}),n[10]=v,n[11]=x):(v=n[10],x=n[11]);let _;n[12]!==y?(_=H.jsxs("button",{title:"Up-/Download",className:"relative ml-4 mt-4 mb-1 bg-gray-300 rounded-xl size-14 flex items-center justify-center text-2xl",onClick:y,children:[v,x]}),n[12]=y,n[13]=_):_=n[13];let S;n[14]!==e?(S=()=>e({type:"JournalEntry",payload:{isDraft:!0}}),n[14]=e,n[15]=S):S=n[15];let A,w;n[16]===Symbol.for("react.memo_cache_sentinel")?(A=H.jsx("span",{children:""}),w=H.jsx("span",{children:""}),n[16]=A,n[17]=w):(A=n[16],w=n[17]);let C;n[18]!==S?(C=H.jsxs("button",{title:"Neue Buchung",className:"relative ml-4 my-1 bg-gray-300 rounded-xl size-14 flex items-center justify-center text-[22px]",onClick:S,children:[A,w]}),n[18]=S,n[19]=C):C=n[19];let k;n[20]===Symbol.for("react.memo_cache_sentinel")?(k=H.jsx("button",{title:"Journal",className:"relative ml-4 my-1 bg-gray-300 rounded-xl size-14 flex items-center justify-center text-4xl",children:H.jsx("span",{children:""})}),n[20]=k):k=n[20];let T;n[21]===Symbol.for("react.memo_cache_sentinel")?(T=H.jsx("button",{title:"Kontenplan",className:"relative ml-4 my-1 bg-gray-300 rounded-xl size-14 flex items-center justify-center text-4xl",children:H.jsx("span",{children:""})}),n[21]=T):T=n[21];const O=`Mode: ${nH[t]}  klicken zum ndern`;let E;n[22]!==i?(E=()=>i(),n[22]=i,n[23]=E):E=n[23];const R=t==="standard"?"":t==="edit"?"":"";let j;n[24]!==O||n[25]!==E||n[26]!==R?(j=H.jsx("button",{title:O,className:"relative ml-4 my-1 bg-gray-300 rounded-xl size-14 flex items-center justify-center text-4xl",onClick:E,children:R}),n[24]=O,n[25]=E,n[26]=R,n[27]=j):j=n[27];let V;n[28]!==C||n[29]!==j||n[30]!==m||n[31]!==_?(V=H.jsxs("div",{className:m,children:[_,C,k,T,j]}),n[28]=C,n[29]=j,n[30]=m,n[31]=_,n[32]=V):V=n[32];let P;return n[33]!==V||n[34]!==p?(P=H.jsxs("div",{className:"fixed top-0 left-0 h-full z-50",children:[p,V]}),n[33]=V,n[34]=p,n[35]=P):P=n[35],P}function Vl(n){switch(n.type){case"Account":return`${n.payload.id} ${n.payload.label}`;case"JournalEntry":return n.payload.id&&n.payload.id!="Neue Buchung"?`Buchung ${n.payload.id}`:"Neue Buchung";case"FileHandeling":return"File Handeling";default:return"No Title"}}const rH=()=>{const n=yn.c(38);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0];const[t,i]=W.useState(e),[r,o]=W.useState(1);Pi();const l=W.useRef(null),[,c]=W.useState(0),{appMode:f,isTeacherFromUrl:d}=cp();Pi();let p;n[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(l.current){const O=l.current.getBoundingClientRect();c(O.height)}},n[1]=p):p=n[1];let m;n[2]!==t?(m=[t],n[2]=t,n[3]=m):m=n[3],W.useEffect(p,m);let y;n[4]===Symbol.for("react.memo_cache_sentinel")?(y={Account:3,JournalEntry:1,FileHandeling:1},n[4]=y):y=n[4];const v=y;let x,_,S,A,w,C;if(n[5]!==f||n[6]!==d||n[7]!==r||n[8]!==t){const O=U=>{i(ee=>{const oe=ee.filter(z=>z.data.type===U.type).length,Y=ee.find(z=>z.title===Vl(U));if(Y)return P(Y.data),ee;if(oe>=v[U.type])return ee;const N={x:100+ee.length*200,y:100+ee.length*50,width:500,height:400,title:Vl(U),data:U,zIndex:r+1};return[...ee,N]})};let E;n[15]===Symbol.for("react.memo_cache_sentinel")?(E=U=>{const ee=Vl(U);i(oe=>oe.filter(Y=>Y.title!==ee))},n[15]=E):E=n[15];const R=E;let j;n[16]===Symbol.for("react.memo_cache_sentinel")?(j=U=>{i(U?ee=>ee.filter(oe=>oe.title===Vl(U)):[])},n[16]=j):j=n[16];const V=j,P=U=>{i(ee=>{const oe=Vl(U);return ee.map(Y=>Y.title===oe?{...Y,zIndex:r+1}:Y)}),o(sH)};x=UA.Provider,w={openWindow:O,closeWindow:R,closeAllWindowsExcept:V,bringToFront:P},n[17]===Symbol.for("react.memo_cache_sentinel")?(C=H.jsx(iH,{}),n[17]=C):C=n[17],_="w-screen h-screen bg-gray-200 relative overflow-hidden p-1";let q;n[18]!==d?(q=d&&H.jsx("div",{className:"flex justify-center my-1",children:H.jsx("div",{className:"text-white font-bold bg-red-500 rounded-md px-2 py-1",children:"Teacher Mode"})}),n[18]=d,n[19]=q):q=n[19];const X="flex-1 flex items-start p-8 h-full "+(ws(f,"teacher")?"justify-evenly gap-4":"justify-center");let J;n[20]===Symbol.for("react.memo_cache_sentinel")?(J=H.jsx(N4,{children:H.jsx(I4,{})}),n[20]=J):J=n[20];let ce;n[21]!==f?(ce=ws(f,"teacher")&&H.jsx("div",{className:"w-1/2 h-90vh",children:H.jsx(tH,{})}),n[21]=f,n[22]=ce):ce=n[22];let K;n[23]!==X||n[24]!==ce?(K=H.jsxs("div",{className:X,children:[J,ce]}),n[23]=X,n[24]=ce,n[25]=K):K=n[25],n[26]!==q||n[27]!==K?(S=H.jsxs("div",{children:[q,K]}),n[26]=q,n[27]=K,n[28]=S):S=n[28],A=t.map(U=>H.jsxs(MR,{default:{x:U.x,y:U.y,width:U.data.type==="FileHandeling"?"auto":U.width,height:"auto"},minWidth:U.data.type==="FileHandeling"?400:550,minHeight:U.data.type==="FileHandeling"?250:400,enableResizing:U.data.type!=="FileHandeling",bounds:"window",style:{zIndex:U.zIndex},onMouseDown:()=>P(U.data),dragHandleClassName:"window-drag-handle",cancel:".clickable, button, input, select, textarea",className:"border border-gray-700 bg-white shadow-lg absolute flex flex-col",children:[H.jsxs("div",{className:`window-drag-handle 
              ${U.data.type==="Account"?"bg-green-400 text-gray-800":""} 
              ${U.data.type==="JournalEntry"?"bg-yellow-100 text-gray-800":""} 
              ${U.data.type!="JournalEntry"&&U.data.type!="Account"?"bg-gray-800 text-white":""} 
              px-3 py-2 flex justify-between items-center cursor-move`,children:[H.jsx("span",{children:U.title}),H.jsx("button",{onClick:()=>R(U.data),className:"bg-red-700 hover:bg-red-500 text-white px-2 py-1 rounded",children:"X"})]}),H.jsxs("div",{className:"p-4 text-sm text-gray-700",children:[U.data.type==="Account"&&H.jsx(V4,{...U.data.payload},U.data.payload.id),U.data.type==="JournalEntry"&&H.jsx(K4,{entryId:U.data.payload.id,isDraft:U.data.payload.isDraft},U.data.payload.id??"new"),U.data.type==="FileHandeling"&&H.jsx(gL,{},U.data.type)]})]},U.title)),n[5]=f,n[6]=d,n[7]=r,n[8]=t,n[9]=x,n[10]=_,n[11]=S,n[12]=A,n[13]=w,n[14]=C}else x=n[9],_=n[10],S=n[11],A=n[12],w=n[13],C=n[14];let k;n[29]!==_||n[30]!==S||n[31]!==A?(k=H.jsxs("div",{className:_,children:[S,A]}),n[29]=_,n[30]=S,n[31]=A,n[32]=k):k=n[32];let T;return n[33]!==x||n[34]!==w||n[35]!==C||n[36]!==k?(T=H.jsxs(x,{value:w,children:[C,k]}),n[33]=x,n[34]=w,n[35]=C,n[36]=k,n[37]=T):T=n[37],T};function sH(n){return n+1}const oH=()=>{const n=yn.c(2);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=H.jsx(PN,{position:"bottom-right",autoClose:4e3,theme:"colored"}),n[0]=e):e=n[0];let t;return n[1]===Symbol.for("react.memo_cache_sentinel")?(t=H.jsx(z4,{children:H.jsxs(HN,{children:[e,H.jsx(oR,{children:H.jsx(rH,{})})]})}),n[1]=t):t=n[1],t},aH=iR.createRoot(document.getElementById("root"));aH.render(H.jsx(Ne.StrictMode,{children:H.jsx(oH,{})}));
