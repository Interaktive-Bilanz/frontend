(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Nl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function WE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var lm={exports:{}},Uo={};var W1;function GE(){if(W1)return Uo;W1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:o}}return Uo.Fragment=e,Uo.jsx=t,Uo.jsxs=t,Uo}var G1;function YE(){return G1||(G1=1,lm.exports=GE()),lm.exports}var W=YE(),cm={exports:{}},De={};var Y1;function FE(){if(Y1)return De;Y1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function _(D,L,j){this.props=D,this.context=L,this.refs=x,this.updater=j||S}_.prototype.isReactComponent={},_.prototype.setState=function(D,L){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,L,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function w(){}w.prototype=_.prototype;function T(D,L,j){this.props=D,this.context=L,this.refs=x,this.updater=j||S}var E=T.prototype=new w;E.constructor=T,C(E,_.prototype),E.isPureReactComponent=!0;var k=Array.isArray;function O(){}var A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function $(D,L,j){var R=j.ref;return{$$typeof:n,type:D,key:L,ref:R!==void 0?R:null,props:j}}function V(D,L){return $(D.type,L,D.props)}function q(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function H(D){var L={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(j){return L[j]})}var X=/\/+/g;function te(D,L){return typeof D=="object"&&D!==null&&D.key!=null?H(""+D.key):L.toString(36)}function fe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(O,O):(D.status="pending",D.then(function(L){D.status==="pending"&&(D.status="fulfilled",D.value=L)},function(L){D.status==="pending"&&(D.status="rejected",D.reason=L)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function I(D,L,j,R,B){var F=typeof D;(F==="undefined"||F==="boolean")&&(D=null);var he=!1;if(D===null)he=!0;else switch(F){case"bigint":case"string":case"number":he=!0;break;case"object":switch(D.$$typeof){case n:case e:he=!0;break;case p:return he=D._init,I(he(D._payload),L,j,R,B)}}if(he)return B=B(D),he=R===""?"."+te(D,0):R,k(B)?(j="",he!=null&&(j=he.replace(X,"$&/")+"/"),I(B,L,j,"",function(Oe){return Oe})):B!=null&&(q(B)&&(B=V(B,j+(B.key==null||D&&D.key===B.key?"":(""+B.key).replace(X,"$&/")+"/")+he)),L.push(B)),1;he=0;var ge=R===""?".":R+":";if(k(D))for(var Ce=0;Ce<D.length;Ce++)R=D[Ce],F=ge+te(R,Ce),he+=I(R,L,j,F,B);else if(Ce=b(D),typeof Ce=="function")for(D=Ce.call(D),Ce=0;!(R=D.next()).done;)R=R.value,F=ge+te(R,Ce++),he+=I(R,L,j,F,B);else if(F==="object"){if(typeof D.then=="function")return I(fe(D),L,j,R,B);throw L=String(D),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return he}function ne(D,L,j){if(D==null)return D;var R=[],B=0;return I(D,R,"","",function(F){return L.call(j,F,B++)}),R}function oe(D){if(D._status===-1){var L=D._result;L=L(),L.then(function(j){(D._status===0||D._status===-1)&&(D._status=1,D._result=j)},function(j){(D._status===0||D._status===-1)&&(D._status=2,D._result=j)}),D._status===-1&&(D._status=0,D._result=L)}if(D._status===1)return D._result.default;throw D._result}var pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},K={map:ne,forEach:function(D,L,j){ne(D,function(){L.apply(this,arguments)},j)},count:function(D){var L=0;return ne(D,function(){L++}),L},toArray:function(D){return ne(D,function(L){return L})||[]},only:function(D){if(!q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return De.Activity=g,De.Children=K,De.Component=_,De.Fragment=t,De.Profiler=s,De.PureComponent=T,De.StrictMode=i,De.Suspense=f,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return A.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(D,L,j){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var R=C({},D.props),B=D.key;if(L!=null)for(F in L.key!==void 0&&(B=""+L.key),L)!N.call(L,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&L.ref===void 0||(R[F]=L[F]);var F=arguments.length-2;if(F===1)R.children=j;else if(1<F){for(var he=Array(F),ge=0;ge<F;ge++)he[ge]=arguments[ge+2];R.children=he}return $(D.type,B,R)},De.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},De.createElement=function(D,L,j){var R,B={},F=null;if(L!=null)for(R in L.key!==void 0&&(F=""+L.key),L)N.call(L,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(B[R]=L[R]);var he=arguments.length-2;if(he===1)B.children=j;else if(1<he){for(var ge=Array(he),Ce=0;Ce<he;Ce++)ge[Ce]=arguments[Ce+2];B.children=ge}if(D&&D.defaultProps)for(R in he=D.defaultProps,he)B[R]===void 0&&(B[R]=he[R]);return $(D,F,B)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:u,render:D}},De.isValidElement=q,De.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:oe}},De.memo=function(D,L){return{$$typeof:d,type:D,compare:L===void 0?null:L}},De.startTransition=function(D){var L=A.T,j={};A.T=j;try{var R=D(),B=A.S;B!==null&&B(j,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(O,pe)}catch(F){pe(F)}finally{L!==null&&j.types!==null&&(L.types=j.types),A.T=L}},De.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},De.use=function(D){return A.H.use(D)},De.useActionState=function(D,L,j){return A.H.useActionState(D,L,j)},De.useCallback=function(D,L){return A.H.useCallback(D,L)},De.useContext=function(D){return A.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,L){return A.H.useDeferredValue(D,L)},De.useEffect=function(D,L){return A.H.useEffect(D,L)},De.useEffectEvent=function(D){return A.H.useEffectEvent(D)},De.useId=function(){return A.H.useId()},De.useImperativeHandle=function(D,L,j){return A.H.useImperativeHandle(D,L,j)},De.useInsertionEffect=function(D,L){return A.H.useInsertionEffect(D,L)},De.useLayoutEffect=function(D,L){return A.H.useLayoutEffect(D,L)},De.useMemo=function(D,L){return A.H.useMemo(D,L)},De.useOptimistic=function(D,L){return A.H.useOptimistic(D,L)},De.useReducer=function(D,L,j){return A.H.useReducer(D,L,j)},De.useRef=function(D){return A.H.useRef(D)},De.useState=function(D){return A.H.useState(D)},De.useSyncExternalStore=function(D,L,j){return A.H.useSyncExternalStore(D,L,j)},De.useTransition=function(){return A.H.useTransition()},De.version="19.2.1",De}var F1;function Wa(){return F1||(F1=1,cm.exports=FE()),cm.exports}var ve=Wa();const ct=Nl(ve);var um={exports:{}},Vo={},fm={exports:{}},hm={};var K1;function KE(){return K1||(K1=1,(function(n){function e(I,ne){var oe=I.length;I.push(ne);e:for(;0<oe;){var pe=oe-1>>>1,K=I[pe];if(0<s(K,ne))I[pe]=ne,I[oe]=K,oe=pe;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var ne=I[0],oe=I.pop();if(oe!==ne){I[0]=oe;e:for(var pe=0,K=I.length,D=K>>>1;pe<D;){var L=2*(pe+1)-1,j=I[L],R=L+1,B=I[R];if(0>s(j,oe))R<K&&0>s(B,j)?(I[pe]=B,I[R]=oe,pe=R):(I[pe]=j,I[L]=oe,pe=L);else if(R<K&&0>s(B,oe))I[pe]=B,I[R]=oe,pe=R;else break e}}return ne}function s(I,ne){var oe=I.sortIndex-ne.sortIndex;return oe!==0?oe:I.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],d=[],p=1,g=null,y=3,b=!1,S=!1,C=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(I){for(var ne=t(d);ne!==null;){if(ne.callback===null)i(d);else if(ne.startTime<=I)i(d),ne.sortIndex=ne.expirationTime,e(f,ne);else break;ne=t(d)}}function k(I){if(C=!1,E(I),!S)if(t(f)!==null)S=!0,O||(O=!0,H());else{var ne=t(d);ne!==null&&fe(k,ne.startTime-I)}}var O=!1,A=-1,N=5,$=-1;function V(){return x?!0:!(n.unstable_now()-$<N)}function q(){if(x=!1,O){var I=n.unstable_now();$=I;var ne=!0;try{e:{S=!1,C&&(C=!1,w(A),A=-1),b=!0;var oe=y;try{t:{for(E(I),g=t(f);g!==null&&!(g.expirationTime>I&&V());){var pe=g.callback;if(typeof pe=="function"){g.callback=null,y=g.priorityLevel;var K=pe(g.expirationTime<=I);if(I=n.unstable_now(),typeof K=="function"){g.callback=K,E(I),ne=!0;break t}g===t(f)&&i(f),E(I)}else i(f);g=t(f)}if(g!==null)ne=!0;else{var D=t(d);D!==null&&fe(k,D.startTime-I),ne=!1}}break e}finally{g=null,y=oe,b=!1}ne=void 0}}finally{ne?H():O=!1}}}var H;if(typeof T=="function")H=function(){T(q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,te=X.port2;X.port1.onmessage=q,H=function(){te.postMessage(null)}}else H=function(){_(q,0)};function fe(I,ne){A=_(function(){I(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(I){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var oe=y;y=ne;try{return I()}finally{y=oe}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(I,ne){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var oe=y;y=I;try{return ne()}finally{y=oe}},n.unstable_scheduleCallback=function(I,ne,oe){var pe=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?pe+oe:pe):oe=pe,I){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=oe+K,I={id:p++,callback:ne,priorityLevel:I,startTime:oe,expirationTime:K,sortIndex:-1},oe>pe?(I.sortIndex=oe,e(d,I),t(f)===null&&I===t(d)&&(C?(w(A),A=-1):C=!0,fe(k,oe-pe))):(I.sortIndex=K,e(f,I),S||b||(S=!0,O||(O=!0,H()))),I},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(I){var ne=y;return function(){var oe=y;y=ne;try{return I.apply(this,arguments)}finally{y=oe}}}})(hm)),hm}var X1;function XE(){return X1||(X1=1,fm.exports=KE()),fm.exports}var dm={exports:{}},Jt={};var Q1;function QE(){if(Q1)return Jt;Q1=1;var n=Wa();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jt.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},Jt.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},Jt.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},Jt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Jt.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&i.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Jt.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},Jt.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Jt.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},Jt.requestFormReset=function(f){i.d.r(f)},Jt.unstable_batchedUpdates=function(f,d){return f(d)},Jt.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},Jt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jt.version="19.2.1",Jt}var Z1;function Ch(){if(Z1)return dm.exports;Z1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=QE(),dm.exports}var J1;function ZE(){if(J1)return Vo;J1=1;var n=XE(),e=Wa(),t=Ch();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function d(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,h=a;;){var m=c.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===c)return f(m),r;if(v===h)return f(m),a;v=v.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=v;else{for(var M=!1,z=m.child;z;){if(z===c){M=!0,c=m,h=v;break}if(z===h){M=!0,h=m,c=v;break}z=z.sibling}if(!M){for(z=v.child;z;){if(z===c){M=!0,c=v,h=m;break}if(z===h){M=!0,h=v,c=m;break}z=z.sibling}if(!M)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function te(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case _:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList";case $:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case T:return r.displayName||"Context";case w:return(r._context.displayName||"Context")+".Consumer";case E:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return a=r.displayName||null,a!==null?a:te(r.type)||"Memo";case N:a=r._payload,r=r._init;try{return te(r(a))}catch{}}return null}var fe=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},pe=[],K=-1;function D(r){return{current:r}}function L(r){0>K||(r.current=pe[K],pe[K]=null,K--)}function j(r,a){K++,pe[K]=r.current,r.current=a}var R=D(null),B=D(null),F=D(null),he=D(null);function ge(r,a){switch(j(F,a),j(B,r),j(R,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?p1(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=p1(a),r=m1(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}L(R),j(R,r)}function Ce(){L(R),L(B),L(F)}function Oe(r){r.memoizedState!==null&&j(he,r);var a=R.current,c=m1(a,r.type);a!==c&&(j(B,r),j(R,c))}function G(r){B.current===r&&(L(R),L(B)),he.current===r&&(L(he),jo._currentValue=oe)}var Q,ue;function de(r){if(Q===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Q=a&&a[1]||"",ue=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+r+ue}var xe=!1;function Me(r,a){if(!r||xe)return"";xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ie){var ee=ie}Reflect.construct(r,[],le)}else{try{le.call()}catch(ie){ee=ie}r.call(le.prototype)}}else{try{throw Error()}catch(ie){ee=ie}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ie){if(ie&&ee&&typeof ie.stack=="string")return[ie.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),M=v[0],z=v[1];if(M&&z){var P=M.split(`
`),J=z.split(`
`);for(m=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;m<J.length&&!J[m].includes("DetermineComponentFrameRoot");)m++;if(h===P.length||m===J.length)for(h=P.length-1,m=J.length-1;1<=h&&0<=m&&P[h]!==J[m];)m--;for(;1<=h&&0<=m;h--,m--)if(P[h]!==J[m]){if(h!==1||m!==1)do if(h--,m--,0>m||P[h]!==J[m]){var se=`
`+P[h].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=h&&0<=m);break}}}finally{xe=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?de(c):""}function mt(r,a){switch(r.tag){case 26:case 27:case 5:return de(r.type);case 16:return de("Lazy");case 13:return r.child!==a&&a!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return Me(r.type,!1);case 11:return Me(r.type.render,!1);case 1:return Me(r.type,!0);case 31:return de("Activity");default:return""}}function St(r){try{var a="",c=null;do a+=mt(r,c),c=r,r=r.return;while(r);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var gt=Object.prototype.hasOwnProperty,yt=n.unstable_scheduleCallback,_e=n.unstable_cancelCallback,xt=n.unstable_shouldYield,ut=n.unstable_requestPaint,ot=n.unstable_now,dn=n.unstable_getCurrentPriorityLevel,lr=n.unstable_ImmediatePriority,zs=n.unstable_UserBlockingPriority,Qr=n.unstable_NormalPriority,Yl=n.unstable_LowPriority,Fl=n.unstable_IdlePriority,Ak=n.log,Ek=n.unstable_setDisableYieldValue,Ka=null,wi=null;function cr(r){if(typeof Ak=="function"&&Ek(r),wi&&typeof wi.setStrictMode=="function")try{wi.setStrictMode(Ka,r)}catch{}}var _i=Math.clz32?Math.clz32:Dk,Mk=Math.log,Ok=Math.LN2;function Dk(r){return r>>>=0,r===0?32:31-(Mk(r)/Ok|0)|0}var Kl=256,Xl=262144,Ql=4194304;function Zr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Zl(r,a,c){var h=r.pendingLanes;if(h===0)return 0;var m=0,v=r.suspendedLanes,M=r.pingedLanes;r=r.warmLanes;var z=h&134217727;return z!==0?(h=z&~v,h!==0?m=Zr(h):(M&=z,M!==0?m=Zr(M):c||(c=z&~r,c!==0&&(m=Zr(c))))):(z=h&~v,z!==0?m=Zr(z):M!==0?m=Zr(M):c||(c=h&~r,c!==0&&(m=Zr(c)))),m===0?0:a!==0&&a!==m&&(a&v)===0&&(v=m&-m,c=a&-a,v>=c||v===32&&(c&4194048)!==0)?a:m}function Xa(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Rk(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K0(){var r=Ql;return Ql<<=1,(Ql&62914560)===0&&(Ql=4194304),r}function Xh(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Qa(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nk(r,a,c,h,m,v){var M=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var z=r.entanglements,P=r.expirationTimes,J=r.hiddenUpdates;for(c=M&~c;0<c;){var se=31-_i(c),le=1<<se;z[se]=0,P[se]=-1;var ee=J[se];if(ee!==null)for(J[se]=null,se=0;se<ee.length;se++){var ie=ee[se];ie!==null&&(ie.lane&=-536870913)}c&=~le}h!==0&&X0(r,h,0),v!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=v&~(M&~a))}function X0(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var h=31-_i(a);r.entangledLanes|=a,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function Q0(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var h=31-_i(c),m=1<<h;m&a|r[h]&a&&(r[h]|=a),c&=~m}}function Z0(r,a){var c=a&-a;return c=(c&42)!==0?1:Qh(c),(c&(r.suspendedLanes|a))!==0?0:c}function Qh(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Zh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function J0(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:j1(r.type))}function ey(r,a){var c=ne.p;try{return ne.p=r,a()}finally{ne.p=c}}var ur=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ur,ci="__reactProps$"+ur,$s="__reactContainer$"+ur,Jh="__reactEvents$"+ur,zk="__reactListeners$"+ur,$k="__reactHandles$"+ur,ty="__reactResources$"+ur,Za="__reactMarker$"+ur;function ed(r){delete r[Vt],delete r[ci],delete r[Jh],delete r[zk],delete r[$k]}function Bs(r){var a=r[Vt];if(a)return a;for(var c=r.parentNode;c;){if(a=c[$s]||c[Vt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=w1(r);r!==null;){if(c=r[Vt])return c;r=w1(r)}return a}r=c,c=r.parentNode}return null}function Ls(r){if(r=r[Vt]||r[$s]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Ja(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function js(r){var a=r[ty];return a||(a=r[ty]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Pt(r){r[Za]=!0}var iy=new Set,ny={};function Jr(r,a){Ps(r,a),Ps(r+"Capture",a)}function Ps(r,a){for(ny[r]=a,r=0;r<a.length;r++)iy.add(a[r])}var Bk=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ry={},sy={};function Lk(r){return gt.call(sy,r)?!0:gt.call(ry,r)?!1:Bk.test(r)?sy[r]=!0:(ry[r]=!0,!1)}function Jl(r,a,c){if(Lk(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function ec(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function Nn(r,a,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+h)}}function Li(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ay(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function jk(r,a,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,v=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(M){c=""+M,v.call(this,M)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function td(r){if(!r._valueTracker){var a=ay(r)?"checked":"value";r._valueTracker=jk(r,a,""+r[a])}}function oy(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return r&&(h=ay(r)?r.checked?"true":"false":r.value),r=h,r!==c?(a.setValue(r),!0):!1}function tc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Pk=/[\n"\\]/g;function ji(r){return r.replace(Pk,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function id(r,a,c,h,m,v,M,z){r.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.type=M:r.removeAttribute("type"),a!=null?M==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Li(a)):r.value!==""+Li(a)&&(r.value=""+Li(a)):M!=="submit"&&M!=="reset"||r.removeAttribute("value"),a!=null?nd(r,M,Li(a)):c!=null?nd(r,M,Li(c)):h!=null&&r.removeAttribute("value"),m==null&&v!=null&&(r.defaultChecked=!!v),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.name=""+Li(z):r.removeAttribute("name")}function ly(r,a,c,h,m,v,M,z){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),a!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){td(r);return}c=c!=null?""+Li(c):"",a=a!=null?""+Li(a):c,z||a===r.value||(r.value=a),r.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=z?r.checked:!!h,r.defaultChecked=!!h,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.name=M),td(r)}function nd(r,a,c){a==="number"&&tc(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function qs(r,a,c,h){if(r=r.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<r.length;c++)m=a.hasOwnProperty("$"+r[c].value),r[c].selected!==m&&(r[c].selected=m),m&&h&&(r[c].defaultSelected=!0)}else{for(c=""+Li(c),a=null,m=0;m<r.length;m++){if(r[m].value===c){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function cy(r,a,c){if(a!=null&&(a=""+Li(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+Li(c):""}function uy(r,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(fe(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=Li(a),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),td(r)}function Hs(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var qk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fy(r,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":h?r.setProperty(a,c):typeof c!="number"||c===0||qk.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function hy(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&c[m]!==h&&fy(r,m,h)}else for(var v in a)a.hasOwnProperty(v)&&fy(r,v,a[v])}function rd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ic(r){return Uk.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function zn(){}var sd=null;function ad(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Us=null,Vs=null;function dy(r){var a=Ls(r);if(a&&(r=a.stateNode)){var c=r[ci]||null;e:switch(r=a.stateNode,a.type){case"input":if(id(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ji(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==r&&h.form===r.form){var m=h[ci]||null;if(!m)throw Error(i(90));id(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===r.form&&oy(h)}break e;case"textarea":cy(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&qs(r,!!c.multiple,a,!1)}}}var od=!1;function py(r,a,c){if(od)return r(a,c);od=!0;try{var h=r(a);return h}finally{if(od=!1,(Us!==null||Vs!==null)&&(Vc(),Us&&(a=Us,r=Vs,Vs=Us=null,dy(a),r)))for(a=0;a<r.length;a++)dy(r[a])}}function eo(r,a){var c=r.stateNode;if(c===null)return null;var h=c[ci]||null;if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=!1;if($n)try{var to={};Object.defineProperty(to,"passive",{get:function(){ld=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{ld=!1}var fr=null,cd=null,nc=null;function my(){if(nc)return nc;var r,a=cd,c=a.length,h,m="value"in fr?fr.value:fr.textContent,v=m.length;for(r=0;r<c&&a[r]===m[r];r++);var M=c-r;for(h=1;h<=M&&a[c-h]===m[v-h];h++);return nc=m.slice(r,1<h?1-h:void 0)}function rc(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function sc(){return!0}function gy(){return!1}function ui(r){function a(c,h,m,v,M){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=M,this.currentTarget=null;for(var z in r)r.hasOwnProperty(z)&&(c=r[z],this[z]=c?c(v):v[z]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?sc:gy,this.isPropagationStopped=gy,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),a}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=ui(es),io=g({},es,{view:0,detail:0}),Vk=ui(io),ud,fd,no,oc=g({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==no&&(no&&r.type==="mousemove"?(ud=r.screenX-no.screenX,fd=r.screenY-no.screenY):fd=ud=0,no=r),ud)},movementY:function(r){return"movementY"in r?r.movementY:fd}}),yy=ui(oc),Ik=g({},oc,{dataTransfer:0}),Wk=ui(Ik),Gk=g({},io,{relatedTarget:0}),hd=ui(Gk),Yk=g({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Fk=ui(Yk),Kk=g({},es,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Xk=ui(Kk),Qk=g({},es,{data:0}),vy=ui(Qk),Zk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tA(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=eA[r])?!!a[r]:!1}function dd(){return tA}var iA=g({},io,{key:function(r){if(r.key){var a=Zk[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=rc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(r){return r.type==="keypress"?rc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?rc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),nA=ui(iA),rA=g({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),by=ui(rA),sA=g({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),aA=ui(sA),oA=g({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),lA=ui(oA),cA=g({},oc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),uA=ui(cA),fA=g({},es,{newState:0,oldState:0}),hA=ui(fA),dA=[9,13,27,32],pd=$n&&"CompositionEvent"in window,ro=null;$n&&"documentMode"in document&&(ro=document.documentMode);var pA=$n&&"TextEvent"in window&&!ro,Sy=$n&&(!pd||ro&&8<ro&&11>=ro),xy=" ",wy=!1;function _y(r,a){switch(r){case"keyup":return dA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ty(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Is=!1;function mA(r,a){switch(r){case"compositionend":return Ty(a);case"keypress":return a.which!==32?null:(wy=!0,xy);case"textInput":return r=a.data,r===xy&&wy?null:r;default:return null}}function gA(r,a){if(Is)return r==="compositionend"||!pd&&_y(r,a)?(r=my(),nc=cd=fr=null,Is=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Sy&&a.locale!=="ko"?null:a.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!yA[r.type]:a==="textarea"}function ky(r,a,c,h){Us?Vs?Vs.push(h):Vs=[h]:Us=h,a=Xc(a,"onChange"),0<a.length&&(c=new ac("onChange","change",null,c,h),r.push({event:c,listeners:a}))}var so=null,ao=null;function vA(r){l1(r,0)}function lc(r){var a=Ja(r);if(oy(a))return r}function Ay(r,a){if(r==="change")return a}var Ey=!1;if($n){var md;if($n){var gd="oninput"in document;if(!gd){var My=document.createElement("div");My.setAttribute("oninput","return;"),gd=typeof My.oninput=="function"}md=gd}else md=!1;Ey=md&&(!document.documentMode||9<document.documentMode)}function Oy(){so&&(so.detachEvent("onpropertychange",Dy),ao=so=null)}function Dy(r){if(r.propertyName==="value"&&lc(ao)){var a=[];ky(a,ao,r,ad(r)),py(vA,a)}}function bA(r,a,c){r==="focusin"?(Oy(),so=a,ao=c,so.attachEvent("onpropertychange",Dy)):r==="focusout"&&Oy()}function SA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return lc(ao)}function xA(r,a){if(r==="click")return lc(a)}function wA(r,a){if(r==="input"||r==="change")return lc(a)}function _A(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Ti=typeof Object.is=="function"?Object.is:_A;function oo(r,a){if(Ti(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!gt.call(a,m)||!Ti(r[m],a[m]))return!1}return!0}function Ry(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ny(r,a){var c=Ry(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=a&&h>=a)return{node:c,offset:a-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ry(c)}}function zy(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?zy(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function $y(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=tc(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=tc(r.document)}return a}function yd(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var TA=$n&&"documentMode"in document&&11>=document.documentMode,Ws=null,vd=null,lo=null,bd=!1;function By(r,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;bd||Ws==null||Ws!==tc(h)||(h=Ws,"selectionStart"in h&&yd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),lo&&oo(lo,h)||(lo=h,h=Xc(vd,"onSelect"),0<h.length&&(a=new ac("onSelect","select",null,a,c),r.push({event:a,listeners:h}),a.target=Ws)))}function ts(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var Gs={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Sd={},Ly={};$n&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function is(r){if(Sd[r])return Sd[r];if(!Gs[r])return r;var a=Gs[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in Ly)return Sd[r]=a[c];return r}var jy=is("animationend"),Py=is("animationiteration"),qy=is("animationstart"),CA=is("transitionrun"),kA=is("transitionstart"),AA=is("transitioncancel"),Hy=is("transitionend"),Uy=new Map,xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xd.push("scrollEnd");function en(r,a){Uy.set(r,a),Jr(a,[r])}var cc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Pi=[],Ys=0,wd=0;function uc(){for(var r=Ys,a=wd=Ys=0;a<r;){var c=Pi[a];Pi[a++]=null;var h=Pi[a];Pi[a++]=null;var m=Pi[a];Pi[a++]=null;var v=Pi[a];if(Pi[a++]=null,h!==null&&m!==null){var M=h.pending;M===null?m.next=m:(m.next=M.next,M.next=m),h.pending=m}v!==0&&Vy(c,m,v)}}function fc(r,a,c,h){Pi[Ys++]=r,Pi[Ys++]=a,Pi[Ys++]=c,Pi[Ys++]=h,wd|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function _d(r,a,c,h){return fc(r,a,c,h),hc(r)}function ns(r,a){return fc(r,null,null,a),hc(r)}function Vy(r,a,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var m=!1,v=r.return;v!==null;)v.childLanes|=c,h=v.alternate,h!==null&&(h.childLanes|=c),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(m=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,m&&a!==null&&(m=31-_i(c),r=v.hiddenUpdates,h=r[m],h===null?r[m]=[a]:h.push(a),a.lane=c|536870912),v):null}function hc(r){if(50<Do)throw Do=0,Rp=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Fs={};function EA(r,a,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(r,a,c,h){return new EA(r,a,c,h)}function Td(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Bn(r,a){var c=r.alternate;return c===null?(c=Ci(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Iy(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function dc(r,a,c,h,m,v){var M=0;if(h=r,typeof r=="function")Td(r)&&(M=1);else if(typeof r=="string")M=NE(r,c,R.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case $:return r=Ci(31,c,a,m),r.elementType=$,r.lanes=v,r;case C:return rs(c.children,m,v,a);case x:M=8,m|=24;break;case _:return r=Ci(12,c,a,m|2),r.elementType=_,r.lanes=v,r;case k:return r=Ci(13,c,a,m),r.elementType=k,r.lanes=v,r;case O:return r=Ci(19,c,a,m),r.elementType=O,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:M=10;break e;case w:M=9;break e;case E:M=11;break e;case A:M=14;break e;case N:M=16,h=null;break e}M=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return a=Ci(M,c,a,m),a.elementType=r,a.type=h,a.lanes=v,a}function rs(r,a,c,h){return r=Ci(7,r,h,a),r.lanes=c,r}function Cd(r,a,c){return r=Ci(6,r,null,a),r.lanes=c,r}function Wy(r){var a=Ci(18,null,null,0);return a.stateNode=r,a}function kd(r,a,c){return a=Ci(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Gy=new WeakMap;function qi(r,a){if(typeof r=="object"&&r!==null){var c=Gy.get(r);return c!==void 0?c:(a={value:r,source:a,stack:St(a)},Gy.set(r,a),a)}return{value:r,source:a,stack:St(a)}}var Ks=[],Xs=0,pc=null,co=0,Hi=[],Ui=0,hr=null,pn=1,mn="";function Ln(r,a){Ks[Xs++]=co,Ks[Xs++]=pc,pc=r,co=a}function Yy(r,a,c){Hi[Ui++]=pn,Hi[Ui++]=mn,Hi[Ui++]=hr,hr=r;var h=pn;r=mn;var m=32-_i(h)-1;h&=~(1<<m),c+=1;var v=32-_i(a)+m;if(30<v){var M=m-m%5;v=(h&(1<<M)-1).toString(32),h>>=M,m-=M,pn=1<<32-_i(a)+m|c<<m|h,mn=v+r}else pn=1<<v|c<<m|h,mn=r}function Ad(r){r.return!==null&&(Ln(r,1),Yy(r,1,0))}function Ed(r){for(;r===pc;)pc=Ks[--Xs],Ks[Xs]=null,co=Ks[--Xs],Ks[Xs]=null;for(;r===hr;)hr=Hi[--Ui],Hi[Ui]=null,mn=Hi[--Ui],Hi[Ui]=null,pn=Hi[--Ui],Hi[Ui]=null}function Fy(r,a){Hi[Ui++]=pn,Hi[Ui++]=mn,Hi[Ui++]=hr,pn=a.id,mn=a.overflow,hr=r}var It=null,ft=null,Ie=!1,dr=null,Vi=!1,Md=Error(i(519));function pr(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uo(qi(a,r)),Md}function Ky(r){var a=r.stateNode,c=r.type,h=r.memoizedProps;switch(a[Vt]=r,a[ci]=h,c){case"dialog":Pe("cancel",a),Pe("close",a);break;case"iframe":case"object":case"embed":Pe("load",a);break;case"video":case"audio":for(c=0;c<No.length;c++)Pe(No[c],a);break;case"source":Pe("error",a);break;case"img":case"image":case"link":Pe("error",a),Pe("load",a);break;case"details":Pe("toggle",a);break;case"input":Pe("invalid",a),ly(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Pe("invalid",a);break;case"textarea":Pe("invalid",a),uy(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||h1(a.textContent,c)?(h.popover!=null&&(Pe("beforetoggle",a),Pe("toggle",a)),h.onScroll!=null&&Pe("scroll",a),h.onScrollEnd!=null&&Pe("scrollend",a),h.onClick!=null&&(a.onclick=zn),a=!0):a=!1,a||pr(r,!0)}function Xy(r){for(It=r.return;It;)switch(It.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:It=It.return}}function Qs(r){if(r!==It)return!1;if(!Ie)return Xy(r),Ie=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Yp(r.type,r.memoizedProps)),c=!c),c&&ft&&pr(r),Xy(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ft=x1(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ft=x1(r)}else a===27?(a=ft,Er(r.type)?(r=Zp,Zp=null,ft=r):ft=a):ft=It?Wi(r.stateNode.nextSibling):null;return!0}function ss(){ft=It=null,Ie=!1}function Od(){var r=dr;return r!==null&&(pi===null?pi=r:pi.push.apply(pi,r),dr=null),r}function uo(r){dr===null?dr=[r]:dr.push(r)}var Dd=D(null),as=null,jn=null;function mr(r,a,c){j(Dd,a._currentValue),a._currentValue=c}function Pn(r){r._currentValue=Dd.current,L(Dd)}function Rd(r,a,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===c)break;r=r.return}}function Nd(r,a,c,h){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var v=m.dependencies;if(v!==null){var M=m.child;v=v.firstContext;e:for(;v!==null;){var z=v;v=m;for(var P=0;P<a.length;P++)if(z.context===a[P]){v.lanes|=c,z=v.alternate,z!==null&&(z.lanes|=c),Rd(v.return,c,r),h||(M=null);break e}v=z.next}}else if(m.tag===18){if(M=m.return,M===null)throw Error(i(341));M.lanes|=c,v=M.alternate,v!==null&&(v.lanes|=c),Rd(M,c,r),M=null}else M=m.child;if(M!==null)M.return=m;else for(M=m;M!==null;){if(M===r){M=null;break}if(m=M.sibling,m!==null){m.return=M.return,M=m;break}M=M.return}m=M}}function Zs(r,a,c,h){r=null;for(var m=a,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var M=m.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var z=m.type;Ti(m.pendingProps.value,M.value)||(r!==null?r.push(z):r=[z])}}else if(m===he.current){if(M=m.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(jo):r=[jo])}m=m.return}r!==null&&Nd(a,r,c,h),a.flags|=262144}function mc(r){for(r=r.firstContext;r!==null;){if(!Ti(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function os(r){as=r,jn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Wt(r){return Qy(as,r)}function gc(r,a){return as===null&&os(r),Qy(r,a)}function Qy(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},jn===null){if(r===null)throw Error(i(308));jn=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else jn=jn.next=a;return c}var MA=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},OA=n.unstable_scheduleCallback,DA=n.unstable_NormalPriority,At={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new MA,data:new Map,refCount:0}}function fo(r){r.refCount--,r.refCount===0&&OA(DA,function(){r.controller.abort()})}var ho=null,$d=0,Js=0,ea=null;function RA(r,a){if(ho===null){var c=ho=[];$d=0,Js=jp(),ea={status:"pending",value:void 0,then:function(h){c.push(h)}}}return $d++,a.then(Zy,Zy),a}function Zy(){if(--$d===0&&ho!==null){ea!==null&&(ea.status="fulfilled");var r=ho;ho=null,Js=0,ea=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function NA(r,a){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return r.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var Jy=I.S;I.S=function(r,a){Bb=ot(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&RA(r,a),Jy!==null&&Jy(r,a)};var ls=D(null);function Bd(){var r=ls.current;return r!==null?r:nt.pooledCache}function yc(r,a){a===null?j(ls,ls.current):j(ls,a.pool)}function ev(){var r=Bd();return r===null?null:{parent:At._currentValue,pool:r}}var ta=Error(i(460)),Ld=Error(i(474)),vc=Error(i(542)),bc={then:function(){}};function tv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function iv(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(zn,zn),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,rv(r),r;default:if(typeof a.status=="string")a.then(zn,zn);else{if(r=nt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,rv(r),r}throw us=a,ta}}function cs(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(us=c,ta):c}}var us=null;function nv(){if(us===null)throw Error(i(459));var r=us;return us=null,r}function rv(r){if(r===ta||r===vc)throw Error(i(483))}var ia=null,po=0;function Sc(r){var a=po;return po+=1,ia===null&&(ia=[]),iv(ia,r,a)}function mo(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function xc(r,a){throw a.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function sv(r){function a(Y,U){if(r){var Z=Y.deletions;Z===null?(Y.deletions=[U],Y.flags|=16):Z.push(U)}}function c(Y,U){if(!r)return null;for(;U!==null;)a(Y,U),U=U.sibling;return null}function h(Y){for(var U=new Map;Y!==null;)Y.key!==null?U.set(Y.key,Y):U.set(Y.index,Y),Y=Y.sibling;return U}function m(Y,U){return Y=Bn(Y,U),Y.index=0,Y.sibling=null,Y}function v(Y,U,Z){return Y.index=Z,r?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<U?(Y.flags|=67108866,U):Z):(Y.flags|=67108866,U)):(Y.flags|=1048576,U)}function M(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function z(Y,U,Z,ae){return U===null||U.tag!==6?(U=Cd(Z,Y.mode,ae),U.return=Y,U):(U=m(U,Z),U.return=Y,U)}function P(Y,U,Z,ae){var ke=Z.type;return ke===C?se(Y,U,Z.props.children,ae,Z.key):U!==null&&(U.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===N&&cs(ke)===U.type)?(U=m(U,Z.props),mo(U,Z),U.return=Y,U):(U=dc(Z.type,Z.key,Z.props,null,Y.mode,ae),mo(U,Z),U.return=Y,U)}function J(Y,U,Z,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==Z.containerInfo||U.stateNode.implementation!==Z.implementation?(U=kd(Z,Y.mode,ae),U.return=Y,U):(U=m(U,Z.children||[]),U.return=Y,U)}function se(Y,U,Z,ae,ke){return U===null||U.tag!==7?(U=rs(Z,Y.mode,ae,ke),U.return=Y,U):(U=m(U,Z),U.return=Y,U)}function le(Y,U,Z){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Cd(""+U,Y.mode,Z),U.return=Y,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return Z=dc(U.type,U.key,U.props,null,Y.mode,Z),mo(Z,U),Z.return=Y,Z;case S:return U=kd(U,Y.mode,Z),U.return=Y,U;case N:return U=cs(U),le(Y,U,Z)}if(fe(U)||H(U))return U=rs(U,Y.mode,Z,null),U.return=Y,U;if(typeof U.then=="function")return le(Y,Sc(U),Z);if(U.$$typeof===T)return le(Y,gc(Y,U),Z);xc(Y,U)}return null}function ee(Y,U,Z,ae){var ke=U!==null?U.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ke!==null?null:z(Y,U,""+Z,ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return Z.key===ke?P(Y,U,Z,ae):null;case S:return Z.key===ke?J(Y,U,Z,ae):null;case N:return Z=cs(Z),ee(Y,U,Z,ae)}if(fe(Z)||H(Z))return ke!==null?null:se(Y,U,Z,ae,null);if(typeof Z.then=="function")return ee(Y,U,Sc(Z),ae);if(Z.$$typeof===T)return ee(Y,U,gc(Y,Z),ae);xc(Y,Z)}return null}function ie(Y,U,Z,ae,ke){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Y=Y.get(Z)||null,z(U,Y,""+ae,ke);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return Y=Y.get(ae.key===null?Z:ae.key)||null,P(U,Y,ae,ke);case S:return Y=Y.get(ae.key===null?Z:ae.key)||null,J(U,Y,ae,ke);case N:return ae=cs(ae),ie(Y,U,Z,ae,ke)}if(fe(ae)||H(ae))return Y=Y.get(Z)||null,se(U,Y,ae,ke,null);if(typeof ae.then=="function")return ie(Y,U,Z,Sc(ae),ke);if(ae.$$typeof===T)return ie(Y,U,Z,gc(U,ae),ke);xc(U,ae)}return null}function we(Y,U,Z,ae){for(var ke=null,Ye=null,Te=U,$e=U=0,He=null;Te!==null&&$e<Z.length;$e++){Te.index>$e?(He=Te,Te=null):He=Te.sibling;var Fe=ee(Y,Te,Z[$e],ae);if(Fe===null){Te===null&&(Te=He);break}r&&Te&&Fe.alternate===null&&a(Y,Te),U=v(Fe,U,$e),Ye===null?ke=Fe:Ye.sibling=Fe,Ye=Fe,Te=He}if($e===Z.length)return c(Y,Te),Ie&&Ln(Y,$e),ke;if(Te===null){for(;$e<Z.length;$e++)Te=le(Y,Z[$e],ae),Te!==null&&(U=v(Te,U,$e),Ye===null?ke=Te:Ye.sibling=Te,Ye=Te);return Ie&&Ln(Y,$e),ke}for(Te=h(Te);$e<Z.length;$e++)He=ie(Te,Y,$e,Z[$e],ae),He!==null&&(r&&He.alternate!==null&&Te.delete(He.key===null?$e:He.key),U=v(He,U,$e),Ye===null?ke=He:Ye.sibling=He,Ye=He);return r&&Te.forEach(function(Nr){return a(Y,Nr)}),Ie&&Ln(Y,$e),ke}function Ee(Y,U,Z,ae){if(Z==null)throw Error(i(151));for(var ke=null,Ye=null,Te=U,$e=U=0,He=null,Fe=Z.next();Te!==null&&!Fe.done;$e++,Fe=Z.next()){Te.index>$e?(He=Te,Te=null):He=Te.sibling;var Nr=ee(Y,Te,Fe.value,ae);if(Nr===null){Te===null&&(Te=He);break}r&&Te&&Nr.alternate===null&&a(Y,Te),U=v(Nr,U,$e),Ye===null?ke=Nr:Ye.sibling=Nr,Ye=Nr,Te=He}if(Fe.done)return c(Y,Te),Ie&&Ln(Y,$e),ke;if(Te===null){for(;!Fe.done;$e++,Fe=Z.next())Fe=le(Y,Fe.value,ae),Fe!==null&&(U=v(Fe,U,$e),Ye===null?ke=Fe:Ye.sibling=Fe,Ye=Fe);return Ie&&Ln(Y,$e),ke}for(Te=h(Te);!Fe.done;$e++,Fe=Z.next())Fe=ie(Te,Y,$e,Fe.value,ae),Fe!==null&&(r&&Fe.alternate!==null&&Te.delete(Fe.key===null?$e:Fe.key),U=v(Fe,U,$e),Ye===null?ke=Fe:Ye.sibling=Fe,Ye=Fe);return r&&Te.forEach(function(IE){return a(Y,IE)}),Ie&&Ln(Y,$e),ke}function it(Y,U,Z,ae){if(typeof Z=="object"&&Z!==null&&Z.type===C&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:e:{for(var ke=Z.key;U!==null;){if(U.key===ke){if(ke=Z.type,ke===C){if(U.tag===7){c(Y,U.sibling),ae=m(U,Z.props.children),ae.return=Y,Y=ae;break e}}else if(U.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===N&&cs(ke)===U.type){c(Y,U.sibling),ae=m(U,Z.props),mo(ae,Z),ae.return=Y,Y=ae;break e}c(Y,U);break}else a(Y,U);U=U.sibling}Z.type===C?(ae=rs(Z.props.children,Y.mode,ae,Z.key),ae.return=Y,Y=ae):(ae=dc(Z.type,Z.key,Z.props,null,Y.mode,ae),mo(ae,Z),ae.return=Y,Y=ae)}return M(Y);case S:e:{for(ke=Z.key;U!==null;){if(U.key===ke)if(U.tag===4&&U.stateNode.containerInfo===Z.containerInfo&&U.stateNode.implementation===Z.implementation){c(Y,U.sibling),ae=m(U,Z.children||[]),ae.return=Y,Y=ae;break e}else{c(Y,U);break}else a(Y,U);U=U.sibling}ae=kd(Z,Y.mode,ae),ae.return=Y,Y=ae}return M(Y);case N:return Z=cs(Z),it(Y,U,Z,ae)}if(fe(Z))return we(Y,U,Z,ae);if(H(Z)){if(ke=H(Z),typeof ke!="function")throw Error(i(150));return Z=ke.call(Z),Ee(Y,U,Z,ae)}if(typeof Z.then=="function")return it(Y,U,Sc(Z),ae);if(Z.$$typeof===T)return it(Y,U,gc(Y,Z),ae);xc(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,U!==null&&U.tag===6?(c(Y,U.sibling),ae=m(U,Z),ae.return=Y,Y=ae):(c(Y,U),ae=Cd(Z,Y.mode,ae),ae.return=Y,Y=ae),M(Y)):c(Y,U)}return function(Y,U,Z,ae){try{po=0;var ke=it(Y,U,Z,ae);return ia=null,ke}catch(Te){if(Te===ta||Te===vc)throw Te;var Ye=Ci(29,Te,null,Y.mode);return Ye.lanes=ae,Ye.return=Y,Ye}finally{}}}var fs=sv(!0),av=sv(!1),gr=!1;function jd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function yr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function vr(r,a,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Xe&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=hc(r),Vy(r,null,c),a}return fc(r,h,a,c),hc(r)}function go(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Q0(r,c)}}function qd(r,a){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?m=v=M:v=v.next=M,c=c.next}while(c!==null);v===null?m=v=a:v=v.next=a}else m=v=a;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var Hd=!1;function yo(){if(Hd){var r=ea;if(r!==null)throw r}}function vo(r,a,c,h){Hd=!1;var m=r.updateQueue;gr=!1;var v=m.firstBaseUpdate,M=m.lastBaseUpdate,z=m.shared.pending;if(z!==null){m.shared.pending=null;var P=z,J=P.next;P.next=null,M===null?v=J:M.next=J,M=P;var se=r.alternate;se!==null&&(se=se.updateQueue,z=se.lastBaseUpdate,z!==M&&(z===null?se.firstBaseUpdate=J:z.next=J,se.lastBaseUpdate=P))}if(v!==null){var le=m.baseState;M=0,se=J=P=null,z=v;do{var ee=z.lane&-536870913,ie=ee!==z.lane;if(ie?(qe&ee)===ee:(h&ee)===ee){ee!==0&&ee===Js&&(Hd=!0),se!==null&&(se=se.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var we=r,Ee=z;ee=a;var it=c;switch(Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){le=we.call(it,le,ee);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,ee=typeof we=="function"?we.call(it,le,ee):we,ee==null)break e;le=g({},le,ee);break e;case 2:gr=!0}}ee=z.callback,ee!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=m.callbacks,ie===null?m.callbacks=[ee]:ie.push(ee))}else ie={lane:ee,tag:z.tag,payload:z.payload,callback:z.callback,next:null},se===null?(J=se=ie,P=le):se=se.next=ie,M|=ee;if(z=z.next,z===null){if(z=m.shared.pending,z===null)break;ie=z,z=ie.next,ie.next=null,m.lastBaseUpdate=ie,m.shared.pending=null}}while(!0);se===null&&(P=le),m.baseState=P,m.firstBaseUpdate=J,m.lastBaseUpdate=se,v===null&&(m.shared.lanes=0),_r|=M,r.lanes=M,r.memoizedState=le}}function ov(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function lv(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)ov(c[r],a)}var na=D(null),wc=D(0);function cv(r,a){r=Fn,j(wc,r),j(na,a),Fn=r|a.baseLanes}function Ud(){j(wc,Fn),j(na,na.current)}function Vd(){Fn=wc.current,L(na),L(wc)}var ki=D(null),Ii=null;function br(r){var a=r.alternate;j(wt,wt.current&1),j(ki,r),Ii===null&&(a===null||na.current!==null||a.memoizedState!==null)&&(Ii=r)}function Id(r){j(wt,wt.current),j(ki,r),Ii===null&&(Ii=r)}function uv(r){r.tag===22?(j(wt,wt.current),j(ki,r),Ii===null&&(Ii=r)):Sr()}function Sr(){j(wt,wt.current),j(ki,ki.current)}function Ai(r){L(ki),Ii===r&&(Ii=null),L(wt)}var wt=D(0);function _c(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Xp(c)||Qp(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qn=0,Ne=null,et=null,Et=null,Tc=!1,ra=!1,hs=!1,Cc=0,bo=0,sa=null,zA=0;function vt(){throw Error(i(321))}function Wd(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Ti(r[c],a[c]))return!1;return!0}function Gd(r,a,c,h,m,v){return qn=v,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,I.H=r===null||r.memoizedState===null?Yv:op,hs=!1,v=c(h,m),hs=!1,ra&&(v=hv(a,c,h,m)),fv(r),v}function fv(r){I.H=wo;var a=et!==null&&et.next!==null;if(qn=0,Et=et=Ne=null,Tc=!1,bo=0,sa=null,a)throw Error(i(300));r===null||Mt||(r=r.dependencies,r!==null&&mc(r)&&(Mt=!0))}function hv(r,a,c,h){Ne=r;var m=0;do{if(ra&&(sa=null),bo=0,ra=!1,25<=m)throw Error(i(301));if(m+=1,Et=et=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}I.H=Fv,v=a(c,h)}while(ra);return v}function $A(){var r=I.H,a=r.useState()[0];return a=typeof a.then=="function"?So(a):a,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(Ne.flags|=1024),a}function Yd(){var r=Cc!==0;return Cc=0,r}function Fd(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Kd(r){if(Tc){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Tc=!1}qn=0,Et=et=Ne=null,ra=!1,bo=Cc=0,sa=null}function ni(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ne.memoizedState=Et=r:Et=Et.next=r,Et}function _t(){if(et===null){var r=Ne.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var a=Et===null?Ne.memoizedState:Et.next;if(a!==null)Et=a,et=r;else{if(r===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Et===null?Ne.memoizedState=Et=r:Et=Et.next=r}return Et}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(r){var a=bo;return bo+=1,sa===null&&(sa=[]),r=iv(sa,r,a),a=Ne,(Et===null?a.memoizedState:Et.next)===null&&(a=a.alternate,I.H=a===null||a.memoizedState===null?Yv:op),r}function Ac(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return So(r);if(r.$$typeof===T)return Wt(r)}throw Error(i(438,String(r)))}function Xd(r){var a=null,c=Ne.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Ne.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=kc(),Ne.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),h=0;h<r;h++)c[h]=V;return a.index++,c}function Hn(r,a){return typeof a=="function"?a(r):a}function Ec(r){var a=_t();return Qd(a,et,r)}function Qd(r,a,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=r.baseQueue,v=h.pending;if(v!==null){if(m!==null){var M=m.next;m.next=v.next,v.next=M}a.baseQueue=m=v,h.pending=null}if(v=r.baseState,m===null)r.memoizedState=v;else{a=m.next;var z=M=null,P=null,J=a,se=!1;do{var le=J.lane&-536870913;if(le!==J.lane?(qe&le)===le:(qn&le)===le){var ee=J.revertLane;if(ee===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),le===Js&&(se=!0);else if((qn&ee)===ee){J=J.next,ee===Js&&(se=!0);continue}else le={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(z=P=le,M=v):P=P.next=le,Ne.lanes|=ee,_r|=ee;le=J.action,hs&&c(v,le),v=J.hasEagerState?J.eagerState:c(v,le)}else ee={lane:le,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(z=P=ee,M=v):P=P.next=ee,Ne.lanes|=le,_r|=le;J=J.next}while(J!==null&&J!==a);if(P===null?M=v:P.next=z,!Ti(v,r.memoizedState)&&(Mt=!0,se&&(c=ea,c!==null)))throw c;r.memoizedState=v,r.baseState=M,r.baseQueue=P,h.lastRenderedState=v}return m===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Zd(r){var a=_t(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,m=c.pending,v=a.memoizedState;if(m!==null){c.pending=null;var M=m=m.next;do v=r(v,M.action),M=M.next;while(M!==m);Ti(v,a.memoizedState)||(Mt=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),c.lastRenderedState=v}return[v,h]}function dv(r,a,c){var h=Ne,m=_t(),v=Ie;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=a();var M=!Ti((et||m).memoizedState,c);if(M&&(m.memoizedState=c,Mt=!0),m=m.queue,tp(gv.bind(null,h,m,r),[r]),m.getSnapshot!==a||M||Et!==null&&Et.memoizedState.tag&1){if(h.flags|=2048,aa(9,{destroy:void 0},mv.bind(null,h,m,c,a),null),nt===null)throw Error(i(349));v||(qn&127)!==0||pv(h,a,c)}return c}function pv(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Ne.updateQueue,a===null?(a=kc(),Ne.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function mv(r,a,c,h){a.value=c,a.getSnapshot=h,yv(a)&&vv(r)}function gv(r,a,c){return c(function(){yv(a)&&vv(r)})}function yv(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Ti(r,c)}catch{return!0}}function vv(r){var a=ns(r,2);a!==null&&mi(a,r,2)}function Jd(r){var a=ni();if(typeof r=="function"){var c=r;if(r=c(),hs){cr(!0);try{c()}finally{cr(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:r},a}function bv(r,a,c,h){return r.baseState=c,Qd(r,et,typeof h=="function"?h:Hn)}function BA(r,a,c,h,m){if(Dc(r))throw Error(i(485));if(r=a.action,r!==null){var v={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){v.listeners.push(M)}};I.T!==null?c(!0):v.isTransition=!1,h(v),c=a.pending,c===null?(v.next=a.pending=v,Sv(a,v)):(v.next=c.next,a.pending=c.next=v)}}function Sv(r,a){var c=a.action,h=a.payload,m=r.state;if(a.isTransition){var v=I.T,M={};I.T=M;try{var z=c(m,h),P=I.S;P!==null&&P(M,z),xv(r,a,z)}catch(J){ep(r,a,J)}finally{v!==null&&M.types!==null&&(v.types=M.types),I.T=v}}else try{v=c(m,h),xv(r,a,v)}catch(J){ep(r,a,J)}}function xv(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){wv(r,a,h)},function(h){return ep(r,a,h)}):wv(r,a,c)}function wv(r,a,c){a.status="fulfilled",a.value=c,_v(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,Sv(r,c)))}function ep(r,a,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,_v(a),a=a.next;while(a!==h)}r.action=null}function _v(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Tv(r,a){return a}function Cv(r,a){if(Ie){var c=nt.formState;if(c!==null){e:{var h=Ne;if(Ie){if(ft){t:{for(var m=ft,v=Vi;m.nodeType!==8;){if(!v){m=null;break t}if(m=Wi(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){ft=Wi(m.nextSibling),h=m.data==="F!";break e}}pr(h)}h=!1}h&&(a=c[0])}}return c=ni(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tv,lastRenderedState:a},c.queue=h,c=Iv.bind(null,Ne,h),h.dispatch=c,h=Jd(!1),v=ap.bind(null,Ne,!1,h.queue),h=ni(),m={state:a,dispatch:null,action:r,pending:null},h.queue=m,c=BA.bind(null,Ne,m,v,c),m.dispatch=c,h.memoizedState=r,[a,c,!1]}function kv(r){var a=_t();return Av(a,et,r)}function Av(r,a,c){if(a=Qd(r,a,Tv)[0],r=Ec(Hn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=So(a)}catch(M){throw M===ta?vc:M}else h=a;a=_t();var m=a.queue,v=m.dispatch;return c!==a.memoizedState&&(Ne.flags|=2048,aa(9,{destroy:void 0},LA.bind(null,m,c),null)),[h,v,r]}function LA(r,a){r.action=a}function Ev(r){var a=_t(),c=et;if(c!==null)return Av(a,c,r);_t(),a=a.memoizedState,c=_t();var h=c.queue.dispatch;return c.memoizedState=r,[a,h,!1]}function aa(r,a,c,h){return r={tag:r,create:c,deps:h,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=kc(),Ne.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,a.lastEffect=r),r}function Mv(){return _t().memoizedState}function Mc(r,a,c,h){var m=ni();Ne.flags|=r,m.memoizedState=aa(1|a,{destroy:void 0},c,h===void 0?null:h)}function Oc(r,a,c,h){var m=_t();h=h===void 0?null:h;var v=m.memoizedState.inst;et!==null&&h!==null&&Wd(h,et.memoizedState.deps)?m.memoizedState=aa(a,v,c,h):(Ne.flags|=r,m.memoizedState=aa(1|a,v,c,h))}function Ov(r,a){Mc(8390656,8,r,a)}function tp(r,a){Oc(2048,8,r,a)}function jA(r){Ne.flags|=4;var a=Ne.updateQueue;if(a===null)a=kc(),Ne.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function Dv(r){var a=_t().memoizedState;return jA({ref:a,nextImpl:r}),function(){if((Xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Rv(r,a){return Oc(4,2,r,a)}function Nv(r,a){return Oc(4,4,r,a)}function zv(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function $v(r,a,c){c=c!=null?c.concat([r]):null,Oc(4,4,zv.bind(null,a,r),c)}function ip(){}function Bv(r,a){var c=_t();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Wd(a,h[1])?h[0]:(c.memoizedState=[r,a],r)}function Lv(r,a){var c=_t();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Wd(a,h[1]))return h[0];if(h=r(),hs){cr(!0);try{r()}finally{cr(!1)}}return c.memoizedState=[h,a],h}function np(r,a,c){return c===void 0||(qn&1073741824)!==0&&(qe&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=jb(),Ne.lanes|=r,_r|=r,c)}function jv(r,a,c,h){return Ti(c,a)?c:na.current!==null?(r=np(r,c,h),Ti(r,a)||(Mt=!0),r):(qn&42)===0||(qn&1073741824)!==0&&(qe&261930)===0?(Mt=!0,r.memoizedState=c):(r=jb(),Ne.lanes|=r,_r|=r,a)}function Pv(r,a,c,h,m){var v=ne.p;ne.p=v!==0&&8>v?v:8;var M=I.T,z={};I.T=z,ap(r,!1,a,c);try{var P=m(),J=I.S;if(J!==null&&J(z,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var se=NA(P,h);xo(r,a,se,Oi(r))}else xo(r,a,h,Oi(r))}catch(le){xo(r,a,{then:function(){},status:"rejected",reason:le},Oi())}finally{ne.p=v,M!==null&&z.types!==null&&(M.types=z.types),I.T=M}}function PA(){}function rp(r,a,c,h){if(r.tag!==5)throw Error(i(476));var m=qv(r).queue;Pv(r,m,a,oe,c===null?PA:function(){return Hv(r),c(h)})}function qv(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:oe},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Hv(r){var a=qv(r);a.next===null&&(a=r.alternate.memoizedState),xo(r,a.next.queue,{},Oi())}function sp(){return Wt(jo)}function Uv(){return _t().memoizedState}function Vv(){return _t().memoizedState}function qA(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Oi();r=yr(c);var h=vr(a,r,c);h!==null&&(mi(h,a,c),go(h,a,c)),a={cache:zd()},r.payload=a;return}a=a.return}}function HA(r,a,c){var h=Oi();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dc(r)?Wv(a,c):(c=_d(r,a,c,h),c!==null&&(mi(c,r,h),Gv(c,a,h)))}function Iv(r,a,c){var h=Oi();xo(r,a,c,h)}function xo(r,a,c,h){var m={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dc(r))Wv(a,m);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var M=a.lastRenderedState,z=v(M,c);if(m.hasEagerState=!0,m.eagerState=z,Ti(z,M))return fc(r,a,m,0),nt===null&&uc(),!1}catch{}finally{}if(c=_d(r,a,m,h),c!==null)return mi(c,r,h),Gv(c,a,h),!0}return!1}function ap(r,a,c,h){if(h={lane:2,revertLane:jp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Dc(r)){if(a)throw Error(i(479))}else a=_d(r,c,h,2),a!==null&&mi(a,r,2)}function Dc(r){var a=r.alternate;return r===Ne||a!==null&&a===Ne}function Wv(r,a){ra=Tc=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function Gv(r,a,c){if((c&4194048)!==0){var h=a.lanes;h&=r.pendingLanes,c|=h,a.lanes=c,Q0(r,c)}}var wo={readContext:Wt,use:Ac,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};wo.useEffectEvent=vt;var Yv={readContext:Wt,use:Ac,useCallback:function(r,a){return ni().memoizedState=[r,a===void 0?null:a],r},useContext:Wt,useEffect:Ov,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,Mc(4194308,4,zv.bind(null,a,r),c)},useLayoutEffect:function(r,a){return Mc(4194308,4,r,a)},useInsertionEffect:function(r,a){Mc(4,2,r,a)},useMemo:function(r,a){var c=ni();a=a===void 0?null:a;var h=r();if(hs){cr(!0);try{r()}finally{cr(!1)}}return c.memoizedState=[h,a],h},useReducer:function(r,a,c){var h=ni();if(c!==void 0){var m=c(a);if(hs){cr(!0);try{c(a)}finally{cr(!1)}}}else m=a;return h.memoizedState=h.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},h.queue=r,r=r.dispatch=HA.bind(null,Ne,r),[h.memoizedState,r]},useRef:function(r){var a=ni();return r={current:r},a.memoizedState=r},useState:function(r){r=Jd(r);var a=r.queue,c=Iv.bind(null,Ne,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:ip,useDeferredValue:function(r,a){var c=ni();return np(c,r,a)},useTransition:function(){var r=Jd(!1);return r=Pv.bind(null,Ne,r.queue,!0,!1),ni().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var h=Ne,m=ni();if(Ie){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),nt===null)throw Error(i(349));(qe&127)!==0||pv(h,a,c)}m.memoizedState=c;var v={value:c,getSnapshot:a};return m.queue=v,Ov(gv.bind(null,h,v,r),[r]),h.flags|=2048,aa(9,{destroy:void 0},mv.bind(null,h,v,c,a),null),c},useId:function(){var r=ni(),a=nt.identifierPrefix;if(Ie){var c=mn,h=pn;c=(h&~(1<<32-_i(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Cc++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=zA++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:sp,useFormState:Cv,useActionState:Cv,useOptimistic:function(r){var a=ni();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=ap.bind(null,Ne,!0,c),c.dispatch=a,[r,a]},useMemoCache:Xd,useCacheRefresh:function(){return ni().memoizedState=qA.bind(null,Ne)},useEffectEvent:function(r){var a=ni(),c={impl:r};return a.memoizedState=c,function(){if((Xe&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},op={readContext:Wt,use:Ac,useCallback:Bv,useContext:Wt,useEffect:tp,useImperativeHandle:$v,useInsertionEffect:Rv,useLayoutEffect:Nv,useMemo:Lv,useReducer:Ec,useRef:Mv,useState:function(){return Ec(Hn)},useDebugValue:ip,useDeferredValue:function(r,a){var c=_t();return jv(c,et.memoizedState,r,a)},useTransition:function(){var r=Ec(Hn)[0],a=_t().memoizedState;return[typeof r=="boolean"?r:So(r),a]},useSyncExternalStore:dv,useId:Uv,useHostTransitionStatus:sp,useFormState:kv,useActionState:kv,useOptimistic:function(r,a){var c=_t();return bv(c,et,r,a)},useMemoCache:Xd,useCacheRefresh:Vv};op.useEffectEvent=Dv;var Fv={readContext:Wt,use:Ac,useCallback:Bv,useContext:Wt,useEffect:tp,useImperativeHandle:$v,useInsertionEffect:Rv,useLayoutEffect:Nv,useMemo:Lv,useReducer:Zd,useRef:Mv,useState:function(){return Zd(Hn)},useDebugValue:ip,useDeferredValue:function(r,a){var c=_t();return et===null?np(c,r,a):jv(c,et.memoizedState,r,a)},useTransition:function(){var r=Zd(Hn)[0],a=_t().memoizedState;return[typeof r=="boolean"?r:So(r),a]},useSyncExternalStore:dv,useId:Uv,useHostTransitionStatus:sp,useFormState:Ev,useActionState:Ev,useOptimistic:function(r,a){var c=_t();return et!==null?bv(c,et,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:Vv};Fv.useEffectEvent=Dv;function lp(r,a,c,h){a=r.memoizedState,c=c(h,a),c=c==null?a:g({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var cp={enqueueSetState:function(r,a,c){r=r._reactInternals;var h=Oi(),m=yr(h);m.payload=a,c!=null&&(m.callback=c),a=vr(r,m,h),a!==null&&(mi(a,r,h),go(a,r,h))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var h=Oi(),m=yr(h);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=vr(r,m,h),a!==null&&(mi(a,r,h),go(a,r,h))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Oi(),h=yr(c);h.tag=2,a!=null&&(h.callback=a),a=vr(r,h,c),a!==null&&(mi(a,r,c),go(a,r,c))}};function Kv(r,a,c,h,m,v,M){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,v,M):a.prototype&&a.prototype.isPureReactComponent?!oo(c,h)||!oo(m,v):!0}function Xv(r,a,c,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==r&&cp.enqueueReplaceState(a,a.state,null)}function ds(r,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(r=r.defaultProps){c===a&&(c=g({},c));for(var m in r)c[m]===void 0&&(c[m]=r[m])}return c}function Qv(r){cc(r)}function Zv(r){console.error(r)}function Jv(r){cc(r)}function Rc(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function eb(r,a,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function up(r,a,c){return c=yr(c),c.tag=3,c.payload={element:null},c.callback=function(){Rc(r,a)},c}function tb(r){return r=yr(r),r.tag=3,r}function ib(r,a,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;r.payload=function(){return m(v)},r.callback=function(){eb(a,c,h)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(r.callback=function(){eb(a,c,h),typeof m!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var z=h.stack;this.componentDidCatch(h.value,{componentStack:z!==null?z:""})})}function UA(r,a,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&Zs(a,c,m,!0),c=ki.current,c!==null){switch(c.tag){case 31:case 13:return Ii===null?Ic():c.alternate===null&&bt===0&&(bt=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===bc?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),$p(r,h,m)),!1;case 22:return c.flags|=65536,h===bc?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),$p(r,h,m)),!1}throw Error(i(435,c.tag))}return $p(r,h,m),Ic(),!1}if(Ie)return a=ki.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==Md&&(r=Error(i(422),{cause:h}),uo(qi(r,c)))):(h!==Md&&(a=Error(i(423),{cause:h}),uo(qi(a,c))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,h=qi(h,c),m=up(r.stateNode,h,m),qd(r,m),bt!==4&&(bt=2)),!1;var v=Error(i(520),{cause:h});if(v=qi(v,c),Oo===null?Oo=[v]:Oo.push(v),bt!==4&&(bt=2),a===null)return!0;h=qi(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=m&-m,c.lanes|=r,r=up(c.stateNode,h,r),qd(c,r),!1;case 1:if(a=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Tr===null||!Tr.has(v))))return c.flags|=65536,m&=-m,c.lanes|=m,m=tb(m),ib(m,r,c,h),qd(c,m),!1}c=c.return}while(c!==null);return!1}var fp=Error(i(461)),Mt=!1;function Gt(r,a,c,h){a.child=r===null?av(a,null,c,h):fs(a,r.child,c,h)}function nb(r,a,c,h,m){c=c.render;var v=a.ref;if("ref"in h){var M={};for(var z in h)z!=="ref"&&(M[z]=h[z])}else M=h;return os(a),h=Gd(r,a,c,M,v,m),z=Yd(),r!==null&&!Mt?(Fd(r,a,m),Un(r,a,m)):(Ie&&z&&Ad(a),a.flags|=1,Gt(r,a,h,m),a.child)}function rb(r,a,c,h,m){if(r===null){var v=c.type;return typeof v=="function"&&!Td(v)&&v.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=v,sb(r,a,v,h,m)):(r=dc(c.type,null,h,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,!bp(r,m)){var M=v.memoizedProps;if(c=c.compare,c=c!==null?c:oo,c(M,h)&&r.ref===a.ref)return Un(r,a,m)}return a.flags|=1,r=Bn(v,h),r.ref=a.ref,r.return=a,a.child=r}function sb(r,a,c,h,m){if(r!==null){var v=r.memoizedProps;if(oo(v,h)&&r.ref===a.ref)if(Mt=!1,a.pendingProps=h=v,bp(r,m))(r.flags&131072)!==0&&(Mt=!0);else return a.lanes=r.lanes,Un(r,a,m)}return hp(r,a,c,h,m)}function ab(r,a,c,h){var m=h.children,v=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,r!==null){for(h=a.child=r.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~v}else h=0,a.child=null;return ob(r,a,v,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&yc(a,v!==null?v.cachePool:null),v!==null?cv(a,v):Ud(),uv(a);else return h=a.lanes=536870912,ob(r,a,v!==null?v.baseLanes|c:c,c,h)}else v!==null?(yc(a,v.cachePool),cv(a,v),Sr(),a.memoizedState=null):(r!==null&&yc(a,null),Ud(),Sr());return Gt(r,a,m,c),a.child}function _o(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ob(r,a,c,h,m){var v=Bd();return v=v===null?null:{parent:At._currentValue,pool:v},a.memoizedState={baseLanes:c,cachePool:v},r!==null&&yc(a,null),Ud(),uv(a),r!==null&&Zs(r,a,h,!0),a.childLanes=m,null}function Nc(r,a){return a=$c({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function lb(r,a,c){return fs(a,r.child,null,c),r=Nc(a,a.pendingProps),r.flags|=2,Ai(a),a.memoizedState=null,r}function VA(r,a,c){var h=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ie){if(h.mode==="hidden")return r=Nc(a,h),a.lanes=536870912,_o(null,r);if(Id(a),(r=ft)?(r=S1(r,Vi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:hr!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},c=Wy(r),c.return=a,a.child=c,It=a,ft=null)):r=null,r===null)throw pr(a);return a.lanes=536870912,null}return Nc(a,h)}var v=r.memoizedState;if(v!==null){var M=v.dehydrated;if(Id(a),m)if(a.flags&256)a.flags&=-257,a=lb(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Mt||Zs(r,a,c,!1),m=(c&r.childLanes)!==0,Mt||m){if(h=nt,h!==null&&(M=Z0(h,c),M!==0&&M!==v.retryLane))throw v.retryLane=M,ns(r,M),mi(h,r,M),fp;Ic(),a=lb(r,a,c)}else r=v.treeContext,ft=Wi(M.nextSibling),It=a,Ie=!0,dr=null,Vi=!1,r!==null&&Fy(a,r),a=Nc(a,h),a.flags|=4096;return a}return r=Bn(r.child,{mode:h.mode,children:h.children}),r.ref=a.ref,a.child=r,r.return=a,r}function zc(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function hp(r,a,c,h,m){return os(a),c=Gd(r,a,c,h,void 0,m),h=Yd(),r!==null&&!Mt?(Fd(r,a,m),Un(r,a,m)):(Ie&&h&&Ad(a),a.flags|=1,Gt(r,a,c,m),a.child)}function cb(r,a,c,h,m,v){return os(a),a.updateQueue=null,c=hv(a,h,c,m),fv(r),h=Yd(),r!==null&&!Mt?(Fd(r,a,v),Un(r,a,v)):(Ie&&h&&Ad(a),a.flags|=1,Gt(r,a,c,v),a.child)}function ub(r,a,c,h,m){if(os(a),a.stateNode===null){var v=Fs,M=c.contextType;typeof M=="object"&&M!==null&&(v=Wt(M)),v=new c(h,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=cp,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=h,v.state=a.memoizedState,v.refs={},jd(a),M=c.contextType,v.context=typeof M=="object"&&M!==null?Wt(M):Fs,v.state=a.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(lp(a,c,M,h),v.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(M=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),M!==v.state&&cp.enqueueReplaceState(v,v.state,null),vo(a,h,v,m),yo(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(r===null){v=a.stateNode;var z=a.memoizedProps,P=ds(c,z);v.props=P;var J=v.context,se=c.contextType;M=Fs,typeof se=="object"&&se!==null&&(M=Wt(se));var le=c.getDerivedStateFromProps;se=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function",z=a.pendingProps!==z,se||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(z||J!==M)&&Xv(a,v,h,M),gr=!1;var ee=a.memoizedState;v.state=ee,vo(a,h,v,m),yo(),J=a.memoizedState,z||ee!==J||gr?(typeof le=="function"&&(lp(a,c,le,h),J=a.memoizedState),(P=gr||Kv(a,c,P,h,ee,J,M))?(se||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=J),v.props=h,v.state=J,v.context=M,h=P):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{v=a.stateNode,Pd(r,a),M=a.memoizedProps,se=ds(c,M),v.props=se,le=a.pendingProps,ee=v.context,J=c.contextType,P=Fs,typeof J=="object"&&J!==null&&(P=Wt(J)),z=c.getDerivedStateFromProps,(J=typeof z=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M!==le||ee!==P)&&Xv(a,v,h,P),gr=!1,ee=a.memoizedState,v.state=ee,vo(a,h,v,m),yo();var ie=a.memoizedState;M!==le||ee!==ie||gr||r!==null&&r.dependencies!==null&&mc(r.dependencies)?(typeof z=="function"&&(lp(a,c,z,h),ie=a.memoizedState),(se=gr||Kv(a,c,se,h,ee,ie,P)||r!==null&&r.dependencies!==null&&mc(r.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ie,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ie,P)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),v.props=h,v.state=ie,v.context=P,h=se):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&ee===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&ee===r.memoizedState||(a.flags|=1024),h=!1)}return v=h,zc(r,a),h=(a.flags&128)!==0,v||h?(v=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,r!==null&&h?(a.child=fs(a,r.child,null,m),a.child=fs(a,null,c,m)):Gt(r,a,c,m),a.memoizedState=v.state,r=a.child):r=Un(r,a,m),r}function fb(r,a,c,h){return ss(),a.flags|=256,Gt(r,a,c,h),a.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pp(r){return{baseLanes:r,cachePool:ev()}}function mp(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Mi),r}function hb(r,a,c){var h=a.pendingProps,m=!1,v=(a.flags&128)!==0,M;if((M=v)||(M=r!==null&&r.memoizedState===null?!1:(wt.current&2)!==0),M&&(m=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ie){if(m?br(a):Sr(),(r=ft)?(r=S1(r,Vi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:hr!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},c=Wy(r),c.return=a,a.child=c,It=a,ft=null)):r=null,r===null)throw pr(a);return Qp(r)?a.lanes=32:a.lanes=536870912,null}var z=h.children;return h=h.fallback,m?(Sr(),m=a.mode,z=$c({mode:"hidden",children:z},m),h=rs(h,m,c,null),z.return=a,h.return=a,z.sibling=h,a.child=z,h=a.child,h.memoizedState=pp(c),h.childLanes=mp(r,M,c),a.memoizedState=dp,_o(null,h)):(br(a),gp(a,z))}var P=r.memoizedState;if(P!==null&&(z=P.dehydrated,z!==null)){if(v)a.flags&256?(br(a),a.flags&=-257,a=yp(r,a,c)):a.memoizedState!==null?(Sr(),a.child=r.child,a.flags|=128,a=null):(Sr(),z=h.fallback,m=a.mode,h=$c({mode:"visible",children:h.children},m),z=rs(z,m,c,null),z.flags|=2,h.return=a,z.return=a,h.sibling=z,a.child=h,fs(a,r.child,null,c),h=a.child,h.memoizedState=pp(c),h.childLanes=mp(r,M,c),a.memoizedState=dp,a=_o(null,h));else if(br(a),Qp(z)){if(M=z.nextSibling&&z.nextSibling.dataset,M)var J=M.dgst;M=J,h=Error(i(419)),h.stack="",h.digest=M,uo({value:h,source:null,stack:null}),a=yp(r,a,c)}else if(Mt||Zs(r,a,c,!1),M=(c&r.childLanes)!==0,Mt||M){if(M=nt,M!==null&&(h=Z0(M,c),h!==0&&h!==P.retryLane))throw P.retryLane=h,ns(r,h),mi(M,r,h),fp;Xp(z)||Ic(),a=yp(r,a,c)}else Xp(z)?(a.flags|=192,a.child=r.child,a=null):(r=P.treeContext,ft=Wi(z.nextSibling),It=a,Ie=!0,dr=null,Vi=!1,r!==null&&Fy(a,r),a=gp(a,h.children),a.flags|=4096);return a}return m?(Sr(),z=h.fallback,m=a.mode,P=r.child,J=P.sibling,h=Bn(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,J!==null?z=Bn(J,z):(z=rs(z,m,c,null),z.flags|=2),z.return=a,h.return=a,h.sibling=z,a.child=h,_o(null,h),h=a.child,z=r.child.memoizedState,z===null?z=pp(c):(m=z.cachePool,m!==null?(P=At._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=ev(),z={baseLanes:z.baseLanes|c,cachePool:m}),h.memoizedState=z,h.childLanes=mp(r,M,c),a.memoizedState=dp,_o(r.child,h)):(br(a),c=r.child,r=c.sibling,c=Bn(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,r!==null&&(M=a.deletions,M===null?(a.deletions=[r],a.flags|=16):M.push(r)),a.child=c,a.memoizedState=null,c)}function gp(r,a){return a=$c({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function $c(r,a){return r=Ci(22,r,null,a),r.lanes=0,r}function yp(r,a,c){return fs(a,r.child,null,c),r=gp(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function db(r,a,c){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),Rd(r.return,a,c)}function vp(r,a,c,h,m,v){var M=r.memoizedState;M===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m,treeForkCount:v}:(M.isBackwards=a,M.rendering=null,M.renderingStartTime=0,M.last=h,M.tail=c,M.tailMode=m,M.treeForkCount=v)}function pb(r,a,c){var h=a.pendingProps,m=h.revealOrder,v=h.tail;h=h.children;var M=wt.current,z=(M&2)!==0;if(z?(M=M&1|2,a.flags|=128):M&=1,j(wt,M),Gt(r,a,h,c),h=Ie?co:0,!z&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&db(r,c,a);else if(r.tag===19)db(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(c=a.child,m=null;c!==null;)r=c.alternate,r!==null&&_c(r)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),vp(a,!1,m,c,v,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&_c(r)===null){a.child=m;break}r=m.sibling,m.sibling=c,c=m,m=r}vp(a,!0,c,null,v,h);break;case"together":vp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Un(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),_r|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(Zs(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Bn(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Bn(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function bp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&mc(r)))}function IA(r,a,c){switch(a.tag){case 3:ge(a,a.stateNode.containerInfo),mr(a,At,r.memoizedState.cache),ss();break;case 27:case 5:Oe(a);break;case 4:ge(a,a.stateNode.containerInfo);break;case 10:mr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Id(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(br(a),a.flags|=128,null):(c&a.child.childLanes)!==0?hb(r,a,c):(br(a),r=Un(r,a,c),r!==null?r.sibling:null);br(a);break;case 19:var m=(r.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(Zs(r,a,c,!1),h=(c&a.childLanes)!==0),m){if(h)return pb(r,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),j(wt,wt.current),h)break;return null;case 22:return a.lanes=0,ab(r,a,c,a.pendingProps);case 24:mr(a,At,r.memoizedState.cache)}return Un(r,a,c)}function mb(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)Mt=!0;else{if(!bp(r,c)&&(a.flags&128)===0)return Mt=!1,IA(r,a,c);Mt=(r.flags&131072)!==0}else Mt=!1,Ie&&(a.flags&1048576)!==0&&Yy(a,co,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(r=cs(a.elementType),a.type=r,typeof r=="function")Td(r)?(h=ds(r,h),a.tag=1,a=ub(null,a,r,h,c)):(a.tag=0,a=hp(null,a,r,h,c));else{if(r!=null){var m=r.$$typeof;if(m===E){a.tag=11,a=nb(null,a,r,h,c);break e}else if(m===A){a.tag=14,a=rb(null,a,r,h,c);break e}}throw a=te(r)||r,Error(i(306,a,""))}}return a;case 0:return hp(r,a,a.type,a.pendingProps,c);case 1:return h=a.type,m=ds(h,a.pendingProps),ub(r,a,h,m,c);case 3:e:{if(ge(a,a.stateNode.containerInfo),r===null)throw Error(i(387));h=a.pendingProps;var v=a.memoizedState;m=v.element,Pd(r,a),vo(a,h,null,c);var M=a.memoizedState;if(h=M.cache,mr(a,At,h),h!==v.cache&&Nd(a,[At],c,!0),yo(),h=M.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=fb(r,a,h,c);break e}else if(h!==m){m=qi(Error(i(424)),a),uo(m),a=fb(r,a,h,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ft=Wi(r.firstChild),It=a,Ie=!0,dr=null,Vi=!0,c=av(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ss(),h===m){a=Un(r,a,c);break e}Gt(r,a,h,c)}a=a.child}return a;case 26:return zc(r,a),r===null?(c=k1(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ie||(c=a.type,r=a.pendingProps,h=Qc(F.current).createElement(c),h[Vt]=a,h[ci]=r,Yt(h,c,r),Pt(h),a.stateNode=h):a.memoizedState=k1(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Oe(a),r===null&&Ie&&(h=a.stateNode=_1(a.type,a.pendingProps,F.current),It=a,Vi=!0,m=ft,Er(a.type)?(Zp=m,ft=Wi(h.firstChild)):ft=m),Gt(r,a,a.pendingProps.children,c),zc(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ie&&((m=h=ft)&&(h=SE(h,a.type,a.pendingProps,Vi),h!==null?(a.stateNode=h,It=a,ft=Wi(h.firstChild),Vi=!1,m=!0):m=!1),m||pr(a)),Oe(a),m=a.type,v=a.pendingProps,M=r!==null?r.memoizedProps:null,h=v.children,Yp(m,v)?h=null:M!==null&&Yp(m,M)&&(a.flags|=32),a.memoizedState!==null&&(m=Gd(r,a,$A,null,null,c),jo._currentValue=m),zc(r,a),Gt(r,a,h,c),a.child;case 6:return r===null&&Ie&&((r=c=ft)&&(c=xE(c,a.pendingProps,Vi),c!==null?(a.stateNode=c,It=a,ft=null,r=!0):r=!1),r||pr(a)),null;case 13:return hb(r,a,c);case 4:return ge(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=fs(a,null,h,c):Gt(r,a,h,c),a.child;case 11:return nb(r,a,a.type,a.pendingProps,c);case 7:return Gt(r,a,a.pendingProps,c),a.child;case 8:return Gt(r,a,a.pendingProps.children,c),a.child;case 12:return Gt(r,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,mr(a,a.type,h.value),Gt(r,a,h.children,c),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,os(a),m=Wt(m),h=h(m),a.flags|=1,Gt(r,a,h,c),a.child;case 14:return rb(r,a,a.type,a.pendingProps,c);case 15:return sb(r,a,a.type,a.pendingProps,c);case 19:return pb(r,a,c);case 31:return VA(r,a,c);case 22:return ab(r,a,c,a.pendingProps);case 24:return os(a),h=Wt(At),r===null?(m=Bd(),m===null&&(m=nt,v=zd(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=c),m=v),a.memoizedState={parent:h,cache:m},jd(a),mr(a,At,m)):((r.lanes&c)!==0&&(Pd(r,a),vo(a,null,null,c),yo()),m=r.memoizedState,v=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),mr(a,At,h)):(h=v.cache,mr(a,At,h),h!==m.cache&&Nd(a,[At],c,!0))),Gt(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Vn(r){r.flags|=4}function Sp(r,a,c,h,m){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(Ub())r.flags|=8192;else throw us=bc,Ld}else r.flags&=-16777217}function gb(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!D1(a))if(Ub())r.flags|=8192;else throw us=bc,Ld}function Bc(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?K0():536870912,r.lanes|=a,ua|=a)}function To(r,a){if(!Ie)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function ht(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(a)for(var m=r.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=c,a}function WA(r,a,c){var h=a.pendingProps;switch(Ed(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(a),null;case 1:return ht(a),null;case 3:return c=a.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Pn(At),Ce(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Qs(a)?Vn(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Od())),ht(a),null;case 26:var m=a.type,v=a.memoizedState;return r===null?(Vn(a),v!==null?(ht(a),gb(a,v)):(ht(a),Sp(a,m,null,h,c))):v?v!==r.memoizedState?(Vn(a),ht(a),gb(a,v)):(ht(a),a.flags&=-16777217):(r=r.memoizedProps,r!==h&&Vn(a),ht(a),Sp(a,m,r,h,c)),null;case 27:if(G(a),c=F.current,m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&Vn(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return ht(a),null}r=R.current,Qs(a)?Ky(a):(r=_1(m,h,c),a.stateNode=r,Vn(a))}return ht(a),null;case 5:if(G(a),m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&Vn(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return ht(a),null}if(v=R.current,Qs(a))Ky(a);else{var M=Qc(F.current);switch(v){case 1:v=M.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=M.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=M.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=M.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=M.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof h.is=="string"?M.createElement("select",{is:h.is}):M.createElement("select"),h.multiple?v.multiple=!0:h.size&&(v.size=h.size);break;default:v=typeof h.is=="string"?M.createElement(m,{is:h.is}):M.createElement(m)}}v[Vt]=a,v[ci]=h;e:for(M=a.child;M!==null;){if(M.tag===5||M.tag===6)v.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===a)break e;for(;M.sibling===null;){if(M.return===null||M.return===a)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}a.stateNode=v;e:switch(Yt(v,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Vn(a)}}return ht(a),Sp(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==h&&Vn(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(r=F.current,Qs(a)){if(r=a.stateNode,c=a.memoizedProps,h=null,m=It,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}r[Vt]=a,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||h1(r.nodeValue,c)),r||pr(a,!0)}else r=Qc(r).createTextNode(h),r[Vt]=a,a.stateNode=r}return ht(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(h=Qs(a),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Vt]=a}else ss(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),r=!1}else c=Od(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(Ai(a),a):(Ai(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ht(a),null;case 13:if(h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Qs(a),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Vt]=a}else ss(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),m=!1}else m=Od(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Ai(a),a):(Ai(a),null)}return Ai(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),Bc(a,a.updateQueue),ht(a),null);case 4:return Ce(),r===null&&Up(a.stateNode.containerInfo),ht(a),null;case 10:return Pn(a.type),ht(a),null;case 19:if(L(wt),h=a.memoizedState,h===null)return ht(a),null;if(m=(a.flags&128)!==0,v=h.rendering,v===null)if(m)To(h,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(v=_c(r),v!==null){for(a.flags|=128,To(h,!1),r=v.updateQueue,a.updateQueue=r,Bc(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)Iy(c,r),c=c.sibling;return j(wt,wt.current&1|2),Ie&&Ln(a,h.treeForkCount),a.child}r=r.sibling}h.tail!==null&&ot()>Hc&&(a.flags|=128,m=!0,To(h,!1),a.lanes=4194304)}else{if(!m)if(r=_c(v),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,Bc(a,r),To(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Ie)return ht(a),null}else 2*ot()-h.renderingStartTime>Hc&&c!==536870912&&(a.flags|=128,m=!0,To(h,!1),a.lanes=4194304);h.isBackwards?(v.sibling=a.child,a.child=v):(r=h.last,r!==null?r.sibling=v:a.child=v,h.last=v)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=ot(),r.sibling=null,c=wt.current,j(wt,m?c&1|2:c&1),Ie&&Ln(a,h.treeForkCount),r):(ht(a),null);case 22:case 23:return Ai(a),Vd(),h=a.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(ht(a),a.subtreeFlags&6&&(a.flags|=8192)):ht(a),c=a.updateQueue,c!==null&&Bc(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),r!==null&&L(ls),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Pn(At),ht(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function GA(r,a){switch(Ed(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Pn(At),Ce(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return G(a),null;case 31:if(a.memoizedState!==null){if(Ai(a),a.alternate===null)throw Error(i(340));ss()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Ai(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ss()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return L(wt),null;case 4:return Ce(),null;case 10:return Pn(a.type),null;case 22:case 23:return Ai(a),Vd(),r!==null&&L(ls),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Pn(At),null;case 25:return null;default:return null}}function yb(r,a){switch(Ed(a),a.tag){case 3:Pn(At),Ce();break;case 26:case 27:case 5:G(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&Ai(a);break;case 13:Ai(a);break;case 19:L(wt);break;case 10:Pn(a.type);break;case 22:case 23:Ai(a),Vd(),r!==null&&L(ls);break;case 24:Pn(At)}}function Co(r,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&r)===r){h=void 0;var v=c.create,M=c.inst;h=v(),M.destroy=h}c=c.next}while(c!==m)}}catch(z){Ze(a,a.return,z)}}function xr(r,a,c){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&r)===r){var M=h.inst,z=M.destroy;if(z!==void 0){M.destroy=void 0,m=a;var P=c,J=z;try{J()}catch(se){Ze(m,P,se)}}}h=h.next}while(h!==v)}}catch(se){Ze(a,a.return,se)}}function vb(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{lv(a,c)}catch(h){Ze(r,r.return,h)}}}function bb(r,a,c){c.props=ds(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){Ze(r,a,h)}}function ko(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(m){Ze(r,a,m)}}function gn(r,a){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){Ze(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){Ze(r,a,m)}else c.current=null}function Sb(r){var a=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){Ze(r,r.return,m)}}function xp(r,a,c){try{var h=r.stateNode;pE(h,r.type,c,a),h[ci]=a}catch(m){Ze(r,r.return,m)}}function xb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Er(r.type)||r.tag===4}function wp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||xb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Er(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function _p(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=zn));else if(h!==4&&(h===27&&Er(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(_p(r,a,c),r=r.sibling;r!==null;)_p(r,a,c),r=r.sibling}function Lc(r,a,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(h!==4&&(h===27&&Er(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Lc(r,a,c),r=r.sibling;r!==null;)Lc(r,a,c),r=r.sibling}function wb(r){var a=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Yt(a,h,c),a[Vt]=r,a[ci]=c}catch(v){Ze(r,r.return,v)}}var In=!1,Ot=!1,Tp=!1,_b=typeof WeakSet=="function"?WeakSet:Set,qt=null;function YA(r,a){if(r=r.containerInfo,Wp=ru,r=$y(r),yd(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var M=0,z=-1,P=-1,J=0,se=0,le=r,ee=null;t:for(;;){for(var ie;le!==c||m!==0&&le.nodeType!==3||(z=M+m),le!==v||h!==0&&le.nodeType!==3||(P=M+h),le.nodeType===3&&(M+=le.nodeValue.length),(ie=le.firstChild)!==null;)ee=le,le=ie;for(;;){if(le===r)break t;if(ee===c&&++J===m&&(z=M),ee===v&&++se===h&&(P=M),(ie=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=ie}c=z===-1||P===-1?null:{start:z,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(Gp={focusedElem:r,selectionRange:c},ru=!1,qt=a;qt!==null;)if(a=qt,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,qt=r;else for(;qt!==null;){switch(a=qt,v=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)m=r[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,c=a,m=v.memoizedProps,v=v.memoizedState,h=c.stateNode;try{var we=ds(c.type,m);r=h.getSnapshotBeforeUpdate(we,v),h.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){Ze(c,c.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)Kp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Kp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,qt=r;break}qt=a.return}}function Tb(r,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Gn(r,c),h&4&&Co(5,c);break;case 1:if(Gn(r,c),h&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(M){Ze(c,c.return,M)}else{var m=ds(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(M){Ze(c,c.return,M)}}h&64&&vb(c),h&512&&ko(c,c.return);break;case 3:if(Gn(r,c),h&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{lv(r,a)}catch(M){Ze(c,c.return,M)}}break;case 27:a===null&&h&4&&wb(c);case 26:case 5:Gn(r,c),a===null&&h&4&&Sb(c),h&512&&ko(c,c.return);break;case 12:Gn(r,c);break;case 31:Gn(r,c),h&4&&Ab(r,c);break;case 13:Gn(r,c),h&4&&Eb(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=iE.bind(null,c),wE(r,c))));break;case 22:if(h=c.memoizedState!==null||In,!h){a=a!==null&&a.memoizedState!==null||Ot,m=In;var v=Ot;In=h,(Ot=a)&&!v?Yn(r,c,(c.subtreeFlags&8772)!==0):Gn(r,c),In=m,Ot=v}break;case 30:break;default:Gn(r,c)}}function Cb(r){var a=r.alternate;a!==null&&(r.alternate=null,Cb(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ed(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,fi=!1;function Wn(r,a,c){for(c=c.child;c!==null;)kb(r,a,c),c=c.sibling}function kb(r,a,c){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(Ka,c)}catch{}switch(c.tag){case 26:Ot||gn(c,a),Wn(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ot||gn(c,a);var h=dt,m=fi;Er(c.type)&&(dt=c.stateNode,fi=!1),Wn(r,a,c),$o(c.stateNode),dt=h,fi=m;break;case 5:Ot||gn(c,a);case 6:if(h=dt,m=fi,dt=null,Wn(r,a,c),dt=h,fi=m,dt!==null)if(fi)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(c.stateNode)}catch(v){Ze(c,a,v)}else try{dt.removeChild(c.stateNode)}catch(v){Ze(c,a,v)}break;case 18:dt!==null&&(fi?(r=dt,v1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),va(r)):v1(dt,c.stateNode));break;case 4:h=dt,m=fi,dt=c.stateNode.containerInfo,fi=!0,Wn(r,a,c),dt=h,fi=m;break;case 0:case 11:case 14:case 15:xr(2,c,a),Ot||xr(4,c,a),Wn(r,a,c);break;case 1:Ot||(gn(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&bb(c,a,h)),Wn(r,a,c);break;case 21:Wn(r,a,c);break;case 22:Ot=(h=Ot)||c.memoizedState!==null,Wn(r,a,c),Ot=h;break;default:Wn(r,a,c)}}function Ab(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{va(r)}catch(c){Ze(a,a.return,c)}}}function Eb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{va(r)}catch(c){Ze(a,a.return,c)}}function FA(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new _b),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new _b),a;default:throw Error(i(435,r.tag))}}function jc(r,a){var c=FA(r);a.forEach(function(h){if(!c.has(h)){c.add(h);var m=nE.bind(null,r,h);h.then(m,m)}})}function hi(r,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],v=r,M=a,z=M;e:for(;z!==null;){switch(z.tag){case 27:if(Er(z.type)){dt=z.stateNode,fi=!1;break e}break;case 5:dt=z.stateNode,fi=!1;break e;case 3:case 4:dt=z.stateNode.containerInfo,fi=!0;break e}z=z.return}if(dt===null)throw Error(i(160));kb(v,M,m),dt=null,fi=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Mb(a,r),a=a.sibling}var tn=null;function Mb(r,a){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:hi(a,r),di(r),h&4&&(xr(3,r,r.return),Co(3,r),xr(5,r,r.return));break;case 1:hi(a,r),di(r),h&512&&(Ot||c===null||gn(c,c.return)),h&64&&In&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=tn;if(hi(a,r),di(r),h&512&&(Ot||c===null||gn(c,c.return)),h&4){var v=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Za]||v[Vt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),Yt(v,h,c),v[Vt]=r,Pt(v),h=v;break e;case"link":var M=M1("link","href",m).get(h+(c.href||""));if(M){for(var z=0;z<M.length;z++)if(v=M[z],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(z,1);break t}}v=m.createElement(h),Yt(v,h,c),m.head.appendChild(v);break;case"meta":if(M=M1("meta","content",m).get(h+(c.content||""))){for(z=0;z<M.length;z++)if(v=M[z],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(z,1);break t}}v=m.createElement(h),Yt(v,h,c),m.head.appendChild(v);break;default:throw Error(i(468,h))}v[Vt]=r,Pt(v),h=v}r.stateNode=h}else O1(m,r.type,r.stateNode);else r.stateNode=E1(m,h,r.memoizedProps);else v!==h?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,h===null?O1(m,r.type,r.stateNode):E1(m,h,r.memoizedProps)):h===null&&r.stateNode!==null&&xp(r,r.memoizedProps,c.memoizedProps)}break;case 27:hi(a,r),di(r),h&512&&(Ot||c===null||gn(c,c.return)),c!==null&&h&4&&xp(r,r.memoizedProps,c.memoizedProps);break;case 5:if(hi(a,r),di(r),h&512&&(Ot||c===null||gn(c,c.return)),r.flags&32){m=r.stateNode;try{Hs(m,"")}catch(we){Ze(r,r.return,we)}}h&4&&r.stateNode!=null&&(m=r.memoizedProps,xp(r,m,c!==null?c.memoizedProps:m)),h&1024&&(Tp=!0);break;case 6:if(hi(a,r),di(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(we){Ze(r,r.return,we)}}break;case 3:if(eu=null,m=tn,tn=Zc(a.containerInfo),hi(a,r),tn=m,di(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{va(a.containerInfo)}catch(we){Ze(r,r.return,we)}Tp&&(Tp=!1,Ob(r));break;case 4:h=tn,tn=Zc(r.stateNode.containerInfo),hi(a,r),di(r),tn=h;break;case 12:hi(a,r),di(r);break;case 31:hi(a,r),di(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,jc(r,h)));break;case 13:hi(a,r),di(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(qc=ot()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,jc(r,h)));break;case 22:m=r.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,J=In,se=Ot;if(In=J||m,Ot=se||P,hi(a,r),Ot=se,In=J,di(r),h&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(c===null||P||In||Ot||ps(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){P=c=a;try{if(v=P.stateNode,m)M=v.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{z=P.stateNode;var le=P.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;z.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(we){Ze(P,P.return,we)}}}else if(a.tag===6){if(c===null){P=a;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(we){Ze(P,P.return,we)}}}else if(a.tag===18){if(c===null){P=a;try{var ie=P.stateNode;m?b1(ie,!0):b1(P.stateNode,!1)}catch(we){Ze(P,P.return,we)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,jc(r,c))));break;case 19:hi(a,r),di(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,jc(r,h)));break;case 30:break;case 21:break;default:hi(a,r),di(r)}}function di(r){var a=r.flags;if(a&2){try{for(var c,h=r.return;h!==null;){if(xb(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,v=wp(r);Lc(r,v,m);break;case 5:var M=c.stateNode;c.flags&32&&(Hs(M,""),c.flags&=-33);var z=wp(r);Lc(r,z,M);break;case 3:case 4:var P=c.stateNode.containerInfo,J=wp(r);_p(r,J,P);break;default:throw Error(i(161))}}catch(se){Ze(r,r.return,se)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Ob(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Ob(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Gn(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Tb(r,a.alternate,a),a=a.sibling}function ps(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:xr(4,a,a.return),ps(a);break;case 1:gn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&bb(a,a.return,c),ps(a);break;case 27:$o(a.stateNode);case 26:case 5:gn(a,a.return),ps(a);break;case 22:a.memoizedState===null&&ps(a);break;case 30:ps(a);break;default:ps(a)}r=r.sibling}}function Yn(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=r,v=a,M=v.flags;switch(v.tag){case 0:case 11:case 15:Yn(m,v,c),Co(4,v);break;case 1:if(Yn(m,v,c),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(J){Ze(h,h.return,J)}if(h=v,m=h.updateQueue,m!==null){var z=h.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)ov(P[m],z)}catch(J){Ze(h,h.return,J)}}c&&M&64&&vb(v),ko(v,v.return);break;case 27:wb(v);case 26:case 5:Yn(m,v,c),c&&h===null&&M&4&&Sb(v),ko(v,v.return);break;case 12:Yn(m,v,c);break;case 31:Yn(m,v,c),c&&M&4&&Ab(m,v);break;case 13:Yn(m,v,c),c&&M&4&&Eb(m,v);break;case 22:v.memoizedState===null&&Yn(m,v,c),ko(v,v.return);break;case 30:break;default:Yn(m,v,c)}a=a.sibling}}function Cp(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&fo(c))}function kp(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&fo(r))}function nn(r,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Db(r,a,c,h),a=a.sibling}function Db(r,a,c,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:nn(r,a,c,h),m&2048&&Co(9,a);break;case 1:nn(r,a,c,h);break;case 3:nn(r,a,c,h),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&fo(r)));break;case 12:if(m&2048){nn(r,a,c,h),r=a.stateNode;try{var v=a.memoizedProps,M=v.id,z=v.onPostCommit;typeof z=="function"&&z(M,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){Ze(a,a.return,P)}}else nn(r,a,c,h);break;case 31:nn(r,a,c,h);break;case 13:nn(r,a,c,h);break;case 23:break;case 22:v=a.stateNode,M=a.alternate,a.memoizedState!==null?v._visibility&2?nn(r,a,c,h):Ao(r,a):v._visibility&2?nn(r,a,c,h):(v._visibility|=2,oa(r,a,c,h,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Cp(M,a);break;case 24:nn(r,a,c,h),m&2048&&kp(a.alternate,a);break;default:nn(r,a,c,h)}}function oa(r,a,c,h,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=r,M=a,z=c,P=h,J=M.flags;switch(M.tag){case 0:case 11:case 15:oa(v,M,z,P,m),Co(8,M);break;case 23:break;case 22:var se=M.stateNode;M.memoizedState!==null?se._visibility&2?oa(v,M,z,P,m):Ao(v,M):(se._visibility|=2,oa(v,M,z,P,m)),m&&J&2048&&Cp(M.alternate,M);break;case 24:oa(v,M,z,P,m),m&&J&2048&&kp(M.alternate,M);break;default:oa(v,M,z,P,m)}a=a.sibling}}function Ao(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,h=a,m=h.flags;switch(h.tag){case 22:Ao(c,h),m&2048&&Cp(h.alternate,h);break;case 24:Ao(c,h),m&2048&&kp(h.alternate,h);break;default:Ao(c,h)}a=a.sibling}}var Eo=8192;function la(r,a,c){if(r.subtreeFlags&Eo)for(r=r.child;r!==null;)Rb(r,a,c),r=r.sibling}function Rb(r,a,c){switch(r.tag){case 26:la(r,a,c),r.flags&Eo&&r.memoizedState!==null&&zE(c,tn,r.memoizedState,r.memoizedProps);break;case 5:la(r,a,c);break;case 3:case 4:var h=tn;tn=Zc(r.stateNode.containerInfo),la(r,a,c),tn=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=Eo,Eo=16777216,la(r,a,c),Eo=h):la(r,a,c));break;default:la(r,a,c)}}function Nb(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Mo(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];qt=h,$b(h,r)}Nb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zb(r),r=r.sibling}function zb(r){switch(r.tag){case 0:case 11:case 15:Mo(r),r.flags&2048&&xr(9,r,r.return);break;case 3:Mo(r);break;case 12:Mo(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Pc(r)):Mo(r);break;default:Mo(r)}}function Pc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];qt=h,$b(h,r)}Nb(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:xr(8,a,a.return),Pc(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Pc(a));break;default:Pc(a)}r=r.sibling}}function $b(r,a){for(;qt!==null;){var c=qt;switch(c.tag){case 0:case 11:case 15:xr(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:fo(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,qt=h;else e:for(c=r;qt!==null;){h=qt;var m=h.sibling,v=h.return;if(Cb(h),h===c){qt=null;break e}if(m!==null){m.return=v,qt=m;break e}qt=v}}}var KA={getCacheForType:function(r){var a=Wt(At),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return Wt(At).controller.signal}},XA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,nt=null,je=null,qe=0,Qe=0,Ei=null,wr=!1,ca=!1,Ap=!1,Fn=0,bt=0,_r=0,ms=0,Ep=0,Mi=0,ua=0,Oo=null,pi=null,Mp=!1,qc=0,Bb=0,Hc=1/0,Uc=null,Tr=null,Nt=0,Cr=null,fa=null,Kn=0,Op=0,Dp=null,Lb=null,Do=0,Rp=null;function Oi(){return(Xe&2)!==0&&qe!==0?qe&-qe:I.T!==null?jp():J0()}function jb(){if(Mi===0)if((qe&536870912)===0||Ie){var r=Xl;Xl<<=1,(Xl&3932160)===0&&(Xl=262144),Mi=r}else Mi=536870912;return r=ki.current,r!==null&&(r.flags|=32),Mi}function mi(r,a,c){(r===nt&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)&&(ha(r,0),kr(r,qe,Mi,!1)),Qa(r,c),((Xe&2)===0||r!==nt)&&(r===nt&&((Xe&2)===0&&(ms|=c),bt===4&&kr(r,qe,Mi,!1)),yn(r))}function Pb(r,a,c){if((Xe&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&r.expiredLanes)===0||Xa(r,a),m=h?JA(r,a):zp(r,a,!0),v=h;do{if(m===0){ca&&!h&&kr(r,a,0,!1);break}else{if(c=r.current.alternate,v&&!QA(c)){m=zp(r,a,!1),v=!1;continue}if(m===2){if(v=a,r.errorRecoveryDisabledLanes&v)var M=0;else M=r.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var z=r;m=Oo;var P=z.current.memoizedState.isDehydrated;if(P&&(ha(z,M).flags|=256),M=zp(z,M,!1),M!==2){if(Ap&&!P){z.errorRecoveryDisabledLanes|=v,ms|=v,m=4;break e}v=pi,pi=m,v!==null&&(pi===null?pi=v:pi.push.apply(pi,v))}m=M}if(v=!1,m!==2)continue}}if(m===1){ha(r,0),kr(r,a,0,!0);break}e:{switch(h=r,v=m,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:kr(h,a,Mi,!wr);break e;case 2:pi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=qc+300-ot(),10<m)){if(kr(h,a,Mi,!wr),Zl(h,0,!0)!==0)break e;Kn=a,h.timeoutHandle=g1(qb.bind(null,h,c,pi,Uc,Mp,a,Mi,ms,ua,wr,v,"Throttled",-0,0),m);break e}qb(h,c,pi,Uc,Mp,a,Mi,ms,ua,wr,v,null,-0,0)}}break}while(!0);yn(r)}function qb(r,a,c,h,m,v,M,z,P,J,se,le,ee,ie){if(r.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},Rb(a,v,le);var we=(v&62914560)===v?qc-ot():(v&4194048)===v?Bb-ot():0;if(we=$E(le,we),we!==null){Kn=v,r.cancelPendingCommit=we(Fb.bind(null,r,a,v,c,h,m,M,z,P,se,le,null,ee,ie)),kr(r,v,M,!J);return}}Fb(r,a,v,c,h,m,M,z,P)}function QA(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],v=m.getSnapshot;m=m.value;try{if(!Ti(v(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function kr(r,a,c,h){a&=~Ep,a&=~ms,r.suspendedLanes|=a,r.pingedLanes&=~a,h&&(r.warmLanes|=a),h=r.expirationTimes;for(var m=a;0<m;){var v=31-_i(m),M=1<<v;h[v]=-1,m&=~M}c!==0&&X0(r,c,a)}function Vc(){return(Xe&6)===0?(Ro(0),!1):!0}function Np(){if(je!==null){if(Qe===0)var r=je.return;else r=je,jn=as=null,Kd(r),ia=null,po=0,r=je;for(;r!==null;)yb(r.alternate,r),r=r.return;je=null}}function ha(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,yE(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Kn=0,Np(),nt=r,je=c=Bn(r.current,null),qe=a,Qe=0,Ei=null,wr=!1,ca=Xa(r,a),Ap=!1,ua=Mi=Ep=ms=_r=bt=0,pi=Oo=null,Mp=!1,(a&8)!==0&&(a|=a&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=a;0<h;){var m=31-_i(h),v=1<<m;a|=r[m],h&=~v}return Fn=a,uc(),c}function Hb(r,a){Ne=null,I.H=wo,a===ta||a===vc?(a=nv(),Qe=3):a===Ld?(a=nv(),Qe=4):Qe=a===fp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ei=a,je===null&&(bt=1,Rc(r,qi(a,r.current)))}function Ub(){var r=ki.current;return r===null?!0:(qe&4194048)===qe?Ii===null:(qe&62914560)===qe||(qe&536870912)!==0?r===Ii:!1}function Vb(){var r=I.H;return I.H=wo,r===null?wo:r}function Ib(){var r=I.A;return I.A=KA,r}function Ic(){bt=4,wr||(qe&4194048)!==qe&&ki.current!==null||(ca=!0),(_r&134217727)===0&&(ms&134217727)===0||nt===null||kr(nt,qe,Mi,!1)}function zp(r,a,c){var h=Xe;Xe|=2;var m=Vb(),v=Ib();(nt!==r||qe!==a)&&(Uc=null,ha(r,a)),a=!1;var M=bt;e:do try{if(Qe!==0&&je!==null){var z=je,P=Ei;switch(Qe){case 8:Np(),M=6;break e;case 3:case 2:case 9:case 6:ki.current===null&&(a=!0);var J=Qe;if(Qe=0,Ei=null,da(r,z,P,J),c&&ca){M=0;break e}break;default:J=Qe,Qe=0,Ei=null,da(r,z,P,J)}}ZA(),M=bt;break}catch(se){Hb(r,se)}while(!0);return a&&r.shellSuspendCounter++,jn=as=null,Xe=h,I.H=m,I.A=v,je===null&&(nt=null,qe=0,uc()),M}function ZA(){for(;je!==null;)Wb(je)}function JA(r,a){var c=Xe;Xe|=2;var h=Vb(),m=Ib();nt!==r||qe!==a?(Uc=null,Hc=ot()+500,ha(r,a)):ca=Xa(r,a);e:do try{if(Qe!==0&&je!==null){a=je;var v=Ei;t:switch(Qe){case 1:Qe=0,Ei=null,da(r,a,v,1);break;case 2:case 9:if(tv(v)){Qe=0,Ei=null,Gb(a);break}a=function(){Qe!==2&&Qe!==9||nt!==r||(Qe=7),yn(r)},v.then(a,a);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:tv(v)?(Qe=0,Ei=null,Gb(a)):(Qe=0,Ei=null,da(r,a,v,7));break;case 5:var M=null;switch(je.tag){case 26:M=je.memoizedState;case 5:case 27:var z=je;if(M?D1(M):z.stateNode.complete){Qe=0,Ei=null;var P=z.sibling;if(P!==null)je=P;else{var J=z.return;J!==null?(je=J,Wc(J)):je=null}break t}}Qe=0,Ei=null,da(r,a,v,5);break;case 6:Qe=0,Ei=null,da(r,a,v,6);break;case 8:Np(),bt=6;break e;default:throw Error(i(462))}}eE();break}catch(se){Hb(r,se)}while(!0);return jn=as=null,I.H=h,I.A=m,Xe=c,je!==null?0:(nt=null,qe=0,uc(),bt)}function eE(){for(;je!==null&&!xt();)Wb(je)}function Wb(r){var a=mb(r.alternate,r,Fn);r.memoizedProps=r.pendingProps,a===null?Wc(r):je=a}function Gb(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=cb(c,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=cb(c,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Kd(a);default:yb(c,a),a=je=Iy(a,Fn),a=mb(c,a,Fn)}r.memoizedProps=r.pendingProps,a===null?Wc(r):je=a}function da(r,a,c,h){jn=as=null,Kd(a),ia=null,po=0;var m=a.return;try{if(UA(r,m,a,c,qe)){bt=1,Rc(r,qi(c,r.current)),je=null;return}}catch(v){if(m!==null)throw je=m,v;bt=1,Rc(r,qi(c,r.current)),je=null;return}a.flags&32768?(Ie||h===1?r=!0:ca||(qe&536870912)!==0?r=!1:(wr=r=!0,(h===2||h===9||h===3||h===6)&&(h=ki.current,h!==null&&h.tag===13&&(h.flags|=16384))),Yb(a,r)):Wc(a)}function Wc(r){var a=r;do{if((a.flags&32768)!==0){Yb(a,wr);return}r=a.return;var c=WA(a.alternate,a,Fn);if(c!==null){je=c;return}if(a=a.sibling,a!==null){je=a;return}je=a=r}while(a!==null);bt===0&&(bt=5)}function Yb(r,a){do{var c=GA(r.alternate,r);if(c!==null){c.flags&=32767,je=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){je=r;return}je=r=c}while(r!==null);bt=6,je=null}function Fb(r,a,c,h,m,v,M,z,P){r.cancelPendingCommit=null;do Gc();while(Nt!==0);if((Xe&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=wd,Nk(r,c,v,M,z,P),r===nt&&(je=nt=null,qe=0),fa=a,Cr=r,Kn=c,Op=v,Dp=m,Lb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,rE(Qr,function(){return Jb(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,m=ne.p,ne.p=2,M=Xe,Xe|=4;try{YA(r,a,c)}finally{Xe=M,ne.p=m,I.T=h}}Nt=1,Kb(),Xb(),Qb()}}function Kb(){if(Nt===1){Nt=0;var r=Cr,a=fa,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var h=ne.p;ne.p=2;var m=Xe;Xe|=4;try{Mb(a,r);var v=Gp,M=$y(r.containerInfo),z=v.focusedElem,P=v.selectionRange;if(M!==z&&z&&z.ownerDocument&&zy(z.ownerDocument.documentElement,z)){if(P!==null&&yd(z)){var J=P.start,se=P.end;if(se===void 0&&(se=J),"selectionStart"in z)z.selectionStart=J,z.selectionEnd=Math.min(se,z.value.length);else{var le=z.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var ie=ee.getSelection(),we=z.textContent.length,Ee=Math.min(P.start,we),it=P.end===void 0?Ee:Math.min(P.end,we);!ie.extend&&Ee>it&&(M=it,it=Ee,Ee=M);var Y=Ny(z,Ee),U=Ny(z,it);if(Y&&U&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==U.node||ie.focusOffset!==U.offset)){var Z=le.createRange();Z.setStart(Y.node,Y.offset),ie.removeAllRanges(),Ee>it?(ie.addRange(Z),ie.extend(U.node,U.offset)):(Z.setEnd(U.node,U.offset),ie.addRange(Z))}}}}for(le=[],ie=z;ie=ie.parentNode;)ie.nodeType===1&&le.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<le.length;z++){var ae=le[z];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}ru=!!Wp,Gp=Wp=null}finally{Xe=m,ne.p=h,I.T=c}}r.current=a,Nt=2}}function Xb(){if(Nt===2){Nt=0;var r=Cr,a=fa,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var h=ne.p;ne.p=2;var m=Xe;Xe|=4;try{Tb(r,a.alternate,a)}finally{Xe=m,ne.p=h,I.T=c}}Nt=3}}function Qb(){if(Nt===4||Nt===3){Nt=0,ut();var r=Cr,a=fa,c=Kn,h=Lb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nt=5:(Nt=0,fa=Cr=null,Zb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Tr=null),Zh(c),a=a.stateNode,wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(Ka,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=I.T,m=ne.p,ne.p=2,I.T=null;try{for(var v=r.onRecoverableError,M=0;M<h.length;M++){var z=h[M];v(z.value,{componentStack:z.stack})}}finally{I.T=a,ne.p=m}}(Kn&3)!==0&&Gc(),yn(r),m=r.pendingLanes,(c&261930)!==0&&(m&42)!==0?r===Rp?Do++:(Do=0,Rp=r):Do=0,Ro(0)}}function Zb(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,fo(a)))}function Gc(){return Kb(),Xb(),Qb(),Jb()}function Jb(){if(Nt!==5)return!1;var r=Cr,a=Op;Op=0;var c=Zh(Kn),h=I.T,m=ne.p;try{ne.p=32>c?32:c,I.T=null,c=Dp,Dp=null;var v=Cr,M=Kn;if(Nt=0,fa=Cr=null,Kn=0,(Xe&6)!==0)throw Error(i(331));var z=Xe;if(Xe|=4,zb(v.current),Db(v,v.current,M,c),Xe=z,Ro(0,!1),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(Ka,v)}catch{}return!0}finally{ne.p=m,I.T=h,Zb(r,a)}}function e1(r,a,c){a=qi(c,a),a=up(r.stateNode,a,2),r=vr(r,a,2),r!==null&&(Qa(r,2),yn(r))}function Ze(r,a,c){if(r.tag===3)e1(r,r,c);else for(;a!==null;){if(a.tag===3){e1(a,r,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Tr===null||!Tr.has(h))){r=qi(c,r),c=tb(2),h=vr(a,c,2),h!==null&&(ib(c,h,a,r),Qa(h,2),yn(h));break}}a=a.return}}function $p(r,a,c){var h=r.pingCache;if(h===null){h=r.pingCache=new XA;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(c)||(Ap=!0,m.add(c),r=tE.bind(null,r,a,c),a.then(r,r))}function tE(r,a,c){var h=r.pingCache;h!==null&&h.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,nt===r&&(qe&c)===c&&(bt===4||bt===3&&(qe&62914560)===qe&&300>ot()-qc?(Xe&2)===0&&ha(r,0):Ep|=c,ua===qe&&(ua=0)),yn(r)}function t1(r,a){a===0&&(a=K0()),r=ns(r,a),r!==null&&(Qa(r,a),yn(r))}function iE(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),t1(r,c)}function nE(r,a){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),t1(r,c)}function rE(r,a){return yt(r,a)}var Yc=null,pa=null,Bp=!1,Fc=!1,Lp=!1,Ar=0;function yn(r){r!==pa&&r.next===null&&(pa===null?Yc=pa=r:pa=pa.next=r),Fc=!0,Bp||(Bp=!0,aE())}function Ro(r,a){if(!Lp&&Fc){Lp=!0;do for(var c=!1,h=Yc;h!==null;){if(r!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var M=h.suspendedLanes,z=h.pingedLanes;v=(1<<31-_i(42|r)+1)-1,v&=m&~(M&~z),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,s1(h,v))}else v=qe,v=Zl(h,h===nt?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Xa(h,v)||(c=!0,s1(h,v));h=h.next}while(c);Lp=!1}}function sE(){i1()}function i1(){Fc=Bp=!1;var r=0;Ar!==0&&gE()&&(r=Ar);for(var a=ot(),c=null,h=Yc;h!==null;){var m=h.next,v=n1(h,a);v===0?(h.next=null,c===null?Yc=m:c.next=m,m===null&&(pa=c)):(c=h,(r!==0||(v&3)!==0)&&(Fc=!0)),h=m}Nt!==0&&Nt!==5||Ro(r),Ar!==0&&(Ar=0)}function n1(r,a){for(var c=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var M=31-_i(v),z=1<<M,P=m[M];P===-1?((z&c)===0||(z&h)!==0)&&(m[M]=Rk(z,a)):P<=a&&(r.expiredLanes|=z),v&=~z}if(a=nt,c=qe,c=Zl(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===a&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&_e(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Xa(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(h!==null&&_e(h),Zh(c)){case 2:case 8:c=zs;break;case 32:c=Qr;break;case 268435456:c=Fl;break;default:c=Qr}return h=r1.bind(null,r),c=yt(c,h),r.callbackPriority=a,r.callbackNode=c,a}return h!==null&&h!==null&&_e(h),r.callbackPriority=2,r.callbackNode=null,2}function r1(r,a){if(Nt!==0&&Nt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Gc()&&r.callbackNode!==c)return null;var h=qe;return h=Zl(r,r===nt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Pb(r,h,a),n1(r,ot()),r.callbackNode!=null&&r.callbackNode===c?r1.bind(null,r):null)}function s1(r,a){if(Gc())return null;Pb(r,a,!0)}function aE(){vE(function(){(Xe&6)!==0?yt(lr,sE):i1()})}function jp(){if(Ar===0){var r=Js;r===0&&(r=Kl,Kl<<=1,(Kl&261888)===0&&(Kl=256)),Ar=r}return Ar}function a1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ic(""+r)}function o1(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function oE(r,a,c,h,m){if(a==="submit"&&c&&c.stateNode===m){var v=a1((m[ci]||null).action),M=h.submitter;M&&(a=(a=M[ci]||null)?a1(a.formAction):M.getAttribute("formAction"),a!==null&&(v=a,M=null));var z=new ac("action","action",null,h,m);r.push({event:z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ar!==0){var P=M?o1(m,M):new FormData(m);rp(c,{pending:!0,data:P,method:m.method,action:v},null,P)}}else typeof v=="function"&&(z.preventDefault(),P=M?o1(m,M):new FormData(m),rp(c,{pending:!0,data:P,method:m.method,action:v},v,P))},currentTarget:m}]})}}for(var Pp=0;Pp<xd.length;Pp++){var qp=xd[Pp],lE=qp.toLowerCase(),cE=qp[0].toUpperCase()+qp.slice(1);en(lE,"on"+cE)}en(jy,"onAnimationEnd"),en(Py,"onAnimationIteration"),en(qy,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(CA,"onTransitionRun"),en(kA,"onTransitionStart"),en(AA,"onTransitionCancel"),en(Hy,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(No));function l1(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],m=h.event;h=h.listeners;e:{var v=void 0;if(a)for(var M=h.length-1;0<=M;M--){var z=h[M],P=z.instance,J=z.currentTarget;if(z=z.listener,P!==v&&m.isPropagationStopped())break e;v=z,m.currentTarget=J;try{v(m)}catch(se){cc(se)}m.currentTarget=null,v=P}else for(M=0;M<h.length;M++){if(z=h[M],P=z.instance,J=z.currentTarget,z=z.listener,P!==v&&m.isPropagationStopped())break e;v=z,m.currentTarget=J;try{v(m)}catch(se){cc(se)}m.currentTarget=null,v=P}}}}function Pe(r,a){var c=a[Jh];c===void 0&&(c=a[Jh]=new Set);var h=r+"__bubble";c.has(h)||(c1(a,r,2,!1),c.add(h))}function Hp(r,a,c){var h=0;a&&(h|=4),c1(c,r,h,a)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Up(r){if(!r[Kc]){r[Kc]=!0,iy.forEach(function(c){c!=="selectionchange"&&(uE.has(c)||Hp(c,!1,r),Hp(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Kc]||(a[Kc]=!0,Hp("selectionchange",!1,a))}}function c1(r,a,c,h){switch(j1(a)){case 2:var m=jE;break;case 8:m=PE;break;default:m=nm}c=m.bind(null,a,c,r),m=void 0,!ld||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(a,c,{capture:!0,passive:m}):r.addEventListener(a,c,!0):m!==void 0?r.addEventListener(a,c,{passive:m}):r.addEventListener(a,c,!1)}function Vp(r,a,c,h,m){var v=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var M=h.tag;if(M===3||M===4){var z=h.stateNode.containerInfo;if(z===m)break;if(M===4)for(M=h.return;M!==null;){var P=M.tag;if((P===3||P===4)&&M.stateNode.containerInfo===m)return;M=M.return}for(;z!==null;){if(M=Bs(z),M===null)return;if(P=M.tag,P===5||P===6||P===26||P===27){h=v=M;continue e}z=z.parentNode}}h=h.return}py(function(){var J=v,se=ad(c),le=[];e:{var ee=Uy.get(r);if(ee!==void 0){var ie=ac,we=r;switch(r){case"keypress":if(rc(c)===0)break e;case"keydown":case"keyup":ie=nA;break;case"focusin":we="focus",ie=hd;break;case"focusout":we="blur",ie=hd;break;case"beforeblur":case"afterblur":ie=hd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Wk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=aA;break;case jy:case Py:case qy:ie=Fk;break;case Hy:ie=lA;break;case"scroll":case"scrollend":ie=Vk;break;case"wheel":ie=uA;break;case"copy":case"cut":case"paste":ie=Xk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=by;break;case"toggle":case"beforetoggle":ie=hA}var Ee=(a&4)!==0,it=!Ee&&(r==="scroll"||r==="scrollend"),Y=Ee?ee!==null?ee+"Capture":null:ee;Ee=[];for(var U=J,Z;U!==null;){var ae=U;if(Z=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Z===null||Y===null||(ae=eo(U,Y),ae!=null&&Ee.push(zo(U,ae,Z))),it)break;U=U.return}0<Ee.length&&(ee=new ie(ee,we,null,c,se),le.push({event:ee,listeners:Ee}))}}if((a&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",ee&&c!==sd&&(we=c.relatedTarget||c.fromElement)&&(Bs(we)||we[$s]))break e;if((ie||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,ie?(we=c.relatedTarget||c.toElement,ie=J,we=we?Bs(we):null,we!==null&&(it=o(we),Ee=we.tag,we!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(we=null)):(ie=null,we=J),ie!==we)){if(Ee=yy,ae="onMouseLeave",Y="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=by,ae="onPointerLeave",Y="onPointerEnter",U="pointer"),it=ie==null?ee:Ja(ie),Z=we==null?ee:Ja(we),ee=new Ee(ae,U+"leave",ie,c,se),ee.target=it,ee.relatedTarget=Z,ae=null,Bs(se)===J&&(Ee=new Ee(Y,U+"enter",we,c,se),Ee.target=Z,Ee.relatedTarget=it,ae=Ee),it=ae,ie&&we)t:{for(Ee=fE,Y=ie,U=we,Z=0,ae=Y;ae;ae=Ee(ae))Z++;ae=0;for(var ke=U;ke;ke=Ee(ke))ae++;for(;0<Z-ae;)Y=Ee(Y),Z--;for(;0<ae-Z;)U=Ee(U),ae--;for(;Z--;){if(Y===U||U!==null&&Y===U.alternate){Ee=Y;break t}Y=Ee(Y),U=Ee(U)}Ee=null}else Ee=null;ie!==null&&u1(le,ee,ie,Ee,!1),we!==null&&it!==null&&u1(le,it,we,Ee,!0)}}e:{if(ee=J?Ja(J):window,ie=ee.nodeName&&ee.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ee.type==="file")var Ye=Ay;else if(Cy(ee))if(Ey)Ye=wA;else{Ye=SA;var Te=bA}else ie=ee.nodeName,!ie||ie.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&rd(J.elementType)&&(Ye=Ay):Ye=xA;if(Ye&&(Ye=Ye(r,J))){ky(le,Ye,c,se);break e}Te&&Te(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&nd(ee,"number",ee.value)}switch(Te=J?Ja(J):window,r){case"focusin":(Cy(Te)||Te.contentEditable==="true")&&(Ws=Te,vd=J,lo=null);break;case"focusout":lo=vd=Ws=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,By(le,c,se);break;case"selectionchange":if(TA)break;case"keydown":case"keyup":By(le,c,se)}var $e;if(pd)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Is?_y(r,c)&&(He="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(He="onCompositionStart");He&&(Sy&&c.locale!=="ko"&&(Is||He!=="onCompositionStart"?He==="onCompositionEnd"&&Is&&($e=my()):(fr=se,cd="value"in fr?fr.value:fr.textContent,Is=!0)),Te=Xc(J,He),0<Te.length&&(He=new vy(He,r,null,c,se),le.push({event:He,listeners:Te}),$e?He.data=$e:($e=Ty(c),$e!==null&&(He.data=$e)))),($e=pA?mA(r,c):gA(r,c))&&(He=Xc(J,"onBeforeInput"),0<He.length&&(Te=new vy("onBeforeInput","beforeinput",null,c,se),le.push({event:Te,listeners:He}),Te.data=$e)),oE(le,r,J,c,se)}l1(le,a)})}function zo(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Xc(r,a){for(var c=a+"Capture",h=[];r!==null;){var m=r,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=eo(r,c),m!=null&&h.unshift(zo(r,m,v)),m=eo(r,a),m!=null&&h.push(zo(r,m,v))),r.tag===3)return h;r=r.return}return[]}function fE(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u1(r,a,c,h,m){for(var v=a._reactName,M=[];c!==null&&c!==h;){var z=c,P=z.alternate,J=z.stateNode;if(z=z.tag,P!==null&&P===h)break;z!==5&&z!==26&&z!==27||J===null||(P=J,m?(J=eo(c,v),J!=null&&M.unshift(zo(c,J,P))):m||(J=eo(c,v),J!=null&&M.push(zo(c,J,P)))),c=c.return}M.length!==0&&r.push({event:a,listeners:M})}var hE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function f1(r){return(typeof r=="string"?r:""+r).replace(hE,`
`).replace(dE,"")}function h1(r,a){return a=f1(a),f1(r)===a}function tt(r,a,c,h,m,v){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Hs(r,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Hs(r,""+h);break;case"className":ec(r,"class",h);break;case"tabIndex":ec(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ec(r,c,h);break;case"style":hy(r,h,v);break;case"data":if(a!=="object"){ec(r,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ic(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(a!=="input"&&tt(r,a,"name",m.name,m,null),tt(r,a,"formEncType",m.formEncType,m,null),tt(r,a,"formMethod",m.formMethod,m,null),tt(r,a,"formTarget",m.formTarget,m,null)):(tt(r,a,"encType",m.encType,m,null),tt(r,a,"method",m.method,m,null),tt(r,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ic(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=zn);break;case"onScroll":h!=null&&Pe("scroll",r);break;case"onScrollEnd":h!=null&&Pe("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ic(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":Pe("beforetoggle",r),Pe("toggle",r),Jl(r,"popover",h);break;case"xlinkActuate":Nn(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Nn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Nn(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Nn(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Nn(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Nn(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Jl(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Hk.get(c)||c,Jl(r,c,h))}}function Ip(r,a,c,h,m,v){switch(c){case"style":hy(r,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?Hs(r,h):(typeof h=="number"||typeof h=="bigint")&&Hs(r,""+h);break;case"onScroll":h!=null&&Pe("scroll",r);break;case"onScrollEnd":h!=null&&Pe("scrollend",r);break;case"onClick":h!=null&&(r.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ny.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),v=r[ci]||null,v=v!=null?v[c]:null,typeof v=="function"&&r.removeEventListener(a,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,h,m);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Jl(r,c,h)}}}function Yt(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",r),Pe("load",r);var h=!1,m=!1,v;for(v in c)if(c.hasOwnProperty(v)){var M=c[v];if(M!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(r,a,v,M,c,null)}}m&&tt(r,a,"srcSet",c.srcSet,c,null),h&&tt(r,a,"src",c.src,c,null);return;case"input":Pe("invalid",r);var z=v=M=m=null,P=null,J=null;for(h in c)if(c.hasOwnProperty(h)){var se=c[h];if(se!=null)switch(h){case"name":m=se;break;case"type":M=se;break;case"checked":P=se;break;case"defaultChecked":J=se;break;case"value":v=se;break;case"defaultValue":z=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:tt(r,a,h,se,c,null)}}ly(r,v,z,P,J,M,m,!1);return;case"select":Pe("invalid",r),h=M=v=null;for(m in c)if(c.hasOwnProperty(m)&&(z=c[m],z!=null))switch(m){case"value":v=z;break;case"defaultValue":M=z;break;case"multiple":h=z;default:tt(r,a,m,z,c,null)}a=v,c=M,r.multiple=!!h,a!=null?qs(r,!!h,a,!1):c!=null&&qs(r,!!h,c,!0);return;case"textarea":Pe("invalid",r),v=m=h=null;for(M in c)if(c.hasOwnProperty(M)&&(z=c[M],z!=null))switch(M){case"value":h=z;break;case"defaultValue":m=z;break;case"children":v=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:tt(r,a,M,z,c,null)}uy(r,h,m,v);return;case"option":for(P in c)if(c.hasOwnProperty(P)&&(h=c[P],h!=null))switch(P){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:tt(r,a,P,h,c,null)}return;case"dialog":Pe("beforetoggle",r),Pe("toggle",r),Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":Pe("load",r);break;case"video":case"audio":for(h=0;h<No.length;h++)Pe(No[h],r);break;case"image":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"embed":case"source":case"link":Pe("error",r),Pe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(h=c[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(r,a,J,h,c,null)}return;default:if(rd(a)){for(se in c)c.hasOwnProperty(se)&&(h=c[se],h!==void 0&&Ip(r,a,se,h,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(h=c[z],h!=null&&tt(r,a,z,h,c,null))}function pE(r,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,M=null,z=null,P=null,J=null,se=null;for(ie in c){var le=c[ie];if(c.hasOwnProperty(ie)&&le!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":P=le;default:h.hasOwnProperty(ie)||tt(r,a,ie,null,h,le)}}for(var ee in h){var ie=h[ee];if(le=c[ee],h.hasOwnProperty(ee)&&(ie!=null||le!=null))switch(ee){case"type":v=ie;break;case"name":m=ie;break;case"checked":J=ie;break;case"defaultChecked":se=ie;break;case"value":M=ie;break;case"defaultValue":z=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==le&&tt(r,a,ee,ie,h,le)}}id(r,M,z,P,J,se,v,m);return;case"select":ie=M=z=ee=null;for(v in c)if(P=c[v],c.hasOwnProperty(v)&&P!=null)switch(v){case"value":break;case"multiple":ie=P;default:h.hasOwnProperty(v)||tt(r,a,v,null,h,P)}for(m in h)if(v=h[m],P=c[m],h.hasOwnProperty(m)&&(v!=null||P!=null))switch(m){case"value":ee=v;break;case"defaultValue":z=v;break;case"multiple":M=v;default:v!==P&&tt(r,a,m,v,h,P)}a=z,c=M,h=ie,ee!=null?qs(r,!!c,ee,!1):!!h!=!!c&&(a!=null?qs(r,!!c,a,!0):qs(r,!!c,c?[]:"",!1));return;case"textarea":ie=ee=null;for(z in c)if(m=c[z],c.hasOwnProperty(z)&&m!=null&&!h.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:tt(r,a,z,null,h,m)}for(M in h)if(m=h[M],v=c[M],h.hasOwnProperty(M)&&(m!=null||v!=null))switch(M){case"value":ee=m;break;case"defaultValue":ie=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==v&&tt(r,a,M,m,h,v)}cy(r,ee,ie);return;case"option":for(var we in c)if(ee=c[we],c.hasOwnProperty(we)&&ee!=null&&!h.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:tt(r,a,we,null,h,ee)}for(P in h)if(ee=h[P],ie=c[P],h.hasOwnProperty(P)&&ee!==ie&&(ee!=null||ie!=null))switch(P){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:tt(r,a,P,ee,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in c)ee=c[Ee],c.hasOwnProperty(Ee)&&ee!=null&&!h.hasOwnProperty(Ee)&&tt(r,a,Ee,null,h,ee);for(J in h)if(ee=h[J],ie=c[J],h.hasOwnProperty(J)&&ee!==ie&&(ee!=null||ie!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:tt(r,a,J,ee,h,ie)}return;default:if(rd(a)){for(var it in c)ee=c[it],c.hasOwnProperty(it)&&ee!==void 0&&!h.hasOwnProperty(it)&&Ip(r,a,it,void 0,h,ee);for(se in h)ee=h[se],ie=c[se],!h.hasOwnProperty(se)||ee===ie||ee===void 0&&ie===void 0||Ip(r,a,se,ee,h,ie);return}}for(var Y in c)ee=c[Y],c.hasOwnProperty(Y)&&ee!=null&&!h.hasOwnProperty(Y)&&tt(r,a,Y,null,h,ee);for(le in h)ee=h[le],ie=c[le],!h.hasOwnProperty(le)||ee===ie||ee==null&&ie==null||tt(r,a,le,ee,h,ie)}function d1(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mE(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var m=c[h],v=m.transferSize,M=m.initiatorType,z=m.duration;if(v&&z&&d1(M)){for(M=0,z=m.responseEnd,h+=1;h<c.length;h++){var P=c[h],J=P.startTime;if(J>z)break;var se=P.transferSize,le=P.initiatorType;se&&d1(le)&&(P=P.responseEnd,M+=se*(P<z?1:(z-J)/(P-J)))}if(--h,a+=8*(v+M)/(m.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Wp=null,Gp=null;function Qc(r){return r.nodeType===9?r:r.ownerDocument}function p1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m1(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Yp(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fp=null;function gE(){var r=window.event;return r&&r.type==="popstate"?r===Fp?!1:(Fp=r,!0):(Fp=null,!1)}var g1=typeof setTimeout=="function"?setTimeout:void 0,yE=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,vE=typeof queueMicrotask=="function"?queueMicrotask:typeof y1<"u"?function(r){return y1.resolve(null).then(r).catch(bE)}:g1;function bE(r){setTimeout(function(){throw r})}function Er(r){return r==="head"}function v1(r,a){var c=a,h=0;do{var m=c.nextSibling;if(r.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(m),va(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")$o(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,$o(c);for(var v=c.firstChild;v;){var M=v.nextSibling,z=v.nodeName;v[Za]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=M}}else c==="body"&&$o(r.ownerDocument.body);c=m}while(c);va(a)}function b1(r,a){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function Kp(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Kp(c),ed(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function SE(r,a,c,h){for(;r.nodeType===1;){var m=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Za])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=Wi(r.nextSibling),r===null)break}return null}function xE(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Wi(r.nextSibling),r===null))return null;return r}function S1(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Wi(r.nextSibling),r===null))return null;return r}function Xp(r){return r.data==="$?"||r.data==="$~"}function Qp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function wE(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Wi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Zp=null;function x1(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return Wi(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function w1(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function _1(r,a,c){switch(a=Qc(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function $o(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);ed(r)}var Gi=new Map,T1=new Set;function Zc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Xn=ne.d;ne.d={f:_E,r:TE,D:CE,C:kE,L:AE,m:EE,X:OE,S:ME,M:DE};function _E(){var r=Xn.f(),a=Vc();return r||a}function TE(r){var a=Ls(r);a!==null&&a.tag===5&&a.type==="form"?Hv(a):Xn.r(r)}var ma=typeof document>"u"?null:document;function C1(r,a,c){var h=ma;if(h&&typeof a=="string"&&a){var m=ji(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),T1.has(m)||(T1.add(m),r={rel:r,crossOrigin:c,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),Yt(a,"link",r),Pt(a),h.head.appendChild(a)))}}function CE(r){Xn.D(r),C1("dns-prefetch",r,null)}function kE(r,a){Xn.C(r,a),C1("preconnect",r,a)}function AE(r,a,c){Xn.L(r,a,c);var h=ma;if(h&&r&&a){var m='link[rel="preload"][as="'+ji(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+ji(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+ji(c.imageSizes)+'"]')):m+='[href="'+ji(r)+'"]';var v=m;switch(a){case"style":v=ga(r);break;case"script":v=ya(r)}Gi.has(v)||(r=g({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),Gi.set(v,r),h.querySelector(m)!==null||a==="style"&&h.querySelector(Bo(v))||a==="script"&&h.querySelector(Lo(v))||(a=h.createElement("link"),Yt(a,"link",r),Pt(a),h.head.appendChild(a)))}}function EE(r,a){Xn.m(r,a);var c=ma;if(c&&r){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ji(h)+'"][href="'+ji(r)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ya(r)}if(!Gi.has(v)&&(r=g({rel:"modulepreload",href:r},a),Gi.set(v,r),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Lo(v)))return}h=c.createElement("link"),Yt(h,"link",r),Pt(h),c.head.appendChild(h)}}}function ME(r,a,c){Xn.S(r,a,c);var h=ma;if(h&&r){var m=js(h).hoistableStyles,v=ga(r);a=a||"default";var M=m.get(v);if(!M){var z={loading:0,preload:null};if(M=h.querySelector(Bo(v)))z.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":a},c),(c=Gi.get(v))&&Jp(r,c);var P=M=h.createElement("link");Pt(P),Yt(P,"link",r),P._p=new Promise(function(J,se){P.onload=J,P.onerror=se}),P.addEventListener("load",function(){z.loading|=1}),P.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Jc(M,a,h)}M={type:"stylesheet",instance:M,count:1,state:z},m.set(v,M)}}}function OE(r,a){Xn.X(r,a);var c=ma;if(c&&r){var h=js(c).hoistableScripts,m=ya(r),v=h.get(m);v||(v=c.querySelector(Lo(m)),v||(r=g({src:r,async:!0},a),(a=Gi.get(m))&&em(r,a),v=c.createElement("script"),Pt(v),Yt(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function DE(r,a){Xn.M(r,a);var c=ma;if(c&&r){var h=js(c).hoistableScripts,m=ya(r),v=h.get(m);v||(v=c.querySelector(Lo(m)),v||(r=g({src:r,async:!0,type:"module"},a),(a=Gi.get(m))&&em(r,a),v=c.createElement("script"),Pt(v),Yt(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function k1(r,a,c,h){var m=(m=F.current)?Zc(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=ga(c.href),c=js(m).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=ga(c.href);var v=js(m).hoistableStyles,M=v.get(r);if(M||(m=m.ownerDocument||m,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,M),(v=m.querySelector(Bo(r)))&&!v._p&&(M.instance=v,M.state.loading=5),Gi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Gi.set(r,c),v||RE(m,r,c,M.state))),a&&h===null)throw Error(i(528,""));return M}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ya(c),c=js(m).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ga(r){return'href="'+ji(r)+'"'}function Bo(r){return'link[rel="stylesheet"]['+r+"]"}function A1(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function RE(r,a,c,h){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=r.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Yt(a,"link",c),Pt(a),r.head.appendChild(a))}function ya(r){return'[src="'+ji(r)+'"]'}function Lo(r){return"script[async]"+r}function E1(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=r.querySelector('style[data-href~="'+ji(c.href)+'"]');if(h)return a.instance=h,Pt(h),h;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),Pt(h),Yt(h,"style",m),Jc(h,c.precedence,r),a.instance=h;case"stylesheet":m=ga(c.href);var v=r.querySelector(Bo(m));if(v)return a.state.loading|=4,a.instance=v,Pt(v),v;h=A1(c),(m=Gi.get(m))&&Jp(h,m),v=(r.ownerDocument||r).createElement("link"),Pt(v);var M=v;return M._p=new Promise(function(z,P){M.onload=z,M.onerror=P}),Yt(v,"link",h),a.state.loading|=4,Jc(v,c.precedence,r),a.instance=v;case"script":return v=ya(c.src),(m=r.querySelector(Lo(v)))?(a.instance=m,Pt(m),m):(h=c,(m=Gi.get(v))&&(h=g({},c),em(h,m)),r=r.ownerDocument||r,m=r.createElement("script"),Pt(m),Yt(m,"link",h),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Jc(h,c.precedence,r));return a.instance}function Jc(r,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,M=0;M<h.length;M++){var z=h[M];if(z.dataset.precedence===a)v=z;else if(v!==m)break}v?v.parentNode.insertBefore(r,v.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Jp(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function em(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var eu=null;function M1(r,a,c){if(eu===null){var h=new Map,m=eu=new Map;m.set(c,h)}else m=eu,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),m=0;m<c.length;m++){var v=c[m];if(!(v[Za]||v[Vt]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var M=v.getAttribute(a)||"";M=r+M;var z=h.get(M);z?z.push(v):h.set(M,[v])}}return h}function O1(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function NE(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function D1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function zE(r,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=ga(h.href),v=a.querySelector(Bo(m));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=tu.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=v,Pt(v);return}v=a.ownerDocument||a,h=A1(h),(m=Gi.get(m))&&Jp(h,m),v=v.createElement("link"),Pt(v);var M=v;M._p=new Promise(function(z,P){M.onload=z,M.onerror=P}),Yt(v,"link",h),c.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=tu.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var tm=0;function $E(r,a){return r.stylesheets&&r.count===0&&nu(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&nu(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+a);0<r.imgBytes&&tm===0&&(tm=62500*mE());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&nu(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>tm?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function tu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nu(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var iu=null;function nu(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,iu=new Map,a.forEach(BE,r),iu=null,tu.call(r))}function BE(r,a){if(!(a.state.loading&4)){var c=iu.get(r);if(c)var h=c.get(null);else{c=new Map,iu.set(r,c);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var M=m[v];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),h=M)}h&&c.set(null,h)}m=a.instance,M=m.getAttribute("data-precedence"),v=c.get(M)||h,v===h&&c.set(null,m),c.set(M,m),this.count++,h=tu.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var jo={$$typeof:T,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function LE(r,a,c,h,m,v,M,z,P){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xh(0),this.hiddenUpdates=Xh(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function R1(r,a,c,h,m,v,M,z,P,J,se,le){return r=new LE(r,a,c,M,P,J,se,le,z),a=1,v===!0&&(a|=24),v=Ci(3,null,null,a),r.current=v,v.stateNode=r,a=zd(),a.refCount++,r.pooledCache=a,a.refCount++,v.memoizedState={element:h,isDehydrated:c,cache:a},jd(v),r}function N1(r){return r?(r=Fs,r):Fs}function z1(r,a,c,h,m,v){m=N1(m),h.context===null?h.context=m:h.pendingContext=m,h=yr(a),h.payload={element:c},v=v===void 0?null:v,v!==null&&(h.callback=v),c=vr(r,h,a),c!==null&&(mi(c,r,a),go(c,r,a))}function $1(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function im(r,a){$1(r,a),(r=r.alternate)&&$1(r,a)}function B1(r){if(r.tag===13||r.tag===31){var a=ns(r,67108864);a!==null&&mi(a,r,67108864),im(r,67108864)}}function L1(r){if(r.tag===13||r.tag===31){var a=Oi();a=Qh(a);var c=ns(r,a);c!==null&&mi(c,r,a),im(r,a)}}var ru=!0;function jE(r,a,c,h){var m=I.T;I.T=null;var v=ne.p;try{ne.p=2,nm(r,a,c,h)}finally{ne.p=v,I.T=m}}function PE(r,a,c,h){var m=I.T;I.T=null;var v=ne.p;try{ne.p=8,nm(r,a,c,h)}finally{ne.p=v,I.T=m}}function nm(r,a,c,h){if(ru){var m=rm(h);if(m===null)Vp(r,a,h,su,c),P1(r,h);else if(HE(m,r,a,c,h))h.stopPropagation();else if(P1(r,h),a&4&&-1<qE.indexOf(r)){for(;m!==null;){var v=Ls(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var M=Zr(v.pendingLanes);if(M!==0){var z=v;for(z.pendingLanes|=2,z.entangledLanes|=2;M;){var P=1<<31-_i(M);z.entanglements[1]|=P,M&=~P}yn(v),(Xe&6)===0&&(Hc=ot()+500,Ro(0))}}break;case 31:case 13:z=ns(v,2),z!==null&&mi(z,v,2),Vc(),im(v,2)}if(v=rm(h),v===null&&Vp(r,a,h,su,c),v===m)break;m=v}m!==null&&h.stopPropagation()}else Vp(r,a,h,null,c)}}function rm(r){return r=ad(r),sm(r)}var su=null;function sm(r){if(su=null,r=Bs(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=l(a),r!==null)return r;r=null}else if(c===31){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return su=r,null}function j1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dn()){case lr:return 2;case zs:return 8;case Qr:case Yl:return 32;case Fl:return 268435456;default:return 32}default:return 32}}var am=!1,Mr=null,Or=null,Dr=null,Po=new Map,qo=new Map,Rr=[],qE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P1(r,a){switch(r){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Po.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(a.pointerId)}}function Ho(r,a,c,h,m,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},a!==null&&(a=Ls(a),a!==null&&B1(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function HE(r,a,c,h,m){switch(a){case"focusin":return Mr=Ho(Mr,r,a,c,h,m),!0;case"dragenter":return Or=Ho(Or,r,a,c,h,m),!0;case"mouseover":return Dr=Ho(Dr,r,a,c,h,m),!0;case"pointerover":var v=m.pointerId;return Po.set(v,Ho(Po.get(v)||null,r,a,c,h,m)),!0;case"gotpointercapture":return v=m.pointerId,qo.set(v,Ho(qo.get(v)||null,r,a,c,h,m)),!0}return!1}function q1(r){var a=Bs(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){r.blockedOn=a,ey(r.priority,function(){L1(c)});return}}else if(a===31){if(a=u(c),a!==null){r.blockedOn=a,ey(r.priority,function(){L1(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function au(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=rm(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);sd=h,c.target.dispatchEvent(h),sd=null}else return a=Ls(c),a!==null&&B1(a),r.blockedOn=c,!1;a.shift()}return!0}function H1(r,a,c){au(r)&&c.delete(a)}function UE(){am=!1,Mr!==null&&au(Mr)&&(Mr=null),Or!==null&&au(Or)&&(Or=null),Dr!==null&&au(Dr)&&(Dr=null),Po.forEach(H1),qo.forEach(H1)}function ou(r,a){r.blockedOn===a&&(r.blockedOn=null,am||(am=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UE)))}var lu=null;function U1(r){lu!==r&&(lu=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){lu===r&&(lu=null);for(var a=0;a<r.length;a+=3){var c=r[a],h=r[a+1],m=r[a+2];if(typeof h!="function"){if(sm(h||c)===null)continue;break}var v=Ls(c);v!==null&&(r.splice(a,3),a-=3,rp(v,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function va(r){function a(P){return ou(P,r)}Mr!==null&&ou(Mr,r),Or!==null&&ou(Or,r),Dr!==null&&ou(Dr,r),Po.forEach(a),qo.forEach(a);for(var c=0;c<Rr.length;c++){var h=Rr[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Rr.length&&(c=Rr[0],c.blockedOn===null);)q1(c),c.blockedOn===null&&Rr.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],v=c[h+1],M=m[ci]||null;if(typeof v=="function")M||U1(c);else if(M){var z=null;if(v&&v.hasAttribute("formAction")){if(m=v,M=v[ci]||null)z=M.formAction;else if(sm(m)!==null)continue}else z=M.action;typeof z=="function"?c[h+1]=z:(c.splice(h,3),h-=3),U1(c)}}}function V1(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(M){return m=M})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function om(r){this._internalRoot=r}cu.prototype.render=om.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Oi();z1(c,h,r,a,null,null)},cu.prototype.unmount=om.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;z1(r.current,2,null,r,null,null),Vc(),a[$s]=null}};function cu(r){this._internalRoot=r}cu.prototype.unstable_scheduleHydration=function(r){if(r){var a=J0();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Rr.length&&a!==0&&a<Rr[c].priority;c++);Rr.splice(c,0,r),c===0&&q1(r)}};var I1=e.version;if(I1!=="19.2.1")throw Error(i(527,I1,"19.2.1"));ne.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var VE={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Ka=uu.inject(VE),wi=uu}catch{}}return Vo.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,h="",m=Qv,v=Zv,M=Jv;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError)),a=R1(r,1,!1,null,null,c,h,null,m,v,M,V1),r[$s]=a.current,Up(r),new om(a)},Vo.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var h=!1,m="",v=Qv,M=Zv,z=Jv,P=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(P=c.formState)),a=R1(r,1,!0,a,c??null,h,m,P,v,M,z,V1),a.context=N1(null),c=a.current,h=Oi(),h=Qh(h),m=yr(h),m.callback=null,vr(c,m,h),c=h,a.current.lanes=c,Qa(a,c),yn(a),r[$s]=a.current,Up(r),new cu(a)},Vo.version="19.2.1",Vo}var eS;function JE(){if(eS)return um.exports;eS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),um.exports=ZE(),um.exports}var eM=JE();const tM=Nl(eM);var pm={exports:{}},mm={};var tS;function iM(){if(tS)return mm;tS=1;var n=Wa().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return mm.c=function(e){return n.H.useMemoCache(e)},mm}var iS;function nM(){return iS||(iS=1,pm.exports=iM()),pm.exports}var Bi=nM();const rM=n=>{const e=Bi.c(2),{children:t}=n;let i;return e[0]!==t?(i=W.jsx("div",{className:"flex justify-center min-h-screen bg-gray-100",children:t}),e[0]=t,e[1]=i):i=e[1],i};var Io={exports:{}},gm={},ym={exports:{}},vm,nS;function sM(){if(nS)return vm;nS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return vm=n,vm}var bm,rS;function aM(){if(rS)return bm;rS=1;var n=sM();function e(){}function t(){}return t.resetWarningCache=e,bm=function(){function i(l,u,f,d,p,g){if(g!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function s(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},bm}var sS;function Z2(){return sS||(sS=1,ym.exports=aM()()),ym.exports}function J2(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=J2(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function aS(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=J2(n))&&(i&&(i+=" "),i+=e);return i}const oM=Object.freeze(Object.defineProperty({__proto__:null,clsx:aS,default:aS},Symbol.toStringTag,{value:"Module"})),lM=WE(oM);var Tt={},zr={},oS;function kh(){if(oS)return zr;oS=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.dontSetMe=s,zr.findInArray=n,zr.int=i,zr.isFunction=e,zr.isNum=t;function n(o,l){for(let u=0,f=o.length;u<f;u++)if(l.apply(l,[o[u],u,o]))return o[u]}function e(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function t(o){return typeof o=="number"&&!isNaN(o)}function i(o){return parseInt(o,10)}function s(o,l,u){if(o[l])return new Error("Invalid prop ".concat(l," passed to ").concat(u," - do not set this, set it on the child."))}return zr}var $r={},lS;function cM(){if(lS)return $r;lS=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.browserPrefixToKey=t,$r.browserPrefixToStyle=i,$r.default=void 0,$r.getPrefix=e;const n=["Moz","Webkit","O","ms"];function e(){var o;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=(o=window.document)===null||o===void 0||(o=o.documentElement)===null||o===void 0?void 0:o.style;if(!u||l in u)return"";for(let f=0;f<n.length;f++)if(t(l,n[f])in u)return n[f];return""}function t(o,l){return l?"".concat(l).concat(s(o)):o}function i(o,l){return l?"-".concat(l.toLowerCase(),"-").concat(o):o}function s(o){let l="",u=!0;for(let f=0;f<o.length;f++)u?(l+=o[f].toUpperCase(),u=!1):o[f]==="-"?u=!0:l+=o[f];return l}return $r.default=e(),$r}var cS;function f0(){if(cS)return Tt;cS=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.addClassName=k,Tt.addEvent=u,Tt.addUserSelectStyles=T,Tt.createCSSTransform=S,Tt.createSVGTransform=C,Tt.getTouch=_,Tt.getTouchIdentifier=w,Tt.getTranslation=x,Tt.innerHeight=g,Tt.innerWidth=y,Tt.matchesSelector=o,Tt.matchesSelectorAndParentsTo=l,Tt.offsetXYFromParent=b,Tt.outerHeight=d,Tt.outerWidth=p,Tt.removeClassName=O,Tt.removeEvent=f,Tt.removeUserSelectStyles=E;var n=kh(),e=i(cM());function t(A){if(typeof WeakMap!="function")return null;var N=new WeakMap,$=new WeakMap;return(t=function(V){return V?$:N})(A)}function i(A,N){if(A&&A.__esModule)return A;if(A===null||typeof A!="object"&&typeof A!="function")return{default:A};var $=t(N);if($&&$.has(A))return $.get(A);var V={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in A)if(H!=="default"&&Object.prototype.hasOwnProperty.call(A,H)){var X=q?Object.getOwnPropertyDescriptor(A,H):null;X&&(X.get||X.set)?Object.defineProperty(V,H,X):V[H]=A[H]}return V.default=A,$&&$.set(A,V),V}let s="";function o(A,N){return s||(s=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function($){return(0,n.isFunction)(A[$])})),(0,n.isFunction)(A[s])?A[s](N):!1}function l(A,N,$){let V=A;do{if(o(V,N))return!0;if(V===$)return!1;V=V.parentNode}while(V);return!1}function u(A,N,$,V){if(!A)return;const q={capture:!0,...V};A.addEventListener?A.addEventListener(N,$,q):A.attachEvent?A.attachEvent("on"+N,$):A["on"+N]=$}function f(A,N,$,V){if(!A)return;const q={capture:!0,...V};A.removeEventListener?A.removeEventListener(N,$,q):A.detachEvent?A.detachEvent("on"+N,$):A["on"+N]=null}function d(A){let N=A.clientHeight;const $=A.ownerDocument.defaultView.getComputedStyle(A);return N+=(0,n.int)($.borderTopWidth),N+=(0,n.int)($.borderBottomWidth),N}function p(A){let N=A.clientWidth;const $=A.ownerDocument.defaultView.getComputedStyle(A);return N+=(0,n.int)($.borderLeftWidth),N+=(0,n.int)($.borderRightWidth),N}function g(A){let N=A.clientHeight;const $=A.ownerDocument.defaultView.getComputedStyle(A);return N-=(0,n.int)($.paddingTop),N-=(0,n.int)($.paddingBottom),N}function y(A){let N=A.clientWidth;const $=A.ownerDocument.defaultView.getComputedStyle(A);return N-=(0,n.int)($.paddingLeft),N-=(0,n.int)($.paddingRight),N}function b(A,N,$){const q=N===N.ownerDocument.body?{left:0,top:0}:N.getBoundingClientRect(),H=(A.clientX+N.scrollLeft-q.left)/$,X=(A.clientY+N.scrollTop-q.top)/$;return{x:H,y:X}}function S(A,N){const $=x(A,N,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:$}}function C(A,N){return x(A,N,"")}function x(A,N,$){let{x:V,y:q}=A,H="translate(".concat(V).concat($,",").concat(q).concat($,")");if(N){const X="".concat(typeof N.x=="string"?N.x:N.x+$),te="".concat(typeof N.y=="string"?N.y:N.y+$);H="translate(".concat(X,", ").concat(te,")")+H}return H}function _(A,N){return A.targetTouches&&(0,n.findInArray)(A.targetTouches,$=>N===$.identifier)||A.changedTouches&&(0,n.findInArray)(A.changedTouches,$=>N===$.identifier)}function w(A){if(A.targetTouches&&A.targetTouches[0])return A.targetTouches[0].identifier;if(A.changedTouches&&A.changedTouches[0])return A.changedTouches[0].identifier}function T(A){if(!A)return;let N=A.getElementById("react-draggable-style-el");N||(N=A.createElement("style"),N.type="text/css",N.id="react-draggable-style-el",N.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,N.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,A.getElementsByTagName("head")[0].appendChild(N)),A.body&&k(A.body,"react-draggable-transparent-selection")}function E(A){if(A)try{if(A.body&&O(A.body,"react-draggable-transparent-selection"),A.selection)A.selection.empty();else{const N=(A.defaultView||window).getSelection();N&&N.type!=="Caret"&&N.removeAllRanges()}}catch{}}function k(A,N){A.classList?A.classList.add(N):A.className.match(new RegExp("(?:^|\\s)".concat(N,"(?!\\S)")))||(A.className+=" ".concat(N))}function O(A,N){A.classList?A.classList.remove(N):A.className=A.className.replace(new RegExp("(?:^|\\s)".concat(N,"(?!\\S)"),"g"),"")}return Tt}var vn={},uS;function e_(){if(uS)return vn;uS=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.canDragX=s,vn.canDragY=o,vn.createCoreData=u,vn.createDraggableData=f,vn.getBoundPosition=t,vn.getControlPosition=l,vn.snapToGrid=i;var n=kh(),e=f0();function t(g,y,b){if(!g.props.bounds)return[y,b];let{bounds:S}=g.props;S=typeof S=="string"?S:d(S);const C=p(g);if(typeof S=="string"){const{ownerDocument:x}=C,_=x.defaultView;let w;if(S==="parent"?w=C.parentNode:w=x.querySelector(S),!(w instanceof _.HTMLElement))throw new Error('Bounds selector "'+S+'" could not find an element.');const T=w,E=_.getComputedStyle(C),k=_.getComputedStyle(T);S={left:-C.offsetLeft+(0,n.int)(k.paddingLeft)+(0,n.int)(E.marginLeft),top:-C.offsetTop+(0,n.int)(k.paddingTop)+(0,n.int)(E.marginTop),right:(0,e.innerWidth)(T)-(0,e.outerWidth)(C)-C.offsetLeft+(0,n.int)(k.paddingRight)-(0,n.int)(E.marginRight),bottom:(0,e.innerHeight)(T)-(0,e.outerHeight)(C)-C.offsetTop+(0,n.int)(k.paddingBottom)-(0,n.int)(E.marginBottom)}}return(0,n.isNum)(S.right)&&(y=Math.min(y,S.right)),(0,n.isNum)(S.bottom)&&(b=Math.min(b,S.bottom)),(0,n.isNum)(S.left)&&(y=Math.max(y,S.left)),(0,n.isNum)(S.top)&&(b=Math.max(b,S.top)),[y,b]}function i(g,y,b){const S=Math.round(y/g[0])*g[0],C=Math.round(b/g[1])*g[1];return[S,C]}function s(g){return g.props.axis==="both"||g.props.axis==="x"}function o(g){return g.props.axis==="both"||g.props.axis==="y"}function l(g,y,b){const S=typeof y=="number"?(0,e.getTouch)(g,y):null;if(typeof y=="number"&&!S)return null;const C=p(b),x=b.props.offsetParent||C.offsetParent||C.ownerDocument.body;return(0,e.offsetXYFromParent)(S||g,x,b.props.scale)}function u(g,y,b){const S=!(0,n.isNum)(g.lastX),C=p(g);return S?{node:C,deltaX:0,deltaY:0,lastX:y,lastY:b,x:y,y:b}:{node:C,deltaX:y-g.lastX,deltaY:b-g.lastY,lastX:g.lastX,lastY:g.lastY,x:y,y:b}}function f(g,y){const b=g.props.scale;return{node:y.node,x:g.state.x+y.deltaX/b,y:g.state.y+y.deltaY/b,deltaX:y.deltaX/b,deltaY:y.deltaY/b,lastX:g.state.x,lastY:g.state.y}}function d(g){return{left:g.left,top:g.top,right:g.right,bottom:g.bottom}}function p(g){const y=g.findDOMNode();if(!y)throw new Error("<DraggableCore>: Unmounted during event!");return y}return vn}var Wo={},fu={},fS;function t_(){if(fS)return fu;fS=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.default=n;function n(){}return fu}var hS;function uM(){if(hS)return Wo;hS=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.default=void 0;var n=d(Wa()),e=u(Z2()),t=u(Ch()),i=f0(),s=e_(),o=kh(),l=u(t_());function u(x){return x&&x.__esModule?x:{default:x}}function f(x){if(typeof WeakMap!="function")return null;var _=new WeakMap,w=new WeakMap;return(f=function(T){return T?w:_})(x)}function d(x,_){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var w=f(_);if(w&&w.has(x))return w.get(x);var T={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in x)if(k!=="default"&&Object.prototype.hasOwnProperty.call(x,k)){var O=E?Object.getOwnPropertyDescriptor(x,k):null;O&&(O.get||O.set)?Object.defineProperty(T,k,O):T[k]=x[k]}return T.default=x,w&&w.set(x,T),T}function p(x,_,w){return _=g(_),_ in x?Object.defineProperty(x,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[_]=w,x}function g(x){var _=y(x,"string");return typeof _=="symbol"?_:String(_)}function y(x,_){if(typeof x!="object"||x===null)return x;var w=x[Symbol.toPrimitive];if(w!==void 0){var T=w.call(x,_);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(x)}const b={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let S=b.mouse,C=class extends n.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",_=>{if(this.props.onMouseDown(_),!this.props.allowAnyClick&&typeof _.button=="number"&&_.button!==0)return!1;const w=this.findDOMNode();if(!w||!w.ownerDocument||!w.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:T}=w;if(this.props.disabled||!(_.target instanceof T.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(_.target,this.props.handle,w)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(_.target,this.props.cancel,w))return;_.type==="touchstart"&&_.preventDefault();const E=(0,i.getTouchIdentifier)(_);this.touchIdentifier=E;const k=(0,s.getControlPosition)(_,E,this);if(k==null)return;const{x:O,y:A}=k,N=(0,s.createCoreData)(this,O,A);(0,l.default)("DraggableCore: handleDragStart: %j",N),(0,l.default)("calling",this.props.onStart),!(this.props.onStart(_,N)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(T),this.dragging=!0,this.lastX=O,this.lastY=A,(0,i.addEvent)(T,S.move,this.handleDrag),(0,i.addEvent)(T,S.stop,this.handleDragStop))}),p(this,"handleDrag",_=>{const w=(0,s.getControlPosition)(_,this.touchIdentifier,this);if(w==null)return;let{x:T,y:E}=w;if(Array.isArray(this.props.grid)){let A=T-this.lastX,N=E-this.lastY;if([A,N]=(0,s.snapToGrid)(this.props.grid,A,N),!A&&!N)return;T=this.lastX+A,E=this.lastY+N}const k=(0,s.createCoreData)(this,T,E);if((0,l.default)("DraggableCore: handleDrag: %j",k),this.props.onDrag(_,k)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const N=document.createEvent("MouseEvents");N.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(N)}return}this.lastX=T,this.lastY=E}),p(this,"handleDragStop",_=>{if(!this.dragging)return;const w=(0,s.getControlPosition)(_,this.touchIdentifier,this);if(w==null)return;let{x:T,y:E}=w;if(Array.isArray(this.props.grid)){let N=T-this.lastX||0,$=E-this.lastY||0;[N,$]=(0,s.snapToGrid)(this.props.grid,N,$),T=this.lastX+N,E=this.lastY+$}const k=(0,s.createCoreData)(this,T,E);if(this.props.onStop(_,k)===!1||this.mounted===!1)return!1;const A=this.findDOMNode();A&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(A.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",k),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,A&&((0,l.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(A.ownerDocument,S.move,this.handleDrag),(0,i.removeEvent)(A.ownerDocument,S.stop,this.handleDragStop))}),p(this,"onMouseDown",_=>(S=b.mouse,this.handleDragStart(_))),p(this,"onMouseUp",_=>(S=b.mouse,this.handleDragStop(_))),p(this,"onTouchStart",_=>(S=b.touch,this.handleDragStart(_))),p(this,"onTouchEnd",_=>(S=b.touch,this.handleDragStop(_)))}componentDidMount(){this.mounted=!0;const _=this.findDOMNode();_&&(0,i.addEvent)(_,b.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const _=this.findDOMNode();if(_){const{ownerDocument:w}=_;(0,i.removeEvent)(w,b.mouse.move,this.handleDrag),(0,i.removeEvent)(w,b.touch.move,this.handleDrag),(0,i.removeEvent)(w,b.mouse.stop,this.handleDragStop),(0,i.removeEvent)(w,b.touch.stop,this.handleDragStop),(0,i.removeEvent)(_,b.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(w)}}findDOMNode(){var _,w;return(_=this.props)!==null&&_!==void 0&&_.nodeRef?(w=this.props)===null||w===void 0||(w=w.nodeRef)===null||w===void 0?void 0:w.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Wo.default=C,p(C,"displayName","DraggableCore"),p(C,"propTypes",{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(x,_){if(x[_]&&x[_].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),p(C,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Wo}var dS;function fM(){return dS||(dS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),n.default=void 0;var e=y(Wa()),t=p(Z2()),i=p(Ch()),s=p(lM),o=f0(),l=e_(),u=kh(),f=p(uM()),d=p(t_());function p(w){return w&&w.__esModule?w:{default:w}}function g(w){if(typeof WeakMap!="function")return null;var T=new WeakMap,E=new WeakMap;return(g=function(k){return k?E:T})(w)}function y(w,T){if(w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var E=g(T);if(E&&E.has(w))return E.get(w);var k={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in w)if(A!=="default"&&Object.prototype.hasOwnProperty.call(w,A)){var N=O?Object.getOwnPropertyDescriptor(w,A):null;N&&(N.get||N.set)?Object.defineProperty(k,A,N):k[A]=w[A]}return k.default=w,E&&E.set(w,k),k}function b(){return b=Object.assign?Object.assign.bind():function(w){for(var T=1;T<arguments.length;T++){var E=arguments[T];for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(w[k]=E[k])}return w},b.apply(this,arguments)}function S(w,T,E){return T=C(T),T in w?Object.defineProperty(w,T,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[T]=E,w}function C(w){var T=x(w,"string");return typeof T=="symbol"?T:String(T)}function x(w,T){if(typeof w!="object"||w===null)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var k=E.call(w,T);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(w)}class _ extends e.Component{static getDerivedStateFromProps(T,E){let{position:k}=T,{prevPropsPosition:O}=E;return k&&(!O||k.x!==O.x||k.y!==O.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:O}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(T){super(T),S(this,"onDragStart",(E,k)=>{if((0,d.default)("Draggable: onDragStart: %j",k),this.props.onStart(E,(0,l.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),S(this,"onDrag",(E,k)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",k);const O=(0,l.createDraggableData)(this,k),A={x:O.x,y:O.y,slackX:0,slackY:0};if(this.props.bounds){const{x:$,y:V}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[q,H]=(0,l.getBoundPosition)(this,A.x,A.y);A.x=q,A.y=H,A.slackX=this.state.slackX+($-A.x),A.slackY=this.state.slackY+(V-A.y),O.x=A.x,O.y=A.y,O.deltaX=A.x-this.state.x,O.deltaY=A.y-this.state.y}if(this.props.onDrag(E,O)===!1)return!1;this.setState(A)}),S(this,"onDragStop",(E,k)=>{if(!this.state.dragging||this.props.onStop(E,(0,l.createDraggableData)(this,k))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",k);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:$,y:V}=this.props.position;A.x=$,A.y=V}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:T.position?T.position.x:T.defaultPosition.x,y:T.position?T.position.y:T.defaultPosition.y,prevPropsPosition:{...T.position},slackX:0,slackY:0,isElementSVG:!1},T.position&&!(T.onDrag||T.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var T,E;return(T=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&T!==void 0?T:i.default.findDOMNode(this)}render(){const{axis:T,bounds:E,children:k,defaultPosition:O,defaultClassName:A,defaultClassNameDragging:N,defaultClassNameDragged:$,position:V,positionOffset:q,scale:H,...X}=this.props;let te={},fe=null;const ne=!!!V||this.state.dragging,oe=V||O,pe={x:(0,l.canDragX)(this)&&ne?this.state.x:oe.x,y:(0,l.canDragY)(this)&&ne?this.state.y:oe.y};this.state.isElementSVG?fe=(0,o.createSVGTransform)(pe,q):te=(0,o.createCSSTransform)(pe,q);const K=(0,s.default)(k.props.className||"",A,{[N]:this.state.dragging,[$]:this.state.dragged});return e.createElement(f.default,b({},X,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(k),{className:K,style:{...k.props.style,...te},transform:fe}))}}n.default=_,S(_,"displayName","Draggable"),S(_,"propTypes",{...f.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),S(_,"defaultProps",{...f.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(gm)),gm}var pS;function hM(){if(pS)return Io.exports;pS=1;const{default:n,DraggableCore:e}=fM();return Io.exports=n,Io.exports.default=n,Io.exports.DraggableCore=e,Io.exports}var dM=hM();const pM=Nl(dM);var i_=Ch(),Dt=function(){return Dt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Dt.apply(this,arguments)},mS={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},gS={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},hu={width:"20px",height:"20px",position:"absolute",zIndex:1},mM={top:Dt(Dt({},mS),{top:"-5px"}),right:Dt(Dt({},gS),{left:void 0,right:"-5px"}),bottom:Dt(Dt({},mS),{top:void 0,bottom:"-5px"}),left:Dt(Dt({},gS),{left:"-5px"}),topRight:Dt(Dt({},hu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Dt(Dt({},hu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Dt(Dt({},hu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Dt(Dt({},hu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},gM=ve.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,s=n.replaceStyles,o=n.className,l=ve.useCallback(function(d){e(d,t)},[e,t]),u=ve.useCallback(function(d){e(d,t)},[e,t]),f=ve.useMemo(function(){return Dt(Dt({position:"absolute",userSelect:"none"},mM[t]),s??{})},[s,t]);return W.jsx("div",{className:o||void 0,style:f,onMouseDown:l,onTouchStart:u,children:i})}),yM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),_n=function(){return _n=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},_n.apply(this,arguments)},vM={width:"auto",height:"auto"},du=function(n,e,t){return Math.max(Math.min(n,t),e)},yS=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},ba=function(n,e){return new RegExp(n,"i").test(e)},pu=function(n){return!!(n.touches&&n.touches.length)},bM=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},vS=function(n,e,t){t===void 0&&(t=0);var i=e.reduce(function(o,l,u){return Math.abs(l-n)<Math.abs(e[o]-n)?u:o},0),s=Math.abs(e[i]-n);return t===0||s<t?e[i]:n},Sm=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},mu=function(n,e,t,i){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var s=Number(n.replace("%",""))/100;return e*s}if(n.endsWith("vw")){var s=Number(n.replace("vw",""))/100;return t*s}if(n.endsWith("vh")){var s=Number(n.replace("vh",""))/100;return i*s}}return n},SM=function(n,e,t,i,s,o,l){return i=mu(i,n.width,e,t),s=mu(s,n.height,e,t),o=mu(o,n.width,e,t),l=mu(l,n.height,e,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof l>"u"?void 0:Number(l)}},xM=function(n){return Array.isArray(n)?n:[n,n]},wM=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],bS="__resizable_base__",_M=(function(n){yM(e,n);function e(t){var i,s,o,l,u=n.call(this,t)||this;return u.ratio=1,u.resizable=null,u.parentLeft=0,u.parentTop=0,u.resizableLeft=0,u.resizableRight=0,u.resizableTop=0,u.resizableBottom=0,u.targetLeft=0,u.targetTop=0,u.delta={width:0,height:0},u.appendBase=function(){if(!u.resizable||!u.window)return null;var f=u.parentNode;if(!f)return null;var d=u.window.document.createElement("div");return d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.transform="scale(0, 0)",d.style.left="0",d.style.flex="0 0 100%",d.classList?d.classList.add(bS):d.className+=bS,f.appendChild(d),d},u.removeBase=function(f){var d=u.parentNode;d&&d.removeChild(f)},u.state={isResizing:!1,width:(s=(i=u.propsSize)===null||i===void 0?void 0:i.width)!==null&&s!==void 0?s:"auto",height:(l=(o=u.propsSize)===null||o===void 0?void 0:o.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},u.onResizeStart=u.onResizeStart.bind(u),u.onMouseMove=u.onMouseMove.bind(u),u.onMouseUp=u.onMouseUp.bind(u),u}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||vM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,o=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=l}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,s=function(u){var f;if(typeof t.state[u]>"u"||t.state[u]==="auto")return"auto";if(t.propsSize&&t.propsSize[u]&&(!((f=t.propsSize[u])===null||f===void 0)&&f.toString().endsWith("%"))){if(t.state[u].toString().endsWith("%"))return t.state[u].toString();var d=t.getParentSize(),p=Number(t.state[u].toString().replace("px","")),g=p/d[u]*100;return"".concat(g,"%")}return Sm(t.state[u])},o=i&&typeof i.width<"u"&&!this.state.isResizing?Sm(i.width):s("width"),l=i&&typeof i.height<"u"&&!this.state.isResizing?Sm(i.height):s("height");return{width:o,height:l}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var o={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=s),this.removeBase(t),o},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var s=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof s>"u"||s==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var s=this.props.boundsByDirection,o=this.state.direction,l=s&&ba("left",o),u=s&&ba("top",o),f,d;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(f=l?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),d=u?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(t=t&&t<f?t:f),d&&Number.isFinite(d)&&(i=i&&i<d?i:d),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var s=this.props.scale||1,o=xM(this.props.resizeRatio||1),l=o[0],u=o[1],f=this.state,d=f.direction,p=f.original,g=this.props,y=g.lockAspectRatio,b=g.lockAspectRatioExtraHeight,S=g.lockAspectRatioExtraWidth,C=p.width,x=p.height,_=b||0,w=S||0;return ba("right",d)&&(C=p.width+(t-p.x)*l/s,y&&(x=(C-w)/this.ratio+_)),ba("left",d)&&(C=p.width-(t-p.x)*l/s,y&&(x=(C-w)/this.ratio+_)),ba("bottom",d)&&(x=p.height+(i-p.y)*u/s,y&&(C=(x-_)*this.ratio+w)),ba("top",d)&&(x=p.height-(i-p.y)*u/s,y&&(C=(x-_)*this.ratio+w)),{newWidth:C,newHeight:x}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,s,o){var l=this.props,u=l.lockAspectRatio,f=l.lockAspectRatioExtraHeight,d=l.lockAspectRatioExtraWidth,p=typeof o.width>"u"?10:o.width,g=typeof s.width>"u"||s.width<0?t:s.width,y=typeof o.height>"u"?10:o.height,b=typeof s.height>"u"||s.height<0?i:s.height,S=f||0,C=d||0;if(u){var x=(y-S)*this.ratio+C,_=(b-S)*this.ratio+C,w=(p-C)/this.ratio+S,T=(g-C)/this.ratio+S,E=Math.max(p,x),k=Math.min(g,_),O=Math.max(y,w),A=Math.min(b,T);t=du(t,E,k),i=du(i,O,A)}else t=du(t,p,g),i=du(i,y,b);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var s=i.getBoundingClientRect();this.parentLeft=s.left*t,this.parentTop=s.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*t,this.targetTop=o.top*t}if(this.resizable){var l=this.resizable.getBoundingClientRect(),u=l.left,f=l.top,d=l.right,p=l.bottom;this.resizableLeft=u*t,this.resizableRight=d*t,this.resizableTop=f*t,this.resizableBottom=p*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var s=0,o=0;if(t.nativeEvent&&bM(t.nativeEvent)?(s=t.nativeEvent.clientX,o=t.nativeEvent.clientY):t.nativeEvent&&pu(t.nativeEvent)&&(s=t.nativeEvent.touches[0].clientX,o=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(t,i,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var d=this.parentNode;if(d){var p=this.window.getComputedStyle(d).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",u=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:_n(_n({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:u};this.setState(g)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&pu(t))try{t.preventDefault(),t.stopPropagation()}catch{}var s=this.props,o=s.maxWidth,l=s.maxHeight,u=s.minWidth,f=s.minHeight,d=pu(t)?t.touches[0].clientX:t.clientX,p=pu(t)?t.touches[0].clientY:t.clientY,g=this.state,y=g.direction,b=g.original,S=g.width,C=g.height,x=this.getParentSize(),_=SM(x,this.window.innerWidth,this.window.innerHeight,o,l,u,f);o=_.maxWidth,l=_.maxHeight,u=_.minWidth,f=_.minHeight;var w=this.calculateNewSizeFromDirection(d,p),T=w.newHeight,E=w.newWidth,k=this.calculateNewMaxFromBoundary(o,l);this.props.snap&&this.props.snap.x&&(E=vS(E,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=vS(T,this.props.snap.y,this.props.snapGap));var O=this.calculateNewSizeFromAspectRatio(E,T,{width:k.maxWidth,height:k.maxHeight},{width:u,height:f});if(E=O.newWidth,T=O.newHeight,this.props.grid){var A=yS(E,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),N=yS(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),$=this.props.snapGap||0,V=$===0||Math.abs(A-E)<=$?A:E,q=$===0||Math.abs(N-T)<=$?N:T;E=V,T=q}var H={width:E-b.width,height:T-b.height};if(this.delta=H,S&&typeof S=="string"){if(S.endsWith("%")){var X=E/x.width*100;E="".concat(X,"%")}else if(S.endsWith("vw")){var te=E/this.window.innerWidth*100;E="".concat(te,"vw")}else if(S.endsWith("vh")){var fe=E/this.window.innerHeight*100;E="".concat(fe,"vh")}}if(C&&typeof C=="string"){if(C.endsWith("%")){var X=T/x.height*100;T="".concat(X,"%")}else if(C.endsWith("vw")){var te=T/this.window.innerWidth*100;T="".concat(te,"vw")}else if(C.endsWith("vh")){var fe=T/this.window.innerHeight*100;T="".concat(fe,"vh")}}var I={width:this.createSizeForCssProperty(E,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?I.flexBasis=I.width:this.flexDir==="column"&&(I.flexBasis=I.height);var ne=this.state.width!==I.width,oe=this.state.height!==I.height,pe=this.state.flexBasis!==I.flexBasis,K=ne||oe||pe;K&&i_.flushSync(function(){i.setState(I)}),this.props.onResize&&K&&this.props.onResize(t,y,this.resizable,H)}},e.prototype.onMouseUp=function(t){var i,s,o=this.state,l=o.isResizing,u=o.direction;o.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,u,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:_n(_n({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var i,s;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(s=t.height)!==null&&s!==void 0?s:"auto"})},e.prototype.renderResizer=function(){var t=this,i=this.props,s=i.enable,o=i.handleStyles,l=i.handleClasses,u=i.handleWrapperStyle,f=i.handleWrapperClass,d=i.handleComponent;if(!s)return null;var p=Object.keys(s).map(function(g){return s[g]!==!1?W.jsx(gM,{direction:g,onResizeStart:t.onResizeStart,replaceStyles:o&&o[g],className:l&&l[g],children:d&&d[g]?d[g]:null},g):null});return W.jsx("div",{className:f,style:u,children:p})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(l,u){return wM.indexOf(u)!==-1||(l[u]=t.props[u]),l},{}),s=_n(_n(_n({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return W.jsxs(o,_n({style:s,className:this.props.className},i,{ref:function(l){l&&(t.resizable=l)},children:[this.state.isResizing&&W.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e})(ve.PureComponent);var ug=function(n,e){return ug=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},ug(n,e)};function TM(n,e){ug(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var zt=function(){return zt=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zt.apply(this,arguments)};function CM(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}var kM={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},AM=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},EM=(function(n){TM(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,s=t.top,o=this.getDraggablePosition(),l=o.x,u=o.y;this.draggable.setState({x:l-i,y:u-s}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,s=t.y;return{x:i,y:s}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/i;case"body":return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/i;case"body":return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&&this.props.onDragStart(t,i);var s=this.getDraggablePosition();if(this.originalPosition=s,!!this.props.bounds){var o=this.getParent(),l=this.props.scale,u;if(this.props.bounds==="parent")u=o;else if(this.props.bounds==="body"){var f=o.getBoundingClientRect(),d=f.left,p=f.top,g=document.body.getBoundingClientRect(),y=-(d-o.offsetLeft*l-g.left)/l,b=-(p-o.offsetTop*l-g.top)/l,S=(document.body.offsetWidth-this.resizable.size.width*l)/l+y,C=(document.body.offsetHeight-this.resizable.size.height*l)/l+b;return this.setState({bounds:{top:b,right:S,bottom:C,left:y}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var x=o.getBoundingClientRect(),_=x.left,w=x.top,T=-(_-o.offsetLeft*l)/l,E=-(w-o.offsetTop*l)/l,S=(window.innerWidth-this.resizable.size.width*l)/l+T,C=(window.innerHeight-this.resizable.size.height*l)/l+E;return this.setState({bounds:{top:E,right:S,bottom:C,left:T}})}else typeof this.props.bounds=="string"?u=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(u=this.props.bounds);if(!(!(u instanceof HTMLElement)||!(o instanceof HTMLElement))){var k=u.getBoundingClientRect(),O=k.left,A=k.top,N=o.getBoundingClientRect(),$=N.left,V=N.top,q=(O-$)/l,H=A-V;if(this.resizable){this.updateOffsetFromParent();var X=this.offsetFromParent;this.setState({bounds:{top:H-X.top,right:q+(u.offsetWidth-this.resizable.size.width)-X.left/l,bottom:H+(u.offsetHeight-this.resizable.size.height)-X.top,left:q-X.left/l}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var s=this.offsetFromParent,o=s.left,l=s.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,zt(zt({},i),{x:i.x+o,y:i.y+l}));if(this.props.dragAxis==="x")return this.props.onDrag(t,zt(zt({},i),{x:i.x+o,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,zt(zt({},i),{x:this.originalPosition.x+o,y:i.y+l,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var s=this.offsetFromParent,o=s.left,l=s.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,zt(zt({},i),{x:i.x+o,y:i.y+l}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,zt(zt({},i),{x:i.x+o,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,zt(zt({},i),{x:this.originalPosition.x+o,y:i.y+l,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,s){t.stopPropagation(),this.setState({resizing:!0});var o=this.props.scale,l=this.offsetFromParent,u=this.getDraggablePosition();if(this.resizingPosition={x:u.x+l.left,y:u.y+l.top},this.originalPosition=u,this.props.bounds){var f=this.getParent(),d=void 0;this.props.bounds==="parent"?d=f:this.props.bounds==="body"?d=document.body:this.props.bounds==="window"?d=window:typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);var p=this.getSelfElement();if(p instanceof Element&&(d instanceof HTMLElement||d===window)&&f instanceof HTMLElement){var g=this.getMaxSizesFromProps(),y=g.maxWidth,b=g.maxHeight,S=this.getParentSize();if(y&&typeof y=="string")if(y.endsWith("%")){var C=Number(y.replace("%",""))/100;y=S.width*C}else y.endsWith("px")&&(y=Number(y.replace("px","")));if(b&&typeof b=="string")if(b.endsWith("%")){var C=Number(b.replace("%",""))/100;b=S.height*C}else b.endsWith("px")&&(b=Number(b.replace("px","")));var x=p.getBoundingClientRect(),_=x.left,w=x.top,T=this.props.bounds==="window"?{left:0,top:0}:d.getBoundingClientRect(),E=T.left,k=T.top,O=this.getOffsetWidth(d),A=this.getOffsetHeight(d),N=i.toLowerCase().endsWith("left"),$=i.toLowerCase().endsWith("right"),V=i.startsWith("top"),q=i.startsWith("bottom");if((N||V)&&this.resizable){var H=(_-E)/o+this.resizable.size.width;this.setState({maxWidth:H>Number(y)?y:H})}if($||this.props.lockAspectRatio&&!N&&!V){var H=O+(E-_)/o;this.setState({maxWidth:H>Number(y)?y:H})}if((V||N)&&this.resizable){var H=(w-k)/o+this.resizable.size.height;this.setState({maxHeight:H>Number(b)?b:H})}if(q||this.props.lockAspectRatio&&!V&&!N){var H=A+(k-w)/o;this.setState({maxHeight:H>Number(b)?b:H})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,i,s)},e.prototype.onResize=function(t,i,s,o){var l=this,u={x:this.originalPosition.x,y:this.originalPosition.y},f=-o.width,d=-o.height,p=["top","left","topLeft","bottomLeft","topRight"];p.includes(i)&&(i==="bottomLeft"?u.x+=f:(i==="topRight"||(u.x+=f),u.y+=d));var g=this.draggable.state;(u.x!==g.x||u.y!==g.y)&&i_.flushSync(function(){l.draggable.setState(u)}),this.updateOffsetFromParent();var y=this.offsetFromParent,b=this.getDraggablePosition().x+y.left,S=this.getDraggablePosition().y+y.top;this.resizingPosition={x:b,y:S},this.props.onResize&&this.props.onResize(t,i,s,o,{x:b,y:S})},e.prototype.onResizeStop=function(t,i,s,o){this.setState({resizing:!1});var l=this.getMaxSizesFromProps(),u=l.maxWidth,f=l.maxHeight;this.setState({maxWidth:u,maxHeight:f}),this.props.onResizeStop&&this.props.onResizeStop(t,i,s,o,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),s=this.getSelfElement();if(!i||s===null)return{top:0,left:0};var o=i.getBoundingClientRect(),l=o.left,u=o.top,f=s.getBoundingClientRect(),d=this.getDraggablePosition(),p=i.scrollLeft,g=i.scrollTop;this.offsetFromParent={left:f.left-l+p-d.x*t,top:f.top-u+g-d.y*t}},e.prototype.render=function(){var t=this,i=this.props,s=i.disableDragging,o=i.style,l=i.dragHandleClassName,u=i.position,f=i.onMouseDown,d=i.onMouseUp,p=i.dragAxis,g=i.dragGrid,y=i.bounds,b=i.enableUserSelectHack,S=i.cancel,C=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var x=i.resizeHandleStyles,_=i.resizeHandleClasses,w=i.resizeHandleComponent,T=i.enableResizing,E=i.resizeGrid,k=i.resizeHandleWrapperClass,O=i.resizeHandleWrapperStyle,A=i.scale,N=i.allowAnyClick,$=i.dragPositionOffset,V=CM(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),q=this.props.default?zt({},this.props.default):void 0;delete V.default;var H=s||l?{cursor:"auto"}:{cursor:"move"},X=zt(zt(zt({},kM),H),o),te=this.offsetFromParent,fe=te.left,I=te.top,ne;u&&(ne={x:u.x-fe,y:u.y-I});var oe=this.state.resizing?void 0:ne,pe=this.state.resizing?"both":p;return ve.createElement(pM,{ref:function(K){K&&(t.draggable=K)},handle:l?".".concat(l):void 0,defaultPosition:q,onMouseDown:f,onMouseUp:d,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:pe,disabled:s,grid:g,bounds:y?this.state.bounds:void 0,position:oe,enableUserSelectHack:b,cancel:S,scale:A,allowAnyClick:N,nodeRef:this.resizableElement,positionOffset:$},ve.createElement(_M,zt({},V,{ref:function(K){K&&(t.resizable=K,t.resizableElement.current=K.resizable)},defaultSize:q,size:this.props.size,enable:typeof T=="boolean"?AM(T):T,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:X,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:E,handleWrapperClass:k,handleWrapperStyle:O,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:x,handleClasses:_,handleComponent:w,scale:this.props.scale}),C))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e})(ve.PureComponent);function MM(n,e,t){const i=Bi.c(10),s=t;let o;i[0]!==e||i[1]!==n||i[2]!==s?(o=()=>e,i[0]=e,i[1]=n,i[2]=s,i[3]=o):o=i[3];const[l,u]=ve.useState(o);let f,d;i[4]!==n||i[5]!==l?(f=()=>{try{localStorage.setItem(n,JSON.stringify(l))}catch(g){console.error("localStorage write failed:",g)}},d=[n,l],i[4]=n,i[5]=l,i[6]=f,i[7]=d):(f=i[6],d=i[7]),ve.useEffect(f,d);let p;return i[8]!==l?(p=[l,u],i[8]=l,i[9]=p):p=i[9],p}const OM={assets:[{label:"Anlagevermgen",accounts:["1000","1010"],positions:[]},{label:"Umlaufvermgen",accounts:["1200","1210"],positions:[]},{label:"Liquide Mittel",accounts:["1400"],positions:[]}],liabilitiesAndEquity:[{label:"Eigenkapital",accounts:["2000"],positions:[]},{label:"Fremdkapital",accounts:["2100","2200"],positions:[]}]},DM=[{id:"1000",label:"Grundstcke und Gebude"},{id:"1010",label:"Maschinen und Anlagen"},{id:"1200",label:"Forderungen aus Lieferungen und Leistungen"},{id:"1210",label:"Vorrte"},{id:"1400",label:"Bankguthaben"},{id:"2000",label:"Eigenkapital"},{id:"2100",label:"Verbindlichkeiten gegenber Banken"},{id:"2200",label:"Lieferantenverbindlichkeiten"}],RM=[{id:1,description:"Einlage des Gesellschafters zur Finanzierung von Grundstcken",entryLines:[{accountId:"1000",amount:5e4,entryType:"debit"},{accountId:"2000",amount:5e4,entryType:"credit"}]},{id:2,description:"Kauf von Maschinen auf Bankkredit",entryLines:[{accountId:"1010",amount:3e4,entryType:"debit"},{accountId:"2100",amount:3e4,entryType:"credit"}]},{id:3,description:"Warenkauf auf Ziel vom Lieferanten",entryLines:[{accountId:"1200",amount:1e4,entryType:"debit"},{accountId:"2200",amount:1e4,entryType:"credit"}]},{id:4,description:"Erhhung der Vorrte durch Eigenkapitalfinanzierung",entryLines:[{accountId:"1210",amount:5e3,entryType:"debit"},{accountId:"2000",amount:5e3,entryType:"credit"}]},{id:5,description:"Zufluss von Bankguthaben aus Darlehensaufnahme",entryLines:[{accountId:"1400",amount:15e3,entryType:"debit"},{accountId:"2100",amount:15e3,entryType:"credit"}]}],NM={balanceSheet:OM,accounts:DM,journalEntries:RM},n_={debit:0,credit:0,balance:0};function zM(n){const e={};for(const t of n)for(const i of t.entryLines??[]){const s=e[i.accountId]??{...n_};i.entryType==="debit"?s.debit+=i.amount:s.credit+=i.amount,s.balance=s.debit-s.credit,e[i.accountId]=s}return e}function h0(n,e){return n[e]??n_}const r_=ve.createContext(null),nr=()=>{const n=ve.useContext(r_);if(!n)throw new Error("useInteractiveBalanceData must be used inside <InteractiveBalanceDataProvider>");return n},$M=NM,BM=n=>{const e=Bi.c(18),{children:t}=n,[i,s]=MM("interactiveBalanceData",$M,!0),[o,l]=ve.useState(null);let u;e[0]!==o||e[1]!==s?(u=()=>{o&&(s(_=>({..._,journalEntries:[..._.journalEntries??[],o]})),l(null))},e[0]=o,e[1]=s,e[2]=u):u=e[2];const f=u;let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{l(null)},e[3]=d):d=e[3];const p=d;let g;if(e[4]!==o||e[5]!==i.journalEntries){const _=i.journalEntries??[];g=o?[..._.filter(w=>w.id!==o.id),o]:_,e[4]=o,e[5]=i.journalEntries,e[6]=g}else g=e[6];const y=g;let b;e[7]!==y?(b=zM(y),e[7]=y,e[8]=b):b=e[8];const S=b;let C;e[9]!==S||e[10]!==f||e[11]!==o||e[12]!==i||e[13]!==s?(C={interactiveBalanceData:i,setInteractiveBalanceData:s,draftEntry:o,setDraftEntry:l,commitDraft:f,cancelDraft:p,accountTotals:S},e[9]=S,e[10]=f,e[11]=o,e[12]=i,e[13]=s,e[14]=C):C=e[14];let x;return e[15]!==t||e[16]!==C?(x=W.jsx(r_.Provider,{value:C,children:t}),e[15]=t,e[16]=C,e[17]=x):x=e[17],x},s_=ve.createContext(null);function Ah(){const n=ve.useContext(s_);if(!n)throw new Error("useWindowManager must be used inside <WindowManagerProvider>");return n}function hl(n,e){let t=0;for(const i of n.accounts??[])t+=h0(e,i).balance;for(const i of n.positions??[])t+=hl(i,e);return t}const a_=n=>{const e=Bi.c(38),{position:t,level:i}=n,s=i===void 0?0:i,[o,l]=ve.useState(!1),{interactiveBalanceData:u,accountTotals:f}=nr(),d=u.accounts,{openWindow:p}=Ah();let g,y,b,S,C,x,_;if(e[0]!==f||e[1]!==s||e[2]!==o||e[3]!==t){const A=hl(t,f),N=Math.abs(A);_=`ml-${s} mt-1`,C="bg-white hover:bg-blue-100 border border-gray-300 rounded px-2 py-1 w-full text-left",e[11]!==o?(x=()=>l(!o),e[11]=o,e[12]=x):x=e[12],y="flex justify-between",e[13]!==t.label?(b=W.jsx("div",{children:t.label}),e[13]=t.label,e[14]=b):b=e[14],S=" ",g=N.toFixed(2),e[0]=f,e[1]=s,e[2]=o,e[3]=t,e[4]=g,e[5]=y,e[6]=b,e[7]=S,e[8]=C,e[9]=x,e[10]=_}else g=e[4],y=e[5],b=e[6],S=e[7],C=e[8],x=e[9],_=e[10];let w;e[15]!==g?(w=W.jsxs("div",{children:[g," "]}),e[15]=g,e[16]=w):w=e[16];let T;e[17]!==y||e[18]!==b||e[19]!==S||e[20]!==w?(T=W.jsxs("div",{className:y,children:[b,S,w]}),e[17]=y,e[18]=b,e[19]=S,e[20]=w,e[21]=T):T=e[21];let E;e[22]!==T||e[23]!==C||e[24]!==x?(E=W.jsx("button",{className:C,onClick:x,children:T}),e[22]=T,e[23]=C,e[24]=x,e[25]=E):E=e[25];let k;e[26]!==f||e[27]!==d||e[28]!==s||e[29]!==o||e[30]!==p||e[31]!==t.accounts||e[32]!==t.positions?(k=o&&W.jsxs("div",{className:"ml-4",children:[t.accounts?.map((A,N)=>{const $=d.find(V=>V.id===A);if($)return W.jsx("button",{className:"mt-1 bg-green-100 hover:bg-green-400 border border-gray-300 rounded px-2 py-1 w-full text-left",lang:"de",onClick:()=>p({type:"Account",payload:{id:A,label:$.label}}),children:W.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-start",children:[W.jsx("div",{lang:"de",className:"min-w-0 hyphens-auto",children:W.jsxs("span",{className:"break-words",children:[A," ",$?.label]})}),W.jsxs("div",{className:"text-nowrap",children:[Math.abs(h0(f,A).balance).toFixed(2)," "]})]})},N)}),t.positions?.map((A,N)=>W.jsx(a_,{position:A,level:s+1},N))]}),e[26]=f,e[27]=d,e[28]=s,e[29]=o,e[30]=p,e[31]=t.accounts,e[32]=t.positions,e[33]=k):k=e[33];let O;return e[34]!==E||e[35]!==k||e[36]!==_?(O=W.jsxs("div",{className:_,children:[E,k]}),e[34]=E,e[35]=k,e[36]=_,e[37]=O):O=e[37],O},SS=n=>{const e=Bi.c(7),{title:t,positions:i}=n,{accountTotals:s}=nr();for(const f of i??[])hl(f,s);let o;e[0]!==t?(o=W.jsx("h2",{className:"text-xl font-bold mb-4",children:t}),e[0]=t,e[1]=o):o=e[1];let l;e[2]!==i?(l=i?.map(LM),e[2]=i,e[3]=l):l=e[3];let u;return e[4]!==o||e[5]!==l?(u=W.jsxs("div",{className:"p-4",children:[o,l]}),e[4]=o,e[5]=l,e[6]=u):u=e[6],u};function LM(n,e){return W.jsx(a_,{position:n},e)}const jM=()=>{const n=Bi.c(31),{interactiveBalanceData:e,accountTotals:t}=nr(),i=e.balanceSheet;let s=0,o=0;if(n[0]!==t||n[1]!==s||n[2]!==i.assets){for(const w of i.assets??[])s=s+(hl(w,t)??0);n[0]=t,n[1]=s,n[2]=i.assets,n[3]=s}else s=n[3];if(n[4]!==t||n[5]!==i.liabilitiesAndEquity||n[6]!==o){for(const w of i.liabilitiesAndEquity??[])o=o+(hl(w,t)??0);n[4]=t,n[5]=i.liabilitiesAndEquity,n[6]=o,n[7]=o}else o=n[7];const l=Math.abs(s)===Math.abs(o);let u;n[8]!==i.assets?(u=W.jsx(SS,{title:"Aktiva",positions:i.assets}),n[8]=i.assets,n[9]=u):u=n[9];const f=`text-lg font-semibold ${l?"text-green-600":"text-red-600"}`;let d;n[10]!==s?(d=Math.abs(s).toFixed(2),n[10]=s,n[11]=d):d=n[11];let p;n[12]!==f||n[13]!==d?(p=W.jsx("div",{className:"p-4",children:W.jsxs("span",{className:f,children:["Summe ",d," "]})}),n[12]=f,n[13]=d,n[14]=p):p=n[14];let g;n[15]!==u||n[16]!==p?(g=W.jsxs("div",{className:"w-1/2",children:[u,p]}),n[15]=u,n[16]=p,n[17]=g):g=n[17];let y;n[18]!==i.liabilitiesAndEquity?(y=W.jsx(SS,{title:"Passiva",positions:i.liabilitiesAndEquity}),n[18]=i.liabilitiesAndEquity,n[19]=y):y=n[19];const b=`text-lg font-semibold ${l?"text-green-600":"text-red-600"}`;let S;n[20]!==o?(S=Math.abs(o).toFixed(2),n[20]=o,n[21]=S):S=n[21];let C;n[22]!==b||n[23]!==S?(C=W.jsx("div",{className:"p-4",children:W.jsxs("span",{className:b,children:["Summe ",S," "]})}),n[22]=b,n[23]=S,n[24]=C):C=n[24];let x;n[25]!==y||n[26]!==C?(x=W.jsxs("div",{className:"w-1/2",children:[y,C]}),n[25]=y,n[26]=C,n[27]=x):x=n[27];let _;return n[28]!==g||n[29]!==x?(_=W.jsxs("div",{className:"flex w-1/3 bg-white border-black border rounded-md border-double",children:[g,x]}),n[28]=g,n[29]=x,n[30]=_):_=n[30],_},xS=n=>{const e=Bi.c(29),{accountId:t,lines:i,type:s}=n,{openWindow:o}=Ah(),{setDraftEntry:l,draftEntry:u,interactiveBalanceData:f}=nr(),[d,p]=ve.useState(""),g=Number(d);let y;e[0]!==t||e[1]!==u||e[2]!==f||e[3]!==o||e[4]!==l||e[5]!==s?(y=E=>{if(!(E<=0)){if(u)l(k=>({...k,entryLines:[...k.entryLines??[],{accountId:t,amount:E,entryType:s}]}));else{const O=(f.journalEntries??[]).reduce(PM,0)+1;l({id:O,description:"",entryLines:[{accountId:t,amount:E,entryType:s}]})}p(""),o({type:"JournalEntry",payload:{isDraft:!0}})}},e[0]=t,e[1]=u,e[2]=f,e[3]=o,e[4]=l,e[5]=s,e[6]=y):y=e[6];const b=y;let S;e[7]!==t||e[8]!==u||e[9]!==o||e[10]!==l?(S=()=>{u?.entryLines&&(l({...u,entryLines:u.entryLines.filter(E=>E.accountId!==t)}),o({type:"JournalEntry",payload:{isDraft:!0}}))},e[7]=t,e[8]=u,e[9]=o,e[10]=l,e[11]=S):S=e[11];const C=S;console.log("lines changes: ",i);let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=W.jsx("thead",{children:W.jsxs("tr",{className:"text-left border-b border-solid",children:[W.jsx("th",{className:"border-r w-[12%] px-1 border-solid",children:"ID"}),W.jsx("th",{className:"w-[45%] px-1",children:"Beschreibung"}),W.jsx("th",{className:"border-l w-[33%] px-1 border-solid",children:"Betrag"}),W.jsx("th",{className:"w-[10%]"})]})}),e[12]=x):x=e[12];let _;if(e[13]!==i||e[14]!==o||e[15]!==C){let E;e[17]!==o||e[18]!==C?(E=(k,O)=>W.jsxs("tr",{className:"cursor-pointer align-top border-t boder-solid transition-all duration-100 hover:scale-95",onClick:()=>o({type:"JournalEntry",payload:{isDraft:k.draft,id:k.draft?"Neue Buchung":k.entryId}}),children:[W.jsx("td",{className:"whitespace-nowrap border-r border-solid",children:k.draft?"Neu":k.entryId}),W.jsx("td",{className:"text-xs break-words",children:k.description}),W.jsxs("td",{className:"whitespace-nowrap text-right border-l border-solid",children:[k.line.amount.toFixed(2)," "]}),W.jsx("td",{children:k.draft&&W.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:()=>C(),children:"-"})})]},O),e[17]=o,e[18]=C,e[19]=E):E=e[19],_=i.map(E),e[13]=i,e[14]=o,e[15]=C,e[16]=_}else _=e[16];let w;e[20]!==t||e[21]!==b||e[22]!==g||e[23]!==u?.entryLines||e[24]!==d?(w=!u?.entryLines.some(E=>E.accountId===t)&&W.jsxs("tr",{className:"align-top border-t boder-solid",children:[W.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap border-r border-solid",children:"Neu"}),W.jsx("td",{}),W.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-right border-l border-solid",children:W.jsx("input",{type:"text",className:"w-full text-xs",value:d,onChange:E=>p(E.target.value)})}),W.jsx("td",{children:W.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>b(g),children:"+"})})]}),e[20]=t,e[21]=b,e[22]=g,e[23]=u?.entryLines,e[24]=d,e[25]=w):w=e[25];let T;return e[26]!==_||e[27]!==w?(T=W.jsxs("table",{className:"w-full table-fixed border-collapse",children:[x,W.jsxs("tbody",{children:[_,w]})]}),e[26]=_,e[27]=w,e[28]=T):T=e[28],T};function PM(n,e){return Math.max(n,e.id)}const qM=n=>{const e=Bi.c(58),{id:t}=n,{interactiveBalanceData:i,draftEntry:s,accountTotals:o}=nr();let l,u,f;if(e[0]!==s||e[1]!==t||e[2]!==i.journalEntries){const V=s?[...i.journalEntries??[],s]:i.journalEntries??[];l=t;const q=V?.flatMap(H=>{const X=H===s,te=H.entryLines.find(fe=>fe.accountId===l);return te?[{entryId:H.id,description:H.description,line:te,draft:X}]:[]})??[];u=q.filter(HM),f=q.filter(UM),e[0]=s,e[1]=t,e[2]=i.journalEntries,e[3]=l,e[4]=u,e[5]=f}else l=e[3],u=e[4],f=e[5];const d=f;console.log("debitLines changed: ",u);let p,g,y,b,S,C,x,_,w,T;if(e[6]!==l||e[7]!==o||e[8]!==d||e[9]!==u){const V=h0(o,l),q=V.debit,H=V.credit;p=V.balance,e[20]===Symbol.for("react.memo_cache_sentinel")?(T=W.jsxs("div",{className:"flex justify-between",children:[W.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Soll"}),W.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Haben"})]}),e[20]=T):T=e[20];let X;e[21]!==l||e[22]!==u?(X=W.jsx("div",{className:"pr-1 border-r-2 border-solid border-black w-full pb-1",children:W.jsx(xS,{lines:u,accountId:l,type:"debit"})}),e[21]=l,e[22]=u,e[23]=X):X=e[23];let te;e[24]!==l||e[25]!==d?(te=W.jsx("div",{className:"pl-1 border-l-2 border-solid border-black w-full pb-1",children:W.jsx(xS,{lines:d,accountId:l,type:"credit"})}),e[24]=l,e[25]=d,e[26]=te):te=e[26],e[27]!==X||e[28]!==te?(g=W.jsxs("div",{className:"grid grid-cols-2 border-t-4 border-solid border-black",children:[X,te]}),e[27]=X,e[28]=te,e[29]=g):g=e[29],_="grid grid-cols-2 border-t-2 border-solid border-gray-300 -mt-1";let fe;e[30]===Symbol.for("react.memo_cache_sentinel")?(fe=W.jsxs("div",{className:"inline-flex items-center gap-1",children:[W.jsx("span",{className:"text-lg",children:"Summe"}),W.jsx("span",{className:"text-lg font-normal font-mono",children:""})]}),e[30]=fe):fe=e[30];const I=W.jsxs("div",{className:"flex justify-between items-center",children:[fe,W.jsxs("div",{className:"text-lg",children:[q.toFixed(2)," "]})]});let ne;e[31]!==p?(ne=p<=0&&W.jsxs("div",{className:"flex justify-between",children:[W.jsx("div",{className:"text-lg",children:"Saldo"}),W.jsxs("div",{className:"text-lg",children:[(-1*p).toFixed(2)," "]})]}),e[31]=p,e[32]=ne):ne=e[32],e[33]!==I||e[34]!==ne?(w=W.jsxs("div",{className:" p-1 border-r-2 border-solid border-black",children:[I,ne]}),e[33]=I,e[34]=ne,e[35]=w):w=e[35],x=" p-1 border-l-2 boder-solid border-black",S="flex justify-between items-center",e[36]===Symbol.for("react.memo_cache_sentinel")?(C=W.jsxs("div",{className:"inline-flex items-center gap-1",children:[W.jsx("span",{className:"text-lg",children:"Summe"}),W.jsx("span",{className:"text-lg font-normal font-mono",children:""})]}),e[36]=C):C=e[36],y="text-lg",b=H.toFixed(2),e[6]=l,e[7]=o,e[8]=d,e[9]=u,e[10]=p,e[11]=g,e[12]=y,e[13]=b,e[14]=S,e[15]=C,e[16]=x,e[17]=_,e[18]=w,e[19]=T}else p=e[10],g=e[11],y=e[12],b=e[13],S=e[14],C=e[15],x=e[16],_=e[17],w=e[18],T=e[19];let E;e[37]!==y||e[38]!==b?(E=W.jsxs("div",{className:y,children:[b," "]}),e[37]=y,e[38]=b,e[39]=E):E=e[39];let k;e[40]!==E||e[41]!==S||e[42]!==C?(k=W.jsxs("div",{className:S,children:[C,E]}),e[40]=E,e[41]=S,e[42]=C,e[43]=k):k=e[43];let O;e[44]!==p?(O=p>0&&W.jsxs("div",{className:"flex justify-between",children:[W.jsx("div",{className:"text-lg",children:"Saldo"}),W.jsxs("div",{className:"text-lg",children:[p.toFixed(2)," "]})]}),e[44]=p,e[45]=O):O=e[45];let A;e[46]!==k||e[47]!==O||e[48]!==x?(A=W.jsxs("div",{className:x,children:[k,O]}),e[46]=k,e[47]=O,e[48]=x,e[49]=A):A=e[49];let N;e[50]!==A||e[51]!==_||e[52]!==w?(N=W.jsxs("div",{className:_,children:[w,A]}),e[50]=A,e[51]=_,e[52]=w,e[53]=N):N=e[53];let $;return e[54]!==g||e[55]!==N||e[56]!==T?($=W.jsxs("div",{children:[T,g,N]}),e[54]=g,e[55]=N,e[56]=T,e[57]=$):$=e[57],$};function HM(n){return n.line.entryType==="debit"}function UM(n){return n.line.entryType==="credit"}const wS=n=>n.reduce((e,t)=>e+t.amount,0);function VM(n){const e=Bi.c(70),{entryId:t,isDraft:i}=n,s=i===void 0?!1:i,{interactiveBalanceData:o,draftEntry:l,setDraftEntry:u,cancelDraft:f,commitDraft:d}=nr(),{openWindow:p,closeWindow:g}=Ah(),[y,b]=ve.useState(""),[S,C]=ve.useState(""),[x,_]=ve.useState(""),[w,T]=ve.useState(""),E=Number(x),k=Number(w),O=o.journalEntries?.find(_e=>_e.id===t)??null;let A,N;if(e[0]!==l||e[1]!==o.journalEntries||e[2]!==s||e[3]!==u?(A=()=>{if(console.log("effect runnung..."),console.log("isDraft: ",s),!s||l)return;const xt=(o.journalEntries??[]).reduce(KM,0)+1;u({id:xt,description:"",entryLines:[]})},N=[s,l,o.journalEntries,u],e[0]=l,e[1]=o.journalEntries,e[2]=s,e[3]=u,e[4]=A,e[5]=N):(A=e[4],N=e[5]),ve.useEffect(A,N),s){if(!l){let _e;return e[6]===Symbol.for("react.memo_cache_sentinel")?(_e=W.jsx("div",{children:"Loading draft..."}),e[6]=_e):_e=e[6],_e}}else if(!O){let _e;return e[7]===Symbol.for("react.memo_cache_sentinel")?(_e=W.jsx("div",{children:"Loading entry..."}),e[7]=_e):_e=e[7],_e}const $=s?l:O;let V;e[8]!==l||e[9]!==u?(V=_e=>{l?.entryLines&&u({...l,entryLines:l.entryLines.filter(xt=>xt.accountId!==_e)})},e[8]=l,e[9]=u,e[10]=V):V=e[10];const q=V;let H;e[11]!==l||e[12]!==o.accounts||e[13]!==p||e[14]!==u?(H=(_e,xt,ut)=>{if(!l)return;const ot=o.accounts.find(dn=>dn.id===_e);if(!(!ot||xt<=0)){u(dn=>({...dn,entryLines:[...dn.entryLines??[],{accountId:_e,amount:xt,entryType:ut}]})),p({type:"Account",payload:{id:ot?.id,label:ot?.label}});e:switch(ut){case"credit":{C(""),T("");break e}case"debit":b(""),_("")}}},e[11]=l,e[12]=o.accounts,e[13]=p,e[14]=u,e[15]=H):H=e[15];const X=H;let te;e[16]!==f||e[17]!==g?(te=()=>{f(),g({type:"JournalEntry",payload:{id:"Neue Buchung"}})},e[16]=f,e[17]=g,e[18]=te):te=e[18];const fe=te;let I;e[19]!==g||e[20]!==d||e[21]!==l||e[22]!==p?(I=()=>{l&&(d(),g({type:"JournalEntry",payload:{id:"Neue Buchung"}}),p({type:"JournalEntry",payload:{id:l.id}}))},e[19]=g,e[20]=d,e[21]=l,e[22]=p,e[23]=I):I=e[23];const ne=I,oe=$.entryLines.filter(FM),pe=wS(oe),K=$.entryLines.filter(YM),D=wS(K),L=pe-D;let j;e[24]!==l?.entryLines?(j=new Set(l?.entryLines?.map(GM)??[]),e[24]=l?.entryLines,e[25]=j):j=e[25];const R=j;let B;e[26]===Symbol.for("react.memo_cache_sentinel")?(B=W.jsx("div",{className:"flex items-center mb-1",children:W.jsx("span",{className:"font-semibold bg-yellow-100 rounded px-1 py-0.5",children:"Soll"})}),e[26]=B):B=e[26];let F;e[27]===Symbol.for("react.memo_cache_sentinel")?(F=W.jsx("thead",{className:"bg-yellow-50",children:W.jsxs("tr",{children:[W.jsx("th",{className:"w-[50%] px-1 py-0.5 text-left",children:"Konto"}),W.jsx("th",{className:"w-[35%] px-1 py-0.5 text-left",children:"Betrag"}),W.jsx("th",{className:"w-[15%]"})]})}),e[27]=F):F=e[27];let he;e[28]!==o.accounts||e[29]!==s||e[30]!==p||e[31]!==q?(he=(_e,xt)=>{const ut=o.accounts.find(ot=>ot.id===_e.accountId);return W.jsxs("tr",{className:"cursor-pointer transition-all border duration-100 hover:scale-95",onClick:()=>p({type:"Account",payload:{id:ut?.id,label:ut?.label}}),children:[W.jsxs("td",{className:"px-1 py-0.5",children:[_e.accountId," ",ut?.label]}),W.jsxs("td",{className:"px-1 py-0.5",children:[_e.amount," "]}),s&&W.jsx("td",{className:"px-1 py-0.5 text-center",children:W.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:()=>q(_e.accountId),children:"-"})})]})},e[28]=o.accounts,e[29]=s,e[30]=p,e[31]=q,e[32]=he):he=e[32];let ge;e[33]!==X||e[34]!==E||e[35]!==o.accounts||e[36]!==s||e[37]!==x||e[38]!==y||e[39]!==R?(ge=s&&W.jsxs("tr",{children:[W.jsx("td",{className:"px-1 py-0.5",children:W.jsxs("select",{className:"w-full text-xs",value:y,onChange:_e=>b(_e.target.value),children:[W.jsx("option",{value:"",children:"Konto auswhlen"}),o.accounts.filter(_e=>!R.has(_e.id)).map(WM)]})}),W.jsx("td",{className:"px-1 py-0.5",children:W.jsx("input",{className:"w-full border text-xs",type:"text",value:x,onChange:_e=>_(_e.target.value)})}),W.jsx("td",{className:"px-1 py-0.5 text-center",children:W.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>X(y,E,"debit"),children:"+"})})]}),e[33]=X,e[34]=E,e[35]=o.accounts,e[36]=s,e[37]=x,e[38]=y,e[39]=R,e[40]=ge):ge=e[40];let Ce;e[41]===Symbol.for("react.memo_cache_sentinel")?(Ce=W.jsx("div",{className:"flex items-center mb-1",children:W.jsx("span",{className:"font-semibold bg-yellow-100 rounded px-1 py-0.5",children:"Haben"})}),e[41]=Ce):Ce=e[41];let Oe;e[42]===Symbol.for("react.memo_cache_sentinel")?(Oe=W.jsx("thead",{className:"bg-yellow-50",children:W.jsxs("tr",{children:[W.jsx("th",{className:"w-[50%] px-1 py-0.5 text-left",children:"Konto"}),W.jsx("th",{className:"w-[35%] px-1 py-0.5 text-left",children:"Betrag"}),W.jsx("th",{className:"w-[15%]"})]})}),e[42]=Oe):Oe=e[42];let G;e[43]!==o.accounts||e[44]!==s||e[45]!==p||e[46]!==q?(G=(_e,xt)=>{const ut=o.accounts.find(ot=>ot.id===_e.accountId);return W.jsxs("tr",{className:"cursor-pointer border transition-all duration-100 hover:scale-95",onClick:()=>p({type:"Account",payload:{id:ut?.id,label:ut?.label}}),children:[W.jsxs("td",{className:"px-1 py-0.5",children:[_e.accountId," ",ut?.label]}),W.jsxs("td",{className:"px-1 py-0.5",children:[_e.amount," "]}),s&&W.jsx("td",{className:"px-1 py-0.5 text-center",children:W.jsx("button",{className:"px-2 py-0.5 rounded bg-red-100 hover:bg-red-200 text-sm",onClick:ot=>{q(_e.accountId)},children:"-"})})]})},e[43]=o.accounts,e[44]=s,e[45]=p,e[46]=q,e[47]=G):G=e[47];let Q;e[48]!==X||e[49]!==k||e[50]!==o.accounts||e[51]!==s||e[52]!==w||e[53]!==S||e[54]!==R?(Q=s&&W.jsxs("tr",{children:[W.jsx("td",{className:"px-1 py-0.5",children:W.jsxs("select",{className:"w-full text-xs",value:S,onChange:_e=>C(_e.target.value),children:[W.jsx("option",{value:"",children:"Konto auswhlen"}),o.accounts.filter(_e=>!R.has(_e.id)).map(IM)]})}),W.jsx("td",{className:"px-1 py-0.5",children:W.jsx("input",{className:"w-full border text-xs",type:"text",value:w,onChange:_e=>T(_e.target.value)})}),W.jsx("td",{className:"px-1 py-0.5 text-center",children:W.jsx("button",{className:"px-2 py-0.5 rounded bg-green-100 hover:bg-green-200 text-sm",onClick:()=>X(S,k,"credit"),children:"+"})})]}),e[48]=X,e[49]=k,e[50]=o.accounts,e[51]=s,e[52]=w,e[53]=S,e[54]=R,e[55]=Q):Q=e[55];const ue=`text-lg font-semibold ${L!==0?"text-red-600":"text-green-600"}`,de="Habensumme ",xe=D.toFixed(2);let Me;e[56]!==ue||e[57]!==xe?(Me=W.jsxs("div",{className:ue,children:[de,xe," "]}),e[56]=ue,e[57]=xe,e[58]=Me):Me=e[58];const mt=`text-lg font-semibold ${L!==0?"text-red-600":"text-green-600"}`;let St;e[59]!==L?(St=L.toFixed(2),e[59]=L,e[60]=St):St=e[60];let gt;e[61]!==mt||e[62]!==St?(gt=W.jsx("div",{className:"flex justify-center  text-lg mt-2",children:W.jsxs("div",{className:mt,children:["Saldo: ",St," "]})}),e[61]=mt,e[62]=St,e[63]=gt):gt=e[63];let yt;return e[64]!==L||e[65]!==l?.entryLines||e[66]!==fe||e[67]!==ne||e[68]!==s?(yt=s&&W.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[W.jsx("button",{className:"px-2 py-1 border rounded bg-gray-100 hover:bg-gray-200 text-xs",onClick:()=>fe(),children:"Abbrechen"}),W.jsx("button",{className:`px-2 py-1 border rounded ${L===0&&l?.entryLines.length!=0?"bg-yellow-200 hover:bg-yellow-300":"bg-gray-400 cursor-not-allowed"} text-xs font-semibold`,disabled:L!==0||l?.entryLines.length===0,onClick:()=>ne(),children:"Buchen!"})]}),e[64]=L,e[65]=l?.entryLines,e[66]=fe,e[67]=ne,e[68]=s,e[69]=yt):yt=e[69],W.jsxs("div",{className:"max-w-2xl mx-auto my-2 rounded bg-white text-sm",children:[s&&W.jsx("textarea",{name:"description",className:"border w-full min-h-12",value:$?.description??"",onChange:_e=>u(xt=>xt&&{...xt,description:_e.target.value})}),!s&&W.jsx("span",{className:"text-lg",children:$.description}),W.jsxs("div",{className:"flex gap-4 pt-4",children:[W.jsxs("div",{className:"flex-1",children:[B,W.jsxs("table",{className:"w-full table-fixed border divide-y text-xs",children:[F,W.jsxs("tbody",{children:[oe.map(he),ge]})]})]}),W.jsxs("div",{className:"flex-1",children:[Ce,W.jsxs("table",{className:"w-full table-fixed border divide-y text-xs",children:[Oe,W.jsxs("tbody",{children:[K.map(G),Q]})]})]})]}),W.jsxs("div",{className:"flex justify-between grid-cols-2 text-lg mt-2",children:[W.jsxs("div",{className:`text-lg font-semibold ${L!==0?"text-red-600":"text-green-600"}`,children:["Sollsumme ",pe.toFixed(2)," "]}),Me]}),gt,yt]})}function IM(n){return W.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function WM(n){return W.jsxs("option",{value:n.id,children:[n.id," ",n.label]},n.id)}function GM(n){return n.accountId}function YM(n){return n.entryType==="credit"}function FM(n){return n.entryType==="debit"}function KM(n,e){return Math.max(n,e.id)}var gu={exports:{}},xm={},Qn={},gs={},wm={},_m={},Tm={},_S;function Kf(){return _S||(_S=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class e{}n._CodeOrName=e,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class t extends e{constructor(w){if(super(),!n.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=t;class i extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((T,E)=>`${T}${E}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((T,E)=>(E instanceof t&&(T[E.str]=(T[E.str]||0)+1),T),{})}}n._Code=i,n.nil=new i("");function s(_,...w){const T=[_[0]];let E=0;for(;E<w.length;)u(T,w[E]),T.push(_[++E]);return new i(T)}n._=s;const o=new i("+");function l(_,...w){const T=[b(_[0])];let E=0;for(;E<w.length;)T.push(o),u(T,w[E]),T.push(o,b(_[++E]));return f(T),new i(T)}n.str=l;function u(_,w){w instanceof i?_.push(...w._items):w instanceof t?_.push(w):_.push(g(w))}n.addCodeArg=u;function f(_){let w=1;for(;w<_.length-1;){if(_[w]===o){const T=d(_[w-1],_[w+1]);if(T!==void 0){_.splice(w-1,3,T);continue}_[w++]="+"}w++}}function d(_,w){if(w==='""')return _;if(_==='""')return w;if(typeof _=="string")return w instanceof t||_[_.length-1]!=='"'?void 0:typeof w!="string"?`${_.slice(0,-1)}${w}"`:w[0]==='"'?_.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(_ instanceof t))return`"${_}${w.slice(1)}`}function p(_,w){return w.emptyStr()?_:_.emptyStr()?w:l`${_}${w}`}n.strConcat=p;function g(_){return typeof _=="number"||typeof _=="boolean"||_===null?_:b(Array.isArray(_)?_.join(","):_)}function y(_){return new i(b(_))}n.stringify=y;function b(_){return JSON.stringify(_).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=b;function S(_){return typeof _=="string"&&n.IDENTIFIER.test(_)?new i(`.${_}`):s`[${_}]`}n.getProperty=S;function C(_){if(typeof _=="string"&&n.IDENTIFIER.test(_))return new i(`${_}`);throw new Error(`CodeGen: invalid export name: ${_}, use explicit $id name mapping`)}n.getEsmExportName=C;function x(_){return new i(_.toString())}n.regexpCode=x})(Tm)),Tm}var Cm={},TS;function CS(){return TS||(TS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const e=Kf();class t extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var i;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(i||(n.UsedValueState=i={})),n.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:d,parent:p}={}){this._names={},this._prefixes=d,this._parent=p}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const p=this._names[d]||this._nameGroup(d);return`${d}${p.index++}`}_nameGroup(d){var p,g;if(!((g=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||g===void 0)&&g.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}n.Scope=s;class o extends e.Name{constructor(d,p){super(p),this.prefix=d}setValue(d,{property:p,itemIndex:g}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(p)}[${g}]`}}n.ValueScopeName=o;const l=(0,e._)`\n`;class u extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?l:e.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,p){var g;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:b}=y,S=(g=p.key)!==null&&g!==void 0?g:p.ref;let C=this._values[b];if(C){const w=C.get(S);if(w)return w}else C=this._values[b]=new Map;C.set(S,y);const x=this._scope[b]||(this._scope[b]=[]),_=x.length;return x[_]=p.ref,y.setValue(p,{property:b,itemIndex:_}),y}getValue(d,p){const g=this._values[d];if(g)return g.get(p)}scopeRefs(d,p=this._values){return this._reduceValues(p,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,e._)`${d}${g.scopePath}`})}scopeCode(d=this._values,p,g){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},p,g)}_reduceValues(d,p,g={},y){let b=e.nil;for(const S in d){const C=d[S];if(!C)continue;const x=g[S]=g[S]||new Map;C.forEach(_=>{if(x.has(_))return;x.set(_,i.Started);let w=p(_);if(w){const T=this.opts.es5?n.varKinds.var:n.varKinds.const;b=(0,e._)`${b}${T} ${_} = ${w};${this.opts._n}`}else if(w=y?.(_))b=(0,e._)`${b}${w}${this.opts._n}`;else throw new t(_);x.set(_,i.Completed)})}return b}}n.ValueScope=u})(Cm)),Cm}var kS;function Re(){return kS||(kS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const e=Kf(),t=CS();var i=Kf();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return i.Name}});var s=CS();Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),n.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(R,B){return this}}class l extends o{constructor(R,B,F){super(),this.varKind=R,this.name=B,this.rhs=F}render({es5:R,_n:B}){const F=R?t.varKinds.var:this.varKind,he=this.rhs===void 0?"":` = ${this.rhs}`;return`${F} ${this.name}${he};`+B}optimizeNames(R,B){if(R[this.name.str])return this.rhs&&(this.rhs=te(this.rhs,R,B)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(R,B,F){super(),this.lhs=R,this.rhs=B,this.sideEffects=F}render({_n:R}){return`${this.lhs} = ${this.rhs};`+R}optimizeNames(R,B){if(!(this.lhs instanceof e.Name&&!R[this.lhs.str]&&!this.sideEffects))return this.rhs=te(this.rhs,R,B),this}get names(){const R=this.lhs instanceof e.Name?{}:{...this.lhs.names};return X(R,this.rhs)}}class f extends u{constructor(R,B,F,he){super(R,F,he),this.op=B}render({_n:R}){return`${this.lhs} ${this.op}= ${this.rhs};`+R}}class d extends o{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`${this.label}:`+R}}class p extends o{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`break${this.label?` ${this.label}`:""};`+R}}class g extends o{constructor(R){super(),this.error=R}render({_n:R}){return`throw ${this.error};`+R}get names(){return this.error.names}}class y extends o{constructor(R){super(),this.code=R}render({_n:R}){return`${this.code};`+R}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(R,B){return this.code=te(this.code,R,B),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class b extends o{constructor(R=[]){super(),this.nodes=R}render(R){return this.nodes.reduce((B,F)=>B+F.render(R),"")}optimizeNodes(){const{nodes:R}=this;let B=R.length;for(;B--;){const F=R[B].optimizeNodes();Array.isArray(F)?R.splice(B,1,...F):F?R[B]=F:R.splice(B,1)}return R.length>0?this:void 0}optimizeNames(R,B){const{nodes:F}=this;let he=F.length;for(;he--;){const ge=F[he];ge.optimizeNames(R,B)||(fe(R,ge.names),F.splice(he,1))}return F.length>0?this:void 0}get names(){return this.nodes.reduce((R,B)=>H(R,B.names),{})}}class S extends b{render(R){return"{"+R._n+super.render(R)+"}"+R._n}}class C extends b{}class x extends S{}x.kind="else";class _ extends S{constructor(R,B){super(B),this.condition=R}render(R){let B=`if(${this.condition})`+super.render(R);return this.else&&(B+="else "+this.else.render(R)),B}optimizeNodes(){super.optimizeNodes();const R=this.condition;if(R===!0)return this.nodes;let B=this.else;if(B){const F=B.optimizeNodes();B=this.else=Array.isArray(F)?new x(F):F}if(B)return R===!1?B instanceof _?B:B.nodes:this.nodes.length?this:new _(I(R),B instanceof _?[B]:B.nodes);if(!(R===!1||!this.nodes.length))return this}optimizeNames(R,B){var F;if(this.else=(F=this.else)===null||F===void 0?void 0:F.optimizeNames(R,B),!!(super.optimizeNames(R,B)||this.else))return this.condition=te(this.condition,R,B),this}get names(){const R=super.names;return X(R,this.condition),this.else&&H(R,this.else.names),R}}_.kind="if";class w extends S{}w.kind="for";class T extends w{constructor(R){super(),this.iteration=R}render(R){return`for(${this.iteration})`+super.render(R)}optimizeNames(R,B){if(super.optimizeNames(R,B))return this.iteration=te(this.iteration,R,B),this}get names(){return H(super.names,this.iteration.names)}}class E extends w{constructor(R,B,F,he){super(),this.varKind=R,this.name=B,this.from=F,this.to=he}render(R){const B=R.es5?t.varKinds.var:this.varKind,{name:F,from:he,to:ge}=this;return`for(${B} ${F}=${he}; ${F}<${ge}; ${F}++)`+super.render(R)}get names(){const R=X(super.names,this.from);return X(R,this.to)}}class k extends w{constructor(R,B,F,he){super(),this.loop=R,this.varKind=B,this.name=F,this.iterable=he}render(R){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(R)}optimizeNames(R,B){if(super.optimizeNames(R,B))return this.iterable=te(this.iterable,R,B),this}get names(){return H(super.names,this.iterable.names)}}class O extends S{constructor(R,B,F){super(),this.name=R,this.args=B,this.async=F}render(R){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(R)}}O.kind="func";class A extends b{render(R){return"return "+super.render(R)}}A.kind="return";class N extends S{render(R){let B="try"+super.render(R);return this.catch&&(B+=this.catch.render(R)),this.finally&&(B+=this.finally.render(R)),B}optimizeNodes(){var R,B;return super.optimizeNodes(),(R=this.catch)===null||R===void 0||R.optimizeNodes(),(B=this.finally)===null||B===void 0||B.optimizeNodes(),this}optimizeNames(R,B){var F,he;return super.optimizeNames(R,B),(F=this.catch)===null||F===void 0||F.optimizeNames(R,B),(he=this.finally)===null||he===void 0||he.optimizeNames(R,B),this}get names(){const R=super.names;return this.catch&&H(R,this.catch.names),this.finally&&H(R,this.finally.names),R}}class $ extends S{constructor(R){super(),this.error=R}render(R){return`catch(${this.error})`+super.render(R)}}$.kind="catch";class V extends S{render(R){return"finally"+super.render(R)}}V.kind="finally";class q{constructor(R,B={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...B,_n:B.lines?`
`:""},this._extScope=R,this._scope=new t.Scope({parent:R}),this._nodes=[new C]}toString(){return this._root.render(this.opts)}name(R){return this._scope.name(R)}scopeName(R){return this._extScope.name(R)}scopeValue(R,B){const F=this._extScope.value(R,B);return(this._values[F.prefix]||(this._values[F.prefix]=new Set)).add(F),F}getScopeValue(R,B){return this._extScope.getValue(R,B)}scopeRefs(R){return this._extScope.scopeRefs(R,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(R,B,F,he){const ge=this._scope.toName(B);return F!==void 0&&he&&(this._constants[ge.str]=F),this._leafNode(new l(R,ge,F)),ge}const(R,B,F){return this._def(t.varKinds.const,R,B,F)}let(R,B,F){return this._def(t.varKinds.let,R,B,F)}var(R,B,F){return this._def(t.varKinds.var,R,B,F)}assign(R,B,F){return this._leafNode(new u(R,B,F))}add(R,B){return this._leafNode(new f(R,n.operators.ADD,B))}code(R){return typeof R=="function"?R():R!==e.nil&&this._leafNode(new y(R)),this}object(...R){const B=["{"];for(const[F,he]of R)B.length>1&&B.push(","),B.push(F),(F!==he||this.opts.es5)&&(B.push(":"),(0,e.addCodeArg)(B,he));return B.push("}"),new e._Code(B)}if(R,B,F){if(this._blockNode(new _(R)),B&&F)this.code(B).else().code(F).endIf();else if(B)this.code(B).endIf();else if(F)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(R){return this._elseNode(new _(R))}else(){return this._elseNode(new x)}endIf(){return this._endBlockNode(_,x)}_for(R,B){return this._blockNode(R),B&&this.code(B).endFor(),this}for(R,B){return this._for(new T(R),B)}forRange(R,B,F,he,ge=this.opts.es5?t.varKinds.var:t.varKinds.let){const Ce=this._scope.toName(R);return this._for(new E(ge,Ce,B,F),()=>he(Ce))}forOf(R,B,F,he=t.varKinds.const){const ge=this._scope.toName(R);if(this.opts.es5){const Ce=B instanceof e.Name?B:this.var("_arr",B);return this.forRange("_i",0,(0,e._)`${Ce}.length`,Oe=>{this.var(ge,(0,e._)`${Ce}[${Oe}]`),F(ge)})}return this._for(new k("of",he,ge,B),()=>F(ge))}forIn(R,B,F,he=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(R,(0,e._)`Object.keys(${B})`,F);const ge=this._scope.toName(R);return this._for(new k("in",he,ge,B),()=>F(ge))}endFor(){return this._endBlockNode(w)}label(R){return this._leafNode(new d(R))}break(R){return this._leafNode(new p(R))}return(R){const B=new A;if(this._blockNode(B),this.code(R),B.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(A)}try(R,B,F){if(!B&&!F)throw new Error('CodeGen: "try" without "catch" and "finally"');const he=new N;if(this._blockNode(he),this.code(R),B){const ge=this.name("e");this._currNode=he.catch=new $(ge),B(ge)}return F&&(this._currNode=he.finally=new V,this.code(F)),this._endBlockNode($,V)}throw(R){return this._leafNode(new g(R))}block(R,B){return this._blockStarts.push(this._nodes.length),R&&this.code(R).endBlock(B),this}endBlock(R){const B=this._blockStarts.pop();if(B===void 0)throw new Error("CodeGen: not in self-balancing block");const F=this._nodes.length-B;if(F<0||R!==void 0&&F!==R)throw new Error(`CodeGen: wrong number of nodes: ${F} vs ${R} expected`);return this._nodes.length=B,this}func(R,B=e.nil,F,he){return this._blockNode(new O(R,B,F)),he&&this.code(he).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(R=1){for(;R-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(R){return this._currNode.nodes.push(R),this}_blockNode(R){this._currNode.nodes.push(R),this._nodes.push(R)}_endBlockNode(R,B){const F=this._currNode;if(F instanceof R||B&&F instanceof B)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${B?`${R.kind}/${B.kind}`:R.kind}"`)}_elseNode(R){const B=this._currNode;if(!(B instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=B.else=R,this}get _root(){return this._nodes[0]}get _currNode(){const R=this._nodes;return R[R.length-1]}set _currNode(R){const B=this._nodes;B[B.length-1]=R}}n.CodeGen=q;function H(j,R){for(const B in R)j[B]=(j[B]||0)+(R[B]||0);return j}function X(j,R){return R instanceof e._CodeOrName?H(j,R.names):j}function te(j,R,B){if(j instanceof e.Name)return F(j);if(!he(j))return j;return new e._Code(j._items.reduce((ge,Ce)=>(Ce instanceof e.Name&&(Ce=F(Ce)),Ce instanceof e._Code?ge.push(...Ce._items):ge.push(Ce),ge),[]));function F(ge){const Ce=B[ge.str];return Ce===void 0||R[ge.str]!==1?ge:(delete R[ge.str],Ce)}function he(ge){return ge instanceof e._Code&&ge._items.some(Ce=>Ce instanceof e.Name&&R[Ce.str]===1&&B[Ce.str]!==void 0)}}function fe(j,R){for(const B in R)j[B]=(j[B]||0)-(R[B]||0)}function I(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,e._)`!${L(j)}`}n.not=I;const ne=D(n.operators.AND);function oe(...j){return j.reduce(ne)}n.and=oe;const pe=D(n.operators.OR);function K(...j){return j.reduce(pe)}n.or=K;function D(j){return(R,B)=>R===e.nil?B:B===e.nil?R:(0,e._)`${L(R)} ${j} ${L(B)}`}function L(j){return j instanceof e.Name?j:(0,e._)`(${j})`}})(_m)),_m}var Be={},AS;function Ve(){if(AS)return Be;AS=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.checkStrictMode=Be.getErrorPath=Be.Type=Be.useFunc=Be.setEvaluated=Be.evaluatedPropsToName=Be.mergeEvaluated=Be.eachItem=Be.unescapeJsonPointer=Be.escapeJsonPointer=Be.escapeFragment=Be.unescapeFragment=Be.schemaRefOrVal=Be.schemaHasRulesButRef=Be.schemaHasRules=Be.checkUnknownRules=Be.alwaysValidSchema=Be.toHash=void 0;const n=Re(),e=Kf();function t(k){const O={};for(const A of k)O[A]=!0;return O}Be.toHash=t;function i(k,O){return typeof O=="boolean"?O:Object.keys(O).length===0?!0:(s(k,O),!o(O,k.self.RULES.all))}Be.alwaysValidSchema=i;function s(k,O=k.schema){const{opts:A,self:N}=k;if(!A.strictSchema||typeof O=="boolean")return;const $=N.RULES.keywords;for(const V in O)$[V]||E(k,`unknown keyword: "${V}"`)}Be.checkUnknownRules=s;function o(k,O){if(typeof k=="boolean")return!k;for(const A in k)if(O[A])return!0;return!1}Be.schemaHasRules=o;function l(k,O){if(typeof k=="boolean")return!k;for(const A in k)if(A!=="$ref"&&O.all[A])return!0;return!1}Be.schemaHasRulesButRef=l;function u({topSchemaRef:k,schemaPath:O},A,N,$){if(!$){if(typeof A=="number"||typeof A=="boolean")return A;if(typeof A=="string")return(0,n._)`${A}`}return(0,n._)`${k}${O}${(0,n.getProperty)(N)}`}Be.schemaRefOrVal=u;function f(k){return g(decodeURIComponent(k))}Be.unescapeFragment=f;function d(k){return encodeURIComponent(p(k))}Be.escapeFragment=d;function p(k){return typeof k=="number"?`${k}`:k.replace(/~/g,"~0").replace(/\//g,"~1")}Be.escapeJsonPointer=p;function g(k){return k.replace(/~1/g,"/").replace(/~0/g,"~")}Be.unescapeJsonPointer=g;function y(k,O){if(Array.isArray(k))for(const A of k)O(A);else O(k)}Be.eachItem=y;function b({mergeNames:k,mergeToName:O,mergeValues:A,resultToName:N}){return($,V,q,H)=>{const X=q===void 0?V:q instanceof n.Name?(V instanceof n.Name?k($,V,q):O($,V,q),q):V instanceof n.Name?(O($,q,V),V):A(V,q);return H===n.Name&&!(X instanceof n.Name)?N($,X):X}}Be.mergeEvaluated={props:b({mergeNames:(k,O,A)=>k.if((0,n._)`${A} !== true && ${O} !== undefined`,()=>{k.if((0,n._)`${O} === true`,()=>k.assign(A,!0),()=>k.assign(A,(0,n._)`${A} || {}`).code((0,n._)`Object.assign(${A}, ${O})`))}),mergeToName:(k,O,A)=>k.if((0,n._)`${A} !== true`,()=>{O===!0?k.assign(A,!0):(k.assign(A,(0,n._)`${A} || {}`),C(k,A,O))}),mergeValues:(k,O)=>k===!0?!0:{...k,...O},resultToName:S}),items:b({mergeNames:(k,O,A)=>k.if((0,n._)`${A} !== true && ${O} !== undefined`,()=>k.assign(A,(0,n._)`${O} === true ? true : ${A} > ${O} ? ${A} : ${O}`)),mergeToName:(k,O,A)=>k.if((0,n._)`${A} !== true`,()=>k.assign(A,O===!0?!0:(0,n._)`${A} > ${O} ? ${A} : ${O}`)),mergeValues:(k,O)=>k===!0?!0:Math.max(k,O),resultToName:(k,O)=>k.var("items",O)})};function S(k,O){if(O===!0)return k.var("props",!0);const A=k.var("props",(0,n._)`{}`);return O!==void 0&&C(k,A,O),A}Be.evaluatedPropsToName=S;function C(k,O,A){Object.keys(A).forEach(N=>k.assign((0,n._)`${O}${(0,n.getProperty)(N)}`,!0))}Be.setEvaluated=C;const x={};function _(k,O){return k.scopeValue("func",{ref:O,code:x[O.code]||(x[O.code]=new e._Code(O.code))})}Be.useFunc=_;var w;(function(k){k[k.Num=0]="Num",k[k.Str=1]="Str"})(w||(Be.Type=w={}));function T(k,O,A){if(k instanceof n.Name){const N=O===w.Num;return A?N?(0,n._)`"[" + ${k} + "]"`:(0,n._)`"['" + ${k} + "']"`:N?(0,n._)`"/" + ${k}`:(0,n._)`"/" + ${k}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return A?(0,n.getProperty)(k).toString():"/"+p(k)}Be.getErrorPath=T;function E(k,O,A=k.opts.strictSchema){if(A){if(O=`strict mode: ${O}`,A===!0)throw new Error(O);k.self.logger.warn(O)}}return Be.checkStrictMode=E,Be}var yu={},ES;function cn(){if(ES)return yu;ES=1,Object.defineProperty(yu,"__esModule",{value:!0});const n=Re(),e={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};return yu.default=e,yu}var MS;function Eh(){return MS||(MS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const e=Re(),t=Ve(),i=cn();n.keywordError={message:({keyword:x})=>(0,e.str)`must pass "${x}" keyword validation`},n.keyword$DataError={message:({keyword:x,schemaType:_})=>_?(0,e.str)`"${x}" keyword must be ${_} ($data)`:(0,e.str)`"${x}" keyword is invalid ($data)`};function s(x,_=n.keywordError,w,T){const{it:E}=x,{gen:k,compositeRule:O,allErrors:A}=E,N=g(x,_,w);T??(O||A)?f(k,N):d(E,(0,e._)`[${N}]`)}n.reportError=s;function o(x,_=n.keywordError,w){const{it:T}=x,{gen:E,compositeRule:k,allErrors:O}=T,A=g(x,_,w);f(E,A),k||O||d(T,i.default.vErrors)}n.reportExtraError=o;function l(x,_){x.assign(i.default.errors,_),x.if((0,e._)`${i.default.vErrors} !== null`,()=>x.if(_,()=>x.assign((0,e._)`${i.default.vErrors}.length`,_),()=>x.assign(i.default.vErrors,null)))}n.resetErrorsCount=l;function u({gen:x,keyword:_,schemaValue:w,data:T,errsCount:E,it:k}){if(E===void 0)throw new Error("ajv implementation error");const O=x.name("err");x.forRange("i",E,i.default.errors,A=>{x.const(O,(0,e._)`${i.default.vErrors}[${A}]`),x.if((0,e._)`${O}.instancePath === undefined`,()=>x.assign((0,e._)`${O}.instancePath`,(0,e.strConcat)(i.default.instancePath,k.errorPath))),x.assign((0,e._)`${O}.schemaPath`,(0,e.str)`${k.errSchemaPath}/${_}`),k.opts.verbose&&(x.assign((0,e._)`${O}.schema`,w),x.assign((0,e._)`${O}.data`,T))})}n.extendErrors=u;function f(x,_){const w=x.const("err",_);x.if((0,e._)`${i.default.vErrors} === null`,()=>x.assign(i.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${i.default.vErrors}.push(${w})`),x.code((0,e._)`${i.default.errors}++`)}function d(x,_){const{gen:w,validateName:T,schemaEnv:E}=x;E.$async?w.throw((0,e._)`new ${x.ValidationError}(${_})`):(w.assign((0,e._)`${T}.errors`,_),w.return(!1))}const p={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function g(x,_,w){const{createErrors:T}=x.it;return T===!1?(0,e._)`{}`:y(x,_,w)}function y(x,_,w={}){const{gen:T,it:E}=x,k=[b(E,w),S(x,w)];return C(x,_,k),T.object(...k)}function b({errorPath:x},{instancePath:_}){const w=_?(0,e.str)`${x}${(0,t.getErrorPath)(_,t.Type.Str)}`:x;return[i.default.instancePath,(0,e.strConcat)(i.default.instancePath,w)]}function S({keyword:x,it:{errSchemaPath:_}},{schemaPath:w,parentSchema:T}){let E=T?_:(0,e.str)`${_}/${x}`;return w&&(E=(0,e.str)`${E}${(0,t.getErrorPath)(w,t.Type.Str)}`),[p.schemaPath,E]}function C(x,{params:_,message:w},T){const{keyword:E,data:k,schemaValue:O,it:A}=x,{opts:N,propertyName:$,topSchemaRef:V,schemaPath:q}=A;T.push([p.keyword,E],[p.params,typeof _=="function"?_(x):_||(0,e._)`{}`]),N.messages&&T.push([p.message,typeof w=="function"?w(x):w]),N.verbose&&T.push([p.schema,O],[p.parentSchema,(0,e._)`${V}${q}`],[i.default.data,k]),$&&T.push([p.propertyName,$])}})(wm)),wm}var OS;function XM(){if(OS)return gs;OS=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.boolOrEmptySchema=gs.topBoolOrEmptySchema=void 0;const n=Eh(),e=Re(),t=cn(),i={message:"boolean schema is false"};function s(u){const{gen:f,schema:d,validateName:p}=u;d===!1?l(u,!1):typeof d=="object"&&d.$async===!0?f.return(t.default.data):(f.assign((0,e._)`${p}.errors`,null),f.return(!0))}gs.topBoolOrEmptySchema=s;function o(u,f){const{gen:d,schema:p}=u;p===!1?(d.var(f,!1),l(u)):d.var(f,!0)}gs.boolOrEmptySchema=o;function l(u,f){const{gen:d,data:p}=u,g={gen:d,keyword:"false schema",data:p,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,n.reportError)(g,i,void 0,f)}return gs}var Ft={},ys={},DS;function o_(){if(DS)return ys;DS=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.getRules=ys.isJSONType=void 0;const n=["string","number","integer","boolean","null","object","array"],e=new Set(n);function t(s){return typeof s=="string"&&e.has(s)}ys.isJSONType=t;function i(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return ys.getRules=i,ys}var Zn={},RS;function l_(){if(RS)return Zn;RS=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.shouldUseRule=Zn.shouldUseGroup=Zn.schemaHasRulesForType=void 0;function n({schema:i,self:s},o){const l=s.RULES.types[o];return l&&l!==!0&&e(i,l)}Zn.schemaHasRulesForType=n;function e(i,s){return s.rules.some(o=>t(i,o))}Zn.shouldUseGroup=e;function t(i,s){var o;return i[s.keyword]!==void 0||((o=s.definition.implements)===null||o===void 0?void 0:o.some(l=>i[l]!==void 0))}return Zn.shouldUseRule=t,Zn}var NS;function Xf(){if(NS)return Ft;NS=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.reportTypeError=Ft.checkDataTypes=Ft.checkDataType=Ft.coerceAndCheckDataType=Ft.getJSONTypes=Ft.getSchemaTypes=Ft.DataType=void 0;const n=o_(),e=l_(),t=Eh(),i=Re(),s=Ve();var o;(function(w){w[w.Correct=0]="Correct",w[w.Wrong=1]="Wrong"})(o||(Ft.DataType=o={}));function l(w){const T=u(w.type);if(T.includes("null")){if(w.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!T.length&&w.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');w.nullable===!0&&T.push("null")}return T}Ft.getSchemaTypes=l;function u(w){const T=Array.isArray(w)?w:w?[w]:[];if(T.every(n.isJSONType))return T;throw new Error("type must be JSONType or JSONType[]: "+T.join(","))}Ft.getJSONTypes=u;function f(w,T){const{gen:E,data:k,opts:O}=w,A=p(T,O.coerceTypes),N=T.length>0&&!(A.length===0&&T.length===1&&(0,e.schemaHasRulesForType)(w,T[0]));if(N){const $=S(T,k,O.strictNumbers,o.Wrong);E.if($,()=>{A.length?g(w,T,A):x(w)})}return N}Ft.coerceAndCheckDataType=f;const d=new Set(["string","number","integer","boolean","null"]);function p(w,T){return T?w.filter(E=>d.has(E)||T==="array"&&E==="array"):[]}function g(w,T,E){const{gen:k,data:O,opts:A}=w,N=k.let("dataType",(0,i._)`typeof ${O}`),$=k.let("coerced",(0,i._)`undefined`);A.coerceTypes==="array"&&k.if((0,i._)`${N} == 'object' && Array.isArray(${O}) && ${O}.length == 1`,()=>k.assign(O,(0,i._)`${O}[0]`).assign(N,(0,i._)`typeof ${O}`).if(S(T,O,A.strictNumbers),()=>k.assign($,O))),k.if((0,i._)`${$} !== undefined`);for(const q of E)(d.has(q)||q==="array"&&A.coerceTypes==="array")&&V(q);k.else(),x(w),k.endIf(),k.if((0,i._)`${$} !== undefined`,()=>{k.assign(O,$),y(w,$)});function V(q){switch(q){case"string":k.elseIf((0,i._)`${N} == "number" || ${N} == "boolean"`).assign($,(0,i._)`"" + ${O}`).elseIf((0,i._)`${O} === null`).assign($,(0,i._)`""`);return;case"number":k.elseIf((0,i._)`${N} == "boolean" || ${O} === null
              || (${N} == "string" && ${O} && ${O} == +${O})`).assign($,(0,i._)`+${O}`);return;case"integer":k.elseIf((0,i._)`${N} === "boolean" || ${O} === null
              || (${N} === "string" && ${O} && ${O} == +${O} && !(${O} % 1))`).assign($,(0,i._)`+${O}`);return;case"boolean":k.elseIf((0,i._)`${O} === "false" || ${O} === 0 || ${O} === null`).assign($,!1).elseIf((0,i._)`${O} === "true" || ${O} === 1`).assign($,!0);return;case"null":k.elseIf((0,i._)`${O} === "" || ${O} === 0 || ${O} === false`),k.assign($,null);return;case"array":k.elseIf((0,i._)`${N} === "string" || ${N} === "number"
              || ${N} === "boolean" || ${O} === null`).assign($,(0,i._)`[${O}]`)}}}function y({gen:w,parentData:T,parentDataProperty:E},k){w.if((0,i._)`${T} !== undefined`,()=>w.assign((0,i._)`${T}[${E}]`,k))}function b(w,T,E,k=o.Correct){const O=k===o.Correct?i.operators.EQ:i.operators.NEQ;let A;switch(w){case"null":return(0,i._)`${T} ${O} null`;case"array":A=(0,i._)`Array.isArray(${T})`;break;case"object":A=(0,i._)`${T} && typeof ${T} == "object" && !Array.isArray(${T})`;break;case"integer":A=N((0,i._)`!(${T} % 1) && !isNaN(${T})`);break;case"number":A=N();break;default:return(0,i._)`typeof ${T} ${O} ${w}`}return k===o.Correct?A:(0,i.not)(A);function N($=i.nil){return(0,i.and)((0,i._)`typeof ${T} == "number"`,$,E?(0,i._)`isFinite(${T})`:i.nil)}}Ft.checkDataType=b;function S(w,T,E,k){if(w.length===1)return b(w[0],T,E,k);let O;const A=(0,s.toHash)(w);if(A.array&&A.object){const N=(0,i._)`typeof ${T} != "object"`;O=A.null?N:(0,i._)`!${T} || ${N}`,delete A.null,delete A.array,delete A.object}else O=i.nil;A.number&&delete A.integer;for(const N in A)O=(0,i.and)(O,b(N,T,E,k));return O}Ft.checkDataTypes=S;const C={message:({schema:w})=>`must be ${w}`,params:({schema:w,schemaValue:T})=>typeof w=="string"?(0,i._)`{type: ${w}}`:(0,i._)`{type: ${T}}`};function x(w){const T=_(w);(0,t.reportError)(T,C)}Ft.reportTypeError=x;function _(w){const{gen:T,data:E,schema:k}=w,O=(0,s.schemaRefOrVal)(w,k,"type");return{gen:T,keyword:"type",data:E,schema:k.type,schemaCode:O,schemaValue:O,parentSchema:k,params:{},it:w}}return Ft}var Go={},zS;function QM(){if(zS)return Go;zS=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.assignDefaults=void 0;const n=Re(),e=Ve();function t(s,o){const{properties:l,items:u}=s.schema;if(o==="object"&&l)for(const f in l)i(s,f,l[f].default);else o==="array"&&Array.isArray(u)&&u.forEach((f,d)=>i(s,d,f.default))}Go.assignDefaults=t;function i(s,o,l){const{gen:u,compositeRule:f,data:d,opts:p}=s;if(l===void 0)return;const g=(0,n._)`${d}${(0,n.getProperty)(o)}`;if(f){(0,e.checkStrictMode)(s,`default is ignored for: ${g}`);return}let y=(0,n._)`${g} === undefined`;p.useDefaults==="empty"&&(y=(0,n._)`${y} || ${g} === null || ${g} === ""`),u.if(y,(0,n._)`${g} = ${(0,n.stringify)(l)}`)}return Go}var rn={},Je={},$S;function un(){if($S)return Je;$S=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.validateUnion=Je.validateArray=Je.usePattern=Je.callValidateCode=Je.schemaProperties=Je.allSchemaProperties=Je.noPropertyInData=Je.propertyInData=Je.isOwnProperty=Je.hasPropFunc=Je.reportMissingProp=Je.checkMissingProp=Je.checkReportMissingProp=void 0;const n=Re(),e=Ve(),t=cn(),i=Ve();function s(w,T){const{gen:E,data:k,it:O}=w;E.if(p(E,k,T,O.opts.ownProperties),()=>{w.setParams({missingProperty:(0,n._)`${T}`},!0),w.error()})}Je.checkReportMissingProp=s;function o({gen:w,data:T,it:{opts:E}},k,O){return(0,n.or)(...k.map(A=>(0,n.and)(p(w,T,A,E.ownProperties),(0,n._)`${O} = ${A}`)))}Je.checkMissingProp=o;function l(w,T){w.setParams({missingProperty:T},!0),w.error()}Je.reportMissingProp=l;function u(w){return w.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}Je.hasPropFunc=u;function f(w,T,E){return(0,n._)`${u(w)}.call(${T}, ${E})`}Je.isOwnProperty=f;function d(w,T,E,k){const O=(0,n._)`${T}${(0,n.getProperty)(E)} !== undefined`;return k?(0,n._)`${O} && ${f(w,T,E)}`:O}Je.propertyInData=d;function p(w,T,E,k){const O=(0,n._)`${T}${(0,n.getProperty)(E)} === undefined`;return k?(0,n.or)(O,(0,n.not)(f(w,T,E))):O}Je.noPropertyInData=p;function g(w){return w?Object.keys(w).filter(T=>T!=="__proto__"):[]}Je.allSchemaProperties=g;function y(w,T){return g(T).filter(E=>!(0,e.alwaysValidSchema)(w,T[E]))}Je.schemaProperties=y;function b({schemaCode:w,data:T,it:{gen:E,topSchemaRef:k,schemaPath:O,errorPath:A},it:N},$,V,q){const H=q?(0,n._)`${w}, ${T}, ${k}${O}`:T,X=[[t.default.instancePath,(0,n.strConcat)(t.default.instancePath,A)],[t.default.parentData,N.parentData],[t.default.parentDataProperty,N.parentDataProperty],[t.default.rootData,t.default.rootData]];N.opts.dynamicRef&&X.push([t.default.dynamicAnchors,t.default.dynamicAnchors]);const te=(0,n._)`${H}, ${E.object(...X)}`;return V!==n.nil?(0,n._)`${$}.call(${V}, ${te})`:(0,n._)`${$}(${te})`}Je.callValidateCode=b;const S=(0,n._)`new RegExp`;function C({gen:w,it:{opts:T}},E){const k=T.unicodeRegExp?"u":"",{regExp:O}=T.code,A=O(E,k);return w.scopeValue("pattern",{key:A.toString(),ref:A,code:(0,n._)`${O.code==="new RegExp"?S:(0,i.useFunc)(w,O)}(${E}, ${k})`})}Je.usePattern=C;function x(w){const{gen:T,data:E,keyword:k,it:O}=w,A=T.name("valid");if(O.allErrors){const $=T.let("valid",!0);return N(()=>T.assign($,!1)),$}return T.var(A,!0),N(()=>T.break()),A;function N($){const V=T.const("len",(0,n._)`${E}.length`);T.forRange("i",0,V,q=>{w.subschema({keyword:k,dataProp:q,dataPropType:e.Type.Num},A),T.if((0,n.not)(A),$)})}}Je.validateArray=x;function _(w){const{gen:T,schema:E,keyword:k,it:O}=w;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(V=>(0,e.alwaysValidSchema)(O,V))&&!O.opts.unevaluated)return;const N=T.let("valid",!1),$=T.name("_valid");T.block(()=>E.forEach((V,q)=>{const H=w.subschema({keyword:k,schemaProp:q,compositeRule:!0},$);T.assign(N,(0,n._)`${N} || ${$}`),w.mergeValidEvaluated(H,$)||T.if((0,n.not)(N))})),w.result(N,()=>w.reset(),()=>w.error(!0))}return Je.validateUnion=_,Je}var BS;function ZM(){if(BS)return rn;BS=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.validateKeywordUsage=rn.validSchemaType=rn.funcKeywordCode=rn.macroKeywordCode=void 0;const n=Re(),e=cn(),t=un(),i=Eh();function s(y,b){const{gen:S,keyword:C,schema:x,parentSchema:_,it:w}=y,T=b.macro.call(w.self,x,_,w),E=d(S,C,T);w.opts.validateSchema!==!1&&w.self.validateSchema(T,!0);const k=S.name("valid");y.subschema({schema:T,schemaPath:n.nil,errSchemaPath:`${w.errSchemaPath}/${C}`,topSchemaRef:E,compositeRule:!0},k),y.pass(k,()=>y.error(!0))}rn.macroKeywordCode=s;function o(y,b){var S;const{gen:C,keyword:x,schema:_,parentSchema:w,$data:T,it:E}=y;f(E,b);const k=!T&&b.compile?b.compile.call(E.self,_,w,E):b.validate,O=d(C,x,k),A=C.let("valid");y.block$data(A,N),y.ok((S=b.valid)!==null&&S!==void 0?S:A);function N(){if(b.errors===!1)q(),b.modifying&&l(y),H(()=>y.error());else{const X=b.async?$():V();b.modifying&&l(y),H(()=>u(y,X))}}function $(){const X=C.let("ruleErrs",null);return C.try(()=>q((0,n._)`await `),te=>C.assign(A,!1).if((0,n._)`${te} instanceof ${E.ValidationError}`,()=>C.assign(X,(0,n._)`${te}.errors`),()=>C.throw(te))),X}function V(){const X=(0,n._)`${O}.errors`;return C.assign(X,null),q(n.nil),X}function q(X=b.async?(0,n._)`await `:n.nil){const te=E.opts.passContext?e.default.this:e.default.self,fe=!("compile"in b&&!T||b.schema===!1);C.assign(A,(0,n._)`${X}${(0,t.callValidateCode)(y,O,te,fe)}`,b.modifying)}function H(X){var te;C.if((0,n.not)((te=b.valid)!==null&&te!==void 0?te:A),X)}}rn.funcKeywordCode=o;function l(y){const{gen:b,data:S,it:C}=y;b.if(C.parentData,()=>b.assign(S,(0,n._)`${C.parentData}[${C.parentDataProperty}]`))}function u(y,b){const{gen:S}=y;S.if((0,n._)`Array.isArray(${b})`,()=>{S.assign(e.default.vErrors,(0,n._)`${e.default.vErrors} === null ? ${b} : ${e.default.vErrors}.concat(${b})`).assign(e.default.errors,(0,n._)`${e.default.vErrors}.length`),(0,i.extendErrors)(y)},()=>y.error())}function f({schemaEnv:y},b){if(b.async&&!y.$async)throw new Error("async keyword in sync schema")}function d(y,b,S){if(S===void 0)throw new Error(`keyword "${b}" failed to compile`);return y.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,n.stringify)(S)})}function p(y,b,S=!1){return!b.length||b.some(C=>C==="array"?Array.isArray(y):C==="object"?y&&typeof y=="object"&&!Array.isArray(y):typeof y==C||S&&typeof y>"u")}rn.validSchemaType=p;function g({schema:y,opts:b,self:S,errSchemaPath:C},x,_){if(Array.isArray(x.keyword)?!x.keyword.includes(_):x.keyword!==_)throw new Error("ajv implementation error");const w=x.dependencies;if(w?.some(T=>!Object.prototype.hasOwnProperty.call(y,T)))throw new Error(`parent schema must have dependencies of ${_}: ${w.join(",")}`);if(x.validateSchema&&!x.validateSchema(y[_])){const E=`keyword "${_}" value is invalid at path "${C}": `+S.errorsText(x.validateSchema.errors);if(b.validateSchema==="log")S.logger.error(E);else throw new Error(E)}}return rn.validateKeywordUsage=g,rn}var Jn={},LS;function JM(){if(LS)return Jn;LS=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.extendSubschemaMode=Jn.extendSubschemaData=Jn.getSubschema=void 0;const n=Re(),e=Ve();function t(o,{keyword:l,schemaProp:u,schema:f,schemaPath:d,errSchemaPath:p,topSchemaRef:g}){if(l!==void 0&&f!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const y=o.schema[l];return u===void 0?{schema:y,schemaPath:(0,n._)`${o.schemaPath}${(0,n.getProperty)(l)}`,errSchemaPath:`${o.errSchemaPath}/${l}`}:{schema:y[u],schemaPath:(0,n._)`${o.schemaPath}${(0,n.getProperty)(l)}${(0,n.getProperty)(u)}`,errSchemaPath:`${o.errSchemaPath}/${l}/${(0,e.escapeFragment)(u)}`}}if(f!==void 0){if(d===void 0||p===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:f,schemaPath:d,topSchemaRef:g,errSchemaPath:p}}throw new Error('either "keyword" or "schema" must be passed')}Jn.getSubschema=t;function i(o,l,{dataProp:u,dataPropType:f,data:d,dataTypes:p,propertyName:g}){if(d!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:y}=l;if(u!==void 0){const{errorPath:S,dataPathArr:C,opts:x}=l,_=y.let("data",(0,n._)`${l.data}${(0,n.getProperty)(u)}`,!0);b(_),o.errorPath=(0,n.str)`${S}${(0,e.getErrorPath)(u,f,x.jsPropertySyntax)}`,o.parentDataProperty=(0,n._)`${u}`,o.dataPathArr=[...C,o.parentDataProperty]}if(d!==void 0){const S=d instanceof n.Name?d:y.let("data",d,!0);b(S),g!==void 0&&(o.propertyName=g)}p&&(o.dataTypes=p);function b(S){o.data=S,o.dataLevel=l.dataLevel+1,o.dataTypes=[],l.definedProperties=new Set,o.parentData=l.data,o.dataNames=[...l.dataNames,S]}}Jn.extendSubschemaData=i;function s(o,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:f,createErrors:d,allErrors:p}){f!==void 0&&(o.compositeRule=f),d!==void 0&&(o.createErrors=d),p!==void 0&&(o.allErrors=p),o.jtdDiscriminator=l,o.jtdMetadata=u}return Jn.extendSubschemaMode=s,Jn}var ri={},km,jS;function c_(){return jS||(jS=1,km=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,s,o;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(s=i;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(t).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=i;s--!==0;){var l=o[s];if(!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),km}var Am={exports:{}},PS;function eO(){if(PS)return Am.exports;PS=1;var n=Am.exports=function(i,s,o){typeof s=="function"&&(o=s,s={}),o=s.cb||o;var l=typeof o=="function"?o:o.pre||function(){},u=o.post||function(){};e(s,l,u,i,"",i)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(i,s,o,l,u,f,d,p,g,y){if(l&&typeof l=="object"&&!Array.isArray(l)){s(l,u,f,d,p,g,y);for(var b in l){var S=l[b];if(Array.isArray(S)){if(b in n.arrayKeywords)for(var C=0;C<S.length;C++)e(i,s,o,S[C],u+"/"+b+"/"+C,f,u,b,l,C)}else if(b in n.propsKeywords){if(S&&typeof S=="object")for(var x in S)e(i,s,o,S[x],u+"/"+b+"/"+t(x),f,u,b,l,x)}else(b in n.keywords||i.allKeys&&!(b in n.skipKeywords))&&e(i,s,o,S,u+"/"+b,f,u,b,l)}o(l,u,f,d,p,g,y)}}function t(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}return Am.exports}var qS;function Mh(){if(qS)return ri;qS=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.getSchemaRefs=ri.resolveUrl=ri.normalizeId=ri._getFullPath=ri.getFullPath=ri.inlineRef=void 0;const n=Ve(),e=c_(),t=eO(),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(C,x=!0){return typeof C=="boolean"?!0:x===!0?!l(C):x?u(C)<=x:!1}ri.inlineRef=s;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(C){for(const x in C){if(o.has(x))return!0;const _=C[x];if(Array.isArray(_)&&_.some(l)||typeof _=="object"&&l(_))return!0}return!1}function u(C){let x=0;for(const _ in C){if(_==="$ref")return 1/0;if(x++,!i.has(_)&&(typeof C[_]=="object"&&(0,n.eachItem)(C[_],w=>x+=u(w)),x===1/0))return 1/0}return x}function f(C,x="",_){_!==!1&&(x=g(x));const w=C.parse(x);return d(C,w)}ri.getFullPath=f;function d(C,x){return C.serialize(x).split("#")[0]+"#"}ri._getFullPath=d;const p=/#\/?$/;function g(C){return C?C.replace(p,""):""}ri.normalizeId=g;function y(C,x,_){return _=g(_),C.resolve(x,_)}ri.resolveUrl=y;const b=/^[a-z_][-a-z0-9._]*$/i;function S(C,x){if(typeof C=="boolean")return{};const{schemaId:_,uriResolver:w}=this.opts,T=g(C[_]||x),E={"":T},k=f(w,T,!1),O={},A=new Set;return t(C,{allKeys:!0},(V,q,H,X)=>{if(X===void 0)return;const te=k+q;let fe=E[X];typeof V[_]=="string"&&(fe=I.call(this,V[_])),ne.call(this,V.$anchor),ne.call(this,V.$dynamicAnchor),E[q]=fe;function I(oe){const pe=this.opts.uriResolver.resolve;if(oe=g(fe?pe(fe,oe):oe),A.has(oe))throw $(oe);A.add(oe);let K=this.refs[oe];return typeof K=="string"&&(K=this.refs[K]),typeof K=="object"?N(V,K.schema,oe):oe!==g(te)&&(oe[0]==="#"?(N(V,O[oe],oe),O[oe]=V):this.refs[oe]=te),oe}function ne(oe){if(typeof oe=="string"){if(!b.test(oe))throw new Error(`invalid anchor "${oe}"`);I.call(this,`#${oe}`)}}}),O;function N(V,q,H){if(q!==void 0&&!e(V,q))throw $(H)}function $(V){return new Error(`reference "${V}" resolves to more than one schema`)}}return ri.getSchemaRefs=S,ri}var HS;function zl(){if(HS)return Qn;HS=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.getData=Qn.KeywordCxt=Qn.validateFunctionCode=void 0;const n=XM(),e=Xf(),t=l_(),i=Xf(),s=QM(),o=ZM(),l=JM(),u=Re(),f=cn(),d=Mh(),p=Ve(),g=Eh();function y(G){if(k(G)&&(A(G),E(G))){x(G);return}b(G,()=>(0,n.topBoolOrEmptySchema)(G))}Qn.validateFunctionCode=y;function b({gen:G,validateName:Q,schema:ue,schemaEnv:de,opts:xe},Me){xe.code.es5?G.func(Q,(0,u._)`${f.default.data}, ${f.default.valCxt}`,de.$async,()=>{G.code((0,u._)`"use strict"; ${w(ue,xe)}`),C(G,xe),G.code(Me)}):G.func(Q,(0,u._)`${f.default.data}, ${S(xe)}`,de.$async,()=>G.code(w(ue,xe)).code(Me))}function S(G){return(0,u._)`{${f.default.instancePath}="", ${f.default.parentData}, ${f.default.parentDataProperty}, ${f.default.rootData}=${f.default.data}${G.dynamicRef?(0,u._)`, ${f.default.dynamicAnchors}={}`:u.nil}}={}`}function C(G,Q){G.if(f.default.valCxt,()=>{G.var(f.default.instancePath,(0,u._)`${f.default.valCxt}.${f.default.instancePath}`),G.var(f.default.parentData,(0,u._)`${f.default.valCxt}.${f.default.parentData}`),G.var(f.default.parentDataProperty,(0,u._)`${f.default.valCxt}.${f.default.parentDataProperty}`),G.var(f.default.rootData,(0,u._)`${f.default.valCxt}.${f.default.rootData}`),Q.dynamicRef&&G.var(f.default.dynamicAnchors,(0,u._)`${f.default.valCxt}.${f.default.dynamicAnchors}`)},()=>{G.var(f.default.instancePath,(0,u._)`""`),G.var(f.default.parentData,(0,u._)`undefined`),G.var(f.default.parentDataProperty,(0,u._)`undefined`),G.var(f.default.rootData,f.default.data),Q.dynamicRef&&G.var(f.default.dynamicAnchors,(0,u._)`{}`)})}function x(G){const{schema:Q,opts:ue,gen:de}=G;b(G,()=>{ue.$comment&&Q.$comment&&X(G),V(G),de.let(f.default.vErrors,null),de.let(f.default.errors,0),ue.unevaluated&&_(G),N(G),te(G)})}function _(G){const{gen:Q,validateName:ue}=G;G.evaluated=Q.const("evaluated",(0,u._)`${ue}.evaluated`),Q.if((0,u._)`${G.evaluated}.dynamicProps`,()=>Q.assign((0,u._)`${G.evaluated}.props`,(0,u._)`undefined`)),Q.if((0,u._)`${G.evaluated}.dynamicItems`,()=>Q.assign((0,u._)`${G.evaluated}.items`,(0,u._)`undefined`))}function w(G,Q){const ue=typeof G=="object"&&G[Q.schemaId];return ue&&(Q.code.source||Q.code.process)?(0,u._)`/*# sourceURL=${ue} */`:u.nil}function T(G,Q){if(k(G)&&(A(G),E(G))){O(G,Q);return}(0,n.boolOrEmptySchema)(G,Q)}function E({schema:G,self:Q}){if(typeof G=="boolean")return!G;for(const ue in G)if(Q.RULES.all[ue])return!0;return!1}function k(G){return typeof G.schema!="boolean"}function O(G,Q){const{schema:ue,gen:de,opts:xe}=G;xe.$comment&&ue.$comment&&X(G),q(G),H(G);const Me=de.const("_errs",f.default.errors);N(G,Me),de.var(Q,(0,u._)`${Me} === ${f.default.errors}`)}function A(G){(0,p.checkUnknownRules)(G),$(G)}function N(G,Q){if(G.opts.jtd)return I(G,[],!1,Q);const ue=(0,e.getSchemaTypes)(G.schema),de=(0,e.coerceAndCheckDataType)(G,ue);I(G,ue,!de,Q)}function $(G){const{schema:Q,errSchemaPath:ue,opts:de,self:xe}=G;Q.$ref&&de.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(Q,xe.RULES)&&xe.logger.warn(`$ref: keywords ignored in schema at path "${ue}"`)}function V(G){const{schema:Q,opts:ue}=G;Q.default!==void 0&&ue.useDefaults&&ue.strictSchema&&(0,p.checkStrictMode)(G,"default is ignored in the schema root")}function q(G){const Q=G.schema[G.opts.schemaId];Q&&(G.baseId=(0,d.resolveUrl)(G.opts.uriResolver,G.baseId,Q))}function H(G){if(G.schema.$async&&!G.schemaEnv.$async)throw new Error("async schema in sync schema")}function X({gen:G,schemaEnv:Q,schema:ue,errSchemaPath:de,opts:xe}){const Me=ue.$comment;if(xe.$comment===!0)G.code((0,u._)`${f.default.self}.logger.log(${Me})`);else if(typeof xe.$comment=="function"){const mt=(0,u.str)`${de}/$comment`,St=G.scopeValue("root",{ref:Q.root});G.code((0,u._)`${f.default.self}.opts.$comment(${Me}, ${mt}, ${St}.schema)`)}}function te(G){const{gen:Q,schemaEnv:ue,validateName:de,ValidationError:xe,opts:Me}=G;ue.$async?Q.if((0,u._)`${f.default.errors} === 0`,()=>Q.return(f.default.data),()=>Q.throw((0,u._)`new ${xe}(${f.default.vErrors})`)):(Q.assign((0,u._)`${de}.errors`,f.default.vErrors),Me.unevaluated&&fe(G),Q.return((0,u._)`${f.default.errors} === 0`))}function fe({gen:G,evaluated:Q,props:ue,items:de}){ue instanceof u.Name&&G.assign((0,u._)`${Q}.props`,ue),de instanceof u.Name&&G.assign((0,u._)`${Q}.items`,de)}function I(G,Q,ue,de){const{gen:xe,schema:Me,data:mt,allErrors:St,opts:gt,self:yt}=G,{RULES:_e}=yt;if(Me.$ref&&(gt.ignoreKeywordsWithRef||!(0,p.schemaHasRulesButRef)(Me,_e))){xe.block(()=>he(G,"$ref",_e.all.$ref.definition));return}gt.jtd||oe(G,Q),xe.block(()=>{for(const ut of _e.rules)xt(ut);xt(_e.post)});function xt(ut){(0,t.shouldUseGroup)(Me,ut)&&(ut.type?(xe.if((0,i.checkDataType)(ut.type,mt,gt.strictNumbers)),ne(G,ut),Q.length===1&&Q[0]===ut.type&&ue&&(xe.else(),(0,i.reportTypeError)(G)),xe.endIf()):ne(G,ut),St||xe.if((0,u._)`${f.default.errors} === ${de||0}`))}}function ne(G,Q){const{gen:ue,schema:de,opts:{useDefaults:xe}}=G;xe&&(0,s.assignDefaults)(G,Q.type),ue.block(()=>{for(const Me of Q.rules)(0,t.shouldUseRule)(de,Me)&&he(G,Me.keyword,Me.definition,Q.type)})}function oe(G,Q){G.schemaEnv.meta||!G.opts.strictTypes||(pe(G,Q),G.opts.allowUnionTypes||K(G,Q),D(G,G.dataTypes))}function pe(G,Q){if(Q.length){if(!G.dataTypes.length){G.dataTypes=Q;return}Q.forEach(ue=>{j(G.dataTypes,ue)||B(G,`type "${ue}" not allowed by context "${G.dataTypes.join(",")}"`)}),R(G,Q)}}function K(G,Q){Q.length>1&&!(Q.length===2&&Q.includes("null"))&&B(G,"use allowUnionTypes to allow union type keyword")}function D(G,Q){const ue=G.self.RULES.all;for(const de in ue){const xe=ue[de];if(typeof xe=="object"&&(0,t.shouldUseRule)(G.schema,xe)){const{type:Me}=xe.definition;Me.length&&!Me.some(mt=>L(Q,mt))&&B(G,`missing type "${Me.join(",")}" for keyword "${de}"`)}}}function L(G,Q){return G.includes(Q)||Q==="number"&&G.includes("integer")}function j(G,Q){return G.includes(Q)||Q==="integer"&&G.includes("number")}function R(G,Q){const ue=[];for(const de of G.dataTypes)j(Q,de)?ue.push(de):Q.includes("integer")&&de==="number"&&ue.push("integer");G.dataTypes=ue}function B(G,Q){const ue=G.schemaEnv.baseId+G.errSchemaPath;Q+=` at "${ue}" (strictTypes)`,(0,p.checkStrictMode)(G,Q,G.opts.strictTypes)}class F{constructor(Q,ue,de){if((0,o.validateKeywordUsage)(Q,ue,de),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=de,this.data=Q.data,this.schema=Q.schema[de],this.$data=ue.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(Q,this.schema,de,this.$data),this.schemaType=ue.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=ue,this.$data)this.schemaCode=Q.gen.const("vSchema",Oe(this.$data,Q));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,ue.schemaType,ue.allowUndefined))throw new Error(`${de} value must be ${JSON.stringify(ue.schemaType)}`);("code"in ue?ue.trackErrors:ue.errors!==!1)&&(this.errsCount=Q.gen.const("_errs",f.default.errors))}result(Q,ue,de){this.failResult((0,u.not)(Q),ue,de)}failResult(Q,ue,de){this.gen.if(Q),de?de():this.error(),ue?(this.gen.else(),ue(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Q,ue){this.failResult((0,u.not)(Q),void 0,ue)}fail(Q){if(Q===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Q),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);const{schemaCode:ue}=this;this.fail((0,u._)`${ue} !== undefined && (${(0,u.or)(this.invalid$data(),Q)})`)}error(Q,ue,de){if(ue){this.setParams(ue),this._error(Q,de),this.setParams({});return}this._error(Q,de)}_error(Q,ue){(Q?g.reportExtraError:g.reportError)(this,this.def.error,ue)}$dataError(){(0,g.reportError)(this,this.def.$dataError||g.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,g.resetErrorsCount)(this.gen,this.errsCount)}ok(Q){this.allErrors||this.gen.if(Q)}setParams(Q,ue){ue?Object.assign(this.params,Q):this.params=Q}block$data(Q,ue,de=u.nil){this.gen.block(()=>{this.check$data(Q,de),ue()})}check$data(Q=u.nil,ue=u.nil){if(!this.$data)return;const{gen:de,schemaCode:xe,schemaType:Me,def:mt}=this;de.if((0,u.or)((0,u._)`${xe} === undefined`,ue)),Q!==u.nil&&de.assign(Q,!0),(Me.length||mt.validateSchema)&&(de.elseIf(this.invalid$data()),this.$dataError(),Q!==u.nil&&de.assign(Q,!1)),de.else()}invalid$data(){const{gen:Q,schemaCode:ue,schemaType:de,def:xe,it:Me}=this;return(0,u.or)(mt(),St());function mt(){if(de.length){if(!(ue instanceof u.Name))throw new Error("ajv implementation error");const gt=Array.isArray(de)?de:[de];return(0,u._)`${(0,i.checkDataTypes)(gt,ue,Me.opts.strictNumbers,i.DataType.Wrong)}`}return u.nil}function St(){if(xe.validateSchema){const gt=Q.scopeValue("validate$data",{ref:xe.validateSchema});return(0,u._)`!${gt}(${ue})`}return u.nil}}subschema(Q,ue){const de=(0,l.getSubschema)(this.it,Q);(0,l.extendSubschemaData)(de,this.it,Q),(0,l.extendSubschemaMode)(de,Q);const xe={...this.it,...de,items:void 0,props:void 0};return T(xe,ue),xe}mergeEvaluated(Q,ue){const{it:de,gen:xe}=this;de.opts.unevaluated&&(de.props!==!0&&Q.props!==void 0&&(de.props=p.mergeEvaluated.props(xe,Q.props,de.props,ue)),de.items!==!0&&Q.items!==void 0&&(de.items=p.mergeEvaluated.items(xe,Q.items,de.items,ue)))}mergeValidEvaluated(Q,ue){const{it:de,gen:xe}=this;if(de.opts.unevaluated&&(de.props!==!0||de.items!==!0))return xe.if(ue,()=>this.mergeEvaluated(Q,u.Name)),!0}}Qn.KeywordCxt=F;function he(G,Q,ue,de){const xe=new F(G,ue,Q);"code"in ue?ue.code(xe,de):xe.$data&&ue.validate?(0,o.funcKeywordCode)(xe,ue):"macro"in ue?(0,o.macroKeywordCode)(xe,ue):(ue.compile||ue.validate)&&(0,o.funcKeywordCode)(xe,ue)}const ge=/^\/(?:[^~]|~0|~1)*$/,Ce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Oe(G,{dataLevel:Q,dataNames:ue,dataPathArr:de}){let xe,Me;if(G==="")return f.default.rootData;if(G[0]==="/"){if(!ge.test(G))throw new Error(`Invalid JSON-pointer: ${G}`);xe=G,Me=f.default.rootData}else{const yt=Ce.exec(G);if(!yt)throw new Error(`Invalid JSON-pointer: ${G}`);const _e=+yt[1];if(xe=yt[2],xe==="#"){if(_e>=Q)throw new Error(gt("property/index",_e));return de[Q-_e]}if(_e>Q)throw new Error(gt("data",_e));if(Me=ue[Q-_e],!xe)return Me}let mt=Me;const St=xe.split("/");for(const yt of St)yt&&(Me=(0,u._)`${Me}${(0,u.getProperty)((0,p.unescapeJsonPointer)(yt))}`,mt=(0,u._)`${mt} && ${Me}`);return mt;function gt(yt,_e){return`Cannot access ${yt} ${_e} levels up, current level is ${Q}`}}return Qn.getData=Oe,Qn}var vu={},US;function Oh(){if(US)return vu;US=1,Object.defineProperty(vu,"__esModule",{value:!0});class n extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}return vu.default=n,vu}var bu={},VS;function $l(){if(VS)return bu;VS=1,Object.defineProperty(bu,"__esModule",{value:!0});const n=Mh();class e extends Error{constructor(i,s,o,l){super(l||`can't resolve reference ${o} from id ${s}`),this.missingRef=(0,n.resolveUrl)(i,s,o),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(i,this.missingRef))}}return bu.default=e,bu}var Di={},IS;function Dh(){if(IS)return Di;IS=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.resolveSchema=Di.getCompilingSchema=Di.resolveRef=Di.compileSchema=Di.SchemaEnv=void 0;const n=Re(),e=Oh(),t=cn(),i=Mh(),s=Ve(),o=zl();class l{constructor(_){var w;this.refs={},this.dynamicAnchors={};let T;typeof _.schema=="object"&&(T=_.schema),this.schema=_.schema,this.schemaId=_.schemaId,this.root=_.root||this,this.baseId=(w=_.baseId)!==null&&w!==void 0?w:(0,i.normalizeId)(T?.[_.schemaId||"$id"]),this.schemaPath=_.schemaPath,this.localRefs=_.localRefs,this.meta=_.meta,this.$async=T?.$async,this.refs={}}}Di.SchemaEnv=l;function u(x){const _=p.call(this,x);if(_)return _;const w=(0,i.getFullPath)(this.opts.uriResolver,x.root.baseId),{es5:T,lines:E}=this.opts.code,{ownProperties:k}=this.opts,O=new n.CodeGen(this.scope,{es5:T,lines:E,ownProperties:k});let A;x.$async&&(A=O.scopeValue("Error",{ref:e.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const N=O.scopeName("validate");x.validateName=N;const $={gen:O,allErrors:this.opts.allErrors,data:t.default.data,parentData:t.default.parentData,parentDataProperty:t.default.parentDataProperty,dataNames:[t.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:O.scopeValue("schema",this.opts.code.source===!0?{ref:x.schema,code:(0,n.stringify)(x.schema)}:{ref:x.schema}),validateName:N,ValidationError:A,schema:x.schema,schemaEnv:x,rootId:w,baseId:x.baseId||w,schemaPath:n.nil,errSchemaPath:x.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let V;try{this._compilations.add(x),(0,o.validateFunctionCode)($),O.optimize(this.opts.code.optimize);const q=O.toString();V=`${O.scopeRefs(t.default.scope)}return ${q}`,this.opts.code.process&&(V=this.opts.code.process(V,x));const X=new Function(`${t.default.self}`,`${t.default.scope}`,V)(this,this.scope.get());if(this.scope.value(N,{ref:X}),X.errors=null,X.schema=x.schema,X.schemaEnv=x,x.$async&&(X.$async=!0),this.opts.code.source===!0&&(X.source={validateName:N,validateCode:q,scopeValues:O._values}),this.opts.unevaluated){const{props:te,items:fe}=$;X.evaluated={props:te instanceof n.Name?void 0:te,items:fe instanceof n.Name?void 0:fe,dynamicProps:te instanceof n.Name,dynamicItems:fe instanceof n.Name},X.source&&(X.source.evaluated=(0,n.stringify)(X.evaluated))}return x.validate=X,x}catch(q){throw delete x.validate,delete x.validateName,V&&this.logger.error("Error compiling schema, function code:",V),q}finally{this._compilations.delete(x)}}Di.compileSchema=u;function f(x,_,w){var T;w=(0,i.resolveUrl)(this.opts.uriResolver,_,w);const E=x.refs[w];if(E)return E;let k=y.call(this,x,w);if(k===void 0){const O=(T=x.localRefs)===null||T===void 0?void 0:T[w],{schemaId:A}=this.opts;O&&(k=new l({schema:O,schemaId:A,root:x,baseId:_}))}if(k!==void 0)return x.refs[w]=d.call(this,k)}Di.resolveRef=f;function d(x){return(0,i.inlineRef)(x.schema,this.opts.inlineRefs)?x.schema:x.validate?x:u.call(this,x)}function p(x){for(const _ of this._compilations)if(g(_,x))return _}Di.getCompilingSchema=p;function g(x,_){return x.schema===_.schema&&x.root===_.root&&x.baseId===_.baseId}function y(x,_){let w;for(;typeof(w=this.refs[_])=="string";)_=w;return w||this.schemas[_]||b.call(this,x,_)}function b(x,_){const w=this.opts.uriResolver.parse(_),T=(0,i._getFullPath)(this.opts.uriResolver,w);let E=(0,i.getFullPath)(this.opts.uriResolver,x.baseId,void 0);if(Object.keys(x.schema).length>0&&T===E)return C.call(this,w,x);const k=(0,i.normalizeId)(T),O=this.refs[k]||this.schemas[k];if(typeof O=="string"){const A=b.call(this,x,O);return typeof A?.schema!="object"?void 0:C.call(this,w,A)}if(typeof O?.schema=="object"){if(O.validate||u.call(this,O),k===(0,i.normalizeId)(_)){const{schema:A}=O,{schemaId:N}=this.opts,$=A[N];return $&&(E=(0,i.resolveUrl)(this.opts.uriResolver,E,$)),new l({schema:A,schemaId:N,root:x,baseId:E})}return C.call(this,w,O)}}Di.resolveSchema=b;const S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function C(x,{baseId:_,schema:w,root:T}){var E;if(((E=x.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const A of x.fragment.slice(1).split("/")){if(typeof w=="boolean")return;const N=w[(0,s.unescapeFragment)(A)];if(N===void 0)return;w=N;const $=typeof w=="object"&&w[this.opts.schemaId];!S.has(A)&&$&&(_=(0,i.resolveUrl)(this.opts.uriResolver,_,$))}let k;if(typeof w!="boolean"&&w.$ref&&!(0,s.schemaHasRulesButRef)(w,this.RULES)){const A=(0,i.resolveUrl)(this.opts.uriResolver,_,w.$ref);k=b.call(this,T,A)}const{schemaId:O}=this.opts;if(k=k||new l({schema:w,schemaId:O,root:T,baseId:_}),k.schema!==k.root.schema)return k}return Di}const tO="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",iO="Meta-schema for $data reference (JSON AnySchema extension proposal)",nO="object",rO=["$data"],sO={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},aO=!1,oO={$id:tO,description:iO,type:nO,required:rO,properties:sO,additionalProperties:aO};var Su={},Yo={exports:{}},Em,WS;function u_(){if(WS)return Em;WS=1;const n=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function t(y){let b="",S=0,C=0;for(C=0;C<y.length;C++)if(S=y[C].charCodeAt(0),S!==48){if(!(S>=48&&S<=57||S>=65&&S<=70||S>=97&&S<=102))return"";b+=y[C];break}for(C+=1;C<y.length;C++){if(S=y[C].charCodeAt(0),!(S>=48&&S<=57||S>=65&&S<=70||S>=97&&S<=102))return"";b+=y[C]}return b}const i=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s(y){return y.length=0,!0}function o(y,b,S){if(y.length){const C=t(y);if(C!=="")b.push(C);else return S.error=!0,!1;y.length=0}return!0}function l(y){let b=0;const S={error:!1,address:"",zone:""},C=[],x=[];let _=!1,w=!1,T=o;for(let E=0;E<y.length;E++){const k=y[E];if(!(k==="["||k==="]"))if(k===":"){if(_===!0&&(w=!0),!T(x,C,S))break;if(++b>7){S.error=!0;break}E>0&&y[E-1]===":"&&(_=!0),C.push(":");continue}else if(k==="%"){if(!T(x,C,S))break;T=s}else{x.push(k);continue}}return x.length&&(T===s?S.zone=x.join(""):w?C.push(x.join("")):C.push(t(x))),S.address=C.join(""),S}function u(y){if(f(y,":")<2)return{host:y,isIPV6:!1};const b=l(y);if(b.error)return{host:y,isIPV6:!1};{let S=b.address,C=b.address;return b.zone&&(S+="%"+b.zone,C+="%25"+b.zone),{host:S,isIPV6:!0,escapedHost:C}}}function f(y,b){let S=0;for(let C=0;C<y.length;C++)y[C]===b&&S++;return S}function d(y){let b=y;const S=[];let C=-1,x=0;for(;x=b.length;){if(x===1){if(b===".")break;if(b==="/"){S.push("/");break}else{S.push(b);break}}else if(x===2){if(b[0]==="."){if(b[1]===".")break;if(b[1]==="/"){b=b.slice(2);continue}}else if(b[0]==="/"&&(b[1]==="."||b[1]==="/")){S.push("/");break}}else if(x===3&&b==="/.."){S.length!==0&&S.pop(),S.push("/");break}if(b[0]==="."){if(b[1]==="."){if(b[2]==="/"){b=b.slice(3);continue}}else if(b[1]==="/"){b=b.slice(2);continue}}else if(b[0]==="/"&&b[1]==="."){if(b[2]==="/"){b=b.slice(2);continue}else if(b[2]==="."&&b[3]==="/"){b=b.slice(3),S.length!==0&&S.pop();continue}}if((C=b.indexOf("/",1))===-1){S.push(b);break}else S.push(b.slice(0,C)),b=b.slice(C)}return S.join("")}function p(y,b){const S=b!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=S(y.scheme)),y.userinfo!==void 0&&(y.userinfo=S(y.userinfo)),y.host!==void 0&&(y.host=S(y.host)),y.path!==void 0&&(y.path=S(y.path)),y.query!==void 0&&(y.query=S(y.query)),y.fragment!==void 0&&(y.fragment=S(y.fragment)),y}function g(y){const b=[];if(y.userinfo!==void 0&&(b.push(y.userinfo),b.push("@")),y.host!==void 0){let S=unescape(y.host);if(!e(S)){const C=u(S);C.isIPV6===!0?S=`[${C.escapedHost}]`:S=y.host}b.push(S)}return(typeof y.port=="number"||typeof y.port=="string")&&(b.push(":"),b.push(String(y.port))),b.length?b.join(""):void 0}return Em={nonSimpleDomain:i,recomposeAuthority:g,normalizeComponentEncoding:p,removeDotSegments:d,isIPv4:e,isUUID:n,normalizeIPv6:u,stringArrayToHexStripped:t},Em}var Mm,GS;function lO(){if(GS)return Mm;GS=1;const{isUUID:n}=u_(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,t=["http","https","ws","wss","urn","urn:uuid"];function i(k){return t.indexOf(k)!==-1}function s(k){return k.secure===!0?!0:k.secure===!1?!1:k.scheme?k.scheme.length===3&&(k.scheme[0]==="w"||k.scheme[0]==="W")&&(k.scheme[1]==="s"||k.scheme[1]==="S")&&(k.scheme[2]==="s"||k.scheme[2]==="S"):!1}function o(k){return k.host||(k.error=k.error||"HTTP URIs must have a host."),k}function l(k){const O=String(k.scheme).toLowerCase()==="https";return(k.port===(O?443:80)||k.port==="")&&(k.port=void 0),k.path||(k.path="/"),k}function u(k){return k.secure=s(k),k.resourceName=(k.path||"/")+(k.query?"?"+k.query:""),k.path=void 0,k.query=void 0,k}function f(k){if((k.port===(s(k)?443:80)||k.port==="")&&(k.port=void 0),typeof k.secure=="boolean"&&(k.scheme=k.secure?"wss":"ws",k.secure=void 0),k.resourceName){const[O,A]=k.resourceName.split("?");k.path=O&&O!=="/"?O:void 0,k.query=A,k.resourceName=void 0}return k.fragment=void 0,k}function d(k,O){if(!k.path)return k.error="URN can not be parsed",k;const A=k.path.match(e);if(A){const N=O.scheme||k.scheme||"urn";k.nid=A[1].toLowerCase(),k.nss=A[2];const $=`${N}:${O.nid||k.nid}`,V=E($);k.path=void 0,V&&(k=V.parse(k,O))}else k.error=k.error||"URN can not be parsed.";return k}function p(k,O){if(k.nid===void 0)throw new Error("URN without nid cannot be serialized");const A=O.scheme||k.scheme||"urn",N=k.nid.toLowerCase(),$=`${A}:${O.nid||N}`,V=E($);V&&(k=V.serialize(k,O));const q=k,H=k.nss;return q.path=`${N||O.nid}:${H}`,O.skipEscape=!0,q}function g(k,O){const A=k;return A.uuid=A.nss,A.nss=void 0,!O.tolerant&&(!A.uuid||!n(A.uuid))&&(A.error=A.error||"UUID is not valid."),A}function y(k){const O=k;return O.nss=(k.uuid||"").toLowerCase(),O}const b={scheme:"http",domainHost:!0,parse:o,serialize:l},S={scheme:"https",domainHost:b.domainHost,parse:o,serialize:l},C={scheme:"ws",domainHost:!0,parse:u,serialize:f},x={scheme:"wss",domainHost:C.domainHost,parse:C.parse,serialize:C.serialize},T={http:b,https:S,ws:C,wss:x,urn:{scheme:"urn",parse:d,serialize:p,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:g,serialize:y,skipNormalize:!0}};Object.setPrototypeOf(T,null);function E(k){return k&&(T[k]||T[k.toLowerCase()])||void 0}return Mm={wsIsSecure:s,SCHEMES:T,isValidSchemeName:i,getSchemeHandler:E},Mm}var YS;function cO(){if(YS)return Yo.exports;YS=1;const{normalizeIPv6:n,removeDotSegments:e,recomposeAuthority:t,normalizeComponentEncoding:i,isIPv4:s,nonSimpleDomain:o}=u_(),{SCHEMES:l,getSchemeHandler:u}=lO();function f(x,_){return typeof x=="string"?x=y(S(x,_),_):typeof x=="object"&&(x=S(y(x,_),_)),x}function d(x,_,w){const T=w?Object.assign({scheme:"null"},w):{scheme:"null"},E=p(S(x,T),S(_,T),T,!0);return T.skipEscape=!0,y(E,T)}function p(x,_,w,T){const E={};return T||(x=S(y(x,w),w),_=S(y(_,w),w)),w=w||{},!w.tolerant&&_.scheme?(E.scheme=_.scheme,E.userinfo=_.userinfo,E.host=_.host,E.port=_.port,E.path=e(_.path||""),E.query=_.query):(_.userinfo!==void 0||_.host!==void 0||_.port!==void 0?(E.userinfo=_.userinfo,E.host=_.host,E.port=_.port,E.path=e(_.path||""),E.query=_.query):(_.path?(_.path[0]==="/"?E.path=e(_.path):((x.userinfo!==void 0||x.host!==void 0||x.port!==void 0)&&!x.path?E.path="/"+_.path:x.path?E.path=x.path.slice(0,x.path.lastIndexOf("/")+1)+_.path:E.path=_.path,E.path=e(E.path)),E.query=_.query):(E.path=x.path,_.query!==void 0?E.query=_.query:E.query=x.query),E.userinfo=x.userinfo,E.host=x.host,E.port=x.port),E.scheme=x.scheme),E.fragment=_.fragment,E}function g(x,_,w){return typeof x=="string"?(x=unescape(x),x=y(i(S(x,w),!0),{...w,skipEscape:!0})):typeof x=="object"&&(x=y(i(x,!0),{...w,skipEscape:!0})),typeof _=="string"?(_=unescape(_),_=y(i(S(_,w),!0),{...w,skipEscape:!0})):typeof _=="object"&&(_=y(i(_,!0),{...w,skipEscape:!0})),x.toLowerCase()===_.toLowerCase()}function y(x,_){const w={host:x.host,scheme:x.scheme,userinfo:x.userinfo,port:x.port,path:x.path,query:x.query,nid:x.nid,nss:x.nss,uuid:x.uuid,fragment:x.fragment,reference:x.reference,resourceName:x.resourceName,secure:x.secure,error:""},T=Object.assign({},_),E=[],k=u(T.scheme||w.scheme);k&&k.serialize&&k.serialize(w,T),w.path!==void 0&&(T.skipEscape?w.path=unescape(w.path):(w.path=escape(w.path),w.scheme!==void 0&&(w.path=w.path.split("%3A").join(":")))),T.reference!=="suffix"&&w.scheme&&E.push(w.scheme,":");const O=t(w);if(O!==void 0&&(T.reference!=="suffix"&&E.push("//"),E.push(O),w.path&&w.path[0]!=="/"&&E.push("/")),w.path!==void 0){let A=w.path;!T.absolutePath&&(!k||!k.absolutePath)&&(A=e(A)),O===void 0&&A[0]==="/"&&A[1]==="/"&&(A="/%2F"+A.slice(2)),E.push(A)}return w.query!==void 0&&E.push("?",w.query),w.fragment!==void 0&&E.push("#",w.fragment),E.join("")}const b=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function S(x,_){const w=Object.assign({},_),T={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let E=!1;w.reference==="suffix"&&(w.scheme?x=w.scheme+":"+x:x="//"+x);const k=x.match(b);if(k){if(T.scheme=k[1],T.userinfo=k[3],T.host=k[4],T.port=parseInt(k[5],10),T.path=k[6]||"",T.query=k[7],T.fragment=k[8],isNaN(T.port)&&(T.port=k[5]),T.host)if(s(T.host)===!1){const N=n(T.host);T.host=N.host.toLowerCase(),E=N.isIPV6}else E=!0;T.scheme===void 0&&T.userinfo===void 0&&T.host===void 0&&T.port===void 0&&T.query===void 0&&!T.path?T.reference="same-document":T.scheme===void 0?T.reference="relative":T.fragment===void 0?T.reference="absolute":T.reference="uri",w.reference&&w.reference!=="suffix"&&w.reference!==T.reference&&(T.error=T.error||"URI is not a "+w.reference+" reference.");const O=u(w.scheme||T.scheme);if(!w.unicodeSupport&&(!O||!O.unicodeSupport)&&T.host&&(w.domainHost||O&&O.domainHost)&&E===!1&&o(T.host))try{T.host=URL.domainToASCII(T.host.toLowerCase())}catch(A){T.error=T.error||"Host's domain name can not be converted to ASCII: "+A}(!O||O&&!O.skipNormalize)&&(x.indexOf("%")!==-1&&(T.scheme!==void 0&&(T.scheme=unescape(T.scheme)),T.host!==void 0&&(T.host=unescape(T.host))),T.path&&(T.path=escape(unescape(T.path))),T.fragment&&(T.fragment=encodeURI(decodeURIComponent(T.fragment)))),O&&O.parse&&O.parse(T,w)}else T.error=T.error||"URI can not be parsed.";return T}const C={SCHEMES:l,normalize:f,resolve:d,resolveComponent:p,equal:g,serialize:y,parse:S};return Yo.exports=C,Yo.exports.default=C,Yo.exports.fastUri=C,Yo.exports}var FS;function uO(){if(FS)return Su;FS=1,Object.defineProperty(Su,"__esModule",{value:!0});const n=cO();return n.code='require("ajv/dist/runtime/uri").default',Su.default=n,Su}var KS;function f_(){return KS||(KS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var e=zl();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var t=Re();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});const i=Oh(),s=$l(),o=o_(),l=Dh(),u=Re(),f=Mh(),d=Xf(),p=Ve(),g=oO,y=uO(),b=(K,D)=>new RegExp(K,D);b.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"],C=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),x={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function T(K){var D,L,j,R,B,F,he,ge,Ce,Oe,G,Q,ue,de,xe,Me,mt,St,gt,yt,_e,xt,ut,ot,dn;const lr=K.strict,zs=(D=K.code)===null||D===void 0?void 0:D.optimize,Qr=zs===!0||zs===void 0?1:zs||0,Yl=(j=(L=K.code)===null||L===void 0?void 0:L.regExp)!==null&&j!==void 0?j:b,Fl=(R=K.uriResolver)!==null&&R!==void 0?R:y.default;return{strictSchema:(F=(B=K.strictSchema)!==null&&B!==void 0?B:lr)!==null&&F!==void 0?F:!0,strictNumbers:(ge=(he=K.strictNumbers)!==null&&he!==void 0?he:lr)!==null&&ge!==void 0?ge:!0,strictTypes:(Oe=(Ce=K.strictTypes)!==null&&Ce!==void 0?Ce:lr)!==null&&Oe!==void 0?Oe:"log",strictTuples:(Q=(G=K.strictTuples)!==null&&G!==void 0?G:lr)!==null&&Q!==void 0?Q:"log",strictRequired:(de=(ue=K.strictRequired)!==null&&ue!==void 0?ue:lr)!==null&&de!==void 0?de:!1,code:K.code?{...K.code,optimize:Qr,regExp:Yl}:{optimize:Qr,regExp:Yl},loopRequired:(xe=K.loopRequired)!==null&&xe!==void 0?xe:w,loopEnum:(Me=K.loopEnum)!==null&&Me!==void 0?Me:w,meta:(mt=K.meta)!==null&&mt!==void 0?mt:!0,messages:(St=K.messages)!==null&&St!==void 0?St:!0,inlineRefs:(gt=K.inlineRefs)!==null&&gt!==void 0?gt:!0,schemaId:(yt=K.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(_e=K.addUsedSchema)!==null&&_e!==void 0?_e:!0,validateSchema:(xt=K.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(ut=K.validateFormats)!==null&&ut!==void 0?ut:!0,unicodeRegExp:(ot=K.unicodeRegExp)!==null&&ot!==void 0?ot:!0,int32range:(dn=K.int32range)!==null&&dn!==void 0?dn:!0,uriResolver:Fl}}class E{constructor(D={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,D=this.opts={...D,...T(D)};const{es5:L,lines:j}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:C,es5:L,lines:j}),this.logger=H(D.logger);const R=D.validateFormats;D.validateFormats=!1,this.RULES=(0,o.getRules)(),k.call(this,x,D,"NOT SUPPORTED"),k.call(this,_,D,"DEPRECATED","warn"),this._metaOpts=V.call(this),D.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),D.keywords&&$.call(this,D.keywords),typeof D.meta=="object"&&this.addMetaSchema(D.meta),A.call(this),D.validateFormats=R}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:D,meta:L,schemaId:j}=this.opts;let R=g;j==="id"&&(R={...g},R.id=R.$id,delete R.$id),L&&D&&this.addMetaSchema(R,R[j],!1)}defaultMeta(){const{meta:D,schemaId:L}=this.opts;return this.opts.defaultMeta=typeof D=="object"?D[L]||D:void 0}validate(D,L){let j;if(typeof D=="string"){if(j=this.getSchema(D),!j)throw new Error(`no schema with key or ref "${D}"`)}else j=this.compile(D);const R=j(L);return"$async"in j||(this.errors=j.errors),R}compile(D,L){const j=this._addSchema(D,L);return j.validate||this._compileSchemaEnv(j)}compileAsync(D,L){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return R.call(this,D,L);async function R(Oe,G){await B.call(this,Oe.$schema);const Q=this._addSchema(Oe,G);return Q.validate||F.call(this,Q)}async function B(Oe){Oe&&!this.getSchema(Oe)&&await R.call(this,{$ref:Oe},!0)}async function F(Oe){try{return this._compileSchemaEnv(Oe)}catch(G){if(!(G instanceof s.default))throw G;return he.call(this,G),await ge.call(this,G.missingSchema),F.call(this,Oe)}}function he({missingSchema:Oe,missingRef:G}){if(this.refs[Oe])throw new Error(`AnySchema ${Oe} is loaded but ${G} cannot be resolved`)}async function ge(Oe){const G=await Ce.call(this,Oe);this.refs[Oe]||await B.call(this,G.$schema),this.refs[Oe]||this.addSchema(G,Oe,L)}async function Ce(Oe){const G=this._loading[Oe];if(G)return G;try{return await(this._loading[Oe]=j(Oe))}finally{delete this._loading[Oe]}}}addSchema(D,L,j,R=this.opts.validateSchema){if(Array.isArray(D)){for(const F of D)this.addSchema(F,void 0,j,R);return this}let B;if(typeof D=="object"){const{schemaId:F}=this.opts;if(B=D[F],B!==void 0&&typeof B!="string")throw new Error(`schema ${F} must be string`)}return L=(0,f.normalizeId)(L||B),this._checkUnique(L),this.schemas[L]=this._addSchema(D,j,L,R,!0),this}addMetaSchema(D,L,j=this.opts.validateSchema){return this.addSchema(D,L,!0,j),this}validateSchema(D,L){if(typeof D=="boolean")return!0;let j;if(j=D.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const R=this.validate(j,D);if(!R&&L){const B="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(B);else throw new Error(B)}return R}getSchema(D){let L;for(;typeof(L=O.call(this,D))=="string";)D=L;if(L===void 0){const{schemaId:j}=this.opts,R=new l.SchemaEnv({schema:{},schemaId:j});if(L=l.resolveSchema.call(this,R,D),!L)return;this.refs[D]=L}return L.validate||this._compileSchemaEnv(L)}removeSchema(D){if(D instanceof RegExp)return this._removeAllSchemas(this.schemas,D),this._removeAllSchemas(this.refs,D),this;switch(typeof D){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const L=O.call(this,D);return typeof L=="object"&&this._cache.delete(L.schema),delete this.schemas[D],delete this.refs[D],this}case"object":{const L=D;this._cache.delete(L);let j=D[this.opts.schemaId];return j&&(j=(0,f.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(D){for(const L of D)this.addKeyword(L);return this}addKeyword(D,L){let j;if(typeof D=="string")j=D,typeof L=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),L.keyword=j);else if(typeof D=="object"&&L===void 0){if(L=D,j=L.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(te.call(this,j,L),!L)return(0,p.eachItem)(j,B=>fe.call(this,B)),this;ne.call(this,L);const R={...L,type:(0,d.getJSONTypes)(L.type),schemaType:(0,d.getJSONTypes)(L.schemaType)};return(0,p.eachItem)(j,R.type.length===0?B=>fe.call(this,B,R):B=>R.type.forEach(F=>fe.call(this,B,R,F))),this}getKeyword(D){const L=this.RULES.all[D];return typeof L=="object"?L.definition:!!L}removeKeyword(D){const{RULES:L}=this;delete L.keywords[D],delete L.all[D];for(const j of L.rules){const R=j.rules.findIndex(B=>B.keyword===D);R>=0&&j.rules.splice(R,1)}return this}addFormat(D,L){return typeof L=="string"&&(L=new RegExp(L)),this.formats[D]=L,this}errorsText(D=this.errors,{separator:L=", ",dataVar:j="data"}={}){return!D||D.length===0?"No errors":D.map(R=>`${j}${R.instancePath} ${R.message}`).reduce((R,B)=>R+L+B)}$dataMetaSchema(D,L){const j=this.RULES.all;D=JSON.parse(JSON.stringify(D));for(const R of L){const B=R.split("/").slice(1);let F=D;for(const he of B)F=F[he];for(const he in j){const ge=j[he];if(typeof ge!="object")continue;const{$data:Ce}=ge.definition,Oe=F[he];Ce&&Oe&&(F[he]=pe(Oe))}}return D}_removeAllSchemas(D,L){for(const j in D){const R=D[j];(!L||L.test(j))&&(typeof R=="string"?delete D[j]:R&&!R.meta&&(this._cache.delete(R.schema),delete D[j]))}}_addSchema(D,L,j,R=this.opts.validateSchema,B=this.opts.addUsedSchema){let F;const{schemaId:he}=this.opts;if(typeof D=="object")F=D[he];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof D!="boolean")throw new Error("schema must be object or boolean")}let ge=this._cache.get(D);if(ge!==void 0)return ge;j=(0,f.normalizeId)(F||j);const Ce=f.getSchemaRefs.call(this,D,j);return ge=new l.SchemaEnv({schema:D,schemaId:he,meta:L,baseId:j,localRefs:Ce}),this._cache.set(ge.schema,ge),B&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=ge),R&&this.validateSchema(D,!0),ge}_checkUnique(D){if(this.schemas[D]||this.refs[D])throw new Error(`schema with key or id "${D}" already exists`)}_compileSchemaEnv(D){if(D.meta?this._compileMetaSchema(D):l.compileSchema.call(this,D),!D.validate)throw new Error("ajv implementation error");return D.validate}_compileMetaSchema(D){const L=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,D)}finally{this.opts=L}}}E.ValidationError=i.default,E.MissingRefError=s.default,n.default=E;function k(K,D,L,j="error"){for(const R in K){const B=R;B in D&&this.logger[j](`${L}: option ${R}. ${K[B]}`)}}function O(K){return K=(0,f.normalizeId)(K),this.schemas[K]||this.refs[K]}function A(){const K=this.opts.schemas;if(K)if(Array.isArray(K))this.addSchema(K);else for(const D in K)this.addSchema(K[D],D)}function N(){for(const K in this.opts.formats){const D=this.opts.formats[K];D&&this.addFormat(K,D)}}function $(K){if(Array.isArray(K)){this.addVocabulary(K);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const D in K){const L=K[D];L.keyword||(L.keyword=D),this.addKeyword(L)}}function V(){const K={...this.opts};for(const D of S)delete K[D];return K}const q={log(){},warn(){},error(){}};function H(K){if(K===!1)return q;if(K===void 0)return console;if(K.log&&K.warn&&K.error)return K;throw new Error("logger must implement log, warn and error methods")}const X=/^[a-z_$][a-z0-9_$:-]*$/i;function te(K,D){const{RULES:L}=this;if((0,p.eachItem)(K,j=>{if(L.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!X.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!D&&D.$data&&!("code"in D||"validate"in D))throw new Error('$data keyword must have "code" or "validate" function')}function fe(K,D,L){var j;const R=D?.post;if(L&&R)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:B}=this;let F=R?B.post:B.rules.find(({type:ge})=>ge===L);if(F||(F={type:L,rules:[]},B.rules.push(F)),B.keywords[K]=!0,!D)return;const he={keyword:K,definition:{...D,type:(0,d.getJSONTypes)(D.type),schemaType:(0,d.getJSONTypes)(D.schemaType)}};D.before?I.call(this,F,he,D.before):F.rules.push(he),B.all[K]=he,(j=D.implements)===null||j===void 0||j.forEach(ge=>this.addKeyword(ge))}function I(K,D,L){const j=K.rules.findIndex(R=>R.keyword===L);j>=0?K.rules.splice(j,0,D):(K.rules.push(D),this.logger.warn(`rule ${L} is not defined`))}function ne(K){let{metaSchema:D}=K;D!==void 0&&(K.$data&&this.opts.$data&&(D=pe(D)),K.validateSchema=this.compile(D,!0))}const oe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function pe(K){return{anyOf:[K,oe]}}})(xm)),xm}var xu={},wu={},_u={},XS;function fO(){if(XS)return _u;XS=1,Object.defineProperty(_u,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return _u.default=n,_u}var Br={},QS;function d0(){if(QS)return Br;QS=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.callRef=Br.getValidate=void 0;const n=$l(),e=un(),t=Re(),i=cn(),s=Dh(),o=Ve(),l={keyword:"$ref",schemaType:"string",code(d){const{gen:p,schema:g,it:y}=d,{baseId:b,schemaEnv:S,validateName:C,opts:x,self:_}=y,{root:w}=S;if((g==="#"||g==="#/")&&b===w.baseId)return E();const T=s.resolveRef.call(_,w,b,g);if(T===void 0)throw new n.default(y.opts.uriResolver,b,g);if(T instanceof s.SchemaEnv)return k(T);return O(T);function E(){if(S===w)return f(d,C,S,S.$async);const A=p.scopeValue("root",{ref:w});return f(d,(0,t._)`${A}.validate`,w,w.$async)}function k(A){const N=u(d,A);f(d,N,A,A.$async)}function O(A){const N=p.scopeValue("schema",x.code.source===!0?{ref:A,code:(0,t.stringify)(A)}:{ref:A}),$=p.name("valid"),V=d.subschema({schema:A,dataTypes:[],schemaPath:t.nil,topSchemaRef:N,errSchemaPath:g},$);d.mergeEvaluated(V),d.ok($)}}};function u(d,p){const{gen:g}=d;return p.validate?g.scopeValue("validate",{ref:p.validate}):(0,t._)`${g.scopeValue("wrapper",{ref:p})}.validate`}Br.getValidate=u;function f(d,p,g,y){const{gen:b,it:S}=d,{allErrors:C,schemaEnv:x,opts:_}=S,w=_.passContext?i.default.this:t.nil;y?T():E();function T(){if(!x.$async)throw new Error("async schema referenced by sync schema");const A=b.let("valid");b.try(()=>{b.code((0,t._)`await ${(0,e.callValidateCode)(d,p,w)}`),O(p),C||b.assign(A,!0)},N=>{b.if((0,t._)`!(${N} instanceof ${S.ValidationError})`,()=>b.throw(N)),k(N),C||b.assign(A,!1)}),d.ok(A)}function E(){d.result((0,e.callValidateCode)(d,p,w),()=>O(p),()=>k(p))}function k(A){const N=(0,t._)`${A}.errors`;b.assign(i.default.vErrors,(0,t._)`${i.default.vErrors} === null ? ${N} : ${i.default.vErrors}.concat(${N})`),b.assign(i.default.errors,(0,t._)`${i.default.vErrors}.length`)}function O(A){var N;if(!S.opts.unevaluated)return;const $=(N=g?.validate)===null||N===void 0?void 0:N.evaluated;if(S.props!==!0)if($&&!$.dynamicProps)$.props!==void 0&&(S.props=o.mergeEvaluated.props(b,$.props,S.props));else{const V=b.var("props",(0,t._)`${A}.evaluated.props`);S.props=o.mergeEvaluated.props(b,V,S.props,t.Name)}if(S.items!==!0)if($&&!$.dynamicItems)$.items!==void 0&&(S.items=o.mergeEvaluated.items(b,$.items,S.items));else{const V=b.var("items",(0,t._)`${A}.evaluated.items`);S.items=o.mergeEvaluated.items(b,V,S.items,t.Name)}}}return Br.callRef=f,Br.default=l,Br}var ZS;function h_(){if(ZS)return wu;ZS=1,Object.defineProperty(wu,"__esModule",{value:!0});const n=fO(),e=d0(),t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,e.default];return wu.default=t,wu}var Tu={},Cu={},JS;function hO(){if(JS)return Cu;JS=1,Object.defineProperty(Cu,"__esModule",{value:!0});const n=Re(),e=n.operators,t={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},i={message:({keyword:o,schemaCode:l})=>(0,n.str)`must be ${t[o].okStr} ${l}`,params:({keyword:o,schemaCode:l})=>(0,n._)`{comparison: ${t[o].okStr}, limit: ${l}}`},s={keyword:Object.keys(t),type:"number",schemaType:"number",$data:!0,error:i,code(o){const{keyword:l,data:u,schemaCode:f}=o;o.fail$data((0,n._)`${u} ${t[l].fail} ${f} || isNaN(${u})`)}};return Cu.default=s,Cu}var ku={},ex;function dO(){if(ex)return ku;ex=1,Object.defineProperty(ku,"__esModule",{value:!0});const n=Re(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must be multiple of ${i}`,params:({schemaCode:i})=>(0,n._)`{multipleOf: ${i}}`},code(i){const{gen:s,data:o,schemaCode:l,it:u}=i,f=u.opts.multipleOfPrecision,d=s.let("res"),p=f?(0,n._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${f}`:(0,n._)`${d} !== parseInt(${d})`;i.fail$data((0,n._)`(${l} === 0 || (${d} = ${o}/${l}, ${p}))`)}};return ku.default=t,ku}var Au={},Eu={},tx;function pO(){if(tx)return Eu;tx=1,Object.defineProperty(Eu,"__esModule",{value:!0});function n(e){const t=e.length;let i=0,s=0,o;for(;s<t;)i++,o=e.charCodeAt(s++),o>=55296&&o<=56319&&s<t&&(o=e.charCodeAt(s),(o&64512)===56320&&s++);return i}return Eu.default=n,n.code='require("ajv/dist/runtime/ucs2length").default',Eu}var ix;function mO(){if(ix)return Au;ix=1,Object.defineProperty(Au,"__esModule",{value:!0});const n=Re(),e=Ve(),t=pO(),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:l}){const u=o==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${u} than ${l} characters`},params:({schemaCode:o})=>(0,n._)`{limit: ${o}}`},code(o){const{keyword:l,data:u,schemaCode:f,it:d}=o,p=l==="maxLength"?n.operators.GT:n.operators.LT,g=d.opts.unicode===!1?(0,n._)`${u}.length`:(0,n._)`${(0,e.useFunc)(o.gen,t.default)}(${u})`;o.fail$data((0,n._)`${g} ${p} ${f}`)}};return Au.default=s,Au}var Mu={},nx;function gO(){if(nx)return Mu;nx=1,Object.defineProperty(Mu,"__esModule",{value:!0});const n=un(),e=Re(),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>(0,e.str)`must match pattern "${s}"`,params:({schemaCode:s})=>(0,e._)`{pattern: ${s}}`},code(s){const{data:o,$data:l,schema:u,schemaCode:f,it:d}=s,p=d.opts.unicodeRegExp?"u":"",g=l?(0,e._)`(new RegExp(${f}, ${p}))`:(0,n.usePattern)(s,u);s.fail$data((0,e._)`!${g}.test(${o})`)}};return Mu.default=i,Mu}var Ou={},rx;function yO(){if(rx)return Ou;rx=1,Object.defineProperty(Ou,"__esModule",{value:!0});const n=Re(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:s}){const o=i==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${o} than ${s} properties`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:s,data:o,schemaCode:l}=i,u=s==="maxProperties"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`Object.keys(${o}).length ${u} ${l}`)}};return Ou.default=t,Ou}var Du={},sx;function vO(){if(sx)return Du;sx=1,Object.defineProperty(Du,"__esModule",{value:!0});const n=un(),e=Re(),t=Ve(),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,e.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,e._)`{missingProperty: ${o}}`},code(o){const{gen:l,schema:u,schemaCode:f,data:d,$data:p,it:g}=o,{opts:y}=g;if(!p&&u.length===0)return;const b=u.length>=y.loopRequired;if(g.allErrors?S():C(),y.strictRequired){const w=o.parentSchema.properties,{definedProperties:T}=o.it;for(const E of u)if(w?.[E]===void 0&&!T.has(E)){const k=g.schemaEnv.baseId+g.errSchemaPath,O=`required property "${E}" is not defined at "${k}" (strictRequired)`;(0,t.checkStrictMode)(g,O,g.opts.strictRequired)}}function S(){if(b||p)o.block$data(e.nil,x);else for(const w of u)(0,n.checkReportMissingProp)(o,w)}function C(){const w=l.let("missing");if(b||p){const T=l.let("valid",!0);o.block$data(T,()=>_(w,T)),o.ok(T)}else l.if((0,n.checkMissingProp)(o,u,w)),(0,n.reportMissingProp)(o,w),l.else()}function x(){l.forOf("prop",f,w=>{o.setParams({missingProperty:w}),l.if((0,n.noPropertyInData)(l,d,w,y.ownProperties),()=>o.error())})}function _(w,T){o.setParams({missingProperty:w}),l.forOf(w,f,()=>{l.assign(T,(0,n.propertyInData)(l,d,w,y.ownProperties)),l.if((0,e.not)(T),()=>{o.error(),l.break()})},e.nil)}}};return Du.default=s,Du}var Ru={},ax;function bO(){if(ax)return Ru;ax=1,Object.defineProperty(Ru,"__esModule",{value:!0});const n=Re(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:s}){const o=i==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${o} than ${s} items`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:s,data:o,schemaCode:l}=i,u=s==="maxItems"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`${o}.length ${u} ${l}`)}};return Ru.default=t,Ru}var Nu={},zu={},ox;function p0(){if(ox)return zu;ox=1,Object.defineProperty(zu,"__esModule",{value:!0});const n=c_();return n.code='require("ajv/dist/runtime/equal").default',zu.default=n,zu}var lx;function SO(){if(lx)return Nu;lx=1,Object.defineProperty(Nu,"__esModule",{value:!0});const n=Xf(),e=Re(),t=Ve(),i=p0(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:u}})=>(0,e.str)`must NOT have duplicate items (items ## ${u} and ${l} are identical)`,params:({params:{i:l,j:u}})=>(0,e._)`{i: ${l}, j: ${u}}`},code(l){const{gen:u,data:f,$data:d,schema:p,parentSchema:g,schemaCode:y,it:b}=l;if(!d&&!p)return;const S=u.let("valid"),C=g.items?(0,n.getSchemaTypes)(g.items):[];l.block$data(S,x,(0,e._)`${y} === false`),l.ok(S);function x(){const E=u.let("i",(0,e._)`${f}.length`),k=u.let("j");l.setParams({i:E,j:k}),u.assign(S,!0),u.if((0,e._)`${E} > 1`,()=>(_()?w:T)(E,k))}function _(){return C.length>0&&!C.some(E=>E==="object"||E==="array")}function w(E,k){const O=u.name("item"),A=(0,n.checkDataTypes)(C,O,b.opts.strictNumbers,n.DataType.Wrong),N=u.const("indices",(0,e._)`{}`);u.for((0,e._)`;${E}--;`,()=>{u.let(O,(0,e._)`${f}[${E}]`),u.if(A,(0,e._)`continue`),C.length>1&&u.if((0,e._)`typeof ${O} == "string"`,(0,e._)`${O} += "_"`),u.if((0,e._)`typeof ${N}[${O}] == "number"`,()=>{u.assign(k,(0,e._)`${N}[${O}]`),l.error(),u.assign(S,!1).break()}).code((0,e._)`${N}[${O}] = ${E}`)})}function T(E,k){const O=(0,t.useFunc)(u,i.default),A=u.name("outer");u.label(A).for((0,e._)`;${E}--;`,()=>u.for((0,e._)`${k} = ${E}; ${k}--;`,()=>u.if((0,e._)`${O}(${f}[${E}], ${f}[${k}])`,()=>{l.error(),u.assign(S,!1).break(A)})))}}};return Nu.default=o,Nu}var $u={},cx;function xO(){if(cx)return $u;cx=1,Object.defineProperty($u,"__esModule",{value:!0});const n=Re(),e=Ve(),t=p0(),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,n._)`{allowedValue: ${o}}`},code(o){const{gen:l,data:u,$data:f,schemaCode:d,schema:p}=o;f||p&&typeof p=="object"?o.fail$data((0,n._)`!${(0,e.useFunc)(l,t.default)}(${u}, ${d})`):o.fail((0,n._)`${p} !== ${u}`)}};return $u.default=s,$u}var Bu={},ux;function wO(){if(ux)return Bu;ux=1,Object.defineProperty(Bu,"__esModule",{value:!0});const n=Re(),e=Ve(),t=p0(),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,n._)`{allowedValues: ${o}}`},code(o){const{gen:l,data:u,$data:f,schema:d,schemaCode:p,it:g}=o;if(!f&&d.length===0)throw new Error("enum must have non-empty array");const y=d.length>=g.opts.loopEnum;let b;const S=()=>b??(b=(0,e.useFunc)(l,t.default));let C;if(y||f)C=l.let("valid"),o.block$data(C,x);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const w=l.const("vSchema",p);C=(0,n.or)(...d.map((T,E)=>_(w,E)))}o.pass(C);function x(){l.assign(C,!1),l.forOf("v",p,w=>l.if((0,n._)`${S()}(${u}, ${w})`,()=>l.assign(C,!0).break()))}function _(w,T){const E=d[T];return typeof E=="object"&&E!==null?(0,n._)`${S()}(${u}, ${w}[${T}])`:(0,n._)`${u} === ${E}`}}};return Bu.default=s,Bu}var fx;function d_(){if(fx)return Tu;fx=1,Object.defineProperty(Tu,"__esModule",{value:!0});const n=hO(),e=dO(),t=mO(),i=gO(),s=yO(),o=vO(),l=bO(),u=SO(),f=xO(),d=wO(),p=[n.default,e.default,t.default,i.default,s.default,o.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},f.default,d.default];return Tu.default=p,Tu}var Lu={},Sa={},hx;function p_(){if(hx)return Sa;hx=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.validateAdditionalItems=void 0;const n=Re(),e=Ve(),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,n.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,n._)`{limit: ${o}}`},code(o){const{parentSchema:l,it:u}=o,{items:f}=l;if(!Array.isArray(f)){(0,e.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}s(o,f)}};function s(o,l){const{gen:u,schema:f,data:d,keyword:p,it:g}=o;g.items=!0;const y=u.const("len",(0,n._)`${d}.length`);if(f===!1)o.setParams({len:l.length}),o.pass((0,n._)`${y} <= ${l.length}`);else if(typeof f=="object"&&!(0,e.alwaysValidSchema)(g,f)){const S=u.var("valid",(0,n._)`${y} <= ${l.length}`);u.if((0,n.not)(S),()=>b(S)),o.ok(S)}function b(S){u.forRange("i",l.length,y,C=>{o.subschema({keyword:p,dataProp:C,dataPropType:e.Type.Num},S),g.allErrors||u.if((0,n.not)(S),()=>u.break())})}}return Sa.validateAdditionalItems=s,Sa.default=i,Sa}var ju={},xa={},dx;function m_(){if(dx)return xa;dx=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.validateTuple=void 0;const n=Re(),e=Ve(),t=un(),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:l,it:u}=o;if(Array.isArray(l))return s(o,"additionalItems",l);u.items=!0,!(0,e.alwaysValidSchema)(u,l)&&o.ok((0,t.validateArray)(o))}};function s(o,l,u=o.schema){const{gen:f,parentSchema:d,data:p,keyword:g,it:y}=o;C(d),y.opts.unevaluated&&u.length&&y.items!==!0&&(y.items=e.mergeEvaluated.items(f,u.length,y.items));const b=f.name("valid"),S=f.const("len",(0,n._)`${p}.length`);u.forEach((x,_)=>{(0,e.alwaysValidSchema)(y,x)||(f.if((0,n._)`${S} > ${_}`,()=>o.subschema({keyword:g,schemaProp:_,dataProp:_},b)),o.ok(b))});function C(x){const{opts:_,errSchemaPath:w}=y,T=u.length,E=T===x.minItems&&(T===x.maxItems||x[l]===!1);if(_.strictTuples&&!E){const k=`"${g}" is ${T}-tuple, but minItems or maxItems/${l} are not specified or different at path "${w}"`;(0,e.checkStrictMode)(y,k,_.strictTuples)}}}return xa.validateTuple=s,xa.default=i,xa}var px;function _O(){if(px)return ju;px=1,Object.defineProperty(ju,"__esModule",{value:!0});const n=m_(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,n.validateTuple)(t,"items")};return ju.default=e,ju}var Pu={},mx;function TO(){if(mx)return Pu;mx=1,Object.defineProperty(Pu,"__esModule",{value:!0});const n=Re(),e=Ve(),t=un(),i=p_(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,n.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,n._)`{limit: ${l}}`},code(l){const{schema:u,parentSchema:f,it:d}=l,{prefixItems:p}=f;d.items=!0,!(0,e.alwaysValidSchema)(d,u)&&(p?(0,i.validateAdditionalItems)(l,p):l.ok((0,t.validateArray)(l)))}};return Pu.default=o,Pu}var qu={},gx;function CO(){if(gx)return qu;gx=1,Object.defineProperty(qu,"__esModule",{value:!0});const n=Re(),e=Ve(),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:s,max:o}})=>o===void 0?(0,n.str)`must contain at least ${s} valid item(s)`:(0,n.str)`must contain at least ${s} and no more than ${o} valid item(s)`,params:({params:{min:s,max:o}})=>o===void 0?(0,n._)`{minContains: ${s}}`:(0,n._)`{minContains: ${s}, maxContains: ${o}}`},code(s){const{gen:o,schema:l,parentSchema:u,data:f,it:d}=s;let p,g;const{minContains:y,maxContains:b}=u;d.opts.next?(p=y===void 0?1:y,g=b):p=1;const S=o.const("len",(0,n._)`${f}.length`);if(s.setParams({min:p,max:g}),g===void 0&&p===0){(0,e.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(g!==void 0&&p>g){(0,e.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),s.fail();return}if((0,e.alwaysValidSchema)(d,l)){let T=(0,n._)`${S} >= ${p}`;g!==void 0&&(T=(0,n._)`${T} && ${S} <= ${g}`),s.pass(T);return}d.items=!0;const C=o.name("valid");g===void 0&&p===1?_(C,()=>o.if(C,()=>o.break())):p===0?(o.let(C,!0),g!==void 0&&o.if((0,n._)`${f}.length > 0`,x)):(o.let(C,!1),x()),s.result(C,()=>s.reset());function x(){const T=o.name("_valid"),E=o.let("count",0);_(T,()=>o.if(T,()=>w(E)))}function _(T,E){o.forRange("i",0,S,k=>{s.subschema({keyword:"contains",dataProp:k,dataPropType:e.Type.Num,compositeRule:!0},T),E()})}function w(T){o.code((0,n._)`${T}++`),g===void 0?o.if((0,n._)`${T} >= ${p}`,()=>o.assign(C,!0).break()):(o.if((0,n._)`${T} > ${g}`,()=>o.assign(C,!1).break()),p===1?o.assign(C,!0):o.if((0,n._)`${T} >= ${p}`,()=>o.assign(C,!0)))}}};return qu.default=i,qu}var Om={},yx;function m0(){return yx||(yx=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const e=Re(),t=Ve(),i=un();n.error={message:({params:{property:f,depsCount:d,deps:p}})=>{const g=d===1?"property":"properties";return(0,e.str)`must have ${g} ${p} when property ${f} is present`},params:({params:{property:f,depsCount:d,deps:p,missingProperty:g}})=>(0,e._)`{property: ${f},
    missingProperty: ${g},
    depsCount: ${d},
    deps: ${p}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(f){const[d,p]=o(f);l(f,d),u(f,p)}};function o({schema:f}){const d={},p={};for(const g in f){if(g==="__proto__")continue;const y=Array.isArray(f[g])?d:p;y[g]=f[g]}return[d,p]}function l(f,d=f.schema){const{gen:p,data:g,it:y}=f;if(Object.keys(d).length===0)return;const b=p.let("missing");for(const S in d){const C=d[S];if(C.length===0)continue;const x=(0,i.propertyInData)(p,g,S,y.opts.ownProperties);f.setParams({property:S,depsCount:C.length,deps:C.join(", ")}),y.allErrors?p.if(x,()=>{for(const _ of C)(0,i.checkReportMissingProp)(f,_)}):(p.if((0,e._)`${x} && (${(0,i.checkMissingProp)(f,C,b)})`),(0,i.reportMissingProp)(f,b),p.else())}}n.validatePropertyDeps=l;function u(f,d=f.schema){const{gen:p,data:g,keyword:y,it:b}=f,S=p.name("valid");for(const C in d)(0,t.alwaysValidSchema)(b,d[C])||(p.if((0,i.propertyInData)(p,g,C,b.opts.ownProperties),()=>{const x=f.subschema({keyword:y,schemaProp:C},S);f.mergeValidEvaluated(x,S)},()=>p.var(S,!0)),f.ok(S))}n.validateSchemaDeps=u,n.default=s})(Om)),Om}var Hu={},vx;function kO(){if(vx)return Hu;vx=1,Object.defineProperty(Hu,"__esModule",{value:!0});const n=Re(),e=Ve(),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:s})=>(0,n._)`{propertyName: ${s.propertyName}}`},code(s){const{gen:o,schema:l,data:u,it:f}=s;if((0,e.alwaysValidSchema)(f,l))return;const d=o.name("valid");o.forIn("key",u,p=>{s.setParams({propertyName:p}),s.subschema({keyword:"propertyNames",data:p,dataTypes:["string"],propertyName:p,compositeRule:!0},d),o.if((0,n.not)(d),()=>{s.error(!0),f.allErrors||o.break()})}),s.ok(d)}};return Hu.default=i,Hu}var Uu={},bx;function g_(){if(bx)return Uu;bx=1,Object.defineProperty(Uu,"__esModule",{value:!0});const n=un(),e=Re(),t=cn(),i=Ve(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,e._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:u,schema:f,parentSchema:d,data:p,errsCount:g,it:y}=l;if(!g)throw new Error("ajv implementation error");const{allErrors:b,opts:S}=y;if(y.props=!0,S.removeAdditional!=="all"&&(0,i.alwaysValidSchema)(y,f))return;const C=(0,n.allSchemaProperties)(d.properties),x=(0,n.allSchemaProperties)(d.patternProperties);_(),l.ok((0,e._)`${g} === ${t.default.errors}`);function _(){u.forIn("key",p,O=>{!C.length&&!x.length?E(O):u.if(w(O),()=>E(O))})}function w(O){let A;if(C.length>8){const N=(0,i.schemaRefOrVal)(y,d.properties,"properties");A=(0,n.isOwnProperty)(u,N,O)}else C.length?A=(0,e.or)(...C.map(N=>(0,e._)`${O} === ${N}`)):A=e.nil;return x.length&&(A=(0,e.or)(A,...x.map(N=>(0,e._)`${(0,n.usePattern)(l,N)}.test(${O})`))),(0,e.not)(A)}function T(O){u.code((0,e._)`delete ${p}[${O}]`)}function E(O){if(S.removeAdditional==="all"||S.removeAdditional&&f===!1){T(O);return}if(f===!1){l.setParams({additionalProperty:O}),l.error(),b||u.break();return}if(typeof f=="object"&&!(0,i.alwaysValidSchema)(y,f)){const A=u.name("valid");S.removeAdditional==="failing"?(k(O,A,!1),u.if((0,e.not)(A),()=>{l.reset(),T(O)})):(k(O,A),b||u.if((0,e.not)(A),()=>u.break()))}}function k(O,A,N){const $={keyword:"additionalProperties",dataProp:O,dataPropType:i.Type.Str};N===!1&&Object.assign($,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema($,A)}}};return Uu.default=o,Uu}var Vu={},Sx;function AO(){if(Sx)return Vu;Sx=1,Object.defineProperty(Vu,"__esModule",{value:!0});const n=zl(),e=un(),t=Ve(),i=g_(),s={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,parentSchema:f,data:d,it:p}=o;p.opts.removeAdditional==="all"&&f.additionalProperties===void 0&&i.default.code(new n.KeywordCxt(p,i.default,"additionalProperties"));const g=(0,e.allSchemaProperties)(u);for(const x of g)p.definedProperties.add(x);p.opts.unevaluated&&g.length&&p.props!==!0&&(p.props=t.mergeEvaluated.props(l,(0,t.toHash)(g),p.props));const y=g.filter(x=>!(0,t.alwaysValidSchema)(p,u[x]));if(y.length===0)return;const b=l.name("valid");for(const x of y)S(x)?C(x):(l.if((0,e.propertyInData)(l,d,x,p.opts.ownProperties)),C(x),p.allErrors||l.else().var(b,!0),l.endIf()),o.it.definedProperties.add(x),o.ok(b);function S(x){return p.opts.useDefaults&&!p.compositeRule&&u[x].default!==void 0}function C(x){o.subschema({keyword:"properties",schemaProp:x,dataProp:x},b)}}};return Vu.default=s,Vu}var Iu={},xx;function EO(){if(xx)return Iu;xx=1,Object.defineProperty(Iu,"__esModule",{value:!0});const n=un(),e=Re(),t=Ve(),i=Ve(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,data:f,parentSchema:d,it:p}=o,{opts:g}=p,y=(0,n.allSchemaProperties)(u),b=y.filter(E=>(0,t.alwaysValidSchema)(p,u[E]));if(y.length===0||b.length===y.length&&(!p.opts.unevaluated||p.props===!0))return;const S=g.strictSchema&&!g.allowMatchingProperties&&d.properties,C=l.name("valid");p.props!==!0&&!(p.props instanceof e.Name)&&(p.props=(0,i.evaluatedPropsToName)(l,p.props));const{props:x}=p;_();function _(){for(const E of y)S&&w(E),p.allErrors?T(E):(l.var(C,!0),T(E),l.if(C))}function w(E){for(const k in S)new RegExp(E).test(k)&&(0,t.checkStrictMode)(p,`property ${k} matches pattern ${E} (use allowMatchingProperties)`)}function T(E){l.forIn("key",f,k=>{l.if((0,e._)`${(0,n.usePattern)(o,E)}.test(${k})`,()=>{const O=b.includes(E);O||o.subschema({keyword:"patternProperties",schemaProp:E,dataProp:k,dataPropType:i.Type.Str},C),p.opts.unevaluated&&x!==!0?l.assign((0,e._)`${x}[${k}]`,!0):!O&&!p.allErrors&&l.if((0,e.not)(C),()=>l.break())})})}}};return Iu.default=s,Iu}var Wu={},wx;function MO(){if(wx)return Wu;wx=1,Object.defineProperty(Wu,"__esModule",{value:!0});const n=Ve(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:i,schema:s,it:o}=t;if((0,n.alwaysValidSchema)(o,s)){t.fail();return}const l=i.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),t.failResult(l,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};return Wu.default=e,Wu}var Gu={},_x;function OO(){if(_x)return Gu;_x=1,Object.defineProperty(Gu,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:un().validateUnion,error:{message:"must match a schema in anyOf"}};return Gu.default=e,Gu}var Yu={},Tx;function DO(){if(Tx)return Yu;Tx=1,Object.defineProperty(Yu,"__esModule",{value:!0});const n=Re(),e=Ve(),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:s})=>(0,n._)`{passingSchemas: ${s.passing}}`},code(s){const{gen:o,schema:l,parentSchema:u,it:f}=s;if(!Array.isArray(l))throw new Error("ajv implementation error");if(f.opts.discriminator&&u.discriminator)return;const d=l,p=o.let("valid",!1),g=o.let("passing",null),y=o.name("_valid");s.setParams({passing:g}),o.block(b),s.result(p,()=>s.reset(),()=>s.error(!0));function b(){d.forEach((S,C)=>{let x;(0,e.alwaysValidSchema)(f,S)?o.var(y,!0):x=s.subschema({keyword:"oneOf",schemaProp:C,compositeRule:!0},y),C>0&&o.if((0,n._)`${y} && ${p}`).assign(p,!1).assign(g,(0,n._)`[${g}, ${C}]`).else(),o.if(y,()=>{o.assign(p,!0),o.assign(g,C),x&&s.mergeEvaluated(x,n.Name)})})}}};return Yu.default=i,Yu}var Fu={},Cx;function RO(){if(Cx)return Fu;Cx=1,Object.defineProperty(Fu,"__esModule",{value:!0});const n=Ve(),e={keyword:"allOf",schemaType:"array",code(t){const{gen:i,schema:s,it:o}=t;if(!Array.isArray(s))throw new Error("ajv implementation error");const l=i.name("valid");s.forEach((u,f)=>{if((0,n.alwaysValidSchema)(o,u))return;const d=t.subschema({keyword:"allOf",schemaProp:f},l);t.ok(l),t.mergeEvaluated(d)})}};return Fu.default=e,Fu}var Ku={},kx;function NO(){if(kx)return Ku;kx=1,Object.defineProperty(Ku,"__esModule",{value:!0});const n=Re(),e=Ve(),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,n.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,n._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:l,parentSchema:u,it:f}=o;u.then===void 0&&u.else===void 0&&(0,e.checkStrictMode)(f,'"if" without "then" and "else" is ignored');const d=s(f,"then"),p=s(f,"else");if(!d&&!p)return;const g=l.let("valid",!0),y=l.name("_valid");if(b(),o.reset(),d&&p){const C=l.let("ifClause");o.setParams({ifClause:C}),l.if(y,S("then",C),S("else",C))}else d?l.if(y,S("then")):l.if((0,n.not)(y),S("else"));o.pass(g,()=>o.error(!0));function b(){const C=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},y);o.mergeEvaluated(C)}function S(C,x){return()=>{const _=o.subschema({keyword:C},y);l.assign(g,y),o.mergeValidEvaluated(_,g),x?l.assign(x,(0,n._)`${C}`):o.setParams({ifClause:C})}}}};function s(o,l){const u=o.schema[l];return u!==void 0&&!(0,e.alwaysValidSchema)(o,u)}return Ku.default=i,Ku}var Xu={},Ax;function zO(){if(Ax)return Xu;Ax=1,Object.defineProperty(Xu,"__esModule",{value:!0});const n=Ve(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:i,it:s}){i.if===void 0&&(0,n.checkStrictMode)(s,`"${t}" without "if" is ignored`)}};return Xu.default=e,Xu}var Ex;function y_(){if(Ex)return Lu;Ex=1,Object.defineProperty(Lu,"__esModule",{value:!0});const n=p_(),e=_O(),t=m_(),i=TO(),s=CO(),o=m0(),l=kO(),u=g_(),f=AO(),d=EO(),p=MO(),g=OO(),y=DO(),b=RO(),S=NO(),C=zO();function x(_=!1){const w=[p.default,g.default,y.default,b.default,S.default,C.default,l.default,u.default,o.default,f.default,d.default];return _?w.push(e.default,i.default):w.push(n.default,t.default),w.push(s.default),w}return Lu.default=x,Lu}var Qu={},wa={},Mx;function v_(){if(Mx)return wa;Mx=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.dynamicAnchor=void 0;const n=Re(),e=cn(),t=Dh(),i=d0(),s={keyword:"$dynamicAnchor",schemaType:"string",code:u=>o(u,u.schema)};function o(u,f){const{gen:d,it:p}=u;p.schemaEnv.root.dynamicAnchors[f]=!0;const g=(0,n._)`${e.default.dynamicAnchors}${(0,n.getProperty)(f)}`,y=p.errSchemaPath==="#"?p.validateName:l(u);d.if((0,n._)`!${g}`,()=>d.assign(g,y))}wa.dynamicAnchor=o;function l(u){const{schemaEnv:f,schema:d,self:p}=u.it,{root:g,baseId:y,localRefs:b,meta:S}=f.root,{schemaId:C}=p.opts,x=new t.SchemaEnv({schema:d,schemaId:C,root:g,baseId:y,localRefs:b,meta:S});return t.compileSchema.call(p,x),(0,i.getValidate)(u,x)}return wa.default=s,wa}var _a={},Ox;function b_(){if(Ox)return _a;Ox=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.dynamicRef=void 0;const n=Re(),e=cn(),t=d0(),i={keyword:"$dynamicRef",schemaType:"string",code:o=>s(o,o.schema)};function s(o,l){const{gen:u,keyword:f,it:d}=o;if(l[0]!=="#")throw new Error(`"${f}" only supports hash fragment reference`);const p=l.slice(1);if(d.allErrors)g();else{const b=u.let("valid",!1);g(b),o.ok(b)}function g(b){if(d.schemaEnv.root.dynamicAnchors[p]){const S=u.let("_v",(0,n._)`${e.default.dynamicAnchors}${(0,n.getProperty)(p)}`);u.if(S,y(S,b),y(d.validateName,b))}else y(d.validateName,b)()}function y(b,S){return S?()=>u.block(()=>{(0,t.callRef)(o,b),u.let(S,!0)}):()=>(0,t.callRef)(o,b)}}return _a.dynamicRef=s,_a.default=i,_a}var Zu={},Dx;function $O(){if(Dx)return Zu;Dx=1,Object.defineProperty(Zu,"__esModule",{value:!0});const n=v_(),e=Ve(),t={keyword:"$recursiveAnchor",schemaType:"boolean",code(i){i.schema?(0,n.dynamicAnchor)(i,""):(0,e.checkStrictMode)(i.it,"$recursiveAnchor: false is ignored")}};return Zu.default=t,Zu}var Ju={},Rx;function BO(){if(Rx)return Ju;Rx=1,Object.defineProperty(Ju,"__esModule",{value:!0});const n=b_(),e={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,n.dynamicRef)(t,t.schema)};return Ju.default=e,Ju}var Nx;function LO(){if(Nx)return Qu;Nx=1,Object.defineProperty(Qu,"__esModule",{value:!0});const n=v_(),e=b_(),t=$O(),i=BO(),s=[n.default,e.default,t.default,i.default];return Qu.default=s,Qu}var ef={},tf={},zx;function jO(){if(zx)return tf;zx=1,Object.defineProperty(tf,"__esModule",{value:!0});const n=m0(),e={keyword:"dependentRequired",type:"object",schemaType:"object",error:n.error,code:t=>(0,n.validatePropertyDeps)(t)};return tf.default=e,tf}var nf={},$x;function PO(){if($x)return nf;$x=1,Object.defineProperty(nf,"__esModule",{value:!0});const n=m0(),e={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,n.validateSchemaDeps)(t)};return nf.default=e,nf}var rf={},Bx;function qO(){if(Bx)return rf;Bx=1,Object.defineProperty(rf,"__esModule",{value:!0});const n=Ve(),e={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:i,it:s}){i.contains===void 0&&(0,n.checkStrictMode)(s,`"${t}" without "contains" is ignored`)}};return rf.default=e,rf}var Lx;function HO(){if(Lx)return ef;Lx=1,Object.defineProperty(ef,"__esModule",{value:!0});const n=jO(),e=PO(),t=qO(),i=[n.default,e.default,t.default];return ef.default=i,ef}var sf={},af={},jx;function UO(){if(jx)return af;jx=1,Object.defineProperty(af,"__esModule",{value:!0});const n=Re(),e=Ve(),t=cn(),s={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:o})=>(0,n._)`{unevaluatedProperty: ${o.unevaluatedProperty}}`},code(o){const{gen:l,schema:u,data:f,errsCount:d,it:p}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:g,props:y}=p;y instanceof n.Name?l.if((0,n._)`${y} !== true`,()=>l.forIn("key",f,x=>l.if(S(y,x),()=>b(x)))):y!==!0&&l.forIn("key",f,x=>y===void 0?b(x):l.if(C(y,x),()=>b(x))),p.props=!0,o.ok((0,n._)`${d} === ${t.default.errors}`);function b(x){if(u===!1){o.setParams({unevaluatedProperty:x}),o.error(),g||l.break();return}if(!(0,e.alwaysValidSchema)(p,u)){const _=l.name("valid");o.subschema({keyword:"unevaluatedProperties",dataProp:x,dataPropType:e.Type.Str},_),g||l.if((0,n.not)(_),()=>l.break())}}function S(x,_){return(0,n._)`!${x} || !${x}[${_}]`}function C(x,_){const w=[];for(const T in x)x[T]===!0&&w.push((0,n._)`${_} !== ${T}`);return(0,n.and)(...w)}}};return af.default=s,af}var of={},Px;function VO(){if(Px)return of;Px=1,Object.defineProperty(of,"__esModule",{value:!0});const n=Re(),e=Ve(),i={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:s}})=>(0,n.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,n._)`{limit: ${s}}`},code(s){const{gen:o,schema:l,data:u,it:f}=s,d=f.items||0;if(d===!0)return;const p=o.const("len",(0,n._)`${u}.length`);if(l===!1)s.setParams({len:d}),s.fail((0,n._)`${p} > ${d}`);else if(typeof l=="object"&&!(0,e.alwaysValidSchema)(f,l)){const y=o.var("valid",(0,n._)`${p} <= ${d}`);o.if((0,n.not)(y),()=>g(y,d)),s.ok(y)}f.items=!0;function g(y,b){o.forRange("i",b,p,S=>{s.subschema({keyword:"unevaluatedItems",dataProp:S,dataPropType:e.Type.Num},y),f.allErrors||o.if((0,n.not)(y),()=>o.break())})}}};return of.default=i,of}var qx;function IO(){if(qx)return sf;qx=1,Object.defineProperty(sf,"__esModule",{value:!0});const n=UO(),e=VO(),t=[n.default,e.default];return sf.default=t,sf}var lf={},cf={},Hx;function WO(){if(Hx)return cf;Hx=1,Object.defineProperty(cf,"__esModule",{value:!0});const n=Re(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must match format "${i}"`,params:({schemaCode:i})=>(0,n._)`{format: ${i}}`},code(i,s){const{gen:o,data:l,$data:u,schema:f,schemaCode:d,it:p}=i,{opts:g,errSchemaPath:y,schemaEnv:b,self:S}=p;if(!g.validateFormats)return;u?C():x();function C(){const _=o.scopeValue("formats",{ref:S.formats,code:g.code.formats}),w=o.const("fDef",(0,n._)`${_}[${d}]`),T=o.let("fType"),E=o.let("format");o.if((0,n._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>o.assign(T,(0,n._)`${w}.type || "string"`).assign(E,(0,n._)`${w}.validate`),()=>o.assign(T,(0,n._)`"string"`).assign(E,w)),i.fail$data((0,n.or)(k(),O()));function k(){return g.strictSchema===!1?n.nil:(0,n._)`${d} && !${E}`}function O(){const A=b.$async?(0,n._)`(${w}.async ? await ${E}(${l}) : ${E}(${l}))`:(0,n._)`${E}(${l})`,N=(0,n._)`(typeof ${E} == "function" ? ${A} : ${E}.test(${l}))`;return(0,n._)`${E} && ${E} !== true && ${T} === ${s} && !${N}`}}function x(){const _=S.formats[f];if(!_){k();return}if(_===!0)return;const[w,T,E]=O(_);w===s&&i.pass(A());function k(){if(g.strictSchema===!1){S.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${f}" ignored in schema at path "${y}"`}}function O(N){const $=N instanceof RegExp?(0,n.regexpCode)(N):g.code.formats?(0,n._)`${g.code.formats}${(0,n.getProperty)(f)}`:void 0,V=o.scopeValue("formats",{key:f,ref:N,code:$});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,n._)`${V}.validate`]:["string",N,V]}function A(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!b.$async)throw new Error("async format in sync schema");return(0,n._)`await ${E}(${l})`}return typeof T=="function"?(0,n._)`${E}(${l})`:(0,n._)`${E}.test(${l})`}}}};return cf.default=t,cf}var Ux;function S_(){if(Ux)return lf;Ux=1,Object.defineProperty(lf,"__esModule",{value:!0});const e=[WO().default];return lf.default=e,lf}var vs={},Vx;function x_(){return Vx||(Vx=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.contentVocabulary=vs.metadataVocabulary=void 0,vs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],vs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),vs}var Ix;function GO(){if(Ix)return xu;Ix=1,Object.defineProperty(xu,"__esModule",{value:!0});const n=h_(),e=d_(),t=y_(),i=LO(),s=HO(),o=IO(),l=S_(),u=x_(),f=[i.default,n.default,e.default,(0,t.default)(!0),l.default,u.metadataVocabulary,u.contentVocabulary,s.default,o.default];return xu.default=f,xu}var uf={},Fo={},Wx;function YO(){if(Wx)return Fo;Wx=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.DiscrError=void 0;var n;return(function(e){e.Tag="tag",e.Mapping="mapping"})(n||(Fo.DiscrError=n={})),Fo}var Gx;function w_(){if(Gx)return uf;Gx=1,Object.defineProperty(uf,"__esModule",{value:!0});const n=Re(),e=YO(),t=Dh(),i=$l(),s=Ve(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:f}})=>u===e.DiscrError.Tag?`tag "${f}" must be string`:`value of tag "${f}" must be in oneOf`,params:({params:{discrError:u,tag:f,tagName:d}})=>(0,n._)`{error: ${u}, tag: ${d}, tagValue: ${f}}`},code(u){const{gen:f,data:d,schema:p,parentSchema:g,it:y}=u,{oneOf:b}=g;if(!y.opts.discriminator)throw new Error("discriminator: requires discriminator option");const S=p.propertyName;if(typeof S!="string")throw new Error("discriminator: requires propertyName");if(p.mapping)throw new Error("discriminator: mapping is not supported");if(!b)throw new Error("discriminator: requires oneOf keyword");const C=f.let("valid",!1),x=f.const("tag",(0,n._)`${d}${(0,n.getProperty)(S)}`);f.if((0,n._)`typeof ${x} == "string"`,()=>_(),()=>u.error(!1,{discrError:e.DiscrError.Tag,tag:x,tagName:S})),u.ok(C);function _(){const E=T();f.if(!1);for(const k in E)f.elseIf((0,n._)`${x} === ${k}`),f.assign(C,w(E[k]));f.else(),u.error(!1,{discrError:e.DiscrError.Mapping,tag:x,tagName:S}),f.endIf()}function w(E){const k=f.name("valid"),O=u.subschema({keyword:"oneOf",schemaProp:E},k);return u.mergeEvaluated(O,n.Name),k}function T(){var E;const k={},O=N(g);let A=!0;for(let q=0;q<b.length;q++){let H=b[q];if(H?.$ref&&!(0,s.schemaHasRulesButRef)(H,y.self.RULES)){const te=H.$ref;if(H=t.resolveRef.call(y.self,y.schemaEnv.root,y.baseId,te),H instanceof t.SchemaEnv&&(H=H.schema),H===void 0)throw new i.default(y.opts.uriResolver,y.baseId,te)}const X=(E=H?.properties)===null||E===void 0?void 0:E[S];if(typeof X!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${S}"`);A=A&&(O||N(H)),$(X,q)}if(!A)throw new Error(`discriminator: "${S}" must be required`);return k;function N({required:q}){return Array.isArray(q)&&q.includes(S)}function $(q,H){if(q.const)V(q.const,H);else if(q.enum)for(const X of q.enum)V(X,H);else throw new Error(`discriminator: "properties/${S}" must have "const" or "enum"`)}function V(q,H){if(typeof q!="string"||q in k)throw new Error(`discriminator: "${S}" values must be unique strings`);k[q]=H}}}};return uf.default=l,uf}var ff={};const FO="https://json-schema.org/draft/2020-12/schema",KO="https://json-schema.org/draft/2020-12/schema",XO={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},QO="meta",ZO="Core and Validation specifications meta-schema",JO=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],eD=["object","boolean"],tD="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",iD={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},nD={$schema:FO,$id:KO,$vocabulary:XO,$dynamicAnchor:QO,title:ZO,allOf:JO,type:eD,$comment:tD,properties:iD},rD="https://json-schema.org/draft/2020-12/schema",sD="https://json-schema.org/draft/2020-12/meta/applicator",aD={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},oD="meta",lD="Applicator vocabulary meta-schema",cD=["object","boolean"],uD={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},fD={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},hD={$schema:rD,$id:sD,$vocabulary:aD,$dynamicAnchor:oD,title:lD,type:cD,properties:uD,$defs:fD},dD="https://json-schema.org/draft/2020-12/schema",pD="https://json-schema.org/draft/2020-12/meta/unevaluated",mD={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},gD="meta",yD="Unevaluated applicator vocabulary meta-schema",vD=["object","boolean"],bD={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},SD={$schema:dD,$id:pD,$vocabulary:mD,$dynamicAnchor:gD,title:yD,type:vD,properties:bD},xD="https://json-schema.org/draft/2020-12/schema",wD="https://json-schema.org/draft/2020-12/meta/content",_D={"https://json-schema.org/draft/2020-12/vocab/content":!0},TD="meta",CD="Content vocabulary meta-schema",kD=["object","boolean"],AD={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},ED={$schema:xD,$id:wD,$vocabulary:_D,$dynamicAnchor:TD,title:CD,type:kD,properties:AD},MD="https://json-schema.org/draft/2020-12/schema",OD="https://json-schema.org/draft/2020-12/meta/core",DD={"https://json-schema.org/draft/2020-12/vocab/core":!0},RD="meta",ND="Core vocabulary meta-schema",zD=["object","boolean"],$D={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},BD={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},LD={$schema:MD,$id:OD,$vocabulary:DD,$dynamicAnchor:RD,title:ND,type:zD,properties:$D,$defs:BD},jD="https://json-schema.org/draft/2020-12/schema",PD="https://json-schema.org/draft/2020-12/meta/format-annotation",qD={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},HD="meta",UD="Format vocabulary meta-schema for annotation results",VD=["object","boolean"],ID={format:{type:"string"}},WD={$schema:jD,$id:PD,$vocabulary:qD,$dynamicAnchor:HD,title:UD,type:VD,properties:ID},GD="https://json-schema.org/draft/2020-12/schema",YD="https://json-schema.org/draft/2020-12/meta/meta-data",FD={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},KD="meta",XD="Meta-data vocabulary meta-schema",QD=["object","boolean"],ZD={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},JD={$schema:GD,$id:YD,$vocabulary:FD,$dynamicAnchor:KD,title:XD,type:QD,properties:ZD},eR="https://json-schema.org/draft/2020-12/schema",tR="https://json-schema.org/draft/2020-12/meta/validation",iR={"https://json-schema.org/draft/2020-12/vocab/validation":!0},nR="meta",rR="Validation vocabulary meta-schema",sR=["object","boolean"],aR={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},oR={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},lR={$schema:eR,$id:tR,$vocabulary:iR,$dynamicAnchor:nR,title:rR,type:sR,properties:aR,$defs:oR};var Yx;function cR(){if(Yx)return ff;Yx=1,Object.defineProperty(ff,"__esModule",{value:!0});const n=nD,e=hD,t=SD,i=ED,s=LD,o=WD,l=JD,u=lR,f=["/properties"];function d(p){return[n,e,t,i,s,g(this,o),l,g(this,u)].forEach(y=>this.addMetaSchema(y,void 0,!1)),this;function g(y,b){return p?y.$dataMetaSchema(b,f):b}}return ff.default=d,ff}var Fx;function uR(){return Fx||(Fx=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv2020=void 0;const t=f_(),i=GO(),s=w_(),o=cR(),l="https://json-schema.org/draft/2020-12/schema";class u extends t.default{constructor(b={}){super({...b,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),i.default.forEach(b=>this.addVocabulary(b)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:b,meta:S}=this.opts;S&&(o.default.call(this,b),this.refs["http://json-schema.org/schema"]=l)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.Ajv2020=u,n.exports=e=u,n.exports.Ajv2020=u,Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var f=zl();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var d=Re();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=Oh();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var g=$l();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(gu,gu.exports)),gu.exports}var fR=uR();const hR=Nl(fR);var hf={exports:{}},Dm={},Kx;function dR(){return Kx||(Kx=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatNames=n.fastFormats=n.fullFormats=void 0;function e(q,H){return{validate:q,compare:H}}n.fullFormats={date:e(o,l),time:e(f(!0),d),"date-time":e(y(!0),b),"iso-time":e(f(),p),"iso-date-time":e(y(),S),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:_,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:V,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:T,int32:{type:"number",validate:O},int64:{type:"number",validate:A},float:{type:"number",validate:N},double:{type:"number",validate:N},password:!0,binary:!0},n.fastFormats={...n.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,l),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,b),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,S),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},n.formatNames=Object.keys(n.fullFormats);function t(q){return q%4===0&&(q%100!==0||q%400===0)}const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(q){const H=i.exec(q);if(!H)return!1;const X=+H[1],te=+H[2],fe=+H[3];return te>=1&&te<=12&&fe>=1&&fe<=(te===2&&t(X)?29:s[te])}function l(q,H){if(q&&H)return q>H?1:q<H?-1:0}const u=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function f(q){return function(X){const te=u.exec(X);if(!te)return!1;const fe=+te[1],I=+te[2],ne=+te[3],oe=te[4],pe=te[5]==="-"?-1:1,K=+(te[6]||0),D=+(te[7]||0);if(K>23||D>59||q&&!oe)return!1;if(fe<=23&&I<=59&&ne<60)return!0;const L=I-D*pe,j=fe-K*pe-(L<0?1:0);return(j===23||j===-1)&&(L===59||L===-1)&&ne<61}}function d(q,H){if(!(q&&H))return;const X=new Date("2020-01-01T"+q).valueOf(),te=new Date("2020-01-01T"+H).valueOf();if(X&&te)return X-te}function p(q,H){if(!(q&&H))return;const X=u.exec(q),te=u.exec(H);if(X&&te)return q=X[1]+X[2]+X[3],H=te[1]+te[2]+te[3],q>H?1:q<H?-1:0}const g=/t|\s/i;function y(q){const H=f(q);return function(te){const fe=te.split(g);return fe.length===2&&o(fe[0])&&H(fe[1])}}function b(q,H){if(!(q&&H))return;const X=new Date(q).valueOf(),te=new Date(H).valueOf();if(X&&te)return X-te}function S(q,H){if(!(q&&H))return;const[X,te]=q.split(g),[fe,I]=H.split(g),ne=l(X,fe);if(ne!==void 0)return ne||d(te,I)}const C=/\/|:/,x=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _(q){return C.test(q)&&x.test(q)}const w=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function T(q){return w.lastIndex=0,w.test(q)}const E=-2147483648,k=2**31-1;function O(q){return Number.isInteger(q)&&q<=k&&q>=E}function A(q){return Number.isInteger(q)}function N(){return!0}const $=/[^\\]\\Z/;function V(q){if($.test(q))return!1;try{return new RegExp(q),!0}catch{return!1}}})(Dm)),Dm}var Rm={},df={exports:{}},pf={},Xx;function pR(){if(Xx)return pf;Xx=1,Object.defineProperty(pf,"__esModule",{value:!0});const n=h_(),e=d_(),t=y_(),i=S_(),s=x_(),o=[n.default,e.default,(0,t.default)(),i.default,s.metadataVocabulary,s.contentVocabulary];return pf.default=o,pf}const mR="http://json-schema.org/draft-07/schema#",gR="http://json-schema.org/draft-07/schema#",yR="Core schema meta-schema",vR={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},bR=["object","boolean"],SR={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},xR={$schema:mR,$id:gR,title:yR,definitions:vR,type:bR,properties:SR,default:!0};var Qx;function wR(){return Qx||(Qx=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const t=f_(),i=pR(),s=w_(),o=xR,l=["/properties"],u="http://json-schema.org/draft-07/schema";class f extends t.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(S=>this.addVocabulary(S)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const S=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema(S,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}e.Ajv=f,n.exports=e=f,n.exports.Ajv=f,Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var d=zl();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var p=Re();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var g=Oh();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return g.default}});var y=$l();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(df,df.exports)),df.exports}var Zx;function _R(){return Zx||(Zx=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatLimitDefinition=void 0;const e=wR(),t=Re(),i=t.operators,s={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},o={message:({keyword:u,schemaCode:f})=>(0,t.str)`should be ${s[u].okStr} ${f}`,params:({keyword:u,schemaCode:f})=>(0,t._)`{comparison: ${s[u].okStr}, limit: ${f}}`};n.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(u){const{gen:f,data:d,schemaCode:p,keyword:g,it:y}=u,{opts:b,self:S}=y;if(!b.validateFormats)return;const C=new e.KeywordCxt(y,S.RULES.all.format.definition,"format");C.$data?x():_();function x(){const T=f.scopeValue("formats",{ref:S.formats,code:b.code.formats}),E=f.const("fmt",(0,t._)`${T}[${C.schemaCode}]`);u.fail$data((0,t.or)((0,t._)`typeof ${E} != "object"`,(0,t._)`${E} instanceof RegExp`,(0,t._)`typeof ${E}.compare != "function"`,w(E)))}function _(){const T=C.schema,E=S.formats[T];if(!E||E===!0)return;if(typeof E!="object"||E instanceof RegExp||typeof E.compare!="function")throw new Error(`"${g}": format "${T}" does not define "compare" function`);const k=f.scopeValue("formats",{key:T,ref:E,code:b.code.formats?(0,t._)`${b.code.formats}${(0,t.getProperty)(T)}`:void 0});u.fail$data(w(k))}function w(T){return(0,t._)`${T}.compare(${d}, ${p}) ${s[g].fail} 0`}},dependencies:["format"]};const l=u=>(u.addKeyword(n.formatLimitDefinition),u);n.default=l})(Rm)),Rm}var Jx;function TR(){return Jx||(Jx=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});const t=dR(),i=_R(),s=Re(),o=new s.Name("fullFormats"),l=new s.Name("fastFormats"),u=(d,p={keywords:!0})=>{if(Array.isArray(p))return f(d,p,t.fullFormats,o),d;const[g,y]=p.mode==="fast"?[t.fastFormats,l]:[t.fullFormats,o],b=p.formats||t.formatNames;return f(d,b,g,y),p.keywords&&(0,i.default)(d),d};u.get=(d,p="full")=>{const y=(p==="fast"?t.fastFormats:t.fullFormats)[d];if(!y)throw new Error(`Unknown format "${d}"`);return y};function f(d,p,g,y){var b,S;(b=(S=d.opts.code).formats)!==null&&b!==void 0||(S.formats=(0,s._)`require("ajv-formats/dist/formats").${y}`);for(const C of p)d.addFormat(C,g[C])}n.exports=e=u,Object.defineProperty(e,"__esModule",{value:!0}),e.default=u})(hf,hf.exports)),hf.exports}var CR=TR();const kR=Nl(CR),AR="https://json-schema.org/draft/2020-12/schema",ER="interactive_balance_data.schema.json",MR="Interactive Balance Data",OR="Interactive balance data with accounts, journal entries and the balance sheet structure",DR="object",RR={balanceSheet:{$ref:"balance_sheet.schema.json"},accounts:{description:"List of all accounts",type:"array",items:{$ref:"account.schema.json"}},journalEntries:{description:"List of all journal Entries",type:"array",items:{$ref:"journal_entry.schema.json"}}},NR=!1,zR=["balanceSheet","accounts","journalEntries"],$R={$schema:AR,$id:ER,title:MR,description:OR,type:DR,properties:RR,additionalProperties:NR,required:zR},BR="https://json-schema.org/draft/2020-12/schema",LR="balance_sheet.schema.json",jR="Balance Sheet",PR="The balance sheet holding the structure of accounts, sums and balance",qR="object",HR={assets:{description:"List of all positions and accounts on the assets side",type:"array",items:{$ref:"#/$defs/position"}},liabilitiesAndEquity:{description:"List of all positions and accounts on the liabilities and equity side",type:"array",items:{$ref:"#/$defs/position"}}},UR=!1,VR=["assets","liabilitiesAndEquity"],IR={position:{type:"object",properties:{label:{type:"string"},accounts:{description:"List of account ids directly assigned to this position",type:"array",items:{type:"string",pattern:"^[0-9]{4}$"}},positions:{type:"array",items:{$ref:"#/$defs/position"}}},additionalProperties:!1,required:["label","accounts","positions"]}},WR={$schema:BR,$id:LR,title:jR,description:PR,type:qR,properties:HR,additionalProperties:UR,required:VR,$defs:IR},GR="https://json-schema.org/draft/2020-12/schema",YR="account.schema.json",FR="Account",KR="Account in the balance sheet",XR="object",QR={id:{type:"string",pattern:"^[0-9]{4}$"},label:{type:"string"}},ZR=!1,JR=["id","label"],eN={$schema:GR,$id:YR,title:FR,description:KR,type:XR,properties:QR,additionalProperties:ZR,required:JR},tN="https://json-schema.org/draft/2020-12/schema",iN="journal_entry.schema.json",nN="Journal Entry",rN="A journal entry with at least one debit-line and one credit-line",sN="object",aN={id:{type:"number"},description:{type:"string"},entryLines:{type:"array",items:{$ref:"#/$defs/entryLine"},default:[]}},oN=!1,lN=["id","description","entryLines"],cN={entryLine:{type:"object",properties:{accountId:{type:"string",pattern:"^[0-9]{4}$"},amount:{type:"number"},entryType:{enum:["credit","debit"]}},required:["accountId","amount","entryType"],additionalProperties:!1}},uN={$schema:tN,$id:iN,title:nN,description:rN,type:sN,properties:aN,additionalProperties:oN,required:lN,$defs:cN},Bl=new hR({strict:!1,allErrors:!0,allowUnionTypes:!0});kR(Bl);Bl.addSchema(WR,"balance_sheet.schema.json");Bl.addSchema(eN,"account.schema.json");Bl.addSchema(uN,"journal_entry.schema.json");const fg=Bl.compile($R);function __(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=__(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function ks(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=__(n))&&(i&&(i+=" "),i+=e);return i}function fN(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}fN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ll=n=>typeof n=="number"&&!isNaN(n),Ms=n=>typeof n=="string",rr=n=>typeof n=="function",hN=n=>Ms(n)||Ll(n),hg=n=>Ms(n)||rr(n)?n:null,dN=(n,e)=>n===!1||Ll(n)&&n>0?n:e,dg=n=>ve.isValidElement(n)||Ms(n)||rr(n)||Ll(n);function pN(n,e,t=300){let{scrollHeight:i,style:s}=n;requestAnimationFrame(()=>{s.minHeight="initial",s.height=i+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function mN({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:s=300}){return function({children:o,position:l,preventExitTransition:u,done:f,nodeRef:d,isIn:p,playToast:g}){let y=t?`${n}--${l}`:n,b=t?`${e}--${l}`:e,S=ve.useRef(0);return ve.useLayoutEffect(()=>{let C=d.current,x=y.split(" "),_=w=>{w.target===d.current&&(g(),C.removeEventListener("animationend",_),C.removeEventListener("animationcancel",_),S.current===0&&w.type!=="animationcancel"&&C.classList.remove(...x))};C.classList.add(...x),C.addEventListener("animationend",_),C.addEventListener("animationcancel",_)},[]),ve.useEffect(()=>{let C=d.current,x=()=>{C.removeEventListener("animationend",x),i?pN(C,f,s):f()};p||(u?x():(S.current=1,C.className+=` ${b}`,C.addEventListener("animationend",x)))},[p]),ct.createElement(ct.Fragment,null,o)}}function ew(n,e){return{content:T_(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function T_(n,e,t=!1){return ve.isValidElement(n)&&!Ms(n.type)?ve.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):rr(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function gN({closeToast:n,theme:e,ariaLabel:t="close"}){return ct.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},ct.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ct.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function yN({delay:n,isRunning:e,closeToast:t,type:i="default",hide:s,className:o,controlledProgress:l,progress:u,rtl:f,isIn:d,theme:p}){let g=s||l&&u===0,y={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};l&&(y.transform=`scaleX(${u})`);let b=ks("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),S=rr(o)?o({rtl:f,type:i,defaultClassName:b}):ks(b,o),C={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{d&&t()}};return ct.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},ct.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${i}`}),ct.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:S,style:y,...C}))}var vN=1,C_=()=>`${vN++}`;function bN(n,e,t){let i=1,s=0,o=[],l=[],u=e,f=new Map,d=new Set,p=w=>(d.add(w),()=>d.delete(w)),g=()=>{l=Array.from(f.values()),d.forEach(w=>w())},y=({containerId:w,toastId:T,updateId:E})=>{let k=w?w!==n:n!==1,O=f.has(T)&&E==null;return k||O},b=(w,T)=>{f.forEach(E=>{var k;(T==null||T===E.props.toastId)&&((k=E.toggle)==null||k.call(E,w))})},S=w=>{var T,E;(E=(T=w.props)==null?void 0:T.onClose)==null||E.call(T,w.removalReason),w.isActive=!1},C=w=>{if(w==null)f.forEach(S);else{let T=f.get(w);T&&S(T)}g()},x=()=>{s-=o.length,o=[]},_=w=>{var T,E;let{toastId:k,updateId:O}=w.props,A=O==null;w.staleId&&f.delete(w.staleId),w.isActive=!0,f.set(k,w),g(),t(ew(w,A?"added":"updated")),A&&((E=(T=w.props).onOpen)==null||E.call(T))};return{id:n,props:u,observe:p,toggle:b,removeToast:C,toasts:f,clearQueue:x,buildToast:(w,T)=>{if(y(T))return;let{toastId:E,updateId:k,data:O,staleId:A,delay:N}=T,$=k==null;$&&s++;let V={...u,style:u.toastStyle,key:i++,...Object.fromEntries(Object.entries(T).filter(([H,X])=>X!=null)),toastId:E,updateId:k,data:O,isIn:!1,className:hg(T.className||u.toastClassName),progressClassName:hg(T.progressClassName||u.progressClassName),autoClose:T.isLoading?!1:dN(T.autoClose,u.autoClose),closeToast(H){f.get(E).removalReason=H,C(E)},deleteToast(){let H=f.get(E);if(H!=null){if(t(ew(H,"removed")),f.delete(E),s--,s<0&&(s=0),o.length>0){_(o.shift());return}g()}}};V.closeButton=u.closeButton,T.closeButton===!1||dg(T.closeButton)?V.closeButton=T.closeButton:T.closeButton===!0&&(V.closeButton=dg(u.closeButton)?u.closeButton:!0);let q={content:w,props:V,staleId:A};u.limit&&u.limit>0&&s>u.limit&&$?o.push(q):Ll(N)?setTimeout(()=>{_(q)},N):_(q)},setProps(w){u=w},setToggle:(w,T)=>{let E=f.get(w);E&&(E.toggle=T)},isToastActive:w=>{var T;return(T=f.get(w))==null?void 0:T.isActive},getSnapshot:()=>l}}var oi=new Map,dl=[],pg=new Set,SN=n=>pg.forEach(e=>e(n)),k_=()=>oi.size>0;function xN(){dl.forEach(n=>E_(n.content,n.options)),dl=[]}var wN=(n,{containerId:e})=>{var t;return(t=oi.get(e||1))==null?void 0:t.toasts.get(n)};function A_(n,e){var t;if(e)return!!((t=oi.get(e))!=null&&t.isToastActive(n));let i=!1;return oi.forEach(s=>{s.isToastActive(n)&&(i=!0)}),i}function _N(n){if(!k_()){dl=dl.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||hN(n))oi.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=oi.get(n.containerId);e?e.removeToast(n.id):oi.forEach(t=>{t.removeToast(n.id)})}}var TN=(n={})=>{oi.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function E_(n,e){dg(n)&&(k_()||dl.push({content:n,options:e}),oi.forEach(t=>{t.buildToast(n,e)}))}function CN(n){var e;(e=oi.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function M_(n,e){oi.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function kN(n){let e=n.containerId||1;return{subscribe(t){let i=bN(e,n,SN);oi.set(e,i);let s=i.observe(t);return xN(),()=>{s(),oi.delete(e)}},setProps(t){var i;(i=oi.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=oi.get(e))==null?void 0:t.getSnapshot()}}}function AN(n){return pg.add(n),()=>{pg.delete(n)}}function EN(n){return n&&(Ms(n.toastId)||Ll(n.toastId))?n.toastId:C_()}function jl(n,e){return E_(n,e),e.toastId}function Rh(n,e){return{...e,type:e&&e.type||n,toastId:EN(e)}}function Nh(n){return(e,t)=>jl(e,Rh(n,t))}function Ge(n,e){return jl(n,Rh("default",e))}Ge.loading=(n,e)=>jl(n,Rh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function MN(n,{pending:e,error:t,success:i},s){let o;e&&(o=Ms(e)?Ge.loading(e,s):Ge.loading(e.render,{...s,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(d,p,g)=>{if(p==null){Ge.dismiss(o);return}let y={type:d,...l,...s,data:g},b=Ms(p)?{render:p}:p;return o?Ge.update(o,{...y,...b}):Ge(b.render,{...y,...b}),g},f=rr(n)?n():n;return f.then(d=>u("success",i,d)).catch(d=>u("error",t,d)),f}Ge.promise=MN;Ge.success=Nh("success");Ge.info=Nh("info");Ge.error=Nh("error");Ge.warning=Nh("warning");Ge.warn=Ge.warning;Ge.dark=(n,e)=>jl(n,Rh("default",{theme:"dark",...e}));function ON(n){_N(n)}Ge.dismiss=ON;Ge.clearWaitingQueue=TN;Ge.isActive=A_;Ge.update=(n,e={})=>{let t=wN(n,e);if(t){let{props:i,content:s}=t,o={delay:100,...i,...e,toastId:e.toastId||n,updateId:C_()};o.toastId!==n&&(o.staleId=n);let l=o.render||s;delete o.render,jl(l,o)}};Ge.done=n=>{Ge.update(n,{progress:1})};Ge.onChange=AN;Ge.play=n=>M_(!0,n);Ge.pause=n=>M_(!1,n);function DN(n){var e;let{subscribe:t,getSnapshot:i,setProps:s}=ve.useRef(kN(n)).current;s(n);let o=(e=ve.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function l(u){if(!o)return[];let f=new Map;return n.newestOnTop&&o.reverse(),o.forEach(d=>{let{position:p}=d.props;f.has(p)||f.set(p,[]),f.get(p).push(d)}),Array.from(f,d=>u(d[0],d[1]))}return{getToastToRender:l,isToastActive:A_,count:o?.length}}function RN(n){let[e,t]=ve.useState(!1),[i,s]=ve.useState(!1),o=ve.useRef(null),l=ve.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:f,closeToast:d,onClick:p,closeOnClick:g}=n;CN({id:n.toastId,containerId:n.containerId,fn:t}),ve.useEffect(()=>{if(n.pauseOnFocusLoss)return y(),()=>{b()}},[n.pauseOnFocusLoss]);function y(){document.hasFocus()||_(),window.addEventListener("focus",x),window.addEventListener("blur",_)}function b(){window.removeEventListener("focus",x),window.removeEventListener("blur",_)}function S(A){if(n.draggable===!0||n.draggable===A.pointerType){w();let N=o.current;l.canCloseOnClick=!0,l.canDrag=!0,N.style.transition="none",n.draggableDirection==="x"?(l.start=A.clientX,l.removalDistance=N.offsetWidth*(n.draggablePercent/100)):(l.start=A.clientY,l.removalDistance=N.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function C(A){let{top:N,bottom:$,left:V,right:q}=o.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&n.pauseOnHover&&A.clientX>=V&&A.clientX<=q&&A.clientY>=N&&A.clientY<=$?_():x()}function x(){t(!0)}function _(){t(!1)}function w(){l.didMove=!1,document.addEventListener("pointermove",E),document.addEventListener("pointerup",k)}function T(){document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",k)}function E(A){let N=o.current;if(l.canDrag&&N){l.didMove=!0,e&&_(),n.draggableDirection==="x"?l.delta=A.clientX-l.start:l.delta=A.clientY-l.start,l.start!==A.clientX&&(l.canCloseOnClick=!1);let $=n.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;N.style.transform=`translate3d(${$},0)`,N.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function k(){T();let A=o.current;if(l.canDrag&&l.didMove&&A){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){s(!0),n.closeToast(!0),n.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let O={onPointerDown:S,onPointerUp:C};return u&&f&&(O.onMouseEnter=_,n.stacked||(O.onMouseLeave=x)),g&&(O.onClick=A=>{p&&p(A),l.canCloseOnClick&&d(!0)}),{playToast:x,pauseToast:_,isRunning:e,preventExitTransition:i,toastRef:o,eventHandlers:O}}var NN=typeof window<"u"?ve.useLayoutEffect:ve.useEffect,zh=({theme:n,type:e,isLoading:t,...i})=>ct.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function zN(n){return ct.createElement(zh,{...n},ct.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function $N(n){return ct.createElement(zh,{...n},ct.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function BN(n){return ct.createElement(zh,{...n},ct.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function LN(n){return ct.createElement(zh,{...n},ct.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function jN(){return ct.createElement("div",{className:"Toastify__spinner"})}var mg={info:$N,warning:zN,success:BN,error:LN,spinner:jN},PN=n=>n in mg;function qN({theme:n,type:e,isLoading:t,icon:i}){let s=null,o={theme:n,type:e};return i===!1||(rr(i)?s=i({...o,isLoading:t}):ve.isValidElement(i)?s=ve.cloneElement(i,o):t?s=mg.spinner():PN(e)&&(s=mg[e](o))),s}var HN=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:s,playToast:o}=RN(n),{closeButton:l,children:u,autoClose:f,onClick:d,type:p,hideProgressBar:g,closeToast:y,transition:b,position:S,className:C,style:x,progressClassName:_,updateId:w,role:T,progress:E,rtl:k,toastId:O,deleteToast:A,isIn:N,isLoading:$,closeOnClick:V,theme:q,ariaLabel:H}=n,X=ks("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":V}),te=rr(C)?C({rtl:k,position:S,type:p,defaultClassName:X}):ks(X,C),fe=qN(n),I=!!E||!f,ne={closeToast:y,type:p,theme:q},oe=null;return l===!1||(rr(l)?oe=l(ne):ve.isValidElement(l)?oe=ve.cloneElement(l,ne):oe=gN(ne)),ct.createElement(b,{isIn:N,done:A,position:S,preventExitTransition:t,nodeRef:i,playToast:o},ct.createElement("div",{id:O,tabIndex:0,onClick:d,"data-in":N,className:te,...s,style:x,ref:i,...N&&{role:T,"aria-label":H}},fe!=null&&ct.createElement("div",{className:ks("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$})},fe),T_(u,n,!e),oe,!n.customProgressBar&&ct.createElement(yN,{...w&&!I?{key:`p-${w}`}:{},rtl:k,theme:q,delay:f,isRunning:e,isIn:N,closeToast:y,hide:g,type:p,className:_,controlledProgress:I,progress:E||0})))},UN=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),VN=mN(UN("bounce",!0)),IN={position:"top-right",transition:VN,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function WN(n){let e={...IN,...n},t=n.stacked,[i,s]=ve.useState(!0),o=ve.useRef(null),{getToastToRender:l,isToastActive:u,count:f}=DN(e),{className:d,style:p,rtl:g,containerId:y,hotKeys:b}=e;function S(x){let _=ks("Toastify__toast-container",`Toastify__toast-container--${x}`,{"Toastify__toast-container--rtl":g});return rr(d)?d({position:x,rtl:g,defaultClassName:_}):ks(_,hg(d))}function C(){t&&(s(!0),Ge.play())}return NN(()=>{var x;if(t){let _=o.current.querySelectorAll('[data-in="true"]'),w=12,T=(x=e.position)==null?void 0:x.includes("top"),E=0,k=0;Array.from(_).reverse().forEach((O,A)=>{let N=O;N.classList.add("Toastify__toast--stacked"),A>0&&(N.dataset.collapsed=`${i}`),N.dataset.pos||(N.dataset.pos=T?"top":"bot");let $=E*(i?.2:1)+(i?0:w*A);N.style.setProperty("--y",`${T?$:$*-1}px`),N.style.setProperty("--g",`${w}`),N.style.setProperty("--s",`${1-(i?k:0)}`),E+=N.offsetHeight,k+=.025})}},[i,f,t]),ve.useEffect(()=>{function x(_){var w;let T=o.current;b(_)&&((w=T.querySelector('[tabIndex="0"]'))==null||w.focus(),s(!1),Ge.pause()),_.key==="Escape"&&(document.activeElement===T||T!=null&&T.contains(document.activeElement))&&(s(!0),Ge.play())}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[b]),ct.createElement("section",{ref:o,className:"Toastify",id:y,onMouseEnter:()=>{t&&(s(!1),Ge.pause())},onMouseLeave:C,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((x,_)=>{let w=_.length?{...p}:{...p,pointerEvents:"none"};return ct.createElement("div",{tabIndex:-1,className:S(x),"data-stacked":t,style:w,key:`c-${x}`},_.map(({content:T,props:E})=>ct.createElement(HN,{...E,stacked:t,collapseAll:C,isIn:u(E.toastId,E.containerId),key:`t-${E.key}`},T)))}))}function GN(){const n=Bi.c(22),{interactiveBalanceData:e,setInteractiveBalanceData:t}=nr(),[i,s]=ve.useState(null),[o,l]=ve.useState(null),{closeAllWindowsExcept:u}=Ah();let f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=A=>{if(l(null),!A.target.files?.[0]){l("Keine Datei gefunden"),Ge.error(W.jsxs(W.Fragment,{children:["Upload fehlgeschlagen ",W.jsx("br",{}),"Keine Datei gefunden"]}));return}s(A.target.files[0]),console.log("uploaded: ",A.target.files[0])},n[0]=f):f=n[0];const d=f;let p;n[1]!==u||n[2]!==t||n[3]!==i?(p=()=>{if(l(null),!i)return;const A=new FileReader;A.readAsText(i,"UTF-8"),A.onload=N=>{const $=N.target?.result?.toString();if(!$){l("Keine Datei gefunden"),Ge.error(W.jsxs(W.Fragment,{children:["Upload fehlgeschlagen ",W.jsx("br",{}),"Keine Datei gefunden"]}));return}let V;try{V=JSON.parse($)}catch(H){console.error("Invalid JSON:",H),l("Fehler beim Parsing des JSON-String"),Ge.error(W.jsxs(W.Fragment,{children:["Upload fehlgeschlagen ",W.jsx("br",{}),"Fehler beim Parsing des JSON-String"]}));return}if(!fg(V)){console.error("Validation errors:",fg.errors),l("JSON-Format ist nicht zulssig"),Ge.error(W.jsxs("div",{children:["Upload fehlgeschlagen ",W.jsx("br",{}),"Format nicht zulssig ",W.jsx("br",{})]}));return}t(V),u({type:"FileHandeling",payload:{}}),console.log("Successfully loaded project:",V),Ge.success("Upload erfolgreich!")}},n[1]=u,n[2]=t,n[3]=i,n[4]=p):p=n[4];const g=p;let y;n[5]!==e?(y=()=>{if(!e)return;const A=new Blob([JSON.stringify(e)],{type:"application/json"}),N=URL.createObjectURL(A),$=document.createElement("a");$.href=N,$.download="interactive_balance_data_project.json",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(N),Ge.success("Downsload erfolgreich!")},n[5]=e,n[6]=y):y=n[6];const b=y;let S;n[7]===Symbol.for("react.memo_cache_sentinel")?(S=W.jsxs("label",{className:"flex flex-col w-full",children:[W.jsx("span",{className:"text-sm font-medium text-gray-700 mb-1",children:"Upload JSON"}),W.jsx("input",{type:"file",accept:".json",onChange:d,className:"block w-full text-xs text-gray-600 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-green-100 file:text-green-700 hover:file:bg-green-200"})]}),n[7]=S):S=n[7];const C=!i,x=`w-full px-3 py-1 rounded text-white text-sm font-medium transition-colors ${i?"bg-green-500 hover:bg-green-600":"bg-gray-300 cursor-not-allowed"}`;let _;n[8]!==g||n[9]!==C||n[10]!==x?(_=W.jsx("button",{disabled:C,onClick:g,className:x,children:"Upload"}),n[8]=g,n[9]=C,n[10]=x,n[11]=_):_=n[11];const w=!e,T=`w-full px-3 py-1 rounded text-white text-sm font-medium transition-colors ${e?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`;let E;n[12]!==b||n[13]!==w||n[14]!==T?(E=W.jsx("button",{disabled:w,onClick:b,className:T,children:"Download"}),n[12]=b,n[13]=w,n[14]=T,n[15]=E):E=n[15];let k;n[16]!==o?(k=o&&W.jsx("div",{className:"bg-red-100 text-red-700 border border-red-300 rounded p-2 text-sm w-full text-center",children:o}),n[16]=o,n[17]=k):k=n[17];let O;return n[18]!==k||n[19]!==_||n[20]!==E?(O=W.jsx("div",{className:"flex justify-center",children:W.jsxs("div",{className:"flex flex-col items-center space-y-2 p-4 bg-white border rounded shadow-md w-80",children:[S,_,E,k]})}),n[18]=k,n[19]=_,n[20]=E,n[21]=O):O=n[21],O}const O_=ve.createContext(null),YN=n=>{const e=Bi.c(8),{children:t}=n,[i,s]=ve.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{s(KN)},e[0]=o):o=e[0];const l=o;let u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const g=y=>{y.ctrlKey&&y.altKey&&y.key.toLowerCase()==="t"&&l()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},f=[l],e[1]=u,e[2]=f):(u=e[1],f=e[2]),ve.useEffect(u,f);let d;e[3]!==i?(d={teacherMode:i,toggleTeacherMode:l},e[3]=i,e[4]=d):d=e[4];let p;return e[5]!==t||e[6]!==d?(p=W.jsx(O_.Provider,{value:d,children:t}),e[5]=t,e[6]=d,e[7]=p):p=e[7],p},FN=()=>{const n=ve.useContext(O_);if(!n)throw new Error("useTeacherMode must be used within TeacherModeProvider");return n};function KN(n){const e=!n;return Ge(e?"Teacher mode enabled":"Teacher mode disabled"),e}function gg(){return gg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gg.apply(null,arguments)}function XN(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}let yg=[],D_=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?D_:yg).push(t=t+n[e])})();function QN(n){if(n<768)return!1;for(let e=0,t=yg.length;;){let i=e+t>>1;if(n<yg[i])t=i;else if(n>=D_[i])e=i+1;else return!0;if(e==t)return!1}}function tw(n){return n>=127462&&n<=127487}const iw=8205;function ZN(n,e,t=!0,i=!0){return(t?R_:JN)(n,e,i)}function R_(n,e,t){if(e==n.length)return e;e&&N_(n.charCodeAt(e))&&z_(n.charCodeAt(e-1))&&e--;let i=Nm(n,e);for(e+=nw(i);e<n.length;){let s=Nm(n,e);if(i==iw||s==iw||t&&QN(s))e+=nw(s),i=s;else if(tw(s)){let o=0,l=e-2;for(;l>=0&&tw(Nm(n,l));)o++,l-=2;if(o%2==0)break;e+=2}else break}return e}function JN(n,e,t){for(;e>0;){let i=R_(n,e-2,t);if(i<e)return i;e--}return 0}function Nm(n,e){let t=n.charCodeAt(e);if(!z_(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return N_(i)?(t-55296<<10)+(i-56320)+65536:t}function N_(n){return n>=56320&&n<57344}function z_(n){return n>=55296&&n<56320}function nw(n){return n<65536?1:2}class Ke{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=La(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Tn.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=La(this,e,t);let i=[];return this.decompose(e,t,i,0),Tn.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new sl(this),o=new sl(e);for(let l=t,u=t;;){if(s.next(l),o.next(l),l=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(u+=s.value.length,s.done||u>=i)return!0}}iter(e=1){return new sl(this,e)}iterRange(e,t=this.length){return new $_(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new B_(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ke.empty:e.length<=32?new Ct(e):Tn.from(Ct.split(e,[]))}}class Ct extends Ke{constructor(e,t=e3(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let o=0;;o++){let l=this.text[o],u=s+l.length;if((t?i:u)>=e)return new t3(s,u,i,l);s=u+1,i++}}decompose(e,t,i,s){let o=e<=0&&t>=this.length?this:new Ct(rw(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let l=i.pop(),u=Pf(o.text,l.text.slice(),0,o.length);if(u.length<=32)i.push(new Ct(u,l.length+o.length));else{let f=u.length>>1;i.push(new Ct(u.slice(0,f)),new Ct(u.slice(f)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Ct))return super.replace(e,t,i);[e,t]=La(this,e,t);let s=Pf(this.text,Pf(i.text,rw(this.text,0,e)),t),o=this.length+i.length-(t-e);return s.length<=32?new Ct(s,o):Tn.from(Ct.split(s,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=La(this,e,t);let s="";for(let o=0,l=0;o<=t&&l<this.text.length;l++){let u=this.text[l],f=o+u.length;o>e&&l&&(s+=i),e<f&&t>o&&(s+=u.slice(Math.max(0,e-o),t-o)),o=f+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(t.push(new Ct(i,s)),i=[],s=-1);return s>-1&&t.push(new Ct(i,s)),t}}class Tn extends Ke{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let o=0;;o++){let l=this.children[o],u=s+l.length,f=i+l.lines-1;if((t?f:u)>=e)return l.lineInner(e,t,i,s);s=u+1,i=f+1}}decompose(e,t,i,s){for(let o=0,l=0;l<=t&&o<this.children.length;o++){let u=this.children[o],f=l+u.length;if(e<=f&&t>=l){let d=s&((l<=e?1:0)|(f>=t?2:0));l>=e&&f<=t&&!d?i.push(u):u.decompose(e-l,t-l,i,d)}l=f+1}}replace(e,t,i){if([e,t]=La(this,e,t),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let l=this.children[s],u=o+l.length;if(e>=o&&t<=u){let f=l.replace(e-o,t-o,i),d=this.lines-l.lines+f.lines;if(f.lines<d>>4&&f.lines>d>>6){let p=this.children.slice();return p[s]=f,new Tn(p,this.length-(t-e)+i.length)}return super.replace(o,u,f)}o=u+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=La(this,e,t);let s="";for(let o=0,l=0;o<this.children.length&&l<=t;o++){let u=this.children[o],f=l+u.length;l>e&&o&&(s+=i),e<f&&t>l&&(s+=u.sliceString(e-l,t-l,i)),l=f+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Tn))return 0;let i=0,[s,o,l,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,o+=t){if(s==l||o==u)return i;let f=this.children[s],d=e.children[o];if(f!=d)return i+f.scanIdentical(d,t);i+=f.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let b of e)i+=b.lines;if(i<32){let b=[];for(let S of e)S.flatten(b);return new Ct(b,t)}let s=Math.max(32,i>>5),o=s<<1,l=s>>1,u=[],f=0,d=-1,p=[];function g(b){let S;if(b.lines>o&&b instanceof Tn)for(let C of b.children)g(C);else b.lines>l&&(f>l||!f)?(y(),u.push(b)):b instanceof Ct&&f&&(S=p[p.length-1])instanceof Ct&&b.lines+S.lines<=32?(f+=b.lines,d+=b.length+1,p[p.length-1]=new Ct(S.text.concat(b.text),S.length+1+b.length)):(f+b.lines>s&&y(),f+=b.lines,d+=b.length+1,p.push(b))}function y(){f!=0&&(u.push(p.length==1?p[0]:Tn.from(p,d)),d=-1,f=p.length=0)}for(let b of e)g(b);return y(),u.length==1?u[0]:new Tn(u,t)}}Ke.empty=new Ct([""],0);function e3(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Pf(n,e,t=0,i=1e9){for(let s=0,o=0,l=!0;o<n.length&&s<=i;o++){let u=n[o],f=s+u.length;f>=t&&(f>i&&(u=u.slice(0,i-s)),s<t&&(u=u.slice(t-s)),l?(e[e.length-1]+=u,l=!1):e.push(u)),s=f+1}return e}function rw(n,e,t){return Pf(n,[""],e,t)}class sl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ct?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],l=o>>1,u=s instanceof Ct?s.text.length:s.children.length;if(l==(t>0?u:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Ct){let f=s.text[l+(t<0?-1:0)];if(this.offsets[i]+=t,f.length>Math.max(0,e))return this.value=e==0?f:t>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=s.children[l+(t<0?-1:0)];e>f.length?(e-=f.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(f),this.offsets.push(t>0?1:(f instanceof Ct?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class $_{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new sl(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class B_{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ke.prototype[Symbol.iterator]=function(){return this.iter()},sl.prototype[Symbol.iterator]=$_.prototype[Symbol.iterator]=B_.prototype[Symbol.iterator]=function(){return this});class t3{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function La(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Bt(n,e,t=!0,i=!0){return ZN(n,e,t,i)}function i3(n){return n>=56320&&n<57344}function n3(n){return n>=55296&&n<56320}function gi(n,e){let t=n.charCodeAt(e);if(!n3(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return i3(i)?(t-55296<<10)+(i-56320)+65536:t}function g0(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Cn(n){return n<65536?1:2}const vg=/\r\n?|\n/;var ai=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(ai||(ai={}));class Mn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let o=this.sections[t++],l=this.sections[t++];l<0?(e(i,s,o),s+=o):s+=l,i+=o}}iterChangedRanges(e,t=!1){bg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Mn(e)}composeDesc(e){return this.empty?e:e.empty?this:L_(this,e)}mapDesc(e,t=!1){return e.empty?this:Sg(this,e,t)}mapPos(e,t=-1,i=ai.Simple){let s=0,o=0;for(let l=0;l<this.sections.length;){let u=this.sections[l++],f=this.sections[l++],d=s+u;if(f<0){if(d>e)return o+(e-s);o+=u}else{if(i!=ai.Simple&&d>=e&&(i==ai.TrackDel&&s<e&&d>e||i==ai.TrackBefore&&s<e||i==ai.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!u)return e==s||t<0?o:o+f;o+=f}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let o=this.sections[i++],l=this.sections[i++],u=s+o;if(l>=0&&s<=t&&u>=e)return s<e&&u>t?"cover":!0;s=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Mn(e)}static create(e){return new Mn(e)}}class $t extends Mn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return bg(this,(t,i,s,o,l)=>e=e.replace(s,s+(i-t),l),!1),e}mapDesc(e,t=!1){return Sg(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,o=0;s<t.length;s+=2){let l=t[s],u=t[s+1];if(u>=0){t[s]=u,t[s+1]=l;let f=s>>1;for(;i.length<f;)i.push(Ke.empty);i.push(l?e.slice(o,o+l):Ke.empty)}o+=l}return new $t(t,i)}compose(e){return this.empty?e:e.empty?this:L_(this,e,!0)}map(e,t=!1){return e.empty?this:Sg(this,e,t,!0)}iterChanges(e,t=!1){bg(this,e,t)}get desc(){return Mn.create(this.sections)}filter(e){let t=[],i=[],s=[],o=new pl(this);e:for(let l=0,u=0;;){let f=l==e.length?1e9:e[l++];for(;u<f||u==f&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,f-u);ei(s,p,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;ei(t,p,g),g>0&&qr(i,t,o.text),o.forward(p),u+=p}let d=e[l++];for(;u<d;){if(o.done)break e;let p=Math.min(o.len,d-u);ei(t,p,-1),ei(s,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),u+=p}}return{changes:new $t(t,i),filtered:Mn.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],o=[],l=0,u=null;function f(p=!1){if(!p&&!s.length)return;l<t&&ei(s,t-l,-1);let g=new $t(s,o);u=u?u.compose(g.map(u)):g,s=[],o=[],l=0}function d(p){if(Array.isArray(p))for(let g of p)d(g);else if(p instanceof $t){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);f(),u=u?u.compose(p.map(u)):p}else{let{from:g,to:y=g,insert:b}=p;if(g>y||g<0||y>t)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${t})`);let S=b?typeof b=="string"?Ke.of(b.split(i||vg)):b:Ke.empty,C=S.length;if(g==y&&C==0)return;g<l&&f(),g>l&&ei(s,g-l,-1),ei(s,y-g,C),qr(o,s,S),l=y}}return d(e),f(!u),u}static empty(e){return new $t(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((l,u)=>u&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<s;)i.push(Ke.empty);i[s]=Ke.of(o.slice(1)),t.push(o[0],i[s].length)}}}return new $t(t,i)}static createSet(e,t){return new $t(e,t)}}function ei(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function qr(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Ke.empty);n.push(t)}}function bg(n,e,t){let i=n.inserted;for(let s=0,o=0,l=0;l<n.sections.length;){let u=n.sections[l++],f=n.sections[l++];if(f<0)s+=u,o+=u;else{let d=s,p=o,g=Ke.empty;for(;d+=u,p+=f,f&&i&&(g=g.append(i[l-2>>1])),!(t||l==n.sections.length||n.sections[l+1]<0);)u=n.sections[l++],f=n.sections[l++];e(s,d,o,p,g),s=d,o=p}}}function Sg(n,e,t,i=!1){let s=[],o=i?[]:null,l=new pl(n),u=new pl(e);for(let f=-1;;){if(l.done&&u.len||u.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&u.ins==-1){let d=Math.min(l.len,u.len);ei(s,d,-1),l.forward(d),u.forward(d)}else if(u.ins>=0&&(l.ins<0||f==l.i||l.off==0&&(u.len<l.len||u.len==l.len&&!t))){let d=u.len;for(ei(s,u.ins,-1);d;){let p=Math.min(l.len,d);l.ins>=0&&f<l.i&&l.len<=p&&(ei(s,0,l.ins),o&&qr(o,s,l.text),f=l.i),l.forward(p),d-=p}u.next()}else if(l.ins>=0){let d=0,p=l.len;for(;p;)if(u.ins==-1){let g=Math.min(p,u.len);d+=g,p-=g,u.forward(g)}else if(u.ins==0&&u.len<p)p-=u.len,u.next();else break;ei(s,d,f<l.i?l.ins:0),o&&f<l.i&&qr(o,s,l.text),f=l.i,l.forward(l.len-p)}else{if(l.done&&u.done)return o?$t.createSet(s,o):Mn.create(s);throw new Error("Mismatched change set lengths")}}}function L_(n,e,t=!1){let i=[],s=t?[]:null,o=new pl(n),l=new pl(e);for(let u=!1;;){if(o.done&&l.done)return s?$t.createSet(i,s):Mn.create(i);if(o.ins==0)ei(i,o.len,0,u),o.next();else if(l.len==0&&!l.done)ei(i,0,l.ins,u),s&&qr(s,i,l.text),l.next();else{if(o.done||l.done)throw new Error("Mismatched change set lengths");{let f=Math.min(o.len2,l.len),d=i.length;if(o.ins==-1){let p=l.ins==-1?-1:l.off?0:l.ins;ei(i,f,p,u),s&&p&&qr(s,i,l.text)}else l.ins==-1?(ei(i,o.off?0:o.len,f,u),s&&qr(s,i,o.textBit(f))):(ei(i,o.off?0:o.len,l.off?0:l.ins,u),s&&!l.off&&qr(s,i,l.text));u=(o.ins>f||l.ins>=0&&l.len>f)&&(u||i.length>d),o.forward2(f),l.forward(f)}}}}class pl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ke.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ke.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class _s{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new _s(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ce.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ce.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ce.range(e.anchor,e.head)}static create(e,t,i){return new _s(e,t,i)}}class ce{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ce.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ce([this.main],0)}addRange(e,t=!0){return ce.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ce.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ce(e.ranges.map(t=>_s.fromJSON(t)),e.main)}static single(e,t=e){return new ce([ce.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return ce.normalized(e.slice(),t);i=o.to}return new ce(e,t)}static cursor(e,t=0,i,s){return _s.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?_s.create(t,e,48|o):_s.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((s,o)=>s.from-o.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],l=e[s-1];if(o.empty?o.from<=l.to:o.from<l.to){let u=l.from,f=Math.max(o.to,l.to);s<=t&&t--,e.splice(--s,2,o.anchor>o.head?ce.range(f,u):ce.range(u,f))}}return new ce(e,t)}}function j_(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let y0=0;class Se{constructor(e,t,i,s,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=y0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Se(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:v0),!!e.static,e.enables)}of(e){return new qf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qf(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function v0(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class qf{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=y0++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,o=this.id,l=e[o]>>1,u=this.type==2,f=!1,d=!1,p=[];for(let g of this.dependencies)g=="doc"?f=!0:g=="selection"?d=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[l]=i(g),1},update(g,y){if(f&&y.docChanged||d&&(y.docChanged||y.selection)||xg(g,p)){let b=i(g);if(u?!sw(b,g.values[l],s):!s(b,g.values[l]))return g.values[l]=b,1}return 0},reconfigure:(g,y)=>{let b,S=y.config.address[o];if(S!=null){let C=Zf(y,S);if(this.dependencies.every(x=>x instanceof Se?y.facet(x)===g.facet(x):x instanceof Zt?y.field(x,!1)==g.field(x,!1):!0)||(u?sw(b=i(g),C,s):s(b=i(g),C)))return g.values[l]=C,0}else b=i(g);return g.values[l]=b,1}}}}function sw(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function xg(n,e){let t=!1;for(let i of e)al(n,i)&1&&(t=!0);return t}function r3(n,e,t){let i=t.map(f=>n[f.id]),s=t.map(f=>f.type),o=i.filter(f=>!(f&1)),l=n[e.id]>>1;function u(f){let d=[];for(let p=0;p<i.length;p++){let g=Zf(f,i[p]);if(s[p]==2)for(let y of g)d.push(y);else d.push(g)}return e.combine(d)}return{create(f){for(let d of i)al(f,d);return f.values[l]=u(f),1},update(f,d){if(!xg(f,o))return 0;let p=u(f);return e.compare(p,f.values[l])?0:(f.values[l]=p,1)},reconfigure(f,d){let p=xg(f,i),g=d.config.facets[e.id],y=d.facet(e);if(g&&!p&&v0(t,g))return f.values[l]=y,0;let b=u(f);return e.compare(b,y)?(f.values[l]=y,0):(f.values[l]=b,1)}}}const mf=Se.define({static:!0});class Zt{constructor(e,t,i,s,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let t=new Zt(y0++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(mf).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let o=i.values[t],l=this.updateF(o,s);return this.compareF(o,l)?0:(i.values[t]=l,1)},reconfigure:(i,s)=>{let o=i.facet(mf),l=s.facet(mf),u;return(u=o.find(f=>f.field==this))&&u!=l.find(f=>f.field==this)?(i.values[t]=u.create(i),1):s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,mf.of({field:this,create:e})]}get extension(){return this}}const xs={lowest:4,low:3,default:2,high:1,highest:0};function Ko(n){return e=>new P_(e,n)}const Ns={highest:Ko(xs.highest),high:Ko(xs.high),default:Ko(xs.default),low:Ko(xs.low),lowest:Ko(xs.lowest)};class P_{constructor(e,t){this.inner=e,this.prec=t}}class $h{of(e){return new wg(this,e)}reconfigure(e){return $h.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class wg{constructor(e,t){this.compartment=e,this.inner=t}}class Qf{constructor(e,t,i,s,o,l){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],o=Object.create(null),l=new Map;for(let y of s3(e,t,l))y instanceof Zt?s.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let u=Object.create(null),f=[],d=[];for(let y of s)u[y.id]=d.length<<1,d.push(b=>y.slot(b));let p=i?.config.facets;for(let y in o){let b=o[y],S=b[0].facet,C=p&&p[y]||[];if(b.every(x=>x.type==0))if(u[S.id]=f.length<<1|1,v0(C,b))f.push(i.facet(S));else{let x=S.combine(b.map(_=>_.value));f.push(i&&S.compare(x,i.facet(S))?i.facet(S):x)}else{for(let x of b)x.type==0?(u[x.id]=f.length<<1|1,f.push(x.value)):(u[x.id]=d.length<<1,d.push(_=>x.dynamicSlot(_)));u[S.id]=d.length<<1,d.push(x=>r3(x,S,b))}}let g=d.map(y=>y(u));return new Qf(e,l,g,u,f,o)}}function s3(n,e,t){let i=[[],[],[],[],[]],s=new Map;function o(l,u){let f=s.get(l);if(f!=null){if(f<=u)return;let d=i[f].indexOf(l);d>-1&&i[f].splice(d,1),l instanceof wg&&t.delete(l.compartment)}if(s.set(l,u),Array.isArray(l))for(let d of l)o(d,u);else if(l instanceof wg){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(l.compartment)||l.inner;t.set(l.compartment,d),o(d,u)}else if(l instanceof P_)o(l.inner,l.prec);else if(l instanceof Zt)i[u].push(l),l.provides&&o(l.provides,u);else if(l instanceof qf)i[u].push(l),l.facet.extensions&&o(l.facet.extensions,xs.default);else{let d=l.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,u)}}return o(n,xs.default),i.reduce((l,u)=>l.concat(u))}function al(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function Zf(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const q_=Se.define(),_g=Se.define({combine:n=>n.some(e=>e),static:!0}),H_=Se.define({combine:n=>n.length?n[0]:void 0,static:!0}),U_=Se.define(),V_=Se.define(),I_=Se.define(),W_=Se.define({combine:n=>n.length?n[0]:!1});class On{constructor(e,t){this.type=e,this.value=t}static define(){return new a3}}class a3{of(e){return new On(this,e)}}class o3{constructor(e){this.map=e}of(e){return new ze(this,e)}}class ze{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ze(this.type,t)}is(e){return this.type==e}static define(e={}){return new o3(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(t);o&&i.push(o)}return i}}ze.reconfigure=ze.define();ze.appendConfig=ze.define();class Lt{constructor(e,t,i,s,o,l){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=l,this._doc=null,this._state=null,i&&j_(i,t.newLength),o.some(u=>u.type==Lt.time)||(this.annotations=o.concat(Lt.time.of(Date.now())))}static create(e,t,i,s,o,l){return new Lt(e,t,i,s,o,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Lt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Lt.time=On.define();Lt.userEvent=On.define();Lt.addToHistory=On.define();Lt.remote=On.define();function l3(n,e){let t=[];for(let i=0,s=0;;){let o,l;if(i<n.length&&(s==e.length||e[s]>=n[i]))o=n[i++],l=n[i++];else if(s<e.length)o=e[s++],l=e[s++];else return t;!t.length||t[t.length-1]<o?t.push(o,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function G_(n,e,t){var i;let s,o,l;return t?(s=e.changes,o=$t.empty(e.changes.length),l=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),l=n.changes.compose(s)),{changes:l,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:ze.mapEffects(n.effects,s).concat(ze.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Tg(n,e,t){let i=e.selection,s=Oa(e.annotations);return e.userEvent&&(s=s.concat(Lt.userEvent.of(e.userEvent))),{changes:e.changes instanceof $t?e.changes:$t.of(e.changes||[],t,n.facet(H_)),selection:i&&(i instanceof ce?i:ce.single(i.anchor,i.head)),effects:Oa(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Y_(n,e,t){let i=Tg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let l=!!e[o].sequential;i=G_(i,Tg(n,e[o],l?i.changes.newLength:n.doc.length),l)}let s=Lt.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return u3(t?c3(s):s)}function c3(n){let e=n.startState,t=!0;for(let s of e.facet(U_)){let o=s(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:l3(t,o))}if(t!==!0){let s,o;if(t===!1)o=n.changes.invertedDesc,s=$t.empty(e.doc.length);else{let l=n.changes.filter(t);s=l.changes,o=l.filtered.mapDesc(l.changes).invertedDesc}n=Lt.create(e,s,n.selection&&n.selection.map(o),ze.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(V_);for(let s=i.length-1;s>=0;s--){let o=i[s](n);o instanceof Lt?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Lt?n=o[0]:n=Y_(e,Oa(o),!1)}return n}function u3(n){let e=n.startState,t=e.facet(I_),i=n;for(let s=t.length-1;s>=0;s--){let o=t[s](n);o&&Object.keys(o).length&&(i=G_(i,Tg(e,o,n.changes.newLength),!0))}return i==n?n:Lt.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const f3=[];function Oa(n){return n==null?f3:Array.isArray(n)?n:[n]}var pt=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(pt||(pt={}));const h3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Cg;try{Cg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function d3(n){if(Cg)return Cg.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||h3.test(t)))return!0}return!1}function p3(n){return e=>{if(!/\S/.test(e))return pt.Space;if(d3(e))return pt.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return pt.Word;return pt.Other}}class We{constructor(e,t,i,s,o,l){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,l&&(l._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)al(this,u<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return al(this,i),Zf(this,i)}update(...e){return Y_(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let u of e.effects)u.is($h.reconfigure)?(t&&(s=new Map,t.compartments.forEach((f,d)=>s.set(d,f)),t=null),s.set(u.value.compartment,u.value.extension)):u.is(ze.reconfigure)?(t=null,i=u.value):u.is(ze.appendConfig)&&(t=null,i=Oa(i).concat(u.value));let o;t?o=e.startState.values.slice():(t=Qf.resolve(i,s,this),o=new We(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(f,d)=>d.reconfigure(f,this),null).values);let l=e.startState.facet(_g)?e.newSelection:e.newSelection.asSingle();new We(t,e.newDoc,l,o,(u,f)=>f.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ce.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),o=[i.range],l=Oa(i.effects);for(let u=1;u<t.ranges.length;u++){let f=e(t.ranges[u]),d=this.changes(f.changes),p=d.map(s);for(let y=0;y<u;y++)o[y]=o[y].map(p);let g=s.mapDesc(d,!0);o.push(f.range.map(g)),s=s.compose(p),l=ze.mapEffects(l,p).concat(ze.mapEffects(Oa(f.effects),g))}return{changes:s,selection:ce.create(o,t.mainIndex),effects:l}}changes(e=[]){return e instanceof $t?e:$t.of(e,this.doc.length,this.facet(We.lineSeparator))}toText(e){return Ke.of(e.split(this.facet(We.lineSeparator)||vg))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(al(this,t),Zf(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Zt&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let l=i[o],u=e[o];s.push(l.init(f=>l.spec.fromJSON(u,f)))}}return We.create({doc:e.doc,selection:ce.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=Qf.resolve(e.extensions||[],new Map),i=e.doc instanceof Ke?e.doc:Ke.of((e.doc||"").split(t.staticFacet(We.lineSeparator)||vg)),s=e.selection?e.selection instanceof ce?e.selection:ce.single(e.selection.anchor,e.selection.head):ce.single(0);return j_(s,i.length),t.staticFacet(_g)||(s=s.asSingle()),new We(t,i,s,t.dynamicSlots.map(()=>null),(o,l)=>l.create(o),null)}get tabSize(){return this.facet(We.tabSize)}get lineBreak(){return this.facet(We.lineSeparator)||`
`}get readOnly(){return this.facet(W_)}phrase(e,...t){for(let i of this.facet(We.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let o of this.facet(q_))for(let l of o(this,t,i))Object.prototype.hasOwnProperty.call(l,e)&&s.push(l[e]);return s}charCategorizer(e){return p3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),l=e-i,u=e-i;for(;l>0;){let f=Bt(t,l,!1);if(o(t.slice(f,l))!=pt.Word)break;l=f}for(;u<s;){let f=Bt(t,u);if(o(t.slice(u,f))!=pt.Word)break;u=f}return l==u?null:ce.range(l+i,u+i)}}We.allowMultipleSelections=_g;We.tabSize=Se.define({combine:n=>n.length?n[0]:4});We.lineSeparator=H_;We.readOnly=W_;We.phrases=Se.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});We.languageData=q_;We.changeFilter=U_;We.transactionFilter=V_;We.transactionExtender=I_;$h.reconfigure=ze.define();function Dn(n,e,t={}){let i={};for(let s of n)for(let o of Object.keys(s)){let l=s[o],u=i[o];if(u===void 0)i[o]=l;else if(!(u===l||l===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](u,l);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Ir{eq(e){return this==e}range(e,t=e){return kg.create(e,t,this)}}Ir.prototype.startSide=Ir.prototype.endSide=0;Ir.prototype.point=!1;Ir.prototype.mapMode=ai.TrackDel;let kg=class F_{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new F_(e,t,i)}};function Ag(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class b0{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let o=i?this.to:this.from;for(let l=s,u=o.length;;){if(l==u)return l;let f=l+u>>1,d=o[f]-e||(i?this.value[f].endSide:this.value[f].startSide)-t;if(f==l)return d>=0?l:u;d>=0?u=f:l=f+1}}between(e,t,i,s){for(let o=this.findIndex(t,-1e9,!0),l=this.findIndex(i,1e9,!1,o);o<l;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],s=[],o=[],l=-1,u=-1;for(let f=0;f<this.value.length;f++){let d=this.value[f],p=this.from[f]+e,g=this.to[f]+e,y,b;if(p==g){let S=t.mapPos(p,d.startSide,d.mapMode);if(S==null||(y=b=S,d.startSide!=d.endSide&&(b=t.mapPos(p,d.endSide),b<y)))continue}else if(y=t.mapPos(p,d.startSide),b=t.mapPos(g,d.endSide),y>b||y==b&&d.startSide>0&&d.endSide<=0)continue;(b-y||d.endSide-d.startSide)<0||(l<0&&(l=y),d.point&&(u=Math.max(u,b-y)),i.push(d),s.push(y-l),o.push(b-l))}return{mapped:i.length?new b0(s,o,i,u):null,pos:l}}}class Ue{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Ue(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(i&&(t=t.slice().sort(Ag)),this.isEmpty)return t.length?Ue.of(t):this;let u=new K_(this,null,-1).goto(0),f=0,d=[],p=new sr;for(;u.value||f<t.length;)if(f<t.length&&(u.from-t[f].from||u.startSide-t[f].value.startSide)>=0){let g=t[f++];p.addInner(g.from,g.to,g.value)||d.push(g)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(f==t.length||this.chunkEnd(u.chunkIndex)<t[f].from)&&(!l||s>this.chunkEnd(u.chunkIndex)||o<this.chunkPos[u.chunkIndex])&&p.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!l||s>u.to||o<u.from||l(u.from,u.to,u.value))&&(p.addInner(u.from,u.to,u.value)||d.push(kg.create(u.from,u.to,u.value))),u.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Ue.empty:this.nextLayer.update({add:d,filter:l,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let l=0;l<this.chunk.length;l++){let u=this.chunkPos[l],f=this.chunk[l],d=e.touchesRange(u,u+f.length);if(d===!1)s=Math.max(s,f.maxPoint),t.push(f),i.push(e.mapPos(u));else if(d===!0){let{mapped:p,pos:g}=f.map(u,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),i.push(g))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ue(i,t,o||Ue.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],l=this.chunk[s];if(t>=o&&e<=o+l.length&&l.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return ml.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ml.from(e).goto(t)}static compare(e,t,i,s,o=-1){let l=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),u=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),f=aw(l,u,i),d=new Xo(l,f,o),p=new Xo(u,f,o);i.iterGaps((g,y,b)=>ow(d,g,p,y,b,s)),i.empty&&i.length==0&&ow(d,0,p,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),l=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=l.length)return!1;if(!o.length)return!0;let u=aw(o,l),f=new Xo(o,u,0).goto(i),d=new Xo(l,u,0).goto(i);for(;;){if(f.to!=d.to||!Eg(f.active,d.active)||f.point&&(!d.point||!f.point.eq(d.point)))return!1;if(f.to>s)return!0;f.next(),d.next()}}static spans(e,t,i,s,o=-1){let l=new Xo(e,null,o).goto(t),u=t,f=l.openStart;for(;;){let d=Math.min(l.to,i);if(l.point){let p=l.activeForPoint(l.to),g=l.pointFrom<t?p.length+1:l.point.startSide<0?p.length:Math.min(p.length,f);s.point(u,d,l.point,p,g,l.pointRank),f=Math.min(l.openEnd(d),p.length)}else d>u&&(s.span(u,d,l.active,f),f=l.openEnd(d));if(l.to>i)return f+(l.point&&l.to>i?1:0);u=l.to,l.next()}}static of(e,t=!1){let i=new sr;for(let s of e instanceof kg?[e]:t?m3(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Ue.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Ue.empty;s=s.nextLayer)t=new Ue(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ue.empty=new Ue([],[],null,-1);function m3(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Ag(e,i)>0)return n.slice().sort(Ag);e=i}return n}Ue.empty.nextLayer=Ue.empty;class sr{finishChunk(e){this.chunks.push(new b0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new sr)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ue.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ue.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function aw(n,e,t){let i=new Map;for(let o of n)for(let l=0;l<o.chunk.length;l++)o.chunk[l].maxPoint<=0&&i.set(o.chunk[l],o.chunkPos[l]);let s=new Set;for(let o of e)for(let l=0;l<o.chunk.length;l++){let u=i.get(o.chunk[l]);u!=null&&(t?t.mapPos(u):u)==o.chunkPos[l]&&!t?.touchesRange(u,u+o.chunk[l].length)&&s.add(o.chunk[l])}return s}class K_{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ml{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let l=e[o];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&s.push(new K_(l,t,i,o));return s.length==1?s[0]:new ml(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)zm(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)zm(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),zm(this.heap,0)}}}function zm(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Xo{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ml.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){gf(this.active,e),gf(this.activeTo,e),gf(this.activeRank,e),this.minActive=lw(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||s-this.activeTo[t])>0;)t++;yf(this.active,t,i),yf(this.activeTo,t,s),yf(this.activeRank,t,o),e&&yf(e,t,this.cursor.from),this.minActive=lw(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&gf(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function ow(n,e,t,i,s,o){n.goto(e),t.goto(i);let l=i+s,u=i,f=i-e;for(;;){let d=n.to+f-t.to,p=d||n.endSide-t.endSide,g=p<0?n.to+f:t.to,y=Math.min(g,l);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Eg(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(u,y,n.point,t.point):y>u&&!Eg(n.active,t.active)&&o.compareRange(u,y,n.active,t.active),g>l)break;(d||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(g),u=g,p<=0&&n.next(),p>=0&&t.next()}}function Eg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function gf(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function yf(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function lw(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function Ga(n,e,t=n.length){let i=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Bt(n,s));return i}function Mg(n,e,t,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==n.length)break;o+=n.charCodeAt(s)==9?t-o%t:1,s=Bt(n,s)}return i===!0?-1:n.length}const Og="",cw=typeof Symbol>"u"?"__"+Og:Symbol.for(Og),Dg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wr{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function o(l,u,f,d){let p=[],g=/^@(\w+)\b/.exec(l[0]),y=g&&g[1]=="keyframes";if(g&&u==null)return f.push(l[0]+";");for(let b in u){let S=u[b];if(/&/.test(b))o(b.split(/,\s*/).map(C=>l.map(x=>C.replace(/&/,x))).reduce((C,x)=>C.concat(x)),S,f);else if(S&&typeof S=="object"){if(!g)throw new RangeError("The value of a property ("+b+") should be a primitive value.");o(s(b),S,p,y)}else S!=null&&p.push(b.replace(/_.*/,"").replace(/[A-Z]/g,C=>"-"+C.toLowerCase())+": "+S+";")}(p.length||y)&&f.push((i&&!g&&!d?l.map(i):l).join(", ")+" {"+p.join(" ")+"}")}for(let l in e)o(s(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=uw[cw]||1;return uw[cw]=e+1,Og+e.toString(36)}static mount(e,t,i){let s=e[Dg],o=i&&i.nonce;s?o&&s.setNonce(o):s=new g3(e,o),s.mount(Array.isArray(t)?t:[t],e)}}let fw=new Map;class g3{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=fw.get(i);if(o)return e[Dg]=o;this.sheet=new s.CSSStyleSheet,fw.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Dg]=this}mount(e,t){let i=this.sheet,s=0,o=0;for(let l=0;l<e.length;l++){let u=e[l],f=this.modules.indexOf(u);if(f<o&&f>-1&&(this.modules.splice(f,1),o--,f=-1),f==-1){if(this.modules.splice(o++,0,u),i)for(let d=0;d<u.rules.length;d++)i.insertRule(u.rules[d],s++)}else{for(;o<f;)s+=this.modules[o++].rules.length;s+=u.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let l="";for(let f=0;f<this.modules.length;f++)l+=this.modules[f].getRules()+`
`;this.styleTag.textContent=l;let u=t.head||t;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Gr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y3=typeof navigator<"u"&&/Mac/.test(navigator.platform),v3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xt=0;Xt<10;Xt++)Gr[48+Xt]=Gr[96+Xt]=String(Xt);for(var Xt=1;Xt<=24;Xt++)Gr[Xt+111]="F"+Xt;for(var Xt=65;Xt<=90;Xt++)Gr[Xt]=String.fromCharCode(Xt+32),gl[Xt]=String.fromCharCode(Xt);for(var $m in Gr)gl.hasOwnProperty($m)||(gl[$m]=Gr[$m]);function b3(n){var e=y3&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||v3&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gl:Gr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function rt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)X_(n,arguments[e]);return n}function X_(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)X_(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let si=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Rg=typeof document<"u"?document:{documentElement:{style:{}}};const Ng=/Edge\/(\d+)/.exec(si.userAgent),Q_=/MSIE \d/.test(si.userAgent),zg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(si.userAgent),Bh=!!(Q_||zg||Ng),hw=!Bh&&/gecko\/(\d+)/i.test(si.userAgent),Bm=!Bh&&/Chrome\/(\d+)/.exec(si.userAgent),S3="webkitFontSmoothing"in Rg.documentElement.style,$g=!Bh&&/Apple Computer/.test(si.vendor),dw=$g&&(/Mobile\/\w+/.test(si.userAgent)||si.maxTouchPoints>2);var be={mac:dw||/Mac/.test(si.platform),windows:/Win/.test(si.platform),linux:/Linux|X11/.test(si.platform),ie:Bh,ie_version:Q_?Rg.documentMode||6:zg?+zg[1]:Ng?+Ng[1]:0,gecko:hw,gecko_version:hw?+(/Firefox\/(\d+)/.exec(si.userAgent)||[0,0])[1]:0,chrome:!!Bm,chrome_version:Bm?+Bm[1]:0,ios:dw,android:/Android\b/.test(si.userAgent),webkit_version:S3?+(/\bAppleWebKit\/(\d+)/.exec(si.userAgent)||[0,0])[1]:0,safari:$g,safari_version:$g?+(/\bVersion\/(\d+(\.\d+)?)/.exec(si.userAgent)||[0,0])[1]:0,tabSize:Rg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function S0(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Jf=Object.create(null);function x0(n,e,t){if(n==e)return!0;n||(n=Jf),e||(e=Jf);let i=Object.keys(n),s=Object.keys(e);if(i.length-0!=s.length-0)return!1;for(let o of i)if(o!=t&&(s.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function x3(n,e){for(let t=n.attributes.length-1;t>=0;t--){let i=n.attributes[t].name;e[i]==null&&n.removeAttribute(i)}for(let t in e){let i=e[t];t=="style"?n.style.cssText=i:n.getAttribute(t)!=i&&n.setAttribute(t,i)}}function pw(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function w3(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Rn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Qt=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Qt||(Qt={}));class Ae extends Ir{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Pl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Os(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:l}=Z_(e,t);i=(o?t?-3e8:-1:5e8)-1,s=(l?t?2e8:1:-6e8)+1}return new Os(e,i,s,t,e.widget||null,!0)}static line(e){return new ql(e)}static set(e,t=!1){return Ue.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ae.none=Ue.empty;class Pl extends Ae{constructor(e){let{start:t,end:i}=Z_(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?S0(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Jf}eq(e){return this==e||e instanceof Pl&&this.tagName==e.tagName&&x0(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Pl.prototype.point=!1;class ql extends Ae{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ql&&this.spec.class==e.spec.class&&x0(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ql.prototype.mapMode=ai.TrackBefore;ql.prototype.point=!0;class Os extends Ae{constructor(e,t,i,s,o,l){super(t,i,o,e),this.block=s,this.isReplace=l,this.mapMode=s?t<=0?ai.TrackBefore:ai.TrackAfter:ai.TrackDel}get type(){return this.startSide!=this.endSide?Qt.WidgetRange:this.startSide<=0?Qt.WidgetBefore:Qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Os&&_3(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Os.prototype.point=!0;function Z_(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function _3(n,e){return n==e||!!(n&&e&&n.compare(e))}function Da(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class yl extends Ir{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof yl&&this.tagName==e.tagName&&x0(this.attributes,e.attributes)}static create(e){return new yl(e.tagName,e.attributes||Jf)}static set(e,t=!1){return Ue.of(e,t)}}yl.prototype.startSide=yl.prototype.endSide=-1;function vl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Bg(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Hf(n,e){if(!e.anchorNode)return!1;try{return Bg(n,e.anchorNode)}catch{return!1}}function ol(n){return n.nodeType==3?Sl(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ll(n,e,t,i){return t?mw(n,e,t,i,-1)||mw(n,e,t,i,1):!1}function Yr(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function eh(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function mw(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:ar(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Yr(n)+(s<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?ar(n):0}else return!1}}function ar(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function bl(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function T3(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function J_(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function C3(n,e,t,i,s,o,l,u){let f=n.ownerDocument,d=f.defaultView||window;for(let p=n,g=!1;p&&!g;)if(p.nodeType==1){let y,b=p==f.body,S=1,C=1;if(b)y=T3(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let w=p.getBoundingClientRect();({scaleX:S,scaleY:C}=J_(p,w)),y={left:w.left,right:w.left+p.clientWidth*S,top:w.top,bottom:w.top+p.clientHeight*C}}let x=0,_=0;if(s=="nearest")e.top<y.top?(_=e.top-(y.top+l),t>0&&e.bottom>y.bottom+_&&(_=e.bottom-y.bottom+l)):e.bottom>y.bottom&&(_=e.bottom-y.bottom+l,t<0&&e.top-_<y.top&&(_=e.top-(y.top+l)));else{let w=e.bottom-e.top,T=y.bottom-y.top;_=(s=="center"&&w<=T?e.top+w/2-T/2:s=="start"||s=="center"&&t<0?e.top-l:e.bottom-T+l)-y.top}if(i=="nearest"?e.left<y.left?(x=e.left-(y.left+o),t>0&&e.right>y.right+x&&(x=e.right-y.right+o)):e.right>y.right&&(x=e.right-y.right+o,t<0&&e.left<y.left+x&&(x=e.left-(y.left+o))):x=(i=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:i=="start"==u?e.left-o:e.right-(y.right-y.left)+o)-y.left,x||_)if(b)d.scrollBy(x,_);else{let w=0,T=0;if(_){let E=p.scrollTop;p.scrollTop+=_/C,T=(p.scrollTop-E)*C}if(x){let E=p.scrollLeft;p.scrollLeft+=x/S,w=(p.scrollLeft-E)*S}e={left:e.left-w,top:e.top-T,right:e.right-w,bottom:e.bottom-T},w&&Math.abs(w-x)<1&&(i="nearest"),T&&Math.abs(T-_)<1&&(s="nearest")}if(b)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function k3(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class A3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?ar(t):0),i,Math.min(e.focusOffset,i?ar(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let Ss=null;be.safari&&be.safari_version>=26&&(Ss=!1);function eT(n){if(n.setActive)return n.setActive();if(Ss)return n.focus(Ss);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ss==null?{get preventScroll(){return Ss={preventScroll:!0},!0}}:void 0),!Ss){Ss=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],o=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let gw;function Sl(n,e,t=e){let i=gw||(gw=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Ra(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,n.dispatchEvent(o);let l=new KeyboardEvent("keyup",s);return l.synthetic=!0,n.dispatchEvent(l),o.defaultPrevented||l.defaultPrevented}function E3(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function M3(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,ar(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=ar(t))}else{if(t==n)return!0;i=Yr(t),t=t.parentNode}}function tT(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function iT(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=ar(t)}else if(t.parentNode&&!eh(t))i=Yr(t),t=t.parentNode;else return null}}function nT(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!eh(t))i=Yr(t)+1,t=t.parentNode;else return null}}class an{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new an(e.parentNode,Yr(e),t)}static after(e,t){return new an(e.parentNode,Yr(e)+1,t)}}var at=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(at||(at={}));const Ds=at.LTR,w0=at.RTL;function rT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const O3=rT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),D3=rT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Lg=Object.create(null),bn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Lg[e]=t,Lg[t]=-e}function sT(n){return n<=247?O3[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?D3[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const R3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ir{get dir(){return this.level%2?w0:Ds}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let o=-1;for(let l=0;l<e.length;l++){let u=e[l];if(u.from<=t&&u.to>=t){if(u.level==i)return l;(o<0||(s!=0?s<0?u.from<t:u.to>t:e[o].level>u.level))&&(o=l)}}if(o<0)throw new RangeError("Index out of range");return o}}function aT(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!aT(i.inner,s.inner))return!1}return!0}const st=[];function N3(n,e,t,i,s){for(let o=0;o<=i.length;o++){let l=o?i[o-1].to:e,u=o<i.length?i[o].from:t,f=o?256:s;for(let d=l,p=f,g=f;d<u;d++){let y=sT(n.charCodeAt(d));y==512?y=p:y==8&&g==4&&(y=16),st[d]=y==4?2:y,y&7&&(g=y),p=y}for(let d=l,p=f,g=f;d<u;d++){let y=st[d];if(y==128)d<u-1&&p==st[d+1]&&p&24?y=st[d]=p:st[d]=256;else if(y==64){let b=d+1;for(;b<u&&st[b]==64;)b++;let S=d&&p==8||b<t&&st[b]==8?g==1?1:8:256;for(let C=d;C<b;C++)st[C]=S;d=b-1}else y==8&&g==1&&(st[d]=1);p=y,y&7&&(g=y)}}}function z3(n,e,t,i,s){let o=s==1?2:1;for(let l=0,u=0,f=0;l<=i.length;l++){let d=l?i[l-1].to:e,p=l<i.length?i[l].from:t;for(let g=d,y,b,S;g<p;g++)if(b=Lg[y=n.charCodeAt(g)])if(b<0){for(let C=u-3;C>=0;C-=3)if(bn[C+1]==-b){let x=bn[C+2],_=x&2?s:x&4?x&1?o:s:0;_&&(st[g]=st[bn[C]]=_),u=C;break}}else{if(bn.length==189)break;bn[u++]=g,bn[u++]=y,bn[u++]=f}else if((S=st[g])==2||S==1){let C=S==s;f=C?0:1;for(let x=u-3;x>=0;x-=3){let _=bn[x+2];if(_&2)break;if(C)bn[x+2]|=2;else{if(_&4)break;bn[x+2]|=4}}}}}function $3(n,e,t,i){for(let s=0,o=i;s<=t.length;s++){let l=s?t[s-1].to:n,u=s<t.length?t[s].from:e;for(let f=l;f<u;){let d=st[f];if(d==256){let p=f+1;for(;;)if(p==u){if(s==t.length)break;p=t[s++].to,u=s<t.length?t[s].from:e}else if(st[p]==256)p++;else break;let g=o==1,y=(p<e?st[p]:i)==1,b=g==y?g?1:2:i;for(let S=p,C=s,x=C?t[C-1].to:n;S>f;)S==x&&(S=t[--C].from,x=C?t[C-1].to:n),st[--S]=b;f=p}else o=d,f++}}}function jg(n,e,t,i,s,o,l){let u=i%2?2:1;if(i%2==s%2)for(let f=e,d=0;f<t;){let p=!0,g=!1;if(d==o.length||f<o[d].from){let C=st[f];C!=u&&(p=!1,g=C==16)}let y=!p&&u==1?[]:null,b=p?i:i+1,S=f;e:for(;;)if(d<o.length&&S==o[d].from){if(g)break e;let C=o[d];if(!p)for(let x=C.to,_=d+1;;){if(x==t)break e;if(_<o.length&&o[_].from==x)x=o[_++].to;else{if(st[x]==u)break e;break}}if(d++,y)y.push(C);else{C.from>f&&l.push(new ir(f,C.from,b));let x=C.direction==Ds!=!(b%2);Pg(n,x?i+1:i,s,C.inner,C.from,C.to,l),f=C.to}S=C.to}else{if(S==t||(p?st[S]!=u:st[S]==u))break;S++}y?jg(n,f,S,i+1,s,y,l):f<S&&l.push(new ir(f,S,b)),f=S}else for(let f=t,d=o.length;f>e;){let p=!0,g=!1;if(!d||f>o[d-1].to){let C=st[f-1];C!=u&&(p=!1,g=C==16)}let y=!p&&u==1?[]:null,b=p?i:i+1,S=f;e:for(;;)if(d&&S==o[d-1].to){if(g)break e;let C=o[--d];if(!p)for(let x=C.from,_=d;;){if(x==e)break e;if(_&&o[_-1].to==x)x=o[--_].from;else{if(st[x-1]==u)break e;break}}if(y)y.push(C);else{C.to<f&&l.push(new ir(C.to,f,b));let x=C.direction==Ds!=!(b%2);Pg(n,x?i+1:i,s,C.inner,C.from,C.to,l),f=C.from}S=C.from}else{if(S==e||(p?st[S-1]!=u:st[S-1]==u))break;S--}y?jg(n,S,f,i+1,s,y,l):S<f&&l.push(new ir(S,f,b)),f=S}}function Pg(n,e,t,i,s,o,l){let u=e%2?2:1;N3(n,s,o,i,u),z3(n,s,o,i,u),$3(s,o,i,u),jg(n,s,o,e,t,i,l)}function B3(n,e,t){if(!n)return[new ir(0,0,e==w0?1:0)];if(e==Ds&&!t.length&&!R3.test(n))return oT(n.length);if(t.length)for(;n.length>st.length;)st[st.length]=256;let i=[],s=e==Ds?0:1;return Pg(n,s,s,t,0,n.length,i),i}function oT(n){return[new ir(0,n,0)]}let lT="";function L3(n,e,t,i,s){var o;let l=i.head-n.from,u=ir.find(e,l,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),f=e[u],d=f.side(s,t);if(l==d){let y=u+=s?1:-1;if(y<0||y>=e.length)return null;f=e[u=y],l=f.side(!s,t),d=f.side(s,t)}let p=Bt(n.text,l,f.forward(s,t));(p<f.from||p>f.to)&&(p=d),lT=n.text.slice(Math.min(l,p),Math.max(l,p));let g=u==(s?e.length-1:0)?null:e[u+(s?1:-1)];return g&&p==d&&g.level+(s?0:1)<f.level?ce.cursor(g.side(!s,t)+n.from,g.forward(s,t)?1:-1,g.level):ce.cursor(p+n.from,f.forward(s,t)?-1:1,f.level)}function j3(n,e,t){for(let i=e;i<t;i++){let s=sT(n.charCodeAt(i));if(s==1)return Ds;if(s==2||s==4)return w0}return Ds}const cT=Se.define(),uT=Se.define(),fT=Se.define(),hT=Se.define(),qg=Se.define(),dT=Se.define(),pT=Se.define(),_0=Se.define(),T0=Se.define(),mT=Se.define({combine:n=>n.some(e=>e)}),gT=Se.define({combine:n=>n.some(e=>e)}),yT=Se.define();class Na{constructor(e,t="nearest",i="nearest",s=5,o=5,l=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=l}map(e){return e.empty?this:new Na(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Na(ce.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const vf=ze.define({map:(n,e)=>n.map(e)}),vT=ze.define();function bi(n,e,t){let i=n.facet(hT);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const tr=Se.define({combine:n=>n.length?n[0]:!0});let P3=0;const ka=Se.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class kt{constructor(e,t,i,s,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(ka.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ka.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:o,decorations:l}=t||{};return new kt(P3++,e,i,s,u=>{let f=[];return l&&f.push(xl.of(d=>{let p=d.plugin(u);return p?l(p):Ae.none})),o&&f.push(o(u)),f})}static fromClass(e,t){return kt.define((i,s)=>new e(i,s),t)}}class Lm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(bi(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){bi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){bi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const bT=Se.define(),C0=Se.define(),xl=Se.define(),ST=Se.define(),xT=Se.define(),Hl=Se.define(),wT=Se.define();function yw(n,e){let t=n.state.facet(wT);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),s=[];return Ue.spans(i,e.from,e.to,{point(){},span(o,l,u,f){let d=o-e.from,p=l-e.from,g=s;for(let y=u.length-1;y>=0;y--,f--){let b=u[y].spec.bidiIsolate,S;if(b==null&&(b=j3(e.text,d,p)),f>0&&g.length&&(S=g[g.length-1]).to==d&&S.direction==b)S.to=p,g=S.inner;else{let C={from:d,to:p,direction:b,inner:[]};g.push(C),g=C.inner}}}}),s}const _T=Se.define();function k0(n){let e=0,t=0,i=0,s=0;for(let o of n.state.facet(_T)){let l=o(n);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(t=Math.max(t,l.right)),l.top!=null&&(i=Math.max(i,l.top)),l.bottom!=null&&(s=Math.max(s,l.bottom)))}return{left:e,right:t,top:i,bottom:s}}const tl=Se.define();class Fi{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new Fi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,o=0,l=0;;){let u=s<e.length?e[s].fromB:1e9,f=o<t.length?t[o]:1e9,d=Math.min(u,f);if(d==1e9)break;let p=d+l,g=d,y=p;for(;;)if(o<t.length&&t[o]<=g){let b=t[o+1];o+=2,g=Math.max(g,b);for(let S=s;S<e.length&&e[S].fromB<=g;S++)l=e[S].toA-e[S].toB;y=Math.max(y,b+l)}else if(s<e.length&&e[s].fromB<=g){let b=e[s++];g=Math.max(g,b.toB),y=Math.max(y,b.toA),l=b.toA-b.toB}else break;i.push(new Fi(p,y,d,g))}return i}}class th{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=$t.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,l,u,f)=>s.push(new Fi(o,l,u,f))),this.changedRanges=s}static create(e,t,i){return new th(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const q3=[];class jt{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return q3}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&x3(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let s of this.children){if(s==e)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=Yr(this.dom),s=this.length?e>0:t>0;return new an(this.parent.dom,i+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof jh)return e;return null}static get(e){return e.cmTile}}class Lh extends jt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,i=null,s,o=e?.node==t?e:null,l=0;for(let u of this.children){if(u.sync(e),l+=u.length+u.breakAfter,s=i?i.nextSibling:t.firstChild,o&&s!=u.dom&&(o.written=!0),u.dom.parentNode==t)for(;s&&s!=u.dom;)s=vw(s);else t.insertBefore(u.dom,s);i=u.dom}for(s=i?i.nextSibling:t.firstChild,o&&s&&(o.written=!0);s;)s=vw(s);this.length=l}}function vw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class jh extends Lh{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=jt.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,s=0,o=0;;)if(s==i.children.length){if(!t.length)return;i=i.parent,i.breakAfter&&o++,s=t.pop()}else{let l=i.children[s++];if(l instanceof Ur)t.push(s),i=l,s=0;else{let u=o+l.length,f=e(l,o);if(f!==void 0)return f;o=u+l.breakAfter}}}resolveBlock(e,t){let i,s=-1,o,l=-1;if(this.blockTiles((u,f)=>{let d=f+u.length;if(e>=f&&e<=d){if(u.isWidget()&&t>=-1&&t<=1){if(u.flags&32)return!0;u.flags&16&&(i=void 0)}(f<e||e==d&&(t<-1?u.length:u.covers(1)))&&(!i||!u.isWidget()&&i.isWidget())&&(i=u,s=e-f),(d>e||e==f&&(t>1?u.length:u.covers(-1)))&&(!o||!u.isWidget()&&o.isWidget())&&(o=u,l=e-f)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&t<0||!o?{tile:i,offset:s}:{tile:o,offset:l}}}class Ur extends Lh{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let i=new Ur(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class ja extends Lh{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,i){let s=new ja(t||document.createElement("div"),e);return(!t||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,t,i){let s=null,o=-1,l=null,u=-1;function f(p,g){for(let y=0,b=0;y<p.children.length&&b<=g;y++){let S=p.children[y],C=b+S.length;C>=g&&(S.isComposite()?f(S,g-b):(!l||l.isHidden&&(t>0||i&&U3(l,S)))&&(C>g||S.flags&32)?(l=S,u=g-b):(b<g||S.flags&16&&!S.isHidden)&&(s=S,o=g-b)),b=C}}f(this,e);let d=(t<0?s:l)||s||l;return d?{tile:d,offset:d==s?o:u}:null}coordsIn(e,t){let i=this.resolveInline(e,t,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),t):H3(this)}domIn(e,t){let i=this.resolveInline(e,t);if(i){let{tile:s,offset:o}=i;if(this.dom.contains(s.dom))return s.isText()?new an(s.dom,Math.min(s.dom.nodeValue.length,o)):s.domPosFor(o,s.flags&16?1:s.flags&32?-1:t);let l=i.tile.parent,u=!1;for(let f of l.children){if(u)return new an(f.dom,0);f==i.tile&&(u=!0)}}return new an(this.dom,0)}}function H3(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ol(e);return t[t.length-1]||null}function U3(n,e){let t=n.coordsIn(0,1),i=e.coordsIn(0,1);return t&&i&&i.top<t.bottom}class vi extends Lh{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let i=new vi(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class Ts extends jt{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let i=this.dom.nodeValue.length;e>i&&(e=i);let s=e,o=e,l=0;e==0&&t<0||e==i&&t>=0?be.chrome||be.gecko||(e?(s--,l=1):o<i&&(o++,l=-1)):t<0?s--:o<i&&o++;let u=Sl(this.dom,s,o).getClientRects();if(!u.length)return null;let f=u[(l?l<0:t>=0)?0:u.length-1];return be.safari&&!l&&f.width==0&&(f=Array.prototype.find.call(u,d=>d.width)||f),l?bl(f,l<0):f||null}static of(e,t){let i=new Ts(t||document.createTextNode(e),e);return t||(i.flags|=2),i}}class Pa extends jt{constructor(e,t,i,s){super(e,t,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,i){let s=this.widget.coordsAt(this.dom,e,t);if(s)return s;if(i)return bl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),l=null;if(!o.length)return null;let u=this.flags&16?!0:this.flags&32?!1:e>0;for(let f=u?o.length-1:0;l=o[f],!(e>0?f==0:f==o.length-1||l.top<l.bottom);f+=u?-1:1);return bl(l,!u)}}get overrideDOMText(){if(!this.length)return Ke.empty;let{root:e}=this;if(!e)return Ke.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,i,s,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new Pa(o,i,e,s)}}class ih extends jt{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!1}get overrideDOMText(){return Ke.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class V3{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:s,index:o,beforeBreak:l,parents:u}=this;for(;e||t>0;)if(s.isComposite())if(l){if(!e)break;i&&i.break(),e--,l=!1}else if(o==s.children.length){if(!e&&!u.length)break;i&&i.leave(s),l=!!s.breakAfter,{tile:s,index:o}=u.pop(),o++}else{let f=s.children[o],d=f.breakAfter;(t>0?f.length<=e:f.length<e)&&(!i||i.skip(f,0,f.length)!==!1||!f.isComposite)?(l=!!d,o++,e-=f.length):(u.push({tile:s,index:o}),s=f,o=0,i&&f.isComposite()&&i.enter(f))}else if(o==s.length)l=!!s.breakAfter,{tile:s,index:o}=u.pop(),o++;else if(e){let f=Math.min(e,s.length-o);i&&i.skip(s,o,o+f),e-=f,o+=f}else break;return this.tile=s,this.index=o,this.beforeBreak=l,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class I3{constructor(e,t,i,s){this.from=e,this.to=t,this.wrapper=i,this.rank=s}}class W3{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,s){var o;this.flushBuffer();let l=this.ensureMarks(t,i),u=l.lastChild;if(u&&u.isText()&&!(u.flags&8)){this.cache.reused.set(u,2);let f=l.children[l.children.length-1]=new Ts(u.dom,u.text+e);f.parent=l}else l.append(s||Ts.of(e,(o=this.cache.find(Ts))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?jm(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let s=i;for(let l=t.marks.length-1;l>=0;l--){let u=t.marks[l],f=s.lastChild;if(f instanceof vi&&f.mark.eq(u.mark))f.dom!=u.dom&&f.setDOM(jm(u.dom)),s=f;else{if(this.cache.reused.get(u)){let p=jt.get(u.dom);p&&p.setDOM(jm(u.dom))}let d=vi.of(u.mark,u.dom);s.append(d),s=d}this.cache.reused.set(u,2)}let o=new Ts(e.text,e.text.nodeValue);o.flags|=8,s.append(o)}addInlineWidget(e,t,i){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let o=this.ensureMarks(t,i);!s&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=TT);let s=ja.start(e,t||((i=this.cache.find(ja))===null||i===void 0?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let s=this.curLine;for(let o=e.length-1;o>=0;o--){let l=e[o],u;if(t>0&&(u=s.lastChild)&&u instanceof vi&&u.mark.eq(l))s=u,t--;else{let f=vi.of(l,(i=this.cache.find(vi,d=>d.mark.eq(l)))===null||i===void 0?void 0:i.dom);s.append(f),s=f,t=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!bw(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(be.ios&&bw(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Pm,0,32)||new Pa(Pm.toDOM(),0,Pm,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new I3(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to)<0;)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let s=t.lastChild;if(i.from<this.pos&&s instanceof Ur&&s.wrapper.eq(i.wrapper))t=s;else{let o=Ur.of(i.wrapper,(e=this.cache.find(Ur,l=>l.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(ih,void 0,1);return i&&(i.flags=t),i||new ih(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class G3{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skipCount);if(this.skipCount=0,l)throw new Error("Ran out of text content when drawing inline views");this.text=s;let u=this.textOff=Math.min(e,s.length);return o?null:s.slice(0,u)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}}const nh=[Pa,ja,Ts,vi,ih,Ur,jh];for(let n=0;n<nh.length;n++)nh[n].bucket=n;class Y3{constructor(e){this.view=e,this.buckets=nh.map(()=>[]),this.index=nh.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let s=e.bucket,o=this.buckets[s],l=this.index[s];for(let u=o.length-1;u>=0;u--){let f=(u+l)%o.length,d=o[f];if((!t||t(d))&&!this.reused.has(d))return o.splice(f,1),f<l&&this.index[s]--,this.reused.set(d,i),d}return null}findWidget(e,t,i){let s=this.buckets[0];if(s.length)for(let o=0,l=0;;o++){if(o==s.length){if(l)return null;l=1,o=0}let u=s[o];if(!this.reused.has(u)&&(l==0?u.widget.compare(e):u.widget.constructor==e.constructor&&e.updateDOM(u.dom,this.view)))return s.splice(o,1),o<this.index[0]&&this.index[0]--,this.reused.set(u,1),u.length=t,u.flags=u.flags&-498|i,u}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}}class F3{constructor(e,t,i,s,o){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new Y3(e),this.text=new G3(e.state.doc),this.builder=new W3(this.cache,new jh(e,e.contentDOM),Ue.iter(i)),this.cache.reused.set(t,2),this.old=new V3(t)}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let s=0,o=0,l=0;;){let u=l<e.length?e[l++]:null,f=u?u.fromA:this.old.root.length;if(f>s){let d=f-s;this.preserve(d,!l,!u),s=f,o+=d}if(!u)break;this.forward(u.fromA,u.toA),t&&u.fromA<=t.range.fromA&&u.toA>=t.range.toA?(this.emit(o,t.range.fromB),this.builder.addComposition(t,i),this.emit(t.range.toB,u.toB)):this.emit(o,u.toB),o=u.toB,s=u.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let s=Q3(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(l,u,f)=>{if(l.isWidget())if(this.openWidget)this.builder.continueWidget(f-u);else{let d=f>0||u<l.length?Pa.of(l.widget,this.view,f-u,l.flags&496,this.cache.maybeReuse(l)):this.cache.reuse(l);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,s,o),o=s.length)}else if(l.isText())this.builder.ensureLine(null),!u&&f==l.length?this.builder.addText(l.text,s,o,this.cache.reuse(l)):(this.cache.add(l),this.builder.addText(l.text.slice(u,f),s,o)),o=s.length;else if(l.isLine())l.flags&=-2,this.cache.reused.set(l,1),this.builder.addLine(l);else if(l instanceof ih)this.cache.add(l);else if(l instanceof vi)this.builder.ensureLine(null),this.builder.addMark(l,s,o),this.cache.reused.set(l,1),o=s.length;else return!1;this.openWidget=!1},enter:l=>{l.isLine()?this.builder.addLineStart(l.attrs,this.cache.maybeReuse(l)):(this.cache.add(l),l instanceof vi&&s.unshift(l.mark)),this.openWidget=!1},leave:l=>{l.isLine()?s.length&&(s.length=o=0):l instanceof vi&&(s.shift(),o=Math.min(o,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,s=this.builder,o=0,l=Ue.spans(this.decorations,e,t,{point:(u,f,d,p,g,y)=>{if(d instanceof Os){if(this.disallowBlockEffectsFor[y]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(f>this.view.state.doc.lineAt(u).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,g>p.length)s.continueWidget(f-u);else{let b=d.widget||(d.block?qa.block:qa.inline),S=K3(d),C=this.cache.findWidget(b,f-u,S)||Pa.of(b,this.view,f-u,S);d.block?(d.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(C)):(s.ensureLine(i),s.addInlineWidget(C,p,g))}i=null}else i=X3(i,d);f>u&&this.text.skip(f-u)},span:(u,f,d,p)=>{for(let g=u;g<f;){let y=this.text.next(Math.min(512,f-g));y==null?(s.addLineStartIfNotCovered(i),s.addBreak(),g++):(s.ensureLine(i),s.addText(y,d,p),g+=y.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=l>o,this.openMarks=l}forward(e,t){this.old.advance(t-e,1,{skip:(i,s,o)=>{(i.isText()||o==i.length)&&this.cache.add(i)},enter:i=>this.cache.add(i),leave:()=>{},break:()=>{}})}getCompositionContext(e){let t=[],i=null;for(let s=e.parentNode;;s=s.parentNode){let o=jt.get(s);if(s==this.view.contentDOM)break;o instanceof vi?t.push(o):o?.isLine()?i=o:s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new ja(s,TT):t.push(vi.of(new Pl({tagName:s.nodeName.toLowerCase(),attributes:w3(s)}),s))}return{line:i,marks:t}}}function bw(n,e){let t=i=>{for(let s of i.children)if((e?s.isText():s.length)||t(s))return!0;return!1};return t(n)}function K3(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const TT={class:"cm-line"};function X3(n,e){let t=e.spec.attributes,i=e.spec.class;return!t&&!i||(n||(n={class:"cm-line"}),t&&S0(t,n),i&&(n.class+=" "+i)),n}function Q3(n){let e=[];for(let t=n.parents.length;t>1;t--){let i=t==n.parents.length?n.tile:n.parents[t].tile;i instanceof vi&&e.push(i.mark)}return e}function jm(n){let e=jt.get(n);return e&&e.setDOM(n.cloneNode()),n}class qa extends Rn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}qa.inline=new qa("span");qa.block=new qa("div");const Pm=new class extends Rn{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class Sw{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Ae.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new jh(e,e.contentDOM),this.updateInner([new Fi(0,0,0,e.state.doc.length)],null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!az(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?J3(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;i=new Fi(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(be.ie||be.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,u=this.blockWrappers;this.updateDeco();let f=iz(l,this.decorations,e.changes);f.length&&(i=Fi.extendWithRanges(i,f));let d=rz(u,this.blockWrappers,e.changes);return d.length&&(i=Fi.extendWithRanges(i,d)),o&&!i.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let l=this.tile,u=new F3(this.view,l,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=u.run(e,t),Hg(l,u.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=be.chrome||be.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof qm&&s.push(o.dom);i.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(vT)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,o=s==i,l=!o&&!(this.view.state.facet(tr)||i.tabIndex>-1)&&Hf(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(o||t||l))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d,p;if(f.empty?p=d=this.inlineDOMNearPos(f.anchor,f.assoc||1):(p=this.inlineDOMNearPos(f.head,f.head==f.from?1:-1),d=this.inlineDOMNearPos(f.anchor,f.anchor==f.from?1:-1)),be.gecko&&f.empty&&!this.hasComposition&&Z3(d)){let y=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(y,d.node.childNodes[d.offset]||null)),d=p=new an(y,0),u=!0}let g=this.view.observer.selectionRange;(u||!g.focusNode||(!ll(d.node,d.offset,g.anchorNode,g.anchorOffset)||!ll(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,f))&&(this.view.observer.ignore(()=>{be.android&&be.chrome&&i.contains(g.focusNode)&&sz(g.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let y=vl(this.view.root);if(y)if(f.empty){if(be.gecko){let b=ez(d.node,d.offset);if(b&&b!=3){let S=(b==1?iT:nT)(d.node,d.offset);S&&(d=new an(S.node,S.offset))}}y.collapse(d.node,d.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(d.node,d.offset);try{y.extend(p.node,p.offset)}catch{}}else{let b=document.createRange();f.anchor>f.head&&([d,p]=[p,d]),b.setEnd(p.node,p.offset),b.setStart(d.node,d.offset),y.removeAllRanges(),y.addRange(b)}l&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new an(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new an(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&ll(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=vl(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let l=this.lineAt(t.head,t.assoc);if(!l)return;let u=l.posAtStart;if(t.head==u||t.head==u+l.length)return;let f=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!f||!d||f.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(p.node,p.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&i.collapse(s,o)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[t];else{let l=ar(e)==0?0:t==0?-1:1;for(;;){let u=e.parentNode;if(u==i.dom)break;l==0&&u.firstChild!=u.lastChild&&(e==u.firstChild?l=-1:l=1),e=u}l<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return s;for(;o&&!jt.get(o);)o=o.nextSibling;if(!o)return s+i.length;for(let l=0,u=s;;l++){let f=i.children[l];if(f.dom==o)return u;u+=f.length+f.breakAfter}}else return i.isText()?e==i.dom?s+t:s+(t?i.length:0):s}domAtPos(e,t){let{tile:i,offset:s}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(s,t)}inlineDOMNearPos(e,t){let i,s=-1,o=!1,l,u=-1,f=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=e)return!0;d.flags&16&&(o=!0)}else{let g=p+d.length;if(p<=e&&(i=d,s=e-p,o=g<e),g>=e&&!l&&(l=d,u=e-p,f=p>e),p>e&&l)return!0}}),!i&&!l?this.domAtPos(e,t):(o&&l?i=null:f&&i&&(l=null),i&&t<0||!l?i.domIn(s,t):l.domIn(u,t))}coordsAt(e,t){let{tile:i,offset:s}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof qm?null:i.coordsInWidget(s,t,!0):i.coordsIn(s,t)}lineAt(e,t){let{tile:i}=this.tile.resolveBlock(e,t);return i.isLine()?i:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function s(o,l){if(o.isComposite())for(let u of o.children){if(u.length>=l){let f=s(u,l);if(f)return f}if(l-=u.length,l<0)break}else if(o.isText()&&l<o.length){let u=Bt(o.text,l);if(u==l)return null;let f=Sl(o.dom,l,u).getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(d==f.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return s(t,i)}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,l=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,f=this.view.textDirection==at.LTR,d=0,p=(g,y,b)=>{for(let S=0;S<g.children.length&&!(y>s);S++){let C=g.children[S],x=y+C.length,_=C.dom.getBoundingClientRect(),{height:w}=_;if(b&&!S&&(d+=_.top-b.top),C instanceof Ur)x>i&&p(C,y,_);else if(y>=i&&(d>0&&t.push(-d),t.push(w+d),d=0,l)){let T=C.dom.lastChild,E=T?ol(T):[];if(E.length){let k=E[E.length-1],O=f?k.right-_.left:_.right-k.left;O>u&&(u=O,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=x)}}b&&S==g.children.length-1&&(d+=b.bottom-_.bottom),y=x+C.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?at.RTL:at.LTR}measureTextSize(){let e=this.tile.blockTiles(l=>{if(l.isLine()&&l.children.length&&l.length<=20){let u=0,f;for(let d of l.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=ol(d.dom);if(p.length!=1)return;u+=p[0].width,f=p[0].height}if(u)return{lineHeight:l.dom.getBoundingClientRect().height,charWidth:u/l.length,textHeight:f}}});if(e)return e;let t=document.createElement("div"),i,s,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let l=ol(t.firstChild)[0];i=t.getBoundingClientRect().height,s=l&&l.width?l.width/27:7,o=l&&l.height?l.height:i,t.remove()}),{lineHeight:i,charWidth:s,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let o=s==t.viewports.length?null:t.viewports[s],l=o?o.from-1:this.view.state.doc.length;if(l>i){let u=(t.lineBlockAt(l).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Ae.replace({widget:new qm(u),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!o)break;i=o.to+1}return Ae.set(e)}updateDeco(){let e=1,t=this.view.state.facet(xl).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(xT).map((o,l)=>{let u=typeof o=="function";return u&&(i=!0),u?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ue.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(ST).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(yT))try{if(d(this.view,e.range,e))return!0}catch(p){bi(this.view.state,p,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=k0(this.view),l={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:u,offsetHeight:f}=this.view.scrollDOM;C3(this.view.scrollDOM,l,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,f),-f),this.view.textDirection==at.LTR)}lineHasWidget(e){let t=i=>i.isWidget()||i.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){Hg(this.tile)}}function Hg(n,e){let t=e?.get(n);if(t!=1){t==null&&n.destroy();for(let i of n.children)Hg(i,e)}}function Z3(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function CT(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=iT(t.focusNode,t.focusOffset),s=nT(t.focusNode,t.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let u=jt.get(s.node);if(!u||u.isText()&&u.text!=s.node.nodeValue)o=s;else if(n.docView.lastCompositionAfterCursor){let f=jt.get(i.node);!f||f.isText()&&f.text!=i.node.nodeValue||(o=s)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let l=e-o.offset;return{from:l,to:l+o.node.nodeValue.length,node:o.node}}function J3(n,e,t){let i=CT(n,t);if(!i)return null;let{node:s,from:o,to:l}=i,u=s.nodeValue;if(/[\n\r]/.test(u)||n.state.doc.sliceString(i.from,i.to)!=u)return null;let f=e.invertedDesc;return{range:new Fi(f.mapPos(o),f.mapPos(l),o,l),text:s}}function ez(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let tz=class{constructor(){this.changes=[]}compareRange(e,t){Da(e,t,this.changes)}comparePoint(e,t){Da(e,t,this.changes)}boundChange(e){Da(e,e,this.changes)}};function iz(n,e,t){let i=new tz;return Ue.compare(n,e,t,i),i.changes}class nz{constructor(){this.changes=[]}compareRange(e,t){Da(e,t,this.changes)}comparePoint(){}boundChange(e){Da(e,e,this.changes)}}function rz(n,e,t){let i=new nz;return Ue.compare(n,e,t,i),i.changes}function sz(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function az(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}class qm extends Rn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function oz(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),o=e-s.from;if(s.length==0)return ce.cursor(e);o==0?t=1:o==s.length&&(t=-1);let l=o,u=o;t<0?l=Bt(s.text,o,!1):u=Bt(s.text,o);let f=i(s.text.slice(l,u));for(;l>0;){let d=Bt(s.text,l,!1);if(i(s.text.slice(d,l))!=f)break;l=d}for(;u<s.length;){let d=Bt(s.text,u);if(i(s.text.slice(u,d))!=f)break;u=d}return ce.range(l+s.from,u+s.from)}function lz(n,e,t,i,s){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let u=n.viewState.heightOracle.textHeight,f=Math.floor((s-t.top-(n.defaultLineHeight-u)*.5)/u);o+=f*n.viewState.heightOracle.lineLength}let l=n.state.sliceDoc(t.from,t.to);return t.from+Mg(l,o,n.state.tabSize)}function Ug(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!s||o.type==Qt.Text&&(s.type!=o.type||(t<0?o.from<e:o.to>e)))&&(s=o)}}return s||i}return i}function cz(n,e,t,i){let s=Ug(n,e.head,e.assoc||-1),o=!i||s.type!=Qt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let l=n.dom.getBoundingClientRect(),u=n.textDirectionAt(s.from),f=n.posAtCoords({x:t==(u==at.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(f!=null)return ce.cursor(f,t?-1:1)}return ce.cursor(t?s.to:s.from,t?-1:1)}function xw(n,e,t,i){let s=n.state.doc.lineAt(e.head),o=n.bidiSpans(s),l=n.textDirectionAt(s.from);for(let u=e,f=null;;){let d=L3(s,o,l,u,t),p=lT;if(!d){if(s.number==(t?n.state.doc.lines:1))return u;p=`
`,s=n.state.doc.line(s.number+(t?1:-1)),o=n.bidiSpans(s),d=n.visualLineSide(s,!t)}if(f){if(!f(p))return u}else{if(!i)return d;f=i(p)}u=d}}function uz(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return o=>{let l=i(o);return s==pt.Space&&(s=l),s==l}}function fz(n,e,t,i){let s=e.head,o=t?1:-1;if(s==(t?n.state.doc.length:0))return ce.cursor(s,e.assoc);let l=e.goalColumn,u,f=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(s,e.assoc||-1),p=n.documentTop;if(d)l==null&&(l=d.left-f.left),u=o<0?d.top:d.bottom;else{let b=n.viewState.lineBlockAt(s);l==null&&(l=Math.min(f.right-f.left,n.defaultCharacterWidth*(s-b.from))),u=(o<0?b.top:b.bottom)+p}let g=f.left+l,y=i??n.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let S=u+(y+b)*o,C=Vg(n,{x:g,y:S},!1,o);return ce.cursor(C.pos,C.assoc,void 0,l)}}function cl(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(o,l,u)=>{if(e>o&&e<l){let f=i||t||(e-o<l-e?-1:1);e=f<0?o:l,i=f}});if(!i)return e}}function kT(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let l=cl(n,s.from,0);l!=s.from&&(o=ce.cursor(l,-1))}else{let l=cl(n,s.from,-1),u=cl(n,s.to,1);(l!=s.from||u!=s.to)&&(o=ce.range(s.from==s.anchor?l:u,s.from==s.head?l:u))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?ce.create(t,e.mainIndex):e}function Hm(n,e,t){let i=cl(n.state.facet(Hl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:ce.cursor(i,i<t.from?1:-1)}class kn{constructor(e,t){this.pos=e,this.assoc=t}}function Vg(n,e,t,i){let s=n.contentDOM.getBoundingClientRect(),o=s.top+n.viewState.paddingTop,{x:l,y:u}=e,f=u-o,d;for(;;){if(f<0)return new kn(0,1);if(f>n.viewState.docHeight)return new kn(n.state.doc.length,-1);if(d=n.elementAtHeight(f),i==null)break;if(d.type==Qt.Text){let y=n.docView.coordsAt(i<0?d.from:d.to,i);if(y&&(i<0?y.top<=f+o:y.bottom>=f+o))break}let g=n.viewState.heightOracle.textHeight/2;f=i>0?d.bottom+g:d.top-g}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==Qt.Text){let g=lz(n,s,d,l,u);return new kn(g,g==d.from?1:-1)}}if(d.type!=Qt.Text)return f<(d.top+d.bottom)/2?new kn(d.from,1):new kn(d.to,-1);let p=n.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=n.docView.lineAt(d.from,-2)),AT(n,p,d.from,l,u)}function AT(n,e,t,i,s){let o=-1,l=null,u=1e9,f=1e9,d=s,p=s,g=(y,b)=>{for(let S=0;S<y.length;S++){let C=y[S];if(C.top==C.bottom)continue;let x=C.left>i?C.left-i:C.right<i?i-C.right:0,_=C.top>s?C.top-s:C.bottom<s?s-C.bottom:0;C.top<=p&&C.bottom>=d&&(d=Math.min(C.top,d),p=Math.max(C.bottom,p),_=0),(o<0||(_-f||x-u)<0)&&(o>=0&&f&&u<x&&l.top<=p-2&&l.bottom>=d+2?f=0:(o=b,u=x,f=_,l=C))}};if(e.isText()){for(let b=0;b<e.length;){let S=Bt(e.text,b);if(g(Sl(e.dom,b,S).getClientRects(),b),!u&&!f)break;b=S}return i>(l.left+l.right)/2==(ww(n,o+t)==at.LTR)?new kn(t+Bt(e.text,o),-1):new kn(t+o,1)}else{if(!e.length)return new kn(t,1);for(let C=0;C<e.children.length;C++){let x=e.children[C];if(x.flags&48)continue;let _=(x.dom.nodeType==1?x.dom:Sl(x.dom,0,x.length)).getClientRects();if(g(_,C),!u&&!f)break}let y=e.children[o],b=e.posBefore(y,t);return y.isComposite()||y.isText()?AT(n,y,b,Math.max(l.left,Math.min(l.right,i)),s):i>(l.left+l.right)/2==(ww(n,o+t)==at.LTR)?new kn(b+y.length,-1):new kn(b,1)}}function ww(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[ir.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const il="";class hz{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(We.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=il}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let l=jt.get(s),u=s.nextSibling;if(u==t){l?.breakAfter&&!u&&this.lineBreak();break}let f=jt.get(u);(l&&f?l.breakAfter:(l?l.breakAfter:eh(s))||eh(u)&&(s.nodeName!="BR"||l?.isWidget())&&this.text.length>o)&&!pz(u,t)&&this.lineBreak(),s=u}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,l=1,u;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(u=s.exec(t))&&(o=u.index,l=u[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),l>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=l-1);i=o+l}}readNode(e){let t=jt.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(dz(e,i.node,i.offset)?t:0))}}function dz(n,e,t){for(;;){if(!e||t<ar(e))return!1;if(e==n)return!0;t=Yr(e)+1,e=e.parentNode}}function pz(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=jt.get(n);if(!i?.isWidget())return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let s=i.overrideDOMText;if(s?.length)return!1}return!0}class _w{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class mz{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=ET(e.docView.tile,t,i,0))){let u=o||l?[]:yz(e),f=new hz(u,e.state);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=vz(u,this.bounds.from)}else{let u=e.observer.selectionRange,f=o&&o.node==u.focusNode&&o.offset==u.focusOffset||!Bg(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),d=l&&l.node==u.anchorNode&&l.offset==u.anchorOffset||!Bg(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset),p=e.viewport;if((be.ios||be.chrome)&&e.state.selection.main.empty&&f!=d&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(f,d),y=Math.max(f,d),b=p.from-g,S=p.to-y;(b==0||b==1||g==0)&&(S==0||S==-1||y==e.state.doc.length)&&(f=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ce.range(d,f)):this.newSel=ce.single(d,f)}}}function ET(n,e,t,i){if(n.isComposite()){let s=-1,o=-1,l=-1,u=-1;for(let f=0,d=i,p=i;f<n.children.length;f++){let g=n.children[f],y=d+g.length;if(d<e&&y>t)return ET(g,e,t,d);if(y>=e&&s==-1&&(s=f,o=d),d>t&&g.dom.parentNode==n.dom){l=f,u=p;break}p=y,d=y+g.breakAfter}return{from:o,to:u<0?i+n.length:u,startDOM:(s?n.children[s-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:l<n.children.length&&l>=0?n.children[l].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function MT(n,e){let t,{newSel:i}=e,s=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:u}=e.bounds,f=s.from,d=null;(o===8||be.android&&e.text.length<u-l)&&(f=s.to,d="end");let p=OT(n.state.doc.sliceString(l,u,il),e.text,f-l,d);p&&(be.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==il+il&&p.toB--,t={from:l+p.from,to:l+p.toA,insert:Ke.of(e.text.slice(p.from,p.toB).split(il))})}else i&&(!n.hasFocus&&n.state.facet(tr)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(be.mac||be.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ce.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:Ke.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:be.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=ce.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Ke.of([" "])}),t)return A0(n,t,i,o);if(i&&!i.main.eq(s)){let l=!1,u="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(l=!0),u=n.inputState.lastSelectionOrigin,u=="select.pointer"&&(i=kT(n.state.facet(Hl).map(f=>f(n)),i))),n.dispatch({selection:i,scrollIntoView:l,userEvent:u}),!0}else return!1}function A0(n,e,t,i=-1){if(be.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(be.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ra(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Ra(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Ra(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let l,u=()=>l||(l=gz(n,e,t));return n.state.facet(dT).some(f=>f(n,e.from,e.to,o,u))||n.dispatch(u()),!0}function gz(n,e,t){let i,s=n.state,o=s.selection.main,l=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let f=e.from<o.from?-1:1,d=f<0?o.from:o.to,p=cl(s.facet(Hl).map(g=>g(n)),d,f);e.from==p&&(l=p)}if(l>-1)i={changes:e,selection:ce.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let f=o.from<e.from?s.sliceDoc(o.from,e.from):"",d=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(n.state.toText(f+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let f=s.changes(e),d=t&&t.main.to<=f.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=n.state.sliceDoc(e.from,e.to),g,y=t&&CT(n,t.main.head);if(y){let S=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-S}}else g=n.state.doc.lineAt(o.head);let b=o.to-e.to;i=s.changeByRange(S=>{if(S.from==o.from&&S.to==o.to)return{changes:f,range:d||S.map(f)};let C=S.to-b,x=C-p.length;if(n.state.sliceDoc(x,C)!=p||C>=g.from&&x<=g.to)return{range:S};let _=s.changes({from:x,to:C,insert:e.insert}),w=S.to-o.to;return{changes:_,range:d?ce.range(Math.max(0,d.anchor+w),Math.max(0,d.head+w)):S.map(_)}})}else i={changes:f,selection:d&&s.selection.replaceRange(d)}}let u="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,u+=".compose",n.inputState.compositionFirstChange&&(u+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:u,scrollIntoView:!0})}function OT(n,e,t,i){let s=Math.min(n.length,e.length),o=0;for(;o<s&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&n.length==e.length)return null;let l=n.length,u=e.length;for(;l>0&&u>0&&n.charCodeAt(l-1)==e.charCodeAt(u-1);)l--,u--;if(i=="end"){let f=Math.max(0,o-Math.min(l,u));t-=l+f-o}if(l<o&&n.length<e.length){let f=t<=o&&t>=l?o-t:0;o-=f,u=o+(u-l),l=o}else if(u<o){let f=t<=o&&t>=u?o-t:0;o-=f,l=o+(l-u),u=o}return{from:o,toA:l,toB:u}}function yz(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new _w(t,i)),(s!=t||o!=i)&&e.push(new _w(s,o))),e}function vz(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?ce.single(t+e,i+e):null}class bz{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,be.safari&&e.contentDOM.addEventListener("input",()=>null),be.gecko&&zz(e.contentDOM.ownerDocument)}handleEvent(e){!Az(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Sz(e),i=this.handlers,s=this.view.contentDOM;for(let o in t)if(o!="scroll"){let l=!t[o].handlers.length,u=i[o];u&&l!=!u.handlers.length&&(s.removeEventListener(o,this.handleEvent),u=null),u||s.addEventListener(o,this.handleEvent,{passive:l})}for(let o in i)o!="scroll"&&!t[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&RT.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),be.android&&be.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return be.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=DT.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||xz.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ra(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:be.safari&&!be.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Tw(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){bi(t.state,s)}}}function Sz(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec,o=s&&s.plugin.domEventHandlers,l=s&&s.plugin.domEventObservers;if(o)for(let u in o){let f=o[u];f&&t(u).handlers.push(Tw(i.value,f))}if(l)for(let u in l){let f=l[u];f&&t(u).observers.push(Tw(i.value,f))}}for(let i in ln)t(i).handlers.push(ln[i]);for(let i in Zi)t(i).observers.push(Zi[i]);return e}const DT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],xz="dthko",RT=[16,17,18,20,91,92,224,225],bf=6;function Sf(n){return Math.max(0,n)*.7+8}function wz(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class _z{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=k3(e.contentDOM),this.atoms=e.state.facet(Hl).map(l=>l(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(We.allowMultipleSelections)&&Tz(e,t),this.dragging=kz(e,t)&&$T(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&wz(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,o=0,l=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:u}=this.scrollParents.y.getBoundingClientRect());let f=k0(this.view);e.clientX-f.left<=s+bf?t=-Sf(s-e.clientX):e.clientX+f.right>=l-bf&&(t=Sf(e.clientX-l)),e.clientY-f.top<=o+bf?i=-Sf(o-e.clientY):e.clientY+f.bottom>=u-bf&&(i=Sf(e.clientY-u)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=kT(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Tz(n,e){let t=n.state.facet(cT);return t.length?t[0](e):be.mac?e.metaKey:e.ctrlKey}function Cz(n,e){let t=n.state.facet(uT);return t.length?t[0](e):be.mac?!e.altKey:!e.ctrlKey}function kz(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=vl(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let l=s[o];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Az(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=jt.get(t))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const ln=Object.create(null),Zi=Object.create(null),NT=be.ie&&be.ie_version<15||be.ios&&be.webkit_version<604;function Ez(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),zT(n,t.value)},50)}function Ph(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function zT(n,e){e=Ph(n.state,_0,e);let{state:t}=n,i,s=1,o=t.toText(e),l=o.lines==t.selection.ranges.length;if(Ig!=null&&t.selection.ranges.every(f=>f.empty)&&Ig==o.toString()){let f=-1;i=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==f)return{range:d};f=p.from;let g=t.toText((l?o.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:ce.cursor(d.from+g.length)}})}else l?i=t.changeByRange(f=>{let d=o.line(s++);return{changes:{from:f.from,to:f.to,insert:d.text},range:ce.cursor(f.from+d.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Zi.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ln.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Zi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Zi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ln.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(fT))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Oz(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new _z(n,e,t,i)),i&&n.observer.ignore(()=>{eT(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function Cw(n,e,t,i){if(i==1)return ce.cursor(e,t);if(i==2)return oz(n.state,e,t);{let s=n.docView.lineAt(e,t),o=n.state.doc.lineAt(s?s.posAtEnd:e),l=s?s.posAtStart:o.from,u=s?s.posAtEnd:o.to;return u<n.state.doc.length&&u==o.to&&u++,ce.range(l,u)}}const Mz=be.ie&&be.ie_version<=11;let kw=null,Aw=0,Ew=0;function $T(n){if(!Mz)return n.detail;let e=kw,t=Ew;return kw=n,Ew=Date.now(),Aw=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Aw+1)%3:1}function Oz(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=$T(e),s=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),s=s.map(o.changes))},get(o,l,u){let f=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),d,p=Cw(n,f.pos,f.assoc,i);if(t.pos!=f.pos&&!l){let g=Cw(n,t.pos,t.assoc,i),y=Math.min(g.from,p.from),b=Math.max(g.to,p.to);p=y<p.from?ce.range(y,b):ce.range(b,y)}return l?s.replaceRange(s.main.extend(p.from,p.to)):u&&i==1&&s.ranges.length>1&&(d=Dz(s,f.pos))?d:u?s.addRange(p):ce.create([p])}}}function Dz(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return ce.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}ln.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.tile.nearest(e.target);if(s&&s.isWidget()){let o=s.posAtStart,l=o+s.length;(o>=t.to||l<=t.from)&&(t=ce.range(o,l))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Ph(n.state,T0,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ln.dragend=n=>(n.inputState.draggedContent=null,!1);function Mw(n,e,t,i){if(t=Ph(n.state,_0,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,l=i&&o&&Cz(n,e)?{from:o.from,to:o.to}:null,u={from:s,insert:t},f=n.state.changes(l?[l,u]:u);n.focus(),n.dispatch({changes:f,selection:{anchor:f.mapPos(s,-1),head:f.mapPos(s,1)},userEvent:l?"move.drop":"input.drop"}),n.inputState.draggedContent=null}ln.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,o=()=>{++s==t.length&&Mw(n,e,i.filter(l=>l!=null).join(n.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let u=new FileReader;u.onerror=o,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(i[l]=u.result),o()},u.readAsText(t[l])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Mw(n,e,i,!0),!0}return!1};ln.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=NT?null:e.clipboardData;return t?(zT(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Ez(n),!1)};function Rz(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Nz(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:o}of n.selection.ranges){let l=n.doc.lineAt(o);l.number>s&&(e.push(l.text),t.push({from:l.from,to:Math.min(n.doc.length,l.to+1)})),s=l.number}i=!0}return{text:Ph(n,T0,e.join(n.lineBreak)),ranges:t,linewise:i}}let Ig=null;ln.copy=ln.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=Nz(n.state);if(!t&&!s)return!1;Ig=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=NT?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(Rz(n,t),!1)};const BT=On.define();function LT(n,e){let t=[];for(let i of n.facet(pT)){let s=i(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:BT.of(!0)}):null}function jT(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=LT(n.state,e);t?n.dispatch(t):n.update([])}},10)}Zi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),jT(n)};Zi.blur=n=>{n.observer.clearSelectionRange(),jT(n)};Zi.compositionstart=Zi.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Zi.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,be.chrome&&be.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Zi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ln.beforeinput=(n,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),l=e.getTargetRanges();if(o&&l.length){let u=l[0],f=n.posAtDOM(u.startContainer,u.startOffset),d=n.posAtDOM(u.endContainer,u.endOffset);return A0(n,{from:f,to:d,insert:n.state.toText(o)},null),!0}}let s;if(be.chrome&&be.android&&(s=DT.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return be.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),be.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Zi.compositionend(n,e),20),!1};const Ow=new Set;function zz(n){Ow.has(n)||(Ow.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Dw=["pre-wrap","normal","pre-line","break-spaces"];let Ha=!1;function Rw(){Ha=!1}class $z{constructor(e){this.lineWrapping=e,this.doc=Ke.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Dw.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,o,l){let u=Dw.indexOf(e)>-1,f=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=o,f){this.heightSamples={};for(let d=0;d<l.length;d++){let p=l[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return f}}class Bz{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class sn{constructor(e,t,i,s,o){this.from=e,this.length=t,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?Qt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Os?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new sn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var lt=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(lt||(lt={}));const Uf=.001;class li{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Uf&&(Ha=!0),this.height=e)}replace(e,t,i){return li.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let o=this,l=i.doc;for(let u=s.length-1;u>=0;u--){let{fromA:f,toA:d,fromB:p,toB:g}=s[u],y=o.lineAt(f,lt.ByPosNoHeight,i.setDoc(t),0,0),b=y.to>=d?y:o.lineAt(d,lt.ByPosNoHeight,i,0,0);for(g+=b.to-d,d=b.to;u>0&&y.from<=s[u-1].toA;)f=s[u-1].fromA,p=s[u-1].fromB,u--,f<y.from&&(y=o.lineAt(f,lt.ByPosNoHeight,i,0,0));p+=y.from-f,f=y.from;let S=E0.build(i.setDoc(l),e,p,g);o=rh(o,o.replace(f,d,S))}return o.updateHeight(i,0)}static empty(){return new zi(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,o=0;for(;;)if(t==i)if(s>o*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),i+=1+u.break,s-=u.size}else if(o>s*2){let u=e[i];u.break?e.splice(i,1,u.left,null,u.right):e.splice(i,1,u.left,u.right),i+=2+u.break,o-=u.size}else break;else if(s<o){let u=e[t++];u&&(s+=u.size)}else{let u=e[--i];u&&(o+=u.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,i++),new jz(li.of(e.slice(0,t)),l,li.of(e.slice(i)))}}function rh(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ha=!0),e)}li.prototype.size=1;const Lz=Ae.replace({});class PT extends li{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new sn(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,s){return this.spaceAbove&&e<i+this.spaceAbove?new sn(s,0,i,this.spaceAbove,Lz):this.mainBlock(i,s)}lineAt(e,t,i,s,o){let l=this.mainBlock(s,o);return this.spaceAbove?this.blockAt(0,i,s,o).join(l):l}forEachLine(e,t,i,s,o,l){e<=o+this.length&&t>=o&&l(this.lineAt(0,lt.ByPos,i,s,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zi extends PT{constructor(e,t,i){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,t){return new sn(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof zi||s instanceof Kt&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Kt?s=new zi(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):li.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Kt extends li{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,o=s-i+1,l,u=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*o);l=f/o,this.length>o+1&&(u=(this.height-f)/(this.length-o-1))}else l=this.height/o;return{firstLine:i,lastLine:s,perLine:l,perChar:u}}blockAt(e,t,i,s){let{firstLine:o,lastLine:l,perLine:u,perChar:f}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),p=t.doc.lineAt(d),g=u+p.length*f,y=Math.max(i,e-g/2);return new sn(p.from,p.length,y,g,0)}else{let d=Math.max(0,Math.min(l-o,Math.floor((e-i)/u))),{from:p,length:g}=t.doc.line(o+d);return new sn(p,g,i+u*d,u,0)}}lineAt(e,t,i,s,o){if(t==lt.ByHeight)return this.blockAt(e,i,s,o);if(t==lt.ByPosNoHeight){let{from:b,to:S}=i.doc.lineAt(e);return new sn(b,S-b,0,0,0)}let{firstLine:l,perLine:u,perChar:f}=this.heightMetrics(i,o),d=i.doc.lineAt(e),p=u+d.length*f,g=d.number-l,y=s+u*g+f*(d.from-o-g);return new sn(d.from,d.length,Math.max(s,Math.min(y,s+this.height-p)),p,0)}forEachLine(e,t,i,s,o,l){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:u,perLine:f,perChar:d}=this.heightMetrics(i,o);for(let p=e,g=s;p<=t;){let y=i.doc.lineAt(p);if(p==e){let S=y.number-u;g+=f*S+d*(e-o-S)}let b=f+d*y.length;l(new sn(y.from,y.length,g,b,0)),g+=b,p=y.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let o=i[i.length-1];o instanceof Kt?i[i.length-1]=new Kt(o.length+s):i.push(null,new Kt(s-1))}if(e>0){let o=i[0];o instanceof Kt?i[0]=new Kt(e+o.length):i.unshift(new Kt(e-1),null)}return li.of(i)}decomposeLeft(e,t){t.push(new Kt(e-1),null)}decomposeRight(e,t){t.push(null,new Kt(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let o=t+this.length;if(s&&s.from<=t+this.length&&s.more){let l=[],u=Math.max(t,s.from),f=-1;for(s.from>t&&l.push(new Kt(s.from-t-1).updateHeight(e,t));u<=o&&s.more;){let p=e.doc.lineAt(u).length;l.length&&l.push(null);let g=s.heights[s.index++],y=0;g<0&&(y=-g,g=s.heights[s.index++]),f==-1?f=g:Math.abs(g-f)>=Uf&&(f=-2);let b=new zi(p,g,y);b.outdated=!1,l.push(b),u+=p+1}u<=o&&l.push(null,new Kt(o-u).updateHeight(e,u));let d=li.of(l);return(f<0||Math.abs(d.height-this.height)>=Uf||Math.abs(f-this.heightMetrics(e,t).perLine)>=Uf)&&(Ha=!0),rh(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class jz extends li{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,o,s+this.left.length+this.break)}lineAt(e,t,i,s,o){let l=s+this.left.height,u=o+this.left.length+this.break,f=t==lt.ByHeight?e<l:e<u,d=f?this.left.lineAt(e,t,i,s,o):this.right.lineAt(e,t,i,l,u);if(this.break||(f?d.to<u:d.from>u))return d;let p=t==lt.ByPosNoHeight?lt.ByPosNoHeight:lt.ByPos;return f?d.join(this.right.lineAt(u,p,i,l,u)):this.left.lineAt(u,p,i,s,o).join(d)}forEachLine(e,t,i,s,o,l){let u=s+this.left.height,f=o+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,t,i,s,o,l),t>=f&&this.right.forEachLine(e,t,i,u,f,l);else{let d=this.lineAt(f,lt.ByPos,i,s,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,s,o,l),d.to>=e&&d.from<=t&&l(d),t>d.to&&this.right.forEachLine(d.to+1,t,i,u,f,l)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let l=o.length;for(let u of i)o.push(u);if(e>0&&Nw(o,l-1),t<this.length){let u=o.length;this.decomposeRight(t,o),Nw(o,u)}return li.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?li.of(this.break?[e,null,t]:[e,t]):(this.left=rh(this.left,e),this.right=rh(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:o,right:l}=this,u=t+o.length+this.break,f=null;return s&&s.from<=t+o.length&&s.more?f=o=o.updateHeight(e,t,i,s):o.updateHeight(e,t,i),s&&s.from<=u+l.length&&s.more?f=l=l.updateHeight(e,u,i,s):l.updateHeight(e,u,i),f?this.balanced(o,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Nw(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Kt&&(i=n[e+1])instanceof Kt&&n.splice(e-1,3,new Kt(t.length+1+i.length))}const Pz=5;class E0{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof zi?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new zi(i-this.pos,-1,0)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let l=t-e;i.block?this.addBlock(new PT(l,s,i)):(l||o||s>=Pz)&&this.addLineDeco(s,o,l)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zi(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let i=new Kt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zi)return e;let t=new zi(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof zi)&&!this.isCovered?this.nodes.push(new zi(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof zi&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let o=new E0(i,e);return Ue.spans(t,i,s,o,0),o.finish(i)}}function qz(n,e,t){let i=new Hz;return Ue.compare(n,e,t,i,0),i.changes}class Hz{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Da(e,t,this.changes,5)}}function Uz(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,o=Math.max(0,t.left),l=Math.min(s.innerWidth,t.right),u=Math.max(0,t.top),f=Math.min(s.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=i.body;)if(d.nodeType==1){let p=d,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),l=Math.min(l,y.right),u=Math.max(u,y.top),f=Math.min(d==n.parentNode?s.innerHeight:f,y.bottom)}d=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-t.left,right:Math.max(o,l)-t.left,top:u-(t.top+e),bottom:Math.max(u,f)-(t.top+e)}}function Vz(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Iz(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Um{constructor(e,t,i,s){this.from=e,this.to=t,this.size=i,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,t){return Ae.replace({widget:new Wz(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Wz extends Rn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class zw{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=$w,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=at.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(C0).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new $z(t),this.stateDeco=e.facet(xl).filter(i=>typeof i!="function"),this.heightMap=li.empty().applyChanges(this.stateDeco,Ke.empty,this.heightOracle.setDoc(e.doc),[new Fi(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ae.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:o,to:l})=>s>=o&&s<=l)){let{from:o,to:l}=this.lineBlockAt(s);e.push(new xf(o,l))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?$w:new M0(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(nl(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(xl).filter(p=>typeof p!="function");let s=e.changedRanges,o=Fi.extendWithRanges(s,qz(i,this.stateDeco,e?e.changes:$t.empty(this.state.doc.length))),l=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Rw(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=l||Ha)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let f=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<f.from||t.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,t));let d=f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(gT)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?at.RTL:at.LTR;let l=this.heightOracle.mustRefreshForWrapping(o),u=t.getBoundingClientRect(),f=l||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let d=0,p=0;if(u.width&&u.height){let{scaleX:E,scaleY:k}=J_(t,u);(E>.005&&Math.abs(this.scaleX-E)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=E,this.scaleY=k,d|=16,l=f=!0)}let g=(parseInt(i.paddingTop)||0)*this.scaleY,y=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=tT(e.scrollDOM);let S=(this.printing?Iz:Uz)(t,this.paddingTop),C=S.top-this.pixelViewport.top,x=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(f=!0)),!this.inView&&!this.scrollTarget&&!Vz(e.dom))return 0;let w=u.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),f){let E=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(E)&&(l=!0),l||s.lineWrapping&&Math.abs(w-this.contentDOMWidth)>s.charWidth){let{lineHeight:k,charWidth:O,textHeight:A}=e.docView.measureTextSize();l=k>0&&s.refresh(o,k,O,A,Math.max(5,w/O),E),l&&(e.docView.minWidth=0,d|=16)}C>0&&x>0?p=Math.max(C,x):C<0&&x<0&&(p=Math.min(C,x)),Rw();for(let k of this.viewports){let O=k.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(k);this.heightMap=(l?li.empty().applyChanges(this.stateDeco,Ke.empty,this.heightOracle,[new Fi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new Bz(k.from,O))}Ha&&(d|=2)}let T=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:l,visibleBottom:u}=this,f=new xf(s.lineAt(l-i*1e3,lt.ByHeight,o,0,0).from,s.lineAt(u+(1-i)*1e3,lt.ByHeight,o,0,0).to);if(t){let{head:d}=t.range;if(d<f.from||d>f.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=s.lineAt(d,lt.ByPos,o,0,0),y;t.y=="center"?y=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<f.from?y=g.top:y=g.bottom-p,f=new xf(s.lineAt(y-1e3/2,lt.ByHeight,o,0,0).from,s.lineAt(y+p+1e3/2,lt.ByHeight,o,0,0).to)}}return f}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new xf(this.heightMap.lineAt(i,lt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,lt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,lt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,lt.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:u}=this;return(e==0||s<=l-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=u+Math.max(10,Math.min(i,250)))&&s>l-2*1e3&&o<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Um(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,l=s<<1;if(this.defaultTextDirection!=at.LTR&&!i)return[];let u=[],f=(p,g,y,b)=>{if(g-p<o)return;let S=this.state.selection.main,C=[S.from];S.empty||C.push(S.to);for(let _ of C)if(_>p&&_<g){f(p,_-10,y,b),f(_+10,g,y,b);return}let x=Yz(e,_=>_.from>=y.from&&_.to<=y.to&&Math.abs(_.from-p)<o&&Math.abs(_.to-g)<o&&!C.some(w=>_.from<w&&_.to>w));if(!x){if(g<y.to&&t&&i&&t.visibleRanges.some(T=>T.from<=g&&T.to>=g)){let T=t.moveToLineBoundary(ce.cursor(g),!1,!0).head;T>p&&(g=T)}let _=this.gapSize(y,p,g,b),w=i||_<2e6?_:2e6;x=new Um(p,g,_,w)}u.push(x)},d=p=>{if(p.length<l||p.type!=Qt.Text)return;let g=Gz(p.from,p.to,this.stateDeco);if(g.total<l)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,b,S;if(i){let C=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,_;if(y!=null){let w=_f(g,y),T=((this.visibleBottom-this.visibleTop)/2+C)/p.height;x=w-T,_=w+T}else x=(this.visibleTop-p.top-C)/p.height,_=(this.visibleBottom-p.top+C)/p.height;b=wf(g,x),S=wf(g,_)}else{let C=g.total*this.heightOracle.charWidth,x=s*this.heightOracle.charWidth,_=0;if(C>2e6)for(let O of e)O.from>=p.from&&O.from<p.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=O.size-O.displaySize);let w=this.pixelViewport.left+_,T=this.pixelViewport.right+_,E,k;if(y!=null){let O=_f(g,y),A=((T-w)/2+x)/C;E=O-A,k=O+A}else E=(w-x)/C,k=(T+x)/C;b=wf(g,E),S=wf(g,k)}b>p.from&&f(p.from,b,p,g),S<p.to&&f(S,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return u}gapSize(e,t,i,s){let o=_f(s,i)-_f(s,t);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){Um.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ae.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ue.spans(t,this.viewport.from,this.viewport.to,{span(o,l){i.push({from:o,to:l})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let o=0;o<i.length&&!(s&8);o++){let l=this.visibleRanges[o],u=i[o];(l.from!=u.from||l.to!=u.to)&&(s|=4,e&&e.mapPos(l.from,-1)==u.from&&e.mapPos(l.to,1)==u.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||nl(this.heightMap.lineAt(e,lt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||nl(this.heightMap.lineAt(this.scaler.fromDOM(e),lt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return nl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class xf{constructor(e,t){this.from=e,this.to=t}}function Gz(n,e,t){let i=[],s=n,o=0;return Ue.spans(t,n,e,{span(){},point(l,u){l>s&&(i.push({from:s,to:l}),o+=l-s),s=u}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function wf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:o,to:l}=e[s],u=l-o;if(i<=u)return o+i;i-=u}}function _f(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function Yz(n,e){for(let t of n)if(e(t))return t}const $w={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class M0{constructor(e,t,i){let s=0,o=0,l=0;this.viewports=i.map(({from:u,to:f})=>{let d=t.lineAt(u,lt.ByPos,e,0,0).top,p=t.lineAt(f,lt.ByPos,e,0,0).bottom;return s+=p-d,{from:u,to:f,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let u of this.viewports)u.domTop=l+(u.top-o)*this.scale,l=u.domBottom=u.domTop+(u.bottom-u.top),o=u.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof M0?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function nl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new sn(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>nl(s,e)):n._content)}const Tf=Se.define({combine:n=>n.join(" ")}),Wg=Se.define({combine:n=>n.indexOf(!0)>-1}),Gg=Wr.newName(),qT=Wr.newName(),HT=Wr.newName(),UT={"&light":"."+qT,"&dark":"."+HT};function Yg(n,e,t){return new Wr(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const Fz=Yg("."+Gg,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},UT),Kz={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vm=be.ie&&be.ie_version<=11;class Xz{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new A3,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(be.ie&&be.ie_version<=11||be.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&be.android&&e.constructor.EDIT_CONTEXT!==!1&&!(be.chrome&&be.chrome_version<126)&&(this.editContext=new Zz(e),e.state.facet(tr)&&(e.contentDOM.editContext=this.editContext.editContext)),Vm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(tr)?i.root.activeElement!=this.dom:!Hf(this.dom,s))return;let o=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(be.ie&&be.ie_version<=11||be.android&&be.chrome)&&!i.state.selection.main.empty&&s.focusNode&&ll(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=vl(e.root);if(!t)return!1;let i=be.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Qz(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Hf(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&M3(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Kz),Vm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ra(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let o of e){let l=this.readMutation(o);l&&(l.typeOver&&(s=!0),t==-1?{from:t,to:i}=l:(t=Math.min(l.from,t),i=Math.max(l.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Hf(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new mz(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=MT(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let i=Bw(t,e.previousSibling||e.target.previousSibling,-1),s=Bw(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(tr)!=e.state.facet(tr)&&(e.view.contentDOM.editContext=e.state.facet(tr)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Bw(n,e,t){for(;e;){let i=jt.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function Lw(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor,1);return ll(l.node,l.offset,s,o)&&([t,i,s,o]=[s,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}}function Qz(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Lw(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?Lw(n,t):null}class Zz{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:o,head:l}=s,u=this.toEditorPos(i.updateRangeStart),f=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:u,drifted:!1});let d=f-u>i.text.length;u==this.from&&o<this.from?u=o:f==this.to&&o>this.to&&(f=o);let p=OT(e.state.sliceDoc(u,f),i.text,(d?s.from:s.to)-u,d?"end":null);if(!p){let y=ce.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));y.main.eq(s)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:p.from+u,to:p.toA+u,insert:Ke.of(i.text.slice(p.from,p.toB).split(`
`))};if((be.mac||be.android)&&g.from==l-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:u,to:f,insert:Ke.of([i.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);A0(e,g,ce.single(this.toEditorPos(i.selectionStart,y),this.toEditorPos(i.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let l=this.toEditorPos(i.rangeStart),u=this.toEditorPos(i.rangeEnd);l<u;l++){let f=e.coordsForChar(l);o=f&&new DOMRect(f.left,f.top,f.right-f.left,f.bottom-f.top)||o||new DOMRect,s.push(o)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let l=o.underlineStyle,u=o.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(u)){let f=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(f<d){let p=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(u)?1:2}px`;s.push(Ae.mark({attributes:{style:p}}).range(f,d))}}}e.dispatch({effects:vT.of(Ae.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=vl(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,l,u,f,d)=>{if(i)return;let p=d.length-(l-o);if(s&&l>=s.to)if(s.from==o&&s.to==l&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(o+=t,l+=t,l<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||l>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(l),d.toString()),this.to+=p}t+=p}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class ye{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||E3(e.parent)||document,this.viewState=new zw(e.state||We.create(e)),e.scrollTo&&e.scrollTo.is(vf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ka).map(s=>new Lm(s));for(let s of this.plugins)s.update(this);this.observer=new Xz(this),this.inputState=new bz(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Sw(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Lt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let l=this.hasFocus,u=0,f=null;e.some(y=>y.annotation(BT))?(this.inputState.notifiedFocused=l,u=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,f=LT(o,l),f||(u=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(We.phrases)!=this.state.facet(We.phrases))return this.setState(o);s=th.create(this,o,e),s.flags|=u;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:b}=y.state.selection;g=new Na(b.empty?b:ce.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of y.effects)b.is(vf)&&(g=b.value.clip(this.state))}this.viewState.update(s,g),this.bidiCache=sh.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(tl)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Tf)!=s.state.facet(Tf)&&(this.viewState.mustMeasureContent=!0),(t||i||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let y of this.state.facet(qg))try{y(s)}catch(b){bi(this.state,b,"update listener")}(f||p)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),p&&!MT(this,p)&&d.force&&Ra(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new zw(e),this.plugins=e.facet(ka).map(i=>new Lm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Sw(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ka),i=e.state.facet(ka);if(t!=i){let s=[];for(let o of i){let l=t.indexOf(o);if(l<0)s.push(new Lm(o));else{let u=this.plugins[l];u.mustUpdate=e,s.push(u)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){bi(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:l}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(l<0)if(tT(i))o=-1,l=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(s);o=b.from,l=b.top}this.updateState=1;let f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];f&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(b=>{try{return b.read(this)}catch(S){return bi(this.state,S),jw}}),g=th.create(this,this.state,[]),y=!1;g.flags|=f,t?t.flags|=f:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let b=0;b<d.length;b++)if(p[b]!=jw)try{let S=d[b];S.write&&S.write(p[b],this)}catch(S){bi(this.state,S)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let S=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-l;if(S>1||S<-1){s=s+S,i.scrollTop=s/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(qg))u(t)}get themeClasses(){return Gg+" "+(this.state.facet(Wg)?HT:qT)+" "+this.state.facet(Tf)}updateAttrs(){let e=Pw(this,bT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(tr)?"true":"false",class:"cm-content",style:`${be.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Pw(this,C0,t);let i=this.observer.ignore(()=>{let s=pw(this.contentDOM,this.contentAttrs,t),o=pw(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(ye.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(tl);let e=this.state.facet(ye.cspNonce);Wr.mount(this.root,this.styleModules.concat(Fz).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Hm(this,e,xw(this,e,t,i))}moveByGroup(e,t){return Hm(this,e,xw(this,e,t,i=>uz(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return ce.cursor(o.side(t,s)+e.from,o.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return cz(this,e,t,i)}moveVertically(e,t,i){return Hm(this,e,fz(this,e,t,i))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let i=Vg(this,e,t);return i&&i.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),Vg(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),l=o[ir.find(o,e-s.from,-1,t)];return bl(i,l.dir==at.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(mT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Jz)return oT(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||aT(o.isolates,i=yw(this,e))))return o.order;i||(i=yw(this,e));let s=B3(e.text,t,i);return this.bidiCache.push(new sh(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||be.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{eT(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return vf.of(new Na(typeof e=="number"?ce.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return vf.of(new Na(ce.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return kt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return kt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Wr.newName(),s=[Tf.of(i),tl.of(Yg(`.${i}`,e))];return t&&t.dark&&s.push(Wg.of(!0)),s}static baseTheme(e){return Ns.lowest(tl.of(Yg("."+Gg,e,UT)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&jt.get(i)||jt.get(e);return((t=s?.root)===null||t===void 0?void 0:t.view)||null}}ye.styleModule=tl;ye.inputHandler=dT;ye.clipboardInputFilter=_0;ye.clipboardOutputFilter=T0;ye.scrollHandler=yT;ye.focusChangeEffect=pT;ye.perLineTextDirection=mT;ye.exceptionSink=hT;ye.updateListener=qg;ye.editable=tr;ye.mouseSelectionStyle=fT;ye.dragMovesSelection=uT;ye.clickAddsSelectionRange=cT;ye.decorations=xl;ye.blockWrappers=ST;ye.outerDecorations=xT;ye.atomicRanges=Hl;ye.bidiIsolatedRanges=wT;ye.scrollMargins=_T;ye.darkTheme=Wg;ye.cspNonce=Se.define({combine:n=>n.length?n[0]:""});ye.contentAttributes=C0;ye.editorAttributes=bT;ye.lineWrapping=ye.contentAttributes.of({class:"cm-lineWrapping"});ye.announce=ze.define();const Jz=4096,jw={};class sh{constructor(e,t,i,s,o,l){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=o,this.order=l}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:at.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let l=e[o];l.dir==s&&!t.touchesRange(l.from,l.to)&&i.push(new sh(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return i}}function Pw(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],l=typeof o=="function"?o(n):o;l&&S0(l,t)}return t}const e4=be.mac?"mac":be.windows?"win":be.linux?"linux":"key";function t4(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,o,l,u;for(let f=0;f<t.length-1;++f){const d=t[f];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))e=="mac"?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),u&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Cf(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const i4=Ns.default(ye.domEventHandlers({keydown(n,e){return IT(VT(e.state),n,e,"editor")}})),qh=Se.define({enables:i4}),qw=new WeakMap;function VT(n){let e=n.facet(qh),t=qw.get(e);return t||qw.set(e,t=s4(e.reduce((i,s)=>i.concat(s),[]))),t}function n4(n,e,t){return IT(VT(n.state),e,n,t)}let Pr=null;const r4=4e3;function s4(n,e=e4){let t=Object.create(null),i=Object.create(null),s=(l,u)=>{let f=i[l];if(f==null)i[l]=u;else if(f!=u)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},o=(l,u,f,d,p)=>{var g,y;let b=t[l]||(t[l]=Object.create(null)),S=u.split(/ (?!$)/).map(_=>t4(_,e));for(let _=1;_<S.length;_++){let w=S.slice(0,_).join(" ");s(w,!0),b[w]||(b[w]={preventDefault:!0,stopPropagation:!1,run:[T=>{let E=Pr={view:T,prefix:w,scope:l};return setTimeout(()=>{Pr==E&&(Pr=null)},r4),!0}]})}let C=S.join(" ");s(C,!1);let x=b[C]||(b[C]={preventDefault:!1,stopPropagation:!1,run:((y=(g=b._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});f&&x.run.push(f),d&&(x.preventDefault=!0),p&&(x.stopPropagation=!0)};for(let l of n){let u=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let d of u){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=l;for(let y in p)p[y].run.push(b=>g(b,Fg))}let f=l[e]||l.key;if(f)for(let d of u)o(d,f,l.run,l.preventDefault,l.stopPropagation),l.shift&&o(d,"Shift-"+f,l.shift,l.preventDefault,l.stopPropagation)}return t}let Fg=null;function IT(n,e,t,i){Fg=e;let s=b3(e),o=gi(s,0),l=Cn(o)==s.length&&s!=" ",u="",f=!1,d=!1,p=!1;Pr&&Pr.view==t&&Pr.scope==i&&(u=Pr.prefix+" ",RT.indexOf(e.keyCode)<0&&(d=!0,Pr=null));let g=new Set,y=x=>{if(x){for(let _ of x.run)if(!g.has(_)&&(g.add(_),_(t)))return x.stopPropagation&&(p=!0),!0;x.preventDefault&&(x.stopPropagation&&(p=!0),d=!0)}return!1},b=n[i],S,C;return b&&(y(b[u+Cf(s,e,!l)])?f=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(be.windows&&e.ctrlKey&&e.altKey)&&!(be.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(S=Gr[e.keyCode])&&S!=s?(y(b[u+Cf(S,e,!0)])||e.shiftKey&&(C=gl[e.keyCode])!=s&&C!=S&&y(b[u+Cf(C,e,!1)]))&&(f=!0):l&&e.shiftKey&&y(b[u+Cf(s,e,!0)])&&(f=!0),!f&&y(b._any)&&(f=!0)),d&&(f=!0),f&&p&&e.stopPropagation(),Fg=null,f}class Ul{constructor(e,t,i,s,o){this.className=e,this.left=t,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=WT(e);return[new Ul(t,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return a4(e,t,i)}}function WT(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==at.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Hw(n,e,t,i){let s=n.coordsAtPos(e,t*2);if(!s)return i;let o=n.dom.getBoundingClientRect(),l=(s.top+s.bottom)/2,u=n.posAtCoords({x:o.left+1,y:l}),f=n.posAtCoords({x:o.right-1,y:l});return u==null||f==null?i:{from:Math.max(i.from,Math.min(u,f)),to:Math.min(i.to,Math.max(u,f))}}function a4(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),o=n.textDirection==at.LTR,l=n.contentDOM,u=l.getBoundingClientRect(),f=WT(n),d=l.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),g=u.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),y=u.right-(p?parseInt(p.paddingRight):0),b=Ug(n,i,1),S=Ug(n,s,-1),C=b.type==Qt.Text?b:null,x=S.type==Qt.Text?S:null;if(C&&(n.lineWrapping||b.widgetLineBreaks)&&(C=Hw(n,i,1,C)),x&&(n.lineWrapping||S.widgetLineBreaks)&&(x=Hw(n,s,-1,x)),C&&x&&C.from==x.from&&C.to==x.to)return w(T(t.from,t.to,C));{let k=C?T(t.from,null,C):E(b,!1),O=x?T(null,t.to,x):E(S,!0),A=[];return(C||b).to<(x||S).from-(C&&x?1:0)||b.widgetLineBreaks>1&&k.bottom+n.defaultLineHeight/2<O.top?A.push(_(g,k.bottom,y,O.top)):k.bottom<O.top&&n.elementAtHeight((k.bottom+O.top)/2).type==Qt.Text&&(k.bottom=O.top=(k.bottom+O.top)/2),w(k).concat(A).concat(w(O))}function _(k,O,A,N){return new Ul(e,k-f.left,O-f.top,A-k,N-O)}function w({top:k,bottom:O,horizontal:A}){let N=[];for(let $=0;$<A.length;$+=2)N.push(_(A[$],k,A[$+1],O));return N}function T(k,O,A){let N=1e9,$=-1e9,V=[];function q(te,fe,I,ne,oe){let pe=n.coordsAtPos(te,te==A.to?-2:2),K=n.coordsAtPos(I,I==A.from?2:-2);!pe||!K||(N=Math.min(pe.top,K.top,N),$=Math.max(pe.bottom,K.bottom,$),oe==at.LTR?V.push(o&&fe?g:pe.left,o&&ne?y:K.right):V.push(!o&&ne?g:K.left,!o&&fe?y:pe.right))}let H=k??A.from,X=O??A.to;for(let te of n.visibleRanges)if(te.to>H&&te.from<X)for(let fe=Math.max(te.from,H),I=Math.min(te.to,X);;){let ne=n.state.doc.lineAt(fe);for(let oe of n.bidiSpans(ne)){let pe=oe.from+ne.from,K=oe.to+ne.from;if(pe>=I)break;K>fe&&q(Math.max(pe,fe),k==null&&pe<=H,Math.min(K,I),O==null&&K>=X,oe.dir)}if(fe=ne.to+1,fe>=I)break}return V.length==0&&q(H,k==null,X,O==null,n.textDirection),{top:N,bottom:$,horizontal:V}}function E(k,O){let A=u.top+(O?k.top:k.bottom);return{top:A,bottom:A,horizontal:[]}}}function o4(n,e){return n.constructor==e.constructor&&n.eq(e)}class l4{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Vf)!=e.state.facet(Vf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Vf);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!o4(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,be.safari&&be.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Vf=Se.define();function GT(n){return[kt.define(e=>new l4(e,n)),Vf.of(n)]}const wl=Se.define({combine(n){return Dn(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function c4(n={}){return[wl.of(n),u4,f4,h4,gT.of(!0)]}function YT(n){return n.startState.facet(wl)!=n.state.facet(wl)}const u4=GT({above:!0,markers(n){let{state:e}=n,t=e.facet(wl),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty||t.drawRangeCursor){let l=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=s.empty?s:ce.cursor(s.head,s.head>s.anchor?-1:1);for(let f of Ul.forRange(n,l,u))i.push(f)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=YT(n);return t&&Uw(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Uw(e.state,n)},class:"cm-cursorLayer"});function Uw(n,e){e.style.animationDuration=n.facet(wl).cursorBlinkRate+"ms"}const f4=GT({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Ul.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||YT(n)},class:"cm-selectionLayer"}),h4=Ns.highest(ye.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),FT=ze.define({map(n,e){return n==null?null:e.mapPos(n)}}),rl=Zt.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(FT)?i.value:t,n)}}),d4=kt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(rl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(rl)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(rl),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(rl)!=n&&this.view.dispatch({effects:FT.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function p4(){return[rl,d4]}function Vw(n,e,t,i,s){e.lastIndex=0;for(let o=n.iterRange(t,i),l=t,u;!o.next().done;l+=o.value.length)if(!o.lineBreak)for(;u=e.exec(o.value);)s(l+u.index,u)}function m4(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:o}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class g4{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:o,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(u,f,d,p)=>s(p,d,d+u[0].length,u,f);else if(typeof i=="function")this.addMatch=(u,f,d,p)=>{let g=i(u,f,d);g&&p(d,d+u[0].length,g)};else if(i)this.addMatch=(u,f,d,p)=>p(d,d+u[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=l}createDeco(e){let t=new sr,i=t.add.bind(t);for(let{from:s,to:o}of m4(e,this.maxLength))Vw(e.state.doc,this.regexp,s,o,(l,u)=>this.addMatch(u,e,l,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,l,u,f)=>{f>=e.view.viewport.from&&u<=e.view.viewport.to&&(i=Math.min(u,i),s=Math.max(f,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let o of e.visibleRanges){let l=Math.max(o.from,i),u=Math.min(o.to,s);if(u>=l){let f=e.state.doc.lineAt(l),d=f.to<u?e.state.doc.lineAt(u):f,p=Math.max(o.from,f.from),g=Math.min(o.to,d.to);if(this.boundary){for(;l>f.from;l--)if(this.boundary.test(f.text[l-1-f.from])){p=l;break}for(;u<d.to;u++)if(this.boundary.test(d.text[u-d.from])){g=u;break}}let y=[],b,S=(C,x,_)=>y.push(_.range(C,x));if(f==d)for(this.regexp.lastIndex=p-f.from;(b=this.regexp.exec(f.text))&&b.index<g-f.from;)this.addMatch(b,e,b.index+f.from,S);else Vw(e.state.doc,this.regexp,p,g,(C,x)=>this.addMatch(x,e,C,S));t=t.update({filterFrom:p,filterTo:g,filter:(C,x)=>C<p||x>g,add:y})}}return t}}const Kg=/x/.unicode!=null?"gu":"g",y4=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Kg),v4={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Im=null;function b4(){var n;if(Im==null&&typeof document<"u"&&document.body){let e=document.body.style;Im=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Im||!1}const If=Se.define({combine(n){let e=Dn(n,{render:null,specialChars:y4,addSpecialChars:null});return(e.replaceTabs=!b4())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Kg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Kg)),e}});function S4(n={}){return[If.of(n),x4()]}let Iw=null;function x4(){return Iw||(Iw=kt.fromClass(class{constructor(n){this.view=n,this.decorations=Ae.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(If)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new g4({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,o=gi(e[0],0);if(o==9){let l=s.lineAt(i),u=t.state.tabSize,f=Ga(l.text,u,i-l.from);return Ae.replace({widget:new C4((u-f%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Ae.replace({widget:new T4(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(If);n.startState.facet(If)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const w4="";function _4(n){return n>=32?w4:n==10?"":String.fromCharCode(9216+n)}class T4 extends Rn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=_4(this.code),i=e.state.phrase("Control character")+" "+(v4[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class C4 extends Rn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function k4(){return E4}const A4=Ae.line({class:"cm-activeLine"}),E4=kt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(A4.range(s.from)),e=s.from)}return Ae.set(t)}},{decorations:n=>n.decorations});class M4 extends Rn{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?ol(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),s=bl(t[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return s.bottom-s.top>o*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}function O4(n){let e=kt.fromClass(class{constructor(t){this.view=t,this.placeholder=n?Ae.set([Ae.widget({widget:new M4(n),side:1}).range(0)]):Ae.none}get decorations(){return this.view.state.doc.length?Ae.none:this.placeholder}},{decorations:t=>t.decorations});return typeof n=="string"?[e,ye.contentAttributes.of({"aria-placeholder":n})]:e}const Xg=2e3;function D4(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),o=[];if(e.off>Xg||t.off>Xg||e.col<0||t.col<0){let l=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let f=i;f<=s;f++){let d=n.doc.line(f);d.length<=u&&o.push(ce.range(d.from+l,d.to+u))}}else{let l=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let f=i;f<=s;f++){let d=n.doc.line(f),p=Mg(d.text,l,n.tabSize,!0);if(p<0)o.push(ce.cursor(d.to));else{let g=Mg(d.text,u,n.tabSize);o.push(ce.range(d.from+p,d.from+g))}}}return o}function R4(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Ww(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,o=s>Xg?-1:s==i.length?R4(n,e.clientX):Ga(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:s}}function N4(n,e){let t=Ww(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(t.line).from),l=s.state.doc.lineAt(o);t={line:l.number,col:t.col,off:Math.min(t.off,l.length)},i=i.map(s.changes)}},get(s,o,l){let u=Ww(n,s);if(!u)return i;let f=D4(n.state,t,u);return f.length?l?ce.create(f.concat(i.ranges)):ce.create(f):i}}:null}function z4(n){let e=(t=>t.altKey&&t.button==0);return ye.mouseSelectionStyle.of((t,i)=>e(i)?N4(t,i):null)}const $4={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},B4={style:"cursor: crosshair"};function L4(n={}){let[e,t]=$4[n.key||"Alt"],i=kt.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,ye.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?B4:null})]}const kf="-10000px";class KT{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(l=>l);let o=null;this.tooltipViews=this.tooltips.map(l=>o=i(l,o))}update(e,t){var i;let s=e.state.facet(this.facet),o=s.filter(f=>f);if(s===this.input){for(let f of this.tooltipViews)f.update&&f.update(e);return!1}let l=[],u=t?[]:null;for(let f=0;f<o.length;f++){let d=o[f],p=-1;if(d){for(let g=0;g<this.tooltips.length;g++){let y=this.tooltips[g];y&&y.create==d.create&&(p=g)}if(p<0)l[f]=this.createTooltipView(d,f?l[f-1]:null),u&&(u[f]=!!d.above);else{let g=l[f]=this.tooltipViews[p];u&&(u[f]=t[p]),g.update&&g.update(e)}}}for(let f of this.tooltipViews)l.indexOf(f)<0&&(this.removeTooltipView(f),(i=f.destroy)===null||i===void 0||i.call(f));return t&&(u.forEach((f,d)=>t[d]=f),t.length=u.length),this.input=s,this.tooltips=o,this.tooltipViews=l,!0}}function j4(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Wm=Se.define({combine:n=>{var e,t,i;return{position:be.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||j4}}}),Gw=new WeakMap,O0=kt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Wm);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new KT(n,D0,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Wm);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=kf,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(be.safari){let l=o.getBoundingClientRect();t=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}else t=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=k0(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,l)=>{let u=this.manager.tooltipViews[l];return u.getCoords?u.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(Wm).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{visible:t,space:i,scaleX:s,scaleY:o}=n,l=[];for(let u=0;u<this.manager.tooltips.length;u++){let f=this.manager.tooltips[u],d=this.manager.tooltipViews[u],{dom:p}=d,g=n.pos[u],y=n.size[u];if(!g||f.clip!==!1&&(g.bottom<=Math.max(t.top,i.top)||g.top>=Math.min(t.bottom,i.bottom)||g.right<Math.max(t.left,i.left)-.1||g.left>Math.min(t.right,i.right)+.1)){p.style.top=kf;continue}let b=f.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,S=b?7:0,C=y.right-y.left,x=(e=Gw.get(d))!==null&&e!==void 0?e:y.bottom-y.top,_=d.offset||q4,w=this.view.textDirection==at.LTR,T=y.width>i.right-i.left?w?i.left:i.right-y.width:w?Math.max(i.left,Math.min(g.left-(b?14:0)+_.x,i.right-C)):Math.min(Math.max(i.left,g.left-C+(b?14:0)-_.x),i.right-C),E=this.above[u];!f.strictSide&&(E?g.top-x-S-_.y<i.top:g.bottom+x+S+_.y>i.bottom)&&E==i.bottom-g.bottom>g.top-i.top&&(E=this.above[u]=!E);let k=(E?g.top-i.top:i.bottom-g.bottom)-S;if(k<x&&d.resize!==!1){if(k<this.view.defaultLineHeight){p.style.top=kf;continue}Gw.set(d,x),p.style.height=(x=k)/o+"px"}else p.style.height&&(p.style.height="");let O=E?g.top-x-S-_.y:g.bottom+S+_.y,A=T+C;if(d.overlap!==!0)for(let N of l)N.left<A&&N.right>T&&N.top<O+x&&N.bottom>O&&(O=E?N.top-x-2-S:N.bottom+S+2);if(this.position=="absolute"?(p.style.top=(O-n.parent.top)/o+"px",Yw(p,(T-n.parent.left)/s)):(p.style.top=O/o+"px",Yw(p,T/s)),b){let N=g.left+(w?_.x:-_.x)-(T+14-7);b.style.left=N/s+"px"}d.overlap!==!0&&l.push({left:T,top:O,right:A,bottom:O+x}),p.classList.toggle("cm-tooltip-above",E),p.classList.toggle("cm-tooltip-below",!E),d.positioned&&d.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=kf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Yw(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const P4=ye.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),q4={x:0,y:0},D0=Se.define({enables:[O0,P4]}),ah=Se.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Hh{static create(e){return new Hh(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new KT(e,ah,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const H4=D0.compute([ah],n=>{let e=n.facet(ah);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Hh.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class U4{constructor(e,t,i,s,o){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let s,o=1;if(i.isWidget())s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let u=e.coordsAtPos(s);if(!u||t.y<u.top||t.y>u.bottom||t.x<u.left-e.defaultCharacterWidth||t.x>u.right+e.defaultCharacterWidth)return;let f=e.bidiSpans(e.state.doc.lineAt(s)).find(p=>p.from<=s&&p.to>=s),d=f&&f.dir==at.RTL?-1:1;o=t.x<u.left?-d:d}let l=this.source(e,s,o);if(l?.then){let u=this.pending={pos:s};l.then(f=>{this.pending==u&&(this.pending=null,f&&!(Array.isArray(f)&&!f.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])}))},f=>bi(e.state,f,"hover tooltip"))}else l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])})}get tooltip(){let e=this.view.plugin(O0),t=e?e.manager.tooltips.findIndex(i=>i.create==Hh.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!V4(o.dom,e)||this.pending){let{pos:l}=s[0]||this.pending,u=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:l;(l==u?this.view.posAtCoords(this.lastMove)!=l:!I4(this.view,l,u,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Af=4;function V4(n,e){let{left:t,right:i,top:s,bottom:o}=n.getBoundingClientRect(),l;if(l=n.querySelector(".cm-tooltip-arrow")){let u=l.getBoundingClientRect();s=Math.min(u.top,s),o=Math.max(u.bottom,o)}return e.clientX>=t-Af&&e.clientX<=i+Af&&e.clientY>=s-Af&&e.clientY<=o+Af}function I4(n,e,t,i,s,o){let l=n.scrollDOM.getBoundingClientRect(),u=n.documentTop+n.documentPadding.top+n.contentHeight;if(l.left>i||l.right<i||l.top>s||Math.min(l.bottom,u)<s)return!1;let f=n.posAtCoords({x:i,y:s},!1);return f>=e&&f<=t}function W4(n,e={}){let t=ze.define(),i=Zt.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(l=>!e.hideOn(o,l))),o.docChanged)){let l=[];for(let u of s){let f=o.changes.mapPos(u.pos,-1,ai.TrackDel);if(f!=null){let d=Object.assign(Object.create(null),u);d.pos=f,d.end!=null&&(d.end=o.changes.mapPos(d.end)),l.push(d)}}s=l}for(let l of o.effects)l.is(t)&&(s=l.value),l.is(G4)&&(s=[]);return s},provide:s=>ah.from(s)});return{active:i,extension:[i,kt.define(s=>new U4(s,n,i,t,e.hoverTime||300)),H4]}}function XT(n,e){let t=n.plugin(O0);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const G4=ze.define(),Fw=Se.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function _l(n,e){let t=n.plugin(QT),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const QT=kt.fromClass(class{constructor(n){this.input=n.state.facet(Tl),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Fw);this.top=new Ef(n,!0,e.topContainer),this.bottom=new Ef(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Fw);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ef(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ef(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Tl);if(t!=this.input){let i=t.filter(f=>f),s=[],o=[],l=[],u=[];for(let f of i){let d=this.specs.indexOf(f),p;d<0?(p=f(n.view),u.push(p)):(p=this.panels[d],p.update&&p.update(n)),s.push(p),(p.top?o:l).push(p)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(l);for(let f of u)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ye.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ef{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Kw(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Kw(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Kw(n){let e=n.nextSibling;return n.remove(),e}const Tl=Se.define({enables:QT});class or extends Ir{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}or.prototype.elementClass="";or.prototype.toDOM=void 0;or.prototype.mapMode=ai.TrackBefore;or.prototype.startSide=or.prototype.endSide=-1;or.prototype.point=!0;const Wf=Se.define(),Y4=Se.define(),F4={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ue.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ul=Se.define();function K4(n){return[ZT(),ul.of({...F4,...n})]}const Xw=Se.define({combine:n=>n.some(e=>e)});function ZT(n){return[X4]}const X4=kt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ul).map(e=>new Zw(n,e)),this.fixed=!n.state.facet(Xw);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Xw)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ue.iter(this.view.state.facet(Wf),this.view.viewport.from),i=[],s=this.gutters.map(o=>new Q4(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let l=!0;for(let u of o.type)if(u.type==Qt.Text&&l){Qg(t,i,u.from);for(let f of s)f.line(this.view,u,i);l=!1}else if(u.widget)for(let f of s)f.widget(this.view,u)}else if(o.type==Qt.Text){Qg(t,i,o.from);for(let l of s)l.line(this.view,o,i)}else if(o.widget)for(let l of s)l.widget(this.view,o);for(let o of s)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(ul),t=n.state.facet(ul),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ue.eq(n.startState.facet(Wf),n.state.facet(Wf),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let o of t){let l=e.indexOf(o);l<0?s.push(new Zw(this.view,o)):(this.gutters[l].update(n),s.push(this.gutters[l]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>ye.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==at.LTR?{left:i,right:s}:{right:i,left:s}})});function Qw(n){return Array.isArray(n)?n:[n]}function Qg(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Q4{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ue.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,o=(t.top-this.height)/e.scaleY,l=t.height/e.scaleY;if(this.i==s.elements.length){let u=new JT(e,l,o,i);s.elements.push(u),s.dom.appendChild(u.dom)}else s.elements[this.i].update(e,l,o,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];Qg(this.cursor,s,t.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,t,s);o&&s.unshift(o);let l=this.gutter;s.length==0&&!l.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let o of e.state.facet(Y4)){let l=o(e,t.widget,t);l&&(s||(s=[])).push(l)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Zw{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,l;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let f=o.getBoundingClientRect();l=(f.top+f.bottom)/2}else l=s.clientY;let u=e.lineBlockAtHeight(l-e.documentTop);t.domEventHandlers[i](e,u,s)&&s.preventDefault()});this.markers=Qw(t.markers(e)),t.initialSpacer&&(this.spacer=new JT(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Qw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ue.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class JT{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Z4(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,l=0;;){let u=l,f=o<t.length?t[o++]:null,d=!1;if(f){let p=f.elementClass;p&&(i+=" "+p);for(let g=l;g<this.markers.length;g++)if(this.markers[g].compare(f)){u=g,d=!0;break}}else u=this.markers.length;for(;l<u;){let p=this.markers[l++];if(p.toDOM){p.destroy(s);let g=s.nextSibling;s.remove(),s=g}}if(!f)break;f.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(f.toDOM(e),s)),d&&l++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Z4(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const J4=Se.define(),e5=Se.define(),Aa=Se.define({combine(n){return Dn(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let o=i[s],l=t[s];i[s]=o?(u,f,d)=>o(u,f,d)||l(u,f,d):l}return i}})}});class Gm extends or{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ym(n,e){return n.state.facet(Aa).formatNumber(e,n.state)}const t5=ul.compute([Aa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(J4)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new Gm(Ym(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(e5)){let o=s(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Aa)!=e.state.facet(Aa),initialSpacer(e){return new Gm(Ym(e,Jw(e.state.doc.lines)))},updateSpacer(e,t){let i=Ym(t.view,Jw(t.view.state.doc.lines));return i==e.number?e:new Gm(i)},domEventHandlers:n.facet(Aa).domEventHandlers,side:"before"}));function i5(n={}){return[Aa.of(n),ZT(),t5]}function Jw(n){let e=9;for(;e<n;)e=e*10+9;return e}const n5=new class extends or{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},r5=Wf.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(n5.range(s)))}return Ue.of(e)});function s5(){return r5}const eC=1024;let a5=0;class Fm{constructor(e,t){this.from=e,this.to=t}}class Le{constructor(e={}){this.id=a5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=xi.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Le.closedBy=new Le({deserialize:n=>n.split(" ")});Le.openedBy=new Le({deserialize:n=>n.split(" ")});Le.group=new Le({deserialize:n=>n.split(" ")});Le.isolate=new Le({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Le.contextHash=new Le({perNode:!0});Le.lookAhead=new Le({perNode:!0});Le.mounted=new Le({perNode:!0});class oh{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Le.mounted.id]}}const o5=Object.create(null);class xi{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):o5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new xi(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Le.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Le.group),o=-1;o<(s?s.length:0);o++){let l=t[o<0?i.name:s[o]];if(l)return l}}}}xi.none=new xi("",Object.create(null),0,8);class R0{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let o of e){let l=o(i);if(l){s||(s=Object.assign({},i.props));let u=l[1],f=l[0];f.combine&&f.id in s&&(u=f.combine(s[f.id],u)),s[f.id]=u}}t.push(s?new xi(i.name,s,i.id,i.flags):i)}return new R0(t)}}const Mf=new WeakMap,e2=new WeakMap;var Ht;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ht||(Ht={}));class Rt{constructor(e,t,i,s,o){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[l,u]of o)this.props[typeof l=="number"?l:l.id]=u}}toString(){let e=oh.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Jg(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Mf.get(this)||this.topNode,o=new Jg(s);return o.moveTo(e,t),Mf.set(this,o._tree),o}get topNode(){return new Qi(this,0,0,null)}resolve(e,t=0){let i=Cl(Mf.get(this)||this.topNode,e,t,!1);return Mf.set(this,i),i}resolveInner(e,t=0){let i=Cl(e2.get(this)||this.topNode,e,t,!0);return e2.set(this,i),i}resolveStack(e,t=0){return u5(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:o=this.length}=e,l=e.mode||0,u=(l&Ht.IncludeAnonymous)>0;for(let f=this.cursor(l|Ht.IncludeAnonymous);;){let d=!1;if(f.from<=o&&f.to>=s&&(!u&&f.type.isAnonymous||t(f)!==!1)){if(f.firstChild())continue;d=!0}for(;d&&i&&(u||!f.type.isAnonymous)&&i(f),!f.nextSibling();){if(!f.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:$0(xi.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new Rt(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new Rt(xi.none,t,i,s)))}static build(e){return f5(e)}}Rt.empty=new Rt(xi.none,[],[],0);class N0{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new N0(this.buffer,this.index)}}class Fr{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return xi.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return o+"("+l.join(",")+")"}findChild(e,t,i,s,o){let{buffer:l}=this,u=-1;for(let f=e;f!=t&&!(tC(o,s,l[f+1],l[f+2])&&(u=f,i>0));f=l[f+3]);return u}slice(e,t,i){let s=this.buffer,o=new Uint16Array(t-e),l=0;for(let u=e,f=0;u<t;){o[f++]=s[u++],o[f++]=s[u++]-i;let d=o[f++]=s[u++]-i;o[f++]=s[u++]-e,l=Math.max(l,d)}return new Fr(o,l,this.set)}}function tC(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Cl(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let l=!i&&n instanceof Qi&&n.index<0?null:n.parent;if(!l)return n;n=l}let o=i?0:Ht.IgnoreOverlays;if(i)for(let l=n,u=l.parent;u;l=u,u=l.parent)l instanceof Qi&&l.index<0&&((s=u.enter(e,t,o))===null||s===void 0?void 0:s.from)!=l.from&&(n=u);for(;;){let l=n.enter(e,t,o);if(!l)return n;n=l}}class iC{cursor(e=0){return new Jg(this,e)}getChild(e,t=null,i=null){let s=t2(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return t2(this,e,t,i)}resolve(e,t=0){return Cl(this,e,t,!1)}resolveInner(e,t=0){return Cl(this,e,t,!0)}matchContext(e){return Zg(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class Qi extends iC{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,o=0){for(let l=this;;){for(let{children:u,positions:f}=l._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],g=f[e]+l.from;if(tC(s,i,g,g+p.length)){if(p instanceof Fr){if(o&Ht.ExcludeBuffers)continue;let y=p.findChild(0,p.buffer.length,t,i-g,s);if(y>-1)return new Hr(new l5(l,p,e,g),null,y)}else if(o&Ht.IncludeAnonymous||!p.type.isAnonymous||z0(p)){let y;if(!(o&Ht.IgnoreMounts)&&(y=oh.get(p))&&!y.overlay)return new Qi(y.tree,g,e,l);let b=new Qi(p,g,e,l);return o&Ht.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,i,s)}}}if(o&Ht.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,i=0){let s;if(!(i&Ht.IgnoreOverlays)&&(s=oh.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:l,to:u}of s.overlay)if((t>0?l<=o:l<o)&&(t<0?u>=o:u>o))return new Qi(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function t2(n,e,t,i){let s=n.cursor(),o=[];if(!s.firstChild())return o;if(t!=null){for(let l=!1;!l;)if(l=s.type.is(t),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function Zg(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class l5{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Hr extends iC{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Hr(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,i=0){if(i&Ht.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Hr(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Hr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Hr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let l=i.buffer[this.index+1];e.push(i.slice(s,o,l)),t.push(0)}return new Rt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function nC(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let l=n[o];(l.from>t.from||l.to<t.to)&&(t=l,e=o)}let i=t instanceof Qi&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new c5(s,t)}class c5{constructor(e,t){this.heads=e,this.node=t}get next(){return nC(this.heads)}}function u5(n,e,t){let i=n.resolveInner(e,t),s=null;for(let o=i instanceof Qi?i:i.context.parent;o;o=o.parent)if(o.index<0){let l=o.parent;(s||(s=[i])).push(l.resolve(e,t)),o=l}else{let l=oh.get(o.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let u=new Qi(l.tree,l.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(Cl(u,e,t,!1))}}return s?nC(s):i}class Jg{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Qi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Qi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ht.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ht.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ht.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,l=e<0?-1:i._tree.children.length;o!=l;o+=e){let u=i._tree.children[o];if(this.mode&Ht.IncludeAnonymous||u instanceof Fr||!u.type.isAnonymous||z0(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let l=e;l;l=l._parent)if(l.index==s){if(s==this.index)return l;t=l,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)t=new Hr(this.buffer,t,this.stack[s]);return this.bufferNode=new Hr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Zg(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return Zg(this._tree,e,s);let l=i[t.buffer[this.stack[o]]];if(!l.isAnonymous){if(e[s]&&e[s]!=l.name)return!1;s--}}return!0}}function z0(n){return n.children.some(e=>e instanceof Fr||!e.type.isAnonymous||z0(e))}function f5(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=eC,reused:o=[],minRepeatType:l=i.types.length}=n,u=Array.isArray(t)?new N0(t,t.length):t,f=i.types,d=0,p=0;function g(k,O,A,N,$,V){let{id:q,start:H,end:X,size:te}=u,fe=p,I=d;if(te<0)if(u.next(),te==-1){let D=o[q];A.push(D),N.push(H-k);return}else if(te==-3){d=q;return}else if(te==-4){p=q;return}else throw new RangeError(`Unrecognized record size: ${te}`);let ne=f[q],oe,pe,K=H-k;if(X-H<=s&&(pe=x(u.pos-O,$))){let D=new Uint16Array(pe.size-pe.skip),L=u.pos-pe.size,j=D.length;for(;u.pos>L;)j=_(pe.start,D,j);oe=new Fr(D,X-pe.start,i),K=pe.start-k}else{let D=u.pos-te;u.next();let L=[],j=[],R=q>=l?q:-1,B=0,F=X;for(;u.pos>D;)R>=0&&u.id==R&&u.size>=0?(u.end<=F-s&&(S(L,j,H,B,u.end,F,R,fe,I),B=L.length,F=u.end),u.next()):V>2500?y(H,D,L,j):g(H,D,L,j,R,V+1);if(R>=0&&B>0&&B<L.length&&S(L,j,H,B,H,F,R,fe,I),L.reverse(),j.reverse(),R>-1&&B>0){let he=b(ne,I);oe=$0(ne,L,j,0,L.length,0,X-H,he,he)}else oe=C(ne,L,j,X-H,fe-X,I)}A.push(oe),N.push(K)}function y(k,O,A,N){let $=[],V=0,q=-1;for(;u.pos>O;){let{id:H,start:X,end:te,size:fe}=u;if(fe>4)u.next();else{if(q>-1&&X<q)break;q<0&&(q=te-s),$.push(H,X,te),V++,u.next()}}if(V){let H=new Uint16Array(V*4),X=$[$.length-2];for(let te=$.length-3,fe=0;te>=0;te-=3)H[fe++]=$[te],H[fe++]=$[te+1]-X,H[fe++]=$[te+2]-X,H[fe++]=fe;A.push(new Fr(H,$[2]-X,i)),N.push(X-k)}}function b(k,O){return(A,N,$)=>{let V=0,q=A.length-1,H,X;if(q>=0&&(H=A[q])instanceof Rt){if(!q&&H.type==k&&H.length==$)return H;(X=H.prop(Le.lookAhead))&&(V=N[q]+H.length+X)}return C(k,A,N,$,V,O)}}function S(k,O,A,N,$,V,q,H,X){let te=[],fe=[];for(;k.length>N;)te.push(k.pop()),fe.push(O.pop()+A-$);k.push(C(i.types[q],te,fe,V-$,H-V,X)),O.push($-A)}function C(k,O,A,N,$,V,q){if(V){let H=[Le.contextHash,V];q=q?[H].concat(q):[H]}if($>25){let H=[Le.lookAhead,$];q=q?[H].concat(q):[H]}return new Rt(k,O,A,N,q)}function x(k,O){let A=u.fork(),N=0,$=0,V=0,q=A.end-s,H={size:0,start:0,skip:0};e:for(let X=A.pos-k;A.pos>X;){let te=A.size;if(A.id==O&&te>=0){H.size=N,H.start=$,H.skip=V,V+=4,N+=4,A.next();continue}let fe=A.pos-te;if(te<0||fe<X||A.start<q)break;let I=A.id>=l?4:0,ne=A.start;for(A.next();A.pos>fe;){if(A.size<0)if(A.size==-3||A.size==-4)I+=4;else break e;else A.id>=l&&(I+=4);A.next()}$=ne,N+=te,V+=I}return(O<0||N==k)&&(H.size=N,H.start=$,H.skip=V),H.size>4?H:void 0}function _(k,O,A){let{id:N,start:$,end:V,size:q}=u;if(u.next(),q>=0&&N<l){let H=A;if(q>4){let X=u.pos-(q-4);for(;u.pos>X;)A=_(k,O,A)}O[--A]=H,O[--A]=V-k,O[--A]=$-k,O[--A]=N}else q==-3?d=N:q==-4&&(p=N);return A}let w=[],T=[];for(;u.pos>0;)g(n.start||0,n.bufferStart||0,w,T,-1,0);let E=(e=n.length)!==null&&e!==void 0?e:w.length?T[0]+w[0].length:0;return new Rt(f[n.topID],w.reverse(),T.reverse(),E)}const i2=new WeakMap;function Gf(n,e){if(!n.isAnonymous||e instanceof Fr||e.type!=n)return 1;let t=i2.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Rt)){t=1;break}t+=Gf(n,i)}i2.set(e,t)}return t}function $0(n,e,t,i,s,o,l,u,f){let d=0;for(let S=i;S<s;S++)d+=Gf(n,e[S]);let p=Math.ceil(d*1.5/8),g=[],y=[];function b(S,C,x,_,w){for(let T=x;T<_;){let E=T,k=C[T],O=Gf(n,S[T]);for(T++;T<_;T++){let A=Gf(n,S[T]);if(O+A>=p)break;O+=A}if(T==E+1){if(O>p){let A=S[E];b(A.children,A.positions,0,A.children.length,C[E]+w);continue}g.push(S[E])}else{let A=C[T-1]+S[T-1].length-k;g.push($0(n,S,C,E,T,k,A,null,f))}y.push(k+w-o)}}return b(e,t,i,s,0),(u||f)(g,y,l)}class As{constructor(e,t,i,s,o=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(o?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new As(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&s.push(o);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],o=1,l=e.length?e[0]:null;for(let u=0,f=0,d=0;;u++){let p=u<t.length?t[u]:null,g=p?p.fromA:1e9;if(g-f>=i)for(;l&&l.from<g;){let y=l;if(f>=y.from||g<=y.to||d){let b=Math.max(y.from,f)-d,S=Math.min(y.to,g)-d;y=b>=S?null:new As(b,S,y.tree,y.offset+d,u>0,!!p)}if(y&&s.push(y),l.to>g)break;l=o<e.length?e[o++]:null}if(!p)break;f=p.toA,d=p.toA-p.toB}return s}}class rC{startParse(e,t,i){return typeof e=="string"&&(e=new h5(e)),i=i?i.length?i.map(s=>new Fm(s.from,s.to)):[new Fm(0,0)]:[new Fm(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let o=s.advance();if(o)return o}}}class h5{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Le({perNode:!0});let d5=0;class Yi{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=d5++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Yi&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let s=new Yi(i,[],null,[]);if(s.set.push(s),t)for(let o of t.set)s.set.push(o);return s}static defineModifier(e){let t=new lh(e);return i=>i.modified.indexOf(t)>-1?i:lh.get(i.base||i,i.modified.concat(t).sort((s,o)=>s.id-o.id))}}let p5=0;class lh{constructor(e){this.name=e,this.instances=[],this.id=p5++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(u=>u.base==e&&m5(t,u.modified));if(i)return i;let s=[],o=new Yi(e.name,s,e,t);for(let u of t)u.instances.push(o);let l=g5(t);for(let u of e.set)if(!u.modified.length)for(let f of l)s.push(lh.get(u,f));return o}}function m5(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function g5(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function sC(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let o=[],l=2,u=s;for(let g=0;;){if(u=="..."&&g>0&&g+3==s.length){l=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!y)throw new RangeError("Invalid path: "+s);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==s.length)break;let b=s[g++];if(g==s.length&&b=="!"){l=0;break}if(b!="/")throw new RangeError("Invalid path: "+s);u=s.slice(g)}let f=o.length-1,d=o[f];if(!d)throw new RangeError("Invalid path: "+s);let p=new kl(i,l,f>0?o.slice(0,f):null);e[d]=p.sort(e[d])}}return aC.add(e)}const aC=new Le({combine(n,e){let t,i,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let o=new kl(s.tags,s.mode,s.context);t?t.next=o:i=o,t=o}return i}});class kl{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}kl.empty=new kl([],2,null);function oC(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let l of o.tag)t[l.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let l=s;for(let u of o)for(let f of u.set){let d=t[f.id];if(d){l=l?l+" "+d:d;break}}return l},scope:i}}function y5(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function v5(n,e,t,i=0,s=n.length){let o=new b5(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,s,"",o.highlighters),o.flush(s)}class b5{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,o){let{type:l,from:u,to:f}=e;if(u>=i||f<=t)return;l.isTop&&(o=this.highlighters.filter(b=>!b.scope||b.scope(l)));let d=s,p=S5(e)||kl.empty,g=y5(o,p.tags);if(g&&(d&&(d+=" "),d+=g,p.mode==1&&(s+=(s?" ":"")+g)),this.startSpan(Math.max(t,u),d),p.opaque)return;let y=e.tree&&e.tree.prop(Le.mounted);if(y&&y.overlay){let b=e.node.enter(y.overlay[0].from+u,1),S=this.highlighters.filter(x=>!x.scope||x.scope(y.tree.type)),C=e.firstChild();for(let x=0,_=u;;x++){let w=x<y.overlay.length?y.overlay[x]:null,T=w?w.from+u:f,E=Math.max(t,_),k=Math.min(i,T);if(E<k&&C)for(;e.from<k&&(this.highlightRange(e,E,k,s,o),this.startSpan(Math.min(k,e.to),d),!(e.to>=T||!e.nextSibling())););if(!w||T>i)break;_=w.to+u,_>t&&(this.highlightRange(b.cursor(),Math.max(t,w.from+u),Math.min(i,_),"",S),this.startSpan(Math.min(i,_),d))}C&&e.parent()}else if(e.firstChild()){y&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function S5(n){let e=n.type.prop(aC);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const me=Yi.define,Of=me(),Lr=me(),n2=me(Lr),r2=me(Lr),jr=me(),Df=me(jr),Km=me(jr),wn=me(),bs=me(wn),Sn=me(),xn=me(),e0=me(),Qo=me(e0),Rf=me(),re={comment:Of,lineComment:me(Of),blockComment:me(Of),docComment:me(Of),name:Lr,variableName:me(Lr),typeName:n2,tagName:me(n2),propertyName:r2,attributeName:me(r2),className:me(Lr),labelName:me(Lr),namespace:me(Lr),macroName:me(Lr),literal:jr,string:Df,docString:me(Df),character:me(Df),attributeValue:me(Df),number:Km,integer:me(Km),float:me(Km),bool:me(jr),regexp:me(jr),escape:me(jr),color:me(jr),url:me(jr),keyword:Sn,self:me(Sn),null:me(Sn),atom:me(Sn),unit:me(Sn),modifier:me(Sn),operatorKeyword:me(Sn),controlKeyword:me(Sn),definitionKeyword:me(Sn),moduleKeyword:me(Sn),operator:xn,derefOperator:me(xn),arithmeticOperator:me(xn),logicOperator:me(xn),bitwiseOperator:me(xn),compareOperator:me(xn),updateOperator:me(xn),definitionOperator:me(xn),typeOperator:me(xn),controlOperator:me(xn),punctuation:e0,separator:me(e0),bracket:Qo,angleBracket:me(Qo),squareBracket:me(Qo),paren:me(Qo),brace:me(Qo),content:wn,heading:bs,heading1:me(bs),heading2:me(bs),heading3:me(bs),heading4:me(bs),heading5:me(bs),heading6:me(bs),contentSeparator:me(wn),list:me(wn),quote:me(wn),emphasis:me(wn),strong:me(wn),link:me(wn),monospace:me(wn),strikethrough:me(wn),inserted:me(),deleted:me(),changed:me(),invalid:me(),meta:Rf,documentMeta:me(Rf),annotation:me(Rf),processingInstruction:me(Rf),definition:Yi.defineModifier("definition"),constant:Yi.defineModifier("constant"),function:Yi.defineModifier("function"),standard:Yi.defineModifier("standard"),local:Yi.defineModifier("local"),special:Yi.defineModifier("special")};for(let n in re){let e=re[n];e instanceof Yi&&(e.name=n)}oC([{tag:re.link,class:"tok-link"},{tag:re.heading,class:"tok-heading"},{tag:re.emphasis,class:"tok-emphasis"},{tag:re.strong,class:"tok-strong"},{tag:re.keyword,class:"tok-keyword"},{tag:re.atom,class:"tok-atom"},{tag:re.bool,class:"tok-bool"},{tag:re.url,class:"tok-url"},{tag:re.labelName,class:"tok-labelName"},{tag:re.inserted,class:"tok-inserted"},{tag:re.deleted,class:"tok-deleted"},{tag:re.literal,class:"tok-literal"},{tag:re.string,class:"tok-string"},{tag:re.number,class:"tok-number"},{tag:[re.regexp,re.escape,re.special(re.string)],class:"tok-string2"},{tag:re.variableName,class:"tok-variableName"},{tag:re.local(re.variableName),class:"tok-variableName tok-local"},{tag:re.definition(re.variableName),class:"tok-variableName tok-definition"},{tag:re.special(re.variableName),class:"tok-variableName2"},{tag:re.definition(re.propertyName),class:"tok-propertyName tok-definition"},{tag:re.typeName,class:"tok-typeName"},{tag:re.namespace,class:"tok-namespace"},{tag:re.className,class:"tok-className"},{tag:re.macroName,class:"tok-macroName"},{tag:re.propertyName,class:"tok-propertyName"},{tag:re.operator,class:"tok-operator"},{tag:re.comment,class:"tok-comment"},{tag:re.meta,class:"tok-meta"},{tag:re.invalid,class:"tok-invalid"},{tag:re.punctuation,class:"tok-punctuation"}]);var Xm;const Ea=new Le;function x5(n){return Se.define({combine:n?e=>e.concat(n):void 0})}const w5=new Le;class on{constructor(e,t,i=[],s=""){this.data=e,this.name=s,We.prototype.hasOwnProperty("tree")||Object.defineProperty(We.prototype,"tree",{get(){return ti(this)}}),this.parser=t,this.extension=[Kr.of(this),We.languageData.of((o,l,u)=>{let f=s2(o,l,u),d=f.type.prop(Ea);if(!d)return[];let p=o.facet(d),g=f.type.prop(w5);if(g){let y=f.resolve(l-f.from,u);for(let b of g)if(b.test(y,o)){let S=o.facet(b.facet);return b.type=="replace"?S:S.concat(p)}}return p})].concat(i)}isActiveAt(e,t,i=-1){return s2(e,t,i).type.prop(Ea)==this.data}findRegions(e){let t=e.facet(Kr);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(o,l)=>{if(o.prop(Ea)==this.data){i.push({from:l,to:l+o.length});return}let u=o.prop(Le.mounted);if(u){if(u.tree.prop(Ea)==this.data){if(u.overlay)for(let f of u.overlay)i.push({from:f.from+l,to:f.to+l});else i.push({from:l,to:l+o.length});return}else if(u.overlay){let f=i.length;if(s(u.tree,u.overlay[0].from+l),i.length>f)return}}for(let f=0;f<o.children.length;f++){let d=o.children[f];d instanceof Rt&&s(d,o.positions[f]+l)}};return s(ti(e),0),i}get allowsNesting(){return!0}}on.setState=ze.define();function s2(n,e,t){let i=n.facet(Kr),s=ti(n).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,t,Ht.ExcludeBuffers))o.type.isTop&&(s=o);return s}class ch extends on{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=x5(e.languageData);return new ch(t,e.parser.configure({props:[Ea.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new ch(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ti(n){let e=n.field(on.state,!1);return e?e.tree:Rt.empty}class _5{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Zo=null;class uh{constructor(e,t,i=[],s,o,l,u,f){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=l,this.skipped=u,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new uh(e,t,[],Rt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new _5(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Rt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(As.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(As.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Zo;Zo=this;try{return e()}finally{Zo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=a2(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:o,viewport:l,skipped:u}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((d,p,g,y)=>f.push({fromA:d,toA:p,fromB:g,toB:y})),i=As.applyChanges(i,f),s=Rt.empty,o=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){u=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&u.push({from:p,to:g})}}}return new uh(this.parser,t,i,s,o,l,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=a2(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends rC{createParse(t,i,s){let o=s[0].from,l=s[s.length-1].to;return{parsedPos:o,advance(){let f=Zo;if(f){for(let d of s)f.tempSkipped.push(d);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=l,new Rt(xi.none,[],[],l-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Zo}}function a2(n,e,t){return As.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ua{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Ua(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=uh.create(e.facet(Kr).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Ua(i)}}on.state=Zt.define({create:Ua.init,update(n,e){for(let t of e.effects)if(t.is(on.setState))return t.value;return e.startState.facet(Kr)!=e.state.facet(Kr)?Ua.init(e.state):n.apply(e)}});let lC=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(lC=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Qm=typeof navigator<"u"&&(!((Xm=navigator.scheduling)===null||Xm===void 0)&&Xm.isInputPending)?()=>navigator.scheduling.isInputPending():null,T5=kt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(on.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(on.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=lC(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(on.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Qm?Math.max(25,e.timeRemaining()-5):1e9),u=o.context.treeLen<s&&i.doc.length>s+1e3,f=o.context.work(()=>Qm&&Qm()||Date.now()>l,s+(u?0:1e5));this.chunkBudget-=Date.now()-t,(f||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:on.setState.of(new Ua(o.context))})),this.chunkBudget>0&&!(f&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>bi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Kr=Se.define({combine(n){return n.length?n[0]:null},enables:n=>[on.state,T5,ye.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class C5{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const k5=Se.define(),Uh=Se.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function fh(n){let e=n.facet(Uh);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Al(n,e){let t="",i=n.tabSize,s=n.facet(Uh)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let o=0;o<e;o++)t+=s;return t}function B0(n,e){n instanceof We&&(n=new Vh(n));for(let i of n.state.facet(k5)){let s=i(n,e);if(s!==void 0)return s}let t=ti(n.state);return t.length>=e?A5(n,t,e):null}class Vh{constructor(e,t={}){this.state=e,this.options=t,this.unit=fh(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.countColumn(i,e-s),l=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return l>-1&&(o+=l-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Ga(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let l=o(s);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const cC=new Le;function A5(n,e,t){let i=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=i.node){let o=[];for(let l=s;l&&!(l.from<i.node.from||l.to>i.node.to||l.from==i.node.from&&l.type==i.node.type);l=l.parent)o.push(l);for(let l=o.length-1;l>=0;l--)i={node:o[l],next:i}}return uC(i,n,t)}function uC(n,e,t){for(let i=n;i;i=i.next){let s=M5(i.node);if(s)return s(L0.create(e,t,i))}return 0}function E5(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function M5(n){let e=n.type.prop(cC);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Le.closedBy))){let s=n.lastChild,o=s&&i.indexOf(s.name)>-1;return l=>N5(l,!0,1,void 0,o&&!E5(l)?s.from:void 0)}return n.parent==null?O5:null}function O5(){return 0}class L0 extends Vh{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new L0(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(D5(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return uC(this.context.next,this.base,this.pos)}}function D5(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function R5(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),l=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let u=t.to;;){let f=e.childAfter(u);if(!f||f==i)return null;if(!f.type.isSkipped){if(f.from>=l)return null;let d=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+d}}u=f.to}}function N5(n,e,t,i,s){let o=n.textAfter,l=o.match(/^\s*/)[0].length,u=i&&o.slice(l,l+i.length)==i||s==n.pos+l,f=R5(n);return f?u?n.column(f.from):n.column(f.to):n.baseIndent+(u?0:n.unit*t)}function o2({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const z5=200;function $5(){return We.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+z5)return n;let o=t.sliceString(s.from,i);if(!e.some(d=>d.test(o)))return n;let{state:l}=n,u=-1,f=[];for(let{head:d}of l.selection.ranges){let p=l.doc.lineAt(d);if(p.from==u)continue;u=p.from;let g=B0(l,p.from);if(g==null)continue;let y=/^\s*/.exec(p.text)[0],b=Al(l,g);y!=b&&f.push({from:p.from,to:p.from+y.length,insert:b})}return f.length?[n,{changes:f,sequential:!0}]:n})}const B5=Se.define(),fC=new Le;function L5(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function j5(n,e,t){let i=ti(n);if(i.length<t)return null;let s=i.resolveStack(t,1),o=null;for(let l=s;l;l=l.next){let u=l.node;if(u.to<=t||u.from>t)continue;if(o&&u.from<e)break;let f=u.type.prop(fC);if(f&&(u.to<i.length-50||i.length==n.doc.length||!P5(u))){let d=f(u,n);d&&d.from<=t&&d.from>=e&&d.to>t&&(o=d)}}return o}function P5(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function hh(n,e,t){for(let i of n.facet(B5)){let s=i(n,e,t);if(s)return s}return j5(n,e,t)}function hC(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Ih=ze.define({map:hC}),Vl=ze.define({map:hC});function dC(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Rs=Zt.define({create(){return Ae.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=l2(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(Ih)&&!q5(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(gC),s=i?Ae.replace({widget:new Y5(i(e.state,t.value))}):c2;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(Vl)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=l2(n,e.selection.main.head)),n},provide:n=>ye.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(c2.range(i,s))}return Ae.set(e,!0)}});function l2(n,e,t=e){let i=!1;return n.between(e,t,(s,o)=>{s<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(s,o)=>s>=t||o<=e}):n}function dh(n,e,t){var i;let s=null;return(i=n.field(Rs,!1))===null||i===void 0||i.between(e,t,(o,l)=>{(!s||s.from>o)&&(s={from:o,to:l})}),s}function q5(n,e,t){let i=!1;return n.between(e,e,(s,o)=>{s==e&&o==t&&(i=!0)}),i}function pC(n,e){return n.field(Rs,!1)?e:e.concat(ze.appendConfig.of(yC()))}const H5=n=>{for(let e of dC(n)){let t=hh(n.state,e.from,e.to);if(t)return n.dispatch({effects:pC(n.state,[Ih.of(t),mC(n,t)])}),!0}return!1},U5=n=>{if(!n.state.field(Rs,!1))return!1;let e=[];for(let t of dC(n)){let i=dh(n.state,t.from,t.to);i&&e.push(Vl.of(i),mC(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function mC(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return ye.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const V5=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),o=hh(e,s.from,s.to);o&&t.push(Ih.of(o)),i=(o?n.lineBlockAt(o.to):s).to+1}return t.length&&n.dispatch({effects:pC(n.state,t)}),!!t.length},I5=n=>{let e=n.state.field(Rs,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(Vl.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},W5=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:H5},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:U5},{key:"Ctrl-Alt-[",run:V5},{key:"Ctrl-Alt-]",run:I5}],G5={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},gC=Se.define({combine(n){return Dn(n,G5)}});function yC(n){return[Rs,X5]}function vC(n,e){let{state:t}=n,i=t.facet(gC),s=l=>{let u=n.lineBlockAt(n.posAtDOM(l.target)),f=dh(n.state,u.from,u.to);f&&n.dispatch({effects:Vl.of(f)}),l.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const c2=Ae.replace({widget:new class extends Rn{toDOM(n){return vC(n,null)}}});class Y5 extends Rn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return vC(e,this.value)}}const F5={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Zm extends or{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function K5(n={}){let e={...F5,...n},t=new Zm(e,!0),i=new Zm(e,!1),s=kt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Kr)!=l.state.facet(Kr)||l.startState.field(Rs,!1)!=l.state.field(Rs,!1)||ti(l.startState)!=ti(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let u=new sr;for(let f of l.viewportLineBlocks){let d=dh(l.state,f.from,f.to)?i:hh(l.state,f.from,f.to)?t:null;d&&u.add(f.from,f.from,d)}return u.finish()}}),{domEventHandlers:o}=e;return[s,K4({class:"cm-foldGutter",markers(l){var u;return((u=l.plugin(s))===null||u===void 0?void 0:u.markers)||Ue.empty},initialSpacer(){return new Zm(e,!1)},domEventHandlers:{...o,click:(l,u,f)=>{if(o.click&&o.click(l,u,f))return!0;let d=dh(l.state,u.from,u.to);if(d)return l.dispatch({effects:Vl.of(d)}),!0;let p=hh(l.state,u.from,u.to);return p?(l.dispatch({effects:Ih.of(p)}),!0):!1}}}),yC()]}const X5=ye.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Il{constructor(e,t){this.specs=e;let i;function s(u){let f=Wr.newName();return(i||(i=Object.create(null)))["."+f]=u,f}const o=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,l=t.scope;this.scope=l instanceof on?u=>u.prop(Ea)==l.data:l?u=>u==l:void 0,this.style=oC(e.map(u=>({tag:u.tag,class:u.class||s(Object.assign({},u,{tag:null}))})),{all:o}).style,this.module=i?new Wr(i):null,this.themeType=t.themeType}static define(e,t){return new Il(e,t||{})}}const t0=Se.define(),bC=Se.define({combine(n){return n.length?[n[0]]:null}});function Jm(n){let e=n.facet(t0);return e.length?e:n.facet(bC)}function SC(n,e){let t=[Z5],i;return n instanceof Il&&(n.module&&t.push(ye.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(bC.of(n)):i?t.push(t0.computeN([ye.darkTheme],s=>s.facet(ye.darkTheme)==(i=="dark")?[n]:[])):t.push(t0.of(n)),t}class Q5{constructor(e){this.markCache=Object.create(null),this.tree=ti(e.state),this.decorations=this.buildDeco(e,Jm(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ti(e.state),i=Jm(e.state),s=i!=Jm(e.startState),{viewport:o}=e.view,l=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!s&&t.type==this.tree.type&&l>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ae.none;let i=new sr;for(let{from:s,to:o}of e.visibleRanges)v5(this.tree,t,(l,u,f)=>{i.add(l,u,this.markCache[f]||(this.markCache[f]=Ae.mark({class:f})))},s,o);return i.finish()}}const Z5=Ns.high(kt.fromClass(Q5,{decorations:n=>n.decorations})),J5=Il.define([{tag:re.meta,color:"#404740"},{tag:re.link,textDecoration:"underline"},{tag:re.heading,textDecoration:"underline",fontWeight:"bold"},{tag:re.emphasis,fontStyle:"italic"},{tag:re.strong,fontWeight:"bold"},{tag:re.strikethrough,textDecoration:"line-through"},{tag:re.keyword,color:"#708"},{tag:[re.atom,re.bool,re.url,re.contentSeparator,re.labelName],color:"#219"},{tag:[re.literal,re.inserted],color:"#164"},{tag:[re.string,re.deleted],color:"#a11"},{tag:[re.regexp,re.escape,re.special(re.string)],color:"#e40"},{tag:re.definition(re.variableName),color:"#00f"},{tag:re.local(re.variableName),color:"#30a"},{tag:[re.typeName,re.namespace],color:"#085"},{tag:re.className,color:"#167"},{tag:[re.special(re.variableName),re.macroName],color:"#256"},{tag:re.definition(re.propertyName),color:"#00c"},{tag:re.comment,color:"#940"},{tag:re.invalid,color:"#f00"}]),e$=ye.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),xC=1e4,wC="()[]{}",_C=Se.define({combine(n){return Dn(n,{afterCursor:!0,brackets:wC,maxScanDistance:xC,renderMatch:n$})}}),t$=Ae.mark({class:"cm-matchingBracket"}),i$=Ae.mark({class:"cm-nonmatchingBracket"});function n$(n){let e=[],t=n.matched?t$:i$;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const r$=Zt.define({create(){return Ae.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(_C);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=An(e.state,s.head,-1,i)||s.head>0&&An(e.state,s.head-1,1,i)||i.afterCursor&&(An(e.state,s.head,1,i)||s.head<e.state.doc.length&&An(e.state,s.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Ae.set(t,!0)},provide:n=>ye.decorations.from(n)}),s$=[r$,e$];function a$(n={}){return[_C.of(n),s$]}const o$=new Le;function i0(n,e,t){let i=n.prop(e<0?Le.openedBy:Le.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function n0(n){let e=n.type.prop(o$);return e?e(n.node):n}function An(n,e,t,i={}){let s=i.maxScanDistance||xC,o=i.brackets||wC,l=ti(n),u=l.resolveInner(e,t);for(let f=u;f;f=f.parent){let d=i0(f.type,t,o);if(d&&f.from<f.to){let p=n0(f);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return l$(n,e,t,f,p,d,o)}}return c$(n,e,t,l,u.type,s,o)}function l$(n,e,t,i,s,o,l){let u=i.parent,f={from:s.from,to:s.to},d=0,p=u?.cursor();if(p&&(t<0?p.childBefore(i.from):p.childAfter(i.to)))do if(t<0?p.to<=i.from:p.from>=i.to){if(d==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let g=n0(p);return{start:f,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(i0(p.type,t,l))d++;else if(i0(p.type,-t,l)){if(d==0){let g=n0(p);return{start:f,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:f,matched:!1}}function c$(n,e,t,i,s,o,l){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),f=l.indexOf(u);if(f<0||f%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),g=0;for(let y=0;!p.next().done&&y<=o;){let b=p.value;t<0&&(y+=b.length);let S=e+y*t;for(let C=t>0?0:b.length-1,x=t>0?b.length:-1;C!=x;C+=t){let _=l.indexOf(b[C]);if(!(_<0||i.resolveInner(S+C,1).type!=s))if(_%2==0==t>0)g++;else{if(g==1)return{start:d,end:{from:S+C,to:S+C+1},matched:_>>1==f>>1};g--}}t>0&&(y+=b.length)}return p.done?{start:d,matched:!1}:null}const u$=Object.create(null),u2=[xi.none],f2=[],h2=Object.create(null),f$=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])f$[n]=h$(u$,e);function eg(n,e){f2.indexOf(n)>-1||(f2.push(n),console.warn(e))}function h$(n,e){let t=[];for(let u of e.split(" ")){let f=[];for(let d of u.split(".")){let p=n[d]||re[d];p?typeof p=="function"?f.length?f=f.map(p):eg(d,`Modifier ${d} used at start of tag`):f.length?eg(d,`Tag ${d} used as modifier`):f=Array.isArray(p)?p:[p]:eg(d,`Unknown highlighting tag ${d}`)}for(let d of f)t.push(d)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(u=>u.id),o=h2[s];if(o)return o.id;let l=h2[s]=xi.define({id:u2.length,name:i,props:[sC({[i]:t})]});return u2.push(l),l.id}at.RTL,at.LTR;const d$=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=P0(n.state,t.from);return i.line?p$(n):i.block?g$(n):!1};function j0(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const p$=j0(b$,0),m$=j0(TC,0),g$=j0((n,e)=>TC(n,e,v$(e)),0);function P0(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Jo=50;function y$(n,{open:e,close:t},i,s){let o=n.sliceDoc(i-Jo,i),l=n.sliceDoc(s,s+Jo),u=/\s*$/.exec(o)[0].length,f=/^\s*/.exec(l)[0].length,d=o.length-u;if(o.slice(d-e.length,d)==e&&l.slice(f,f+t.length)==t)return{open:{pos:i-u,margin:u&&1},close:{pos:s+f,margin:f&&1}};let p,g;s-i<=2*Jo?p=g=n.sliceDoc(i,s):(p=n.sliceDoc(i,i+Jo),g=n.sliceDoc(s-Jo,s));let y=/^\s*/.exec(p)[0].length,b=/\s*$/.exec(g)[0].length,S=g.length-b-t.length;return p.slice(y,y+e.length)==e&&g.slice(S,S+t.length)==t?{open:{pos:i+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:s-b-t.length,margin:/\s/.test(g.charAt(S-1))?1:0}}:null}function v$(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to);s.from>i.from&&s.from==t.to&&(s=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function TC(n,e,t=e.selection.ranges){let i=t.map(o=>P0(e,o.from).block);if(!i.every(o=>o))return null;let s=t.map((o,l)=>y$(e,i[l],o.from,o.to));if(n!=2&&!s.every(o=>o))return{changes:e.changes(t.map((o,l)=>s[l]?[]:[{from:o.from,insert:i[l].open+" "},{from:o.to,insert:" "+i[l].close}]))};if(n!=1&&s.some(o=>o)){let o=[];for(let l=0,u;l<s.length;l++)if(u=s[l]){let f=i[l],{open:d,close:p}=u;o.push({from:d.pos-f.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+f.close.length})}return{changes:o}}return null}function b$(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:l}of t){let u=i.length,f=1e9,d=P0(e,o).line;if(d){for(let p=o;p<=l;){let g=e.doc.lineAt(p);if(g.from>s&&(o==l||l>g.from)){s=g.from;let y=/^\s*/.exec(g.text)[0].length,b=y==g.length,S=g.text.slice(y,y+d.length)==d?y:-1;y<g.text.length&&y<f&&(f=y),i.push({line:g,comment:S,token:d,indent:y,empty:b,single:!1})}p=g.to+1}if(f<1e9)for(let p=u;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=f);i.length==u+1&&(i[u].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:u,token:f,indent:d,empty:p,single:g}of i)(g||!p)&&o.push({from:u.from+d,insert:f+" "});let l=e.changes(o);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:l,comment:u,token:f}of i)if(u>=0){let d=l.from+u,p=d+f.length;l.text[p-l.from]==" "&&p++,o.push({from:d,to:p})}return{changes:o}}return null}const r0=On.define(),S$=On.define(),x$=Se.define(),CC=Se.define({combine(n){return Dn(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),kC=Zt.define({create(){return En.empty},update(n,e){let t=e.state.facet(CC),i=e.annotation(r0);if(i){let f=Si.fromTransaction(e,i.selection),d=i.side,p=d==0?n.undone:n.done;return f?p=ph(p,p.length,t.minDepth,f):p=MC(p,e.startState.selection),new En(d==0?i.rest:p,d==0?p:i.rest)}let s=e.annotation(S$);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Lt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Si.fromTransaction(e),l=e.annotation(Lt.time),u=e.annotation(Lt.userEvent);return o?n=n.addChanges(o,l,u,t,e):e.selection&&(n=n.addSelection(e.startState.selection,l,u,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new En(n.done.map(Si.fromJSON),n.undone.map(Si.fromJSON))}});function w$(n={}){return[kC,CC.of(n),ye.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?AC:e.inputType=="historyRedo"?s0:null;return i?(e.preventDefault(),i(t)):!1}})]}function Wh(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(kC,!1);if(!s)return!1;let o=s.pop(n,t,e);return o?(i(o),!0):!1}}const AC=Wh(0,!1),s0=Wh(1,!1),_$=Wh(0,!0),T$=Wh(1,!0);class Si{constructor(e,t,i,s,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new Si(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Si(e.changes&&$t.fromJSON(e.changes),[],e.mapped&&Mn.fromJSON(e.mapped),e.startSelection&&ce.fromJSON(e.startSelection),e.selectionsAfter.map(ce.fromJSON))}static fromTransaction(e,t){let i=Ki;for(let s of e.startState.facet(x$)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Si(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ki)}static selection(e){return new Si(void 0,Ki,void 0,void 0,e)}}function ph(n,e,t,i){let s=e+1>t+20?e-t-1:0,o=n.slice(s,e);return o.push(i),o}function C$(n,e){let t=[],i=!1;return n.iterChangedRanges((s,o)=>t.push(s,o)),e.iterChangedRanges((s,o,l,u)=>{for(let f=0;f<t.length;){let d=t[f++],p=t[f++];u>=d&&l<=p&&(i=!0)}}),i}function k$(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function EC(n,e){return n.length?e.length?n.concat(e):n:e}const Ki=[],A$=200;function MC(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-A$));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),ph(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Si.selection([e])]}function E$(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function tg(n,e){if(!n.length)return n;let t=n.length,i=Ki;for(;t;){let s=M$(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=n.slice(0,t);return o[t-1]=s,o}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Si.selection(i)]:Ki}function M$(n,e,t){let i=EC(n.selectionsAfter.length?n.selectionsAfter.map(u=>u.map(e)):Ki,t);if(!n.changes)return Si.selection(i);let s=n.changes.map(e),o=e.mapDesc(n.changes,!0),l=n.mapped?n.mapped.composeDesc(o):o;return new Si(s,ze.mapEffects(n.effects,e),l,n.startSelection.map(o),i)}const O$=/^(input\.type|delete)($|\.)/;class En{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new En(this.done,this.undone):this}addChanges(e,t,i,s,o){let l=this.done,u=l[l.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!i||O$.test(i))&&(!u.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,C$(u.changes,e.changes))||i=="input.type.compose")?l=ph(l,l.length-1,s.minDepth,new Si(e.changes.compose(u.changes),EC(ze.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,Ki)):l=ph(l,l.length,s.minDepth,e),new En(l,Ki,t,i)}addSelection(e,t,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Ki;return o.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&k$(o[o.length-1],e)?this:new En(MC(this.done,e),this.undone,t,i)}addMapping(e){return new En(tg(this.done,e),tg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],l=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:r0.of({side:e,rest:E$(s),selection:l}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let u=s.length==1?Ki:s.slice(0,s.length-1);return o.mapped&&(u=tg(u,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:r0.of({side:e,rest:u,selection:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}En.empty=new En(Ki,Ki);const D$=[{key:"Mod-z",run:AC,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:s0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:s0,preventDefault:!0},{key:"Mod-u",run:_$,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:T$,preventDefault:!0}];function Ya(n,e){return ce.create(n.ranges.map(e),n.mainIndex)}function fn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hn({state:n,dispatch:e},t){let i=Ya(n.selection,t);return i.eq(n.selection,!0)?!1:(e(fn(n,i)),!0)}function Gh(n,e){return ce.cursor(e?n.to:n.from)}function OC(n,e){return hn(n,t=>t.empty?n.moveByChar(t,e):Gh(t,e))}function ii(n){return n.textDirectionAt(n.state.selection.main.head)==at.LTR}const DC=n=>OC(n,!ii(n)),RC=n=>OC(n,ii(n));function NC(n,e){return hn(n,t=>t.empty?n.moveByGroup(t,e):Gh(t,e))}const R$=n=>NC(n,!ii(n)),N$=n=>NC(n,ii(n));function z$(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Yh(n,e,t){let i=ti(n).resolveInner(e.head),s=t?Le.closedBy:Le.openedBy;for(let f=e.head;;){let d=t?i.childAfter(f):i.childBefore(f);if(!d)break;z$(n,d,s)?i=d:f=t?d.to:d.from}let o=i.type.prop(s),l,u;return o&&(l=t?An(n,i.from,1):An(n,i.to,-1))&&l.matched?u=t?l.end.to:l.end.from:u=t?i.to:i.from,ce.cursor(u,t?-1:1)}const $$=n=>hn(n,e=>Yh(n.state,e,!ii(n))),B$=n=>hn(n,e=>Yh(n.state,e,ii(n)));function zC(n,e){return hn(n,t=>{if(!t.empty)return Gh(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const $C=n=>zC(n,!1),BC=n=>zC(n,!0);function LC(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let o of n.state.facet(ye.scrollMargins)){let l=o(n);l?.top&&(t=Math.max(l?.top,t)),l?.bottom&&(i=Math.max(l?.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function jC(n,e){let t=LC(n),{state:i}=n,s=Ya(i.selection,l=>l.empty?n.moveVertically(l,e,t.height):Gh(l,e));if(s.eq(i.selection))return!1;let o;if(t.selfScroll){let l=n.coordsAtPos(i.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),f=u.top+t.marginTop,d=u.bottom-t.marginBottom;l&&l.top>f&&l.bottom<d&&(o=ye.scrollIntoView(s.main.head,{y:"start",yMargin:l.top-f}))}return n.dispatch(fn(i,s),{effects:o}),!0}const d2=n=>jC(n,!1),a0=n=>jC(n,!0);function Xr(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=ce.cursor(i.from+o))}return s}const L$=n=>hn(n,e=>Xr(n,e,!0)),j$=n=>hn(n,e=>Xr(n,e,!1)),P$=n=>hn(n,e=>Xr(n,e,!ii(n))),q$=n=>hn(n,e=>Xr(n,e,ii(n))),H$=n=>hn(n,e=>ce.cursor(n.lineBlockAt(e.head).from,1)),U$=n=>hn(n,e=>ce.cursor(n.lineBlockAt(e.head).to,-1));function V$(n,e,t){let i=!1,s=Ya(n.selection,o=>{let l=An(n,o.head,-1)||An(n,o.head,1)||o.head>0&&An(n,o.head-1,1)||o.head<n.doc.length&&An(n,o.head+1,-1);if(!l||!l.end)return o;i=!0;let u=l.start.from==o.head?l.end.to:l.end.from;return ce.cursor(u)});return i?(e(fn(n,s)),!0):!1}const I$=({state:n,dispatch:e})=>V$(n,e);function Ji(n,e){let t=Ya(n.state.selection,i=>{let s=e(i);return ce.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(fn(n.state,t)),!0)}function PC(n,e){return Ji(n,t=>n.moveByChar(t,e))}const qC=n=>PC(n,!ii(n)),HC=n=>PC(n,ii(n));function UC(n,e){return Ji(n,t=>n.moveByGroup(t,e))}const W$=n=>UC(n,!ii(n)),G$=n=>UC(n,ii(n)),Y$=n=>Ji(n,e=>Yh(n.state,e,!ii(n))),F$=n=>Ji(n,e=>Yh(n.state,e,ii(n)));function VC(n,e){return Ji(n,t=>n.moveVertically(t,e))}const IC=n=>VC(n,!1),WC=n=>VC(n,!0);function GC(n,e){return Ji(n,t=>n.moveVertically(t,e,LC(n).height))}const p2=n=>GC(n,!1),m2=n=>GC(n,!0),K$=n=>Ji(n,e=>Xr(n,e,!0)),X$=n=>Ji(n,e=>Xr(n,e,!1)),Q$=n=>Ji(n,e=>Xr(n,e,!ii(n))),Z$=n=>Ji(n,e=>Xr(n,e,ii(n))),J$=n=>Ji(n,e=>ce.cursor(n.lineBlockAt(e.head).from)),eB=n=>Ji(n,e=>ce.cursor(n.lineBlockAt(e.head).to)),g2=({state:n,dispatch:e})=>(e(fn(n,{anchor:0})),!0),y2=({state:n,dispatch:e})=>(e(fn(n,{anchor:n.doc.length})),!0),v2=({state:n,dispatch:e})=>(e(fn(n,{anchor:n.selection.main.anchor,head:0})),!0),b2=({state:n,dispatch:e})=>(e(fn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),tB=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),iB=({state:n,dispatch:e})=>{let t=Fh(n).map(({from:i,to:s})=>ce.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:ce.create(t),userEvent:"select"})),!0},nB=({state:n,dispatch:e})=>{let t=Ya(n.selection,i=>{let s=ti(n),o=s.resolveStack(i.from,1);if(i.empty){let l=s.resolveStack(i.from,-1);l.node.from>=o.node.from&&l.node.to<=o.node.to&&(o=l)}for(let l=o;l;l=l.next){let{node:u}=l;if((u.from<i.from&&u.to>=i.to||u.to>i.to&&u.from<=i.from)&&l.next)return ce.range(u.to,u.from)}return i});return t.eq(n.selection)?!1:(e(fn(n,t)),!0)};function YC(n,e){let{state:t}=n,i=t.selection,s=t.selection.ranges.slice();for(let o of t.selection.ranges){let l=t.doc.lineAt(o.head);if(e?l.to<n.state.doc.length:l.from>0)for(let u=o;;){let f=n.moveVertically(u,e);if(f.head<l.from||f.head>l.to){s.some(d=>d.head==f.head)||s.push(f);break}else{if(f.head==u.head)break;u=f}}}return s.length==i.ranges.length?!1:(n.dispatch(fn(t,ce.create(s,s.length-1))),!0)}const rB=n=>YC(n,!1),sB=n=>YC(n,!0),aB=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=ce.create([t.main]):t.main.empty||(i=ce.create([ce.cursor(t.main.head)])),i?(e(fn(n,i)),!0):!1};function Wl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(o=>{let{from:l,to:u}=o;if(l==u){let f=e(o);f<l?(t="delete.backward",f=Nf(n,f,!1)):f>l&&(t="delete.forward",f=Nf(n,f,!0)),l=Math.min(l,f),u=Math.max(u,f)}else l=Nf(n,l,!1),u=Nf(n,u,!0);return l==u?{range:o}:{changes:{from:l,to:u},range:ce.cursor(l,l<o.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ye.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Nf(n,e,t){if(n instanceof ye)for(let i of n.state.facet(ye.atomicRanges).map(s=>s(n)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=t?o:s)});return e}const FC=(n,e,t)=>Wl(n,i=>{let s=i.from,{state:o}=n,l=o.doc.lineAt(s),u,f;if(t&&!e&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(u=l.text.slice(0,s-l.from))){if(u[u.length-1]=="	")return s-1;let d=Ga(u,o.tabSize),p=d%fh(o)||fh(o);for(let g=0;g<p&&u[u.length-1-g]==" ";g++)s--;f=s}else f=Bt(l.text,s-l.from,e,e)+l.from,f==s&&l.number!=(e?o.doc.lines:1)?f+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(f-l.from,s-l.from))&&(f=Bt(l.text,f-l.from,!1,!1)+l.from);return f}),o0=n=>FC(n,!1,!0),KC=n=>FC(n,!0,!1),XC=(n,e)=>Wl(n,t=>{let i=t.head,{state:s}=n,o=s.doc.lineAt(i),l=s.charCategorizer(i);for(let u=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let f=Bt(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,f)-o.from,Math.max(i,f)-o.from),p=l(d);if(u!=null&&p!=u)break;(d!=" "||i!=t.head)&&(u=p),i=f}return i}),QC=n=>XC(n,!1),oB=n=>XC(n,!0),lB=n=>Wl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),cB=n=>Wl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),uB=n=>Wl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),fB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ke.of(["",""])},range:ce.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},hB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,o=n.doc.lineAt(s),l=s==o.from?s-1:Bt(o.text,s-o.from,!1)+o.from,u=s==o.to?s+1:Bt(o.text,s-o.from,!0)+o.from;return{changes:{from:l,to:u,insert:n.doc.slice(s,u).append(n.doc.slice(l,s))},range:ce.cursor(u)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Fh(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=s.number){let l=e[e.length-1];l.to=o.to,l.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});t=o.number+1}return e}function ZC(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let o of Fh(n)){if(t?o.to==n.doc.length:o.from==0)continue;let l=n.doc.lineAt(t?o.to+1:o.from-1),u=l.length+1;if(t){i.push({from:o.to,to:l.to},{from:o.from,insert:l.text+n.lineBreak});for(let f of o.ranges)s.push(ce.range(Math.min(n.doc.length,f.anchor+u),Math.min(n.doc.length,f.head+u)))}else{i.push({from:l.from,to:o.from},{from:o.to,insert:n.lineBreak+l.text});for(let f of o.ranges)s.push(ce.range(f.anchor-u,f.head-u))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:ce.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const dB=({state:n,dispatch:e})=>ZC(n,e,!1),pB=({state:n,dispatch:e})=>ZC(n,e,!0);function JC(n,e,t){if(n.readOnly)return!1;let i=[];for(let o of Fh(n))t?i.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):i.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});let s=n.changes(i);return e(n.update({changes:s,selection:n.selection.map(s,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mB=({state:n,dispatch:e})=>JC(n,e,!1),gB=({state:n,dispatch:e})=>JC(n,e,!0),yB=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Fh(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=Ya(e.selection,s=>{let o;if(n.lineWrapping){let l=n.lineBlockAt(s.head),u=n.coordsAtPos(s.head,s.assoc||1);u&&(o=l.bottom+n.documentTop-u.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function vB(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ti(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(Le.closedBy))&&o.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const S2=ek(!1),bB=ek(!0);function ek(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:l}=s,u=e.doc.lineAt(o),f=!n&&o==l&&vB(e,o);n&&(o=l=(l<=u.to?u:e.doc.lineAt(l)).to);let d=new Vh(e,{simulateBreak:o,simulateDoubleBreak:!!f}),p=B0(d,o);for(p==null&&(p=Ga(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));l<u.to&&/\s/.test(u.text[l-u.from]);)l++;f?{from:o,to:l}=f:o>u.from&&o<u.from+100&&!/\S/.test(u.text.slice(0,o))&&(o=u.from);let g=["",Al(e,p)];return f&&g.push(Al(e,d.lineIndent(u.from,-1))),{changes:{from:o,to:l,insert:Ke.of(g)},range:ce.cursor(o+1+g[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function q0(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let l=i.from;l<=i.to;){let u=n.doc.lineAt(l);u.number>t&&(i.empty||i.to>u.from)&&(e(u,s,i),t=u.number),l=u.to+1}let o=n.changes(s);return{changes:s,range:ce.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const SB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Vh(n,{overrideIndentation:o=>{let l=t[o];return l??-1}}),s=q0(n,(o,l,u)=>{let f=B0(i,o.from);if(f==null)return;/\S/.test(o.text)||(f=0);let d=/^\s*/.exec(o.text)[0],p=Al(n,f);(d!=p||u.from<o.from+d.length)&&(t[o.from]=f,l.push({from:o.from,to:o.from+d.length,insert:p}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},tk=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(q0(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Uh)})}),{userEvent:"input.indent"})),!0),ik=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(q0(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=Ga(s,n.tabSize),l=0,u=Al(n,Math.max(0,o-fh(n)));for(;l<s.length&&l<u.length&&s.charCodeAt(l)==u.charCodeAt(l);)l++;i.push({from:t.from+l,to:t.from+s.length,insert:u.slice(l)})}),{userEvent:"delete.dedent"})),!0),xB=n=>(n.setTabFocusMode(),!0),wB=[{key:"Ctrl-b",run:DC,shift:qC,preventDefault:!0},{key:"Ctrl-f",run:RC,shift:HC},{key:"Ctrl-p",run:$C,shift:IC},{key:"Ctrl-n",run:BC,shift:WC},{key:"Ctrl-a",run:H$,shift:J$},{key:"Ctrl-e",run:U$,shift:eB},{key:"Ctrl-d",run:KC},{key:"Ctrl-h",run:o0},{key:"Ctrl-k",run:lB},{key:"Ctrl-Alt-h",run:QC},{key:"Ctrl-o",run:fB},{key:"Ctrl-t",run:hB},{key:"Ctrl-v",run:a0}],_B=[{key:"ArrowLeft",run:DC,shift:qC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:R$,shift:W$,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:P$,shift:Q$,preventDefault:!0},{key:"ArrowRight",run:RC,shift:HC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:N$,shift:G$,preventDefault:!0},{mac:"Cmd-ArrowRight",run:q$,shift:Z$,preventDefault:!0},{key:"ArrowUp",run:$C,shift:IC,preventDefault:!0},{mac:"Cmd-ArrowUp",run:g2,shift:v2},{mac:"Ctrl-ArrowUp",run:d2,shift:p2},{key:"ArrowDown",run:BC,shift:WC,preventDefault:!0},{mac:"Cmd-ArrowDown",run:y2,shift:b2},{mac:"Ctrl-ArrowDown",run:a0,shift:m2},{key:"PageUp",run:d2,shift:p2},{key:"PageDown",run:a0,shift:m2},{key:"Home",run:j$,shift:X$,preventDefault:!0},{key:"Mod-Home",run:g2,shift:v2},{key:"End",run:L$,shift:K$,preventDefault:!0},{key:"Mod-End",run:y2,shift:b2},{key:"Enter",run:S2,shift:S2},{key:"Mod-a",run:tB},{key:"Backspace",run:o0,shift:o0,preventDefault:!0},{key:"Delete",run:KC,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:QC,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:oB,preventDefault:!0},{mac:"Mod-Backspace",run:cB,preventDefault:!0},{mac:"Mod-Delete",run:uB,preventDefault:!0}].concat(wB.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),TB=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:$$,shift:Y$},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:B$,shift:F$},{key:"Alt-ArrowUp",run:dB},{key:"Shift-Alt-ArrowUp",run:mB},{key:"Alt-ArrowDown",run:pB},{key:"Shift-Alt-ArrowDown",run:gB},{key:"Mod-Alt-ArrowUp",run:rB},{key:"Mod-Alt-ArrowDown",run:sB},{key:"Escape",run:aB},{key:"Mod-Enter",run:bB},{key:"Alt-l",mac:"Ctrl-l",run:iB},{key:"Mod-i",run:nB,preventDefault:!0},{key:"Mod-[",run:ik},{key:"Mod-]",run:tk},{key:"Mod-Alt-\\",run:SB},{key:"Shift-Mod-k",run:yB},{key:"Shift-Mod-\\",run:I$},{key:"Mod-/",run:d$},{key:"Alt-A",run:m$},{key:"Ctrl-m",mac:"Shift-Alt-m",run:xB}].concat(_B),CB={key:"Tab",run:tk,shift:ik},x2=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Va{constructor(e,t,i=0,s=e.length,o,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?u=>o(x2(u)):x2,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=g0(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Cn(e);let s=this.normalize(t);if(s.length)for(let o=0,l=i;;o++){let u=s.charCodeAt(o),f=this.match(u,l,this.bufferPos+this.bufferStart);if(o==s.length-1){if(f)return this.value=f,this;break}l==i&&o<t.length&&t.charCodeAt(o)==u&&l++}}}match(e,t,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let l=this.matches[o],u=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,u=!0)),u||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Va.prototype[Symbol.iterator]=function(){return this});const nk={from:-1,to:-1,match:/.*/.exec("")},H0="gm"+(/x/.unicode==null?"":"u");class rk{constructor(e,t,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=nk,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new sk(e,t,i,s,o);this.re=new RegExp(t,H0+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let l=e.lineAt(s);this.curLineStart=l.from,this.matchPos=mh(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=mh(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ig=new WeakMap;class za{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=ig.get(e);if(!s||s.from>=i||s.to<=t){let u=new za(t,e.sliceString(t,i));return ig.set(e,u),u}if(s.from==t&&s.to==i)return s;let{text:o,from:l}=s;return l>t&&(o=e.sliceString(t,l)+o,l=t),s.to<i&&(o+=e.sliceString(s.to,i)),ig.set(e,new za(l,o)),new za(t,o.slice(t-l,i-l))}}class sk{constructor(e,t,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=nk,this.matchPos=mh(e,s),this.re=new RegExp(t,H0+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=za.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=mh(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=za.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(rk.prototype[Symbol.iterator]=sk.prototype[Symbol.iterator]=function(){return this});function kB(n){try{return new RegExp(n,H0),!0}catch{return!1}}function mh(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function l0(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=rt("input",{class:"cm-textfield",name:"line",value:e}),i=rt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:fl.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},rt("label",n.state.phrase("Go to line"),": ",t)," ",rt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),rt("button",{name:"close",onclick:()=>{n.dispatch({effects:fl.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:l}=n,u=l.doc.lineAt(l.selection.main.head),[,f,d,p,g]=o,y=p?+p.slice(1):0,b=d?+d:u.number;if(d&&g){let x=b/100;f&&(x=x*(f=="-"?-1:1)+u.number/l.doc.lines),b=Math.round(l.doc.lines*x)}else d&&f&&(b=b*(f=="-"?-1:1)+u.number);let S=l.doc.line(Math.max(1,Math.min(l.doc.lines,b))),C=ce.cursor(S.from+Math.max(0,Math.min(y,S.length)));n.dispatch({effects:[fl.of(!1),ye.scrollIntoView(C.from,{y:"center"})],selection:C}),n.focus()}return{dom:i}}const fl=ze.define(),w2=Zt.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(fl)&&(n=t.value);return n},provide:n=>Tl.from(n,e=>e?l0:null)}),AB=n=>{let e=_l(n,l0);if(!e){let t=[fl.of(!0)];n.state.field(w2,!1)==null&&t.push(ze.appendConfig.of([w2,EB])),n.dispatch({effects:t}),e=_l(n,l0)}return e&&e.dom.querySelector("input").select(),!0},EB=ye.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),MB={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},OB=Se.define({combine(n){return Dn(n,MB,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function DB(n){return[BB,$B]}const RB=Ae.mark({class:"cm-selectionMatch"}),NB=Ae.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _2(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=pt.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=pt.Word)}function zB(n,e,t,i){return n(e.sliceDoc(t,t+1))==pt.Word&&n(e.sliceDoc(i-1,i))==pt.Word}const $B=kt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(OB),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Ae.none;let s=i.main,o,l=null;if(s.empty){if(!e.highlightWordAroundCursor)return Ae.none;let f=t.wordAt(s.head);if(!f)return Ae.none;l=t.charCategorizer(s.head),o=t.sliceDoc(f.from,f.to)}else{let f=s.to-s.from;if(f<e.minSelectionLength||f>200)return Ae.none;if(e.wholeWords){if(o=t.sliceDoc(s.from,s.to),l=t.charCategorizer(s.head),!(_2(l,t,s.from,s.to)&&zB(l,t,s.from,s.to)))return Ae.none}else if(o=t.sliceDoc(s.from,s.to),!o)return Ae.none}let u=[];for(let f of n.visibleRanges){let d=new Va(t.doc,o,f.from,f.to);for(;!d.next().done;){let{from:p,to:g}=d.value;if((!l||_2(l,t,p,g))&&(s.empty&&p<=s.from&&g>=s.to?u.push(NB.range(p,g)):(p>=s.to||g<=s.from)&&u.push(RB.range(p,g)),u.length>e.maxMatches))return Ae.none}}return Ae.set(u)}},{decorations:n=>n.decorations}),BB=ye.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),LB=({state:n,dispatch:e})=>{let{selection:t}=n,i=ce.create(t.ranges.map(s=>n.wordAt(s.head)||ce.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function jB(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),o=s&&s.from==t.from&&s.to==t.to;for(let l=!1,u=new Va(n.doc,e,i[i.length-1].to);;)if(u.next(),u.done){if(l)return null;u=new Va(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),l=!0}else{if(l&&i.some(f=>f.from==u.value.from))continue;if(o){let f=n.wordAt(u.value.from);if(!f||f.from!=u.value.from||f.to!=u.value.to)continue}return u.value}}const PB=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return LB({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let s=jB(n,i);return s?(e(n.update({selection:n.selection.addRange(ce.range(s.from,s.to),!1),effects:ye.scrollIntoView(s.to)})),!0):!1},Fa=Se.define({combine(n){return Dn(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new QB(e),scrollToMatch:e=>ye.scrollIntoView(e)})}});class ak{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||kB(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new VB(this):new HB(this)}getCursor(e,t=0,i){let s=e.doc?e:We.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Ca(this,s,t,i):Ta(this,s,t,i)}}class ok{constructor(e){this.spec=e}}function Ta(n,e,t,i){return new Va(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?qB(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function qB(n,e){return(t,i,s,o)=>((o>t||o+s.length<i)&&(o=Math.max(0,t-2),s=n.sliceString(o,Math.min(n.length,i+2))),(e(gh(s,t-o))!=pt.Word||e(yh(s,t-o))!=pt.Word)&&(e(yh(s,i-o))!=pt.Word||e(gh(s,i-o))!=pt.Word))}class HB extends ok{constructor(e){super(e)}nextMatch(e,t,i){let s=Ta(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);s=Ta(this.spec,e,0,o).nextOverlapping()}return s.done||s.value.from==t&&s.value.to==i?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let o=Math.max(t,s-1e4-this.spec.unquoted.length),l=Ta(this.spec,e,o,s),u=null;for(;!l.nextOverlapping().done;)u=l.value;if(u)return u;if(o==t)return null;s-=1e4}}prevMatch(e,t,i){let s=this.prevMatchInRange(e,0,t);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=t||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Ta(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=Ta(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function Ca(n,e,t,i){return new rk(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?UB(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function gh(n,e){return n.slice(Bt(n,e,!1),e)}function yh(n,e){return n.slice(e,Bt(n,e))}function UB(n){return(e,t,i)=>!i[0].length||(n(gh(i.input,i.index))!=pt.Word||n(yh(i.input,i.index))!=pt.Word)&&(n(yh(i.input,i.index+i[0].length))!=pt.Word||n(gh(i.input,i.index+i[0].length))!=pt.Word)}class VB extends ok{nextMatch(e,t,i){let s=Ca(this.spec,e,i,e.doc.length).next();return s.done&&(s=Ca(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let o=Math.max(t,i-s*1e4),l=Ca(this.spec,e,o,i),u=null;for(;!l.next().done;)u=l.value;if(u&&(o==t||u.from>o+10))return u;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let o=+i.slice(0,s);if(o>0&&o<e.match.length)return e.match[o]+i.slice(s)}return t})}matchAll(e,t){let i=Ca(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=Ca(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const El=ze.define(),U0=ze.define(),Vr=Zt.define({create(n){return new ng(c0(n).create(),null)},update(n,e){for(let t of e.effects)t.is(El)?n=new ng(t.value.create(),n.panel):t.is(U0)&&(n=new ng(n.query,t.value?V0:null));return n},provide:n=>Tl.from(n,e=>e.panel)});class ng{constructor(e,t){this.query=e,this.panel=t}}const IB=Ae.mark({class:"cm-searchMatch"}),WB=Ae.mark({class:"cm-searchMatch cm-searchMatch-selected"}),GB=kt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Vr))}update(n){let e=n.state.field(Vr);(e!=n.startState.field(Vr)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Ae.none;let{view:t}=this,i=new sr;for(let s=0,o=t.visibleRanges,l=o.length;s<l;s++){let{from:u,to:f}=o[s];for(;s<l-1&&f>o[s+1].from-500;)f=o[++s].to;n.highlight(t.state,u,f,(d,p)=>{let g=t.state.selection.ranges.some(y=>y.from==d&&y.to==p);i.add(d,p,g?WB:IB)})}return i.finish()}},{decorations:n=>n.decorations});function Gl(n){return e=>{let t=e.state.field(Vr,!1);return t&&t.query.spec.valid?n(e,t):uk(e)}}const vh=Gl((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=ce.single(i.from,i.to),o=n.state.facet(Fa);return n.dispatch({selection:s,effects:[I0(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),ck(n),!0}),bh=Gl((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let o=ce.single(s.from,s.to),l=n.state.facet(Fa);return n.dispatch({selection:o,effects:[I0(n,s),l.scrollToMatch(o.main,n)],userEvent:"select.search"}),ck(n),!0}),YB=Gl((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:ce.create(t.map(i=>ce.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),FB=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,o=[],l=0;for(let u=new Va(n.doc,n.sliceDoc(i,s));!u.next().done;){if(o.length>1e3)return!1;u.value.from==i&&(l=o.length),o.push(ce.range(u.value.from,u.value.to))}return e(n.update({selection:ce.create(o,l),userEvent:"select.search.matches"})),!0},T2=Gl((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let l=o,u=[],f,d,p=[];l.from==i&&l.to==s&&(d=t.toText(e.getReplacement(l)),u.push({from:l.from,to:l.to,insert:d}),l=e.nextMatch(t,l.from,l.to),p.push(ye.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let g=n.state.changes(u);return l&&(f=ce.single(l.from,l.to).map(g),p.push(I0(n,l)),p.push(t.facet(Fa).scrollToMatch(f.main,n))),n.dispatch({changes:g,selection:f,effects:p,userEvent:"input.replace"}),!0}),KB=Gl((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:o,to:l}=s;return{from:o,to:l,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:ye.announce.of(i),userEvent:"input.replace.all"}),!0});function V0(n){return n.state.facet(Fa).createPanel(n)}function c0(n,e){var t,i,s,o,l;let u=n.selection.main,f=u.empty||u.to>u.from+100?"":n.sliceDoc(u.from,u.to);if(e&&!f)return e;let d=n.facet(Fa);return new ak({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:d.wholeWord})}function lk(n){let e=_l(n,V0);return e&&e.dom.querySelector("[main-field]")}function ck(n){let e=lk(n);e&&e==n.root.activeElement&&e.select()}const uk=n=>{let e=n.state.field(Vr,!1);if(e&&e.panel){let t=lk(n);if(t&&t!=n.root.activeElement){let i=c0(n.state,e.query.spec);i.valid&&n.dispatch({effects:El.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[U0.of(!0),e?El.of(c0(n.state,e.query.spec)):ze.appendConfig.of(JB)]});return!0},fk=n=>{let e=n.state.field(Vr,!1);if(!e||!e.panel)return!1;let t=_l(n,V0);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:U0.of(!1)}),!0},XB=[{key:"Mod-f",run:uk,scope:"editor search-panel"},{key:"F3",run:vh,shift:bh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:vh,shift:bh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:fk,scope:"editor search-panel"},{key:"Mod-Shift-l",run:FB},{key:"Mod-Alt-g",run:AB},{key:"Mod-d",run:PB,preventDefault:!0}];class QB{constructor(e){this.view=e;let t=this.query=e.state.field(Vr).query.spec;this.commit=this.commit.bind(this),this.searchField=rt("input",{value:t.search,placeholder:Ri(e,"Find"),"aria-label":Ri(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=rt("input",{value:t.replace,placeholder:Ri(e,"Replace"),"aria-label":Ri(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=rt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=rt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=rt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,o,l){return rt("button",{class:"cm-button",name:s,onclick:o,type:"button"},l)}this.dom=rt("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>vh(e),[Ri(e,"next")]),i("prev",()=>bh(e),[Ri(e,"previous")]),i("select",()=>YB(e),[Ri(e,"all")]),rt("label",null,[this.caseField,Ri(e,"match case")]),rt("label",null,[this.reField,Ri(e,"regexp")]),rt("label",null,[this.wordField,Ri(e,"by word")]),...e.state.readOnly?[]:[rt("br"),this.replaceField,i("replace",()=>T2(e),[Ri(e,"replace")]),i("replaceAll",()=>KB(e),[Ri(e,"replace all")])],rt("button",{name:"close",onclick:()=>fk(e),"aria-label":Ri(e,"close"),type:"button"},[""])])}commit(){let e=new ak({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:El.of(e)}))}keydown(e){n4(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?bh:vh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),T2(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(El)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Fa).top}}function Ri(n,e){return n.state.phrase(e)}const zf=30,$f=/[\s\.,:;?!]/;function I0(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-zf),l=Math.min(s,t+zf),u=n.state.sliceDoc(o,l);if(o!=i.from){for(let f=0;f<zf;f++)if(!$f.test(u[f+1])&&$f.test(u[f])){u=u.slice(f);break}}if(l!=s){for(let f=u.length-1;f>u.length-zf;f--)if(!$f.test(u[f-1])&&$f.test(u[f])){u=u.slice(0,f);break}}return ye.announce.of(`${n.state.phrase("current match")}. ${u} ${n.state.phrase("on line")} ${i.number}.`)}const ZB=ye.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),JB=[Vr,Ns.low(GB),ZB];class hk{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ti(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),o=s.search(dk(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function C2(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function eL(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let o=1;o<s.length;o++)t[s[o]]=!0}let i=C2(e)+C2(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function tL(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:eL(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:t}:null}}class k2{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function Es(n){return n.selection.main.from}function dk(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?n:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const pk=On.define();function iL(n,e,t,i){let{main:s}=n.selection,o=t-s.from,l=i-s.from;return{...n.changeByRange(u=>{if(u!=s&&t!=i&&n.sliceDoc(u.from+o,u.from+l)!=n.sliceDoc(t,i))return{range:u};let f=n.toText(e);return{changes:{from:u.from+o,to:i==s.from?u.to:u.from+l,insert:f},range:ce.cursor(u.from+o+f.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const A2=new WeakMap;function nL(n){if(!Array.isArray(n))return n;let e=A2.get(n);return e||A2.set(n,e=tL(n)),e}const Sh=ze.define(),Ml=ze.define();class rL{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=gi(e,t),s=Cn(i);this.chars.push(i);let o=e.slice(t,t+s),l=o.toUpperCase();this.folded.push(gi(l==o?o.toLowerCase():l,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:o,byWord:l}=this;if(t.length==1){let w=gi(e,0),T=Cn(w),E=T==e.length?0:-100;if(w!=t[0])if(w==i[0])E+=-200;else return null;return this.ret(E,[0,T])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let f=t.length,d=0;if(u<0){for(let w=0,T=Math.min(e.length,200);w<T&&d<f;){let E=gi(e,w);(E==t[d]||E==i[d])&&(s[d++]=w),w+=Cn(E)}if(d<f)return null}let p=0,g=0,y=!1,b=0,S=-1,C=-1,x=/[a-z]/.test(e),_=!0;for(let w=0,T=Math.min(e.length,200),E=0;w<T&&g<f;){let k=gi(e,w);u<0&&(p<f&&k==t[p]&&(o[p++]=w),b<f&&(k==t[b]||k==i[b]?(b==0&&(S=w),C=w+1,b++):b=0));let O,A=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(O=g0(k))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!w||A==1&&x||E==0&&A!=0)&&(t[g]==k||i[g]==k&&(y=!0)?l[g++]=w:l.length&&(_=!1)),E=A,w+=Cn(k)}return g==f&&l[0]==0&&_?this.result(-100+(y?-200:0),l,e):b==f&&S==0?this.ret(-200-e.length+(C==e.length?0:-100),[0,C]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):b==f?this.ret(-900-e.length,[S,C]):g==f?this.result(-100+(y?-200:0)+-700+(_?0:-1100),l,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],o=0;for(let l of t){let u=l+(this.astral?Cn(gi(i,l)):1);o&&s[o-1]==l?s[o-1]=u:(s[o++]=l,s[o++]=u)}return this.ret(e-i.length,s)}}class sL{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ut=Se.define({combine(n){return Dn(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:aL,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>E2(e(i),t(i)),optionClass:(e,t)=>i=>E2(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function E2(n,e){return n?e?n+" "+e:n:e}function aL(n,e,t,i,s,o){let l=n.textDirection==at.RTL,u=l,f=!1,d="top",p,g,y=e.left-s.left,b=s.right-e.right,S=i.right-i.left,C=i.bottom-i.top;if(u&&y<Math.min(S,b)?u=!1:!u&&b<Math.min(S,y)&&(u=!0),S<=(u?y:b))p=Math.max(s.top,Math.min(t.top,s.bottom-C))-e.top,g=Math.min(400,u?y:b);else{f=!0,g=Math.min(400,(l?e.right:s.right-e.left)-30);let w=s.bottom-e.bottom;w>=C||w>e.top?p=t.bottom-e.top:(d="bottom",p=e.bottom-t.top)}let x=(e.bottom-e.top)/o.offsetHeight,_=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${p/x}px; max-width: ${g/_}px`,class:"cm-completionInfo-"+(f?l?"left-narrow":"right-narrow":u?"left":"right")}}function oL(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,o){let l=document.createElement("span");l.className="cm-completionLabel";let u=t.displayLabel||t.label,f=0;for(let d=0;d<o.length;){let p=o[d++],g=o[d++];p>f&&l.appendChild(document.createTextNode(u.slice(f,p)));let y=l.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(u.slice(p,g))),y.className="cm-completionMatchedText",f=g}return f<u.length&&l.appendChild(document.createTextNode(u.slice(f))),l},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function rg(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class lL{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:f=>this.placeInfo(f),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:o,selected:l}=s.open,u=e.state.facet(Ut);this.optionContent=oL(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=rg(o.length,l,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",f=>{let{options:d}=e.state.field(t).open;for(let p=f.target,g;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(g=/-(\d+)$/.exec(p.id))&&+g[1]<d.length){this.applyCompletion(e,d[+g[1]]),f.preventDefault();return}}),this.dom.addEventListener("focusout",f=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Ut).closeOnBlur&&f.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ml.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:l,disabled:u}=i.open;(!s.open||s.open.options!=o)&&(this.range=rg(o.length,l,e.state.facet(Ut).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),u!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=rg(t.options.length,t.selected,this.view.state.facet(Ut).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:s}=t.options[t.selected],{info:o}=s;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(s);if(!l)return;"then"in l?l.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u,s)}).catch(u=>bi(this.view.state,u,"completion info")):(this.addInfoPane(l,s),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&uL(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let l=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:l.clientWidth,bottom:l.clientHeight}}return s.top>Math.min(o.bottom,t.bottom)-10||s.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Ut).positionInfo(this.view,t,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",l=>{l.target==s&&l.preventDefault()});let o=null;for(let l=i.from;l<i.to;l++){let{completion:u,match:f}=e[l],{section:d}=u;if(d){let y=typeof d=="string"?d:d.name;if(y!=o&&(l>i.from||i.from==0))if(o=y,typeof d!="string"&&d.header)s.appendChild(d.header(d));else{let b=s.appendChild(document.createElement("completion-section"));b.textContent=y}}const p=s.appendChild(document.createElement("li"));p.id=t+"-"+l,p.setAttribute("role","option");let g=this.optionClass(u);g&&(p.className=g);for(let y of this.optionContent){let b=y(u,this.view.state,this.view,f);b&&p.appendChild(b)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function cL(n,e){return t=>new lL(t,n,e)}function uL(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function M2(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function fL(n,e){let t=[],i=null,s=null,o=p=>{t.push(p);let{section:g}=p.completion;if(g){i||(i=[]);let y=typeof g=="string"?g:g.name;i.some(b=>b.name==y)||i.push(typeof g=="string"?{name:y}:g)}},l=e.facet(Ut);for(let p of n)if(p.hasResult()){let g=p.result.getMatch;if(p.result.filter===!1)for(let y of p.result.options)o(new k2(y,p.source,g?g(y):[],1e9-t.length));else{let y=e.sliceDoc(p.from,p.to),b,S=l.filterStrict?new sL(y):new rL(y);for(let C of p.result.options)if(b=S.match(C.label)){let x=C.displayLabel?g?g(C,b.matched):[]:b.matched,_=b.score+(C.boost||0);if(o(new k2(C,p.source,x,_)),typeof C.section=="object"&&C.section.rank==="dynamic"){let{name:w}=C.section;s||(s=Object.create(null)),s[w]=Math.max(_,s[w]||-1e9)}}}}if(i){let p=Object.create(null),g=0,y=(b,S)=>(b.rank==="dynamic"&&S.rank==="dynamic"?s[S.name]-s[b.name]:0)||(typeof b.rank=="number"?b.rank:1e9)-(typeof S.rank=="number"?S.rank:1e9)||(b.name<S.name?-1:1);for(let b of i.sort(y))g-=1e5,p[b.name]=g;for(let b of t){let{section:S}=b.completion;S&&(b.score+=p[typeof S=="string"?S:S.name])}}let u=[],f=null,d=l.compareCompletions;for(let p of t.sort((g,y)=>y.score-g.score||d(g.completion,y.completion))){let g=p.completion;!f||f.label!=g.label||f.detail!=g.detail||f.type!=null&&g.type!=null&&f.type!=g.type||f.apply!=g.apply||f.boost!=g.boost?u.push(p):M2(p.completion)>M2(f)&&(u[u.length-1]=p),f=p.completion}return u}class Ma{constructor(e,t,i,s,o,l){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ma(this.options,O2(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,o,l){if(s&&!l&&e.some(d=>d.isPending))return s.setDisabled();let u=fL(e,t);if(!u.length)return s&&e.some(d=>d.isPending)?s.setDisabled():null;let f=t.facet(Ut).selectOnOpen?0:-1;if(s&&s.selected!=f&&s.selected!=-1){let d=s.options[s.selected].completion;for(let p=0;p<u.length;p++)if(u[p].completion==d){f=p;break}}return new Ma(u,O2(i,f),{pos:e.reduce((d,p)=>p.hasResult()?Math.min(d,p.from):d,1e8),create:yL,above:o.aboveCursor},s?s.timestamp:Date.now(),f,!1)}map(e){return new Ma(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ma(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class xh{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new xh(mL,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ut),o=(i.override||t.languageDataAt("autocomplete",Es(t)).map(nL)).map(f=>(this.active.find(p=>p.source==f)||new Xi(f,this.active.some(p=>p.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((f,d)=>f==this.active[d])&&(o=this.active);let l=this.open,u=e.effects.some(f=>f.is(W0));l&&e.docChanged&&(l=l.map(e.changes)),e.selection||o.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!hL(o,this.active)||u?l=Ma.build(o,t,this.id,l,i,u):l&&l.disabled&&!o.some(f=>f.isPending)&&(l=null),!l&&o.every(f=>!f.isPending)&&o.some(f=>f.hasResult())&&(o=o.map(f=>f.hasResult()?new Xi(f.source,0):f));for(let f of e.effects)f.is(gk)&&(l=l&&l.setSelected(f.value,this.id));return o==this.active&&l==this.open?this:new xh(o,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?dL:pL}}function hL(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let s=t==n.length,o=i==e.length;if(s||o)return s==o;if(n[t++].result!=e[i++].result)return!1}}const dL={"aria-autocomplete":"list"},pL={};function O2(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const mL=[];function mk(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(pk);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Xi{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=mk(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new Xi(s.source,0)),i&4&&s.state==0&&(s=new Xi(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(Sh))s=new Xi(s.source,1,o.value);else if(o.is(Ml))s=new Xi(s.source,0);else if(o.is(W0))for(let l of o.value)l.source==s.source&&(s=l);return s}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Es(e.state))}}class $a extends Xi{constructor(e,t,i,s,o,l){super(e,3,t),this.limit=i,this.result=s,this.from=o,this.to=l}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),u=Es(e.state);if(u>l||!s||t&2&&(Es(e.startState)==this.from||u<this.limit))return new Xi(this.source,t&4?1:0);let f=e.changes.mapPos(this.limit);return gL(s.validFor,e.state,o,l)?new $a(this.source,this.explicit,f,s,o,l):s.update&&(s=s.update(s,o,l,new hk(e.state,u,!1)))?new $a(this.source,this.explicit,f,s,s.from,(i=s.to)!==null&&i!==void 0?i:Es(e.state)):new Xi(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new $a(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Xi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function gL(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):dk(n,!0).test(s)}const W0=ze.define({map(n,e){return n.map(t=>t.map(e))}}),gk=ze.define(),yi=Zt.define({create(){return xh.start()},update(n,e){return n.update(e)},provide:n=>[D0.from(n,e=>e.tooltip),ye.contentAttributes.from(n,e=>e.attrs)]});function G0(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(yi).active.find(s=>s.source==e.source);return i instanceof $a?(typeof t=="string"?n.dispatch({...iL(n.state,t,i.from,i.to),annotations:pk.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const yL=cL(yi,G0);function Bf(n,e="option"){return t=>{let i=t.state.field(yi,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ut).interactionDelay)return!1;let s=1,o;e=="page"&&(o=XT(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,u=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:l-1;return u<0?u=e=="page"?0:l-1:u>=l&&(u=e=="page"?l-1:0),t.dispatch({effects:gk.of(u)}),!0}}const vL=n=>{let e=n.state.field(yi,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Ut).interactionDelay?!1:G0(n,e.open.options[e.open.selected])},sg=n=>n.state.field(yi,!1)?(n.dispatch({effects:Sh.of(!0)}),!0):!1,bL=n=>{let e=n.state.field(yi,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Ml.of(null)}),!0)};class SL{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const xL=50,wL=1e3,_L=kt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(yi).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(yi),t=n.state.facet(Ut);if(!n.selectionSet&&!n.docChanged&&n.startState.field(yi)==e)return;let i=n.transactions.some(o=>{let l=mk(o,t);return l&8||(o.selection||o.docChanged)&&!(l&3)});for(let o=0;o<this.running.length;o++){let l=this.running[o];if(i||l.context.abortOnDocChange&&n.docChanged||l.updates.length+n.transactions.length>xL&&Date.now()-l.time>wL){for(let u of l.context.abortListeners)try{u()}catch(f){bi(this.view.state,f)}l.context.abortListeners=null,this.running.splice(o--,1)}else l.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(l=>l.is(Sh)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(l=>l.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(yi);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ut).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Es(e),i=new hk(e,t,n.explicit,this.view),s=new SL(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Ml.of(null)}),bi(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ut).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ut),i=this.view.state.field(yi);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(o.done===void 0)continue;if(this.running.splice(s--,1),o.done){let u=Es(o.updates.length?o.updates[0].startState:this.view.state),f=Math.min(u,o.done.from+(o.active.explicit?0:1)),d=new $a(o.active.source,o.active.explicit,f,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:u);for(let p of o.updates)d=d.update(p,t);if(d.hasResult()){e.push(d);continue}}let l=i.active.find(u=>u.source==o.active.source);if(l&&l.isPending)if(o.done==null){let u=new Xi(o.active.source,0);for(let f of o.updates)u=u.update(f,t);u.isPending||e.push(u)}else this.startQuery(l)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:W0.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(yi,!1);if(e&&e.tooltip&&this.view.state.facet(Ut).closeOnBlur){let t=e.open&&XT(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ml.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Sh.of(!1)}),20),this.composing=0}}}),TL=typeof navigator=="object"&&/Win/.test(navigator.platform),CL=Ns.highest(ye.domEventHandlers({keydown(n,e){let t=e.state.field(yi,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(TL&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(l=>l.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&G0(e,i),!1}})),kL=ye.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ol={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Cs=ze.define({map(n,e){let t=e.mapPos(n,-1,ai.TrackAfter);return t??void 0}}),Y0=new class extends Ir{};Y0.startSide=1;Y0.endSide=-1;const yk=Zt.define({create(){return Ue.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Cs)&&(n=n.update({add:[Y0.range(t.value,t.value+1)]}));return n}});function AL(){return[ML,yk]}const ag="()[]{}<>";function vk(n){for(let e=0;e<ag.length;e+=2)if(ag.charCodeAt(e)==n)return ag.charAt(e+1);return g0(n<128?n:n+1)}function bk(n,e){return n.languageDataAt("closeBrackets",e)[0]||Ol}const EL=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ML=ye.inputHandler.of((n,e,t,i)=>{if((EL?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&Cn(gi(i,0))==1||e!=s.from||t!=s.to)return!1;let o=RL(n.state,i);return o?(n.dispatch(o),!0):!1}),OL=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=bk(n,n.selection.main.head).brackets||Ol.brackets,s=null,o=n.changeByRange(l=>{if(l.empty){let u=NL(n.doc,l.head);for(let f of i)if(f==u&&Kh(n.doc,l.head)==vk(gi(f,0)))return{changes:{from:l.head-f.length,to:l.head+f.length},range:ce.cursor(l.head-f.length)}}return{range:s=l}});return s||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},DL=[{key:"Backspace",run:OL}];function RL(n,e){let t=bk(n,n.selection.main.head),i=t.brackets||Ol.brackets;for(let s of i){let o=vk(gi(s,0));if(e==s)return o==s?BL(n,s,i.indexOf(s+s+s)>-1,t):zL(n,s,o,t.before||Ol.before);if(e==o&&Sk(n,n.selection.main.from))return $L(n,s,o)}return null}function Sk(n,e){let t=!1;return n.field(yk).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function Kh(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Cn(gi(t,0)))}function NL(n,e){let t=n.sliceString(e-2,e);return Cn(gi(t,0))==t.length?t:t.slice(1)}function zL(n,e,t,i){let s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:t,from:l.to}],effects:Cs.of(l.to+e.length),range:ce.range(l.anchor+e.length,l.head+e.length)};let u=Kh(n.doc,l.head);return!u||/\s/.test(u)||i.indexOf(u)>-1?{changes:{insert:e+t,from:l.head},effects:Cs.of(l.head+e.length),range:ce.cursor(l.head+e.length)}:{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function $L(n,e,t){let i=null,s=n.changeByRange(o=>o.empty&&Kh(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:ce.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function BL(n,e,t,i){let s=i.stringPrefixes||Ol.stringPrefixes,o=null,l=n.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Cs.of(u.to+e.length),range:ce.range(u.anchor+e.length,u.head+e.length)};let f=u.head,d=Kh(n.doc,f),p;if(d==e){if(D2(n,f))return{changes:{insert:e+e,from:f},effects:Cs.of(f+e.length),range:ce.cursor(f+e.length)};if(Sk(n,f)){let y=t&&n.sliceDoc(f,f+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:f,to:f+y.length,insert:y},range:ce.cursor(f+y.length)}}}else{if(t&&n.sliceDoc(f-2*e.length,f)==e+e&&(p=R2(n,f-2*e.length,s))>-1&&D2(n,p))return{changes:{insert:e+e+e+e,from:f},effects:Cs.of(f+e.length),range:ce.cursor(f+e.length)};if(n.charCategorizer(f)(d)!=pt.Word&&R2(n,f,s)>-1&&!LL(n,f,e,s))return{changes:{insert:e+e,from:f},effects:Cs.of(f+e.length),range:ce.cursor(f+e.length)}}return{range:o=u}});return o?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function D2(n,e){let t=ti(n).resolveInner(e+1);return t.parent&&t.from==e}function LL(n,e,t,i){let s=ti(n).resolveInner(e,-1),o=i.reduce((l,u)=>Math.max(l,u.length),0);for(let l=0;l<5;l++){let u=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+o)),f=u.indexOf(t);if(!f||f>-1&&i.indexOf(u.slice(0,f))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>t.length+f;){if(n.sliceDoc(p.to-t.length,p.to)==t)return!1;p=p.firstChild}return!0}let d=s.to==e&&s.parent;if(!d)break;s=d}return!1}function R2(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=pt.Word)return e;for(let s of t){let o=e-s.length;if(n.sliceDoc(o,e)==s&&i(n.sliceDoc(o-1,o))!=pt.Word)return o}return-1}function jL(n={}){return[CL,yi,Ut.of(n),_L,PL,kL]}const xk=[{key:"Ctrl-Space",run:sg},{mac:"Alt-`",run:sg},{mac:"Alt-i",run:sg},{key:"Escape",run:bL},{key:"ArrowDown",run:Bf(!0)},{key:"ArrowUp",run:Bf(!1)},{key:"PageDown",run:Bf(!0,"page")},{key:"PageUp",run:Bf(!1,"page")},{key:"Enter",run:vL}],PL=Ns.highest(qh.computeN([Ut],n=>n.facet(Ut).defaultKeymap?[xk]:[]));class N2{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ws{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=i.facet(Dl).markerFilter;s&&(e=s(e,i));let o=e.slice().sort((b,S)=>b.from-S.from||b.to-S.to),l=new sr,u=[],f=0,d=i.doc.iter(),p=0,g=i.doc.length;for(let b=0;;){let S=b==o.length?null:o[b];if(!S&&!u.length)break;let C,x;if(u.length)C=f,x=u.reduce((T,E)=>Math.min(T,E.to),S&&S.from>C?S.from:1e8);else{if(C=S.from,C>g)break;x=S.to,u.push(S),b++}for(;b<o.length;){let T=o[b];if(T.from==C&&(T.to>T.from||T.to==C))u.push(T),b++,x=Math.min(T.to,x);else{x=Math.min(T.from,x);break}}x=Math.min(x,g);let _=!1;if(u.some(T=>T.from==C&&(T.to==x||x==g))&&(_=C==x,!_&&x-C<10)){let T=C-(p+d.value.length);T>0&&(d.next(T),p=C);for(let E=C;;){if(E>=x){_=!0;break}if(!d.lineBreak&&p+d.value.length>E)break;E=p+d.value.length,p+=d.value.length,d.next()}}let w=ZL(u);if(_)l.add(C,C,Ae.widget({widget:new FL(w),diagnostics:u.slice()}));else{let T=u.reduce((E,k)=>k.markClass?E+" "+k.markClass:E,"");l.add(C,x,Ae.mark({class:"cm-lintRange cm-lintRange-"+w+T,diagnostics:u.slice(),inclusiveEnd:u.some(E=>E.to>x)}))}if(f=x,f==g)break;for(let T=0;T<u.length;T++)u[T].to<=f&&u.splice(T--,1)}let y=l.finish();return new ws(y,t,Ia(y))}}function Ia(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,o,{spec:l})=>{if(!(e&&l.diagnostics.indexOf(e)<0))if(!i)i=new N2(s,o,e||l.diagnostics[0]);else{if(l.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new N2(i.from,o,i.diagnostic)}}),i}function qL(n,e){let t=e.pos,i=e.end||t,s=n.state.facet(Dl).hideOn(n,t,i);if(s!=null)return s;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(l=>l.is(wk))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function HL(n,e){return n.field($i,!1)?e:e.concat(ze.appendConfig.of(JL))}const wk=ze.define(),F0=ze.define(),_k=ze.define(),$i=Zt.define({create(){return new ws(Ae.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,s=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Ia(t,n.selected.diagnostic,o)||Ia(t,null,o)}!t.size&&s&&e.state.facet(Dl).autoPanel&&(s=null),n=new ws(t,s,i)}for(let t of e.effects)if(t.is(wk)){let i=e.state.facet(Dl).autoPanel?t.value.length?Rl.open:null:n.panel;n=ws.init(t.value,i,e.state)}else t.is(F0)?n=new ws(n.diagnostics,t.value?Rl.open:null,n.selected):t.is(_k)&&(n=new ws(n.diagnostics,n.panel,t.value));return n},provide:n=>[Tl.from(n,e=>e.panel),ye.decorations.from(n,e=>e.diagnostics)]}),UL=Ae.mark({class:"cm-lintRange cm-lintRange-active"});function VL(n,e,t){let{diagnostics:i}=n.state.field($i),s,o=-1,l=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(f,d,{spec:p})=>{if(e>=f&&e<=d&&(f==d||(e>f||t>0)&&(e<d||t<0)))return s=p.diagnostics,o=f,l=d,!1});let u=n.state.facet(Dl).tooltipFilter;return s&&u&&(s=u(s,n.state)),s?{pos:o,end:l,above:n.state.doc.lineAt(o).to<l,create(){return{dom:IL(n,s)}}}:null}function IL(n,e){return rt("ul",{class:"cm-tooltip-lint"},e.map(t=>Ck(n,t,!1)))}const WL=n=>{let e=n.state.field($i,!1);(!e||!e.panel)&&n.dispatch({effects:HL(n.state,[F0.of(!0)])});let t=_l(n,Rl.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},z2=n=>{let e=n.state.field($i,!1);return!e||!e.panel?!1:(n.dispatch({effects:F0.of(!1)}),!0)},GL=n=>{let e=n.state.field($i,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},YL=[{key:"Mod-Shift-m",run:WL,preventDefault:!0},{key:"F8",run:GL}],Dl=Se.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Dn(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:$2,tooltipFilter:$2,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,s,o)=>e(i,s,o)||t(i,s,o):e:t,autoPanel:(e,t)=>e||t})}}});function $2(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function Tk(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Ck(n,e,t){var i;let s=t?Tk(e.actions):[];return rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,l)=>{let u=!1,f=b=>{if(b.preventDefault(),u)return;u=!0;let S=Ia(n.state.field($i).diagnostics,e);S&&o.apply(n,S.from,S.to)},{name:d}=o,p=s[l]?d.indexOf(s[l]):-1,g=p<0?d:[d.slice(0,p),rt("u",d.slice(p,p+1)),d.slice(p+1)],y=o.markClass?" "+o.markClass:"";return rt("button",{type:"button",class:"cm-diagnosticAction"+y,onclick:f,onmousedown:f,"aria-label":` Action: ${d}${p<0?"":` (access key "${s[l]})"`}.`},g)}),e.source&&rt("div",{class:"cm-diagnosticSource"},e.source))}class FL extends Rn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class B2{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ck(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Rl{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)z2(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],l=Tk(o.actions);for(let u=0;u<l.length;u++)if(l[u].toUpperCase().charCodeAt(0)==s.keyCode){let f=Ia(this.view.state.field($i).diagnostics,o);f&&o.actions[u].apply(e,f.from,f.to)}}else return;s.preventDefault()},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=rt("div",{class:"cm-panel-lint"},this.list,rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>z2(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field($i).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field($i),i=0,s=!1,o=null,l=new Set;for(e.between(0,this.view.state.doc.length,(u,f,{spec:d})=>{for(let p of d.diagnostics){if(l.has(p))continue;l.add(p);let g=-1,y;for(let b=i;b<this.items.length;b++)if(this.items[b].diagnostic==p){g=b;break}g<0?(y=new B2(this.view,p),this.items.splice(i,0,y),s=!0):(y=this.items[g],g>i&&(this.items.splice(i,g-i),s=!0)),t&&y.diagnostic==t.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),o=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new B2(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:f})=>{let d=f.height/this.list.offsetHeight;u.top<f.top?this.list.scrollTop-=(f.top-u.top)/d:u.bottom>f.bottom&&(this.list.scrollTop+=(u.bottom-f.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field($i),i=Ia(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:_k.of(i)})}static open(e){return new Rl(e)}}function KL(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Lf(n){return KL(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const XL=ye.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Lf("#d11")},".cm-lintRange-warning":{backgroundImage:Lf("orange")},".cm-lintRange-info":{backgroundImage:Lf("#999")},".cm-lintRange-hint":{backgroundImage:Lf("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function QL(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function ZL(n){let e="hint",t=1;for(let i of n){let s=QL(i.severity);s>t&&(t=s,e=i.severity)}return e}const JL=[$i,ye.decorations.compute([$i],n=>{let{selected:e,panel:t}=n.field($i);return!e||!t||e.from==e.to?Ae.none:Ae.set([UL.range(e.from,e.to)])}),W4(VL,{hideOn:qL}),XL];var L2=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(DL)),e.defaultKeymap!==!1&&(i=i.concat(TB)),e.searchKeymap!==!1&&(i=i.concat(XB)),e.historyKeymap!==!1&&(i=i.concat(D$)),e.foldKeymap!==!1&&(i=i.concat(W5)),e.completionKeymap!==!1&&(i=i.concat(xk)),e.lintKeymap!==!1&&(i=i.concat(YL));var s=[];return e.lineNumbers!==!1&&s.push(i5()),e.highlightActiveLineGutter!==!1&&s.push(s5()),e.highlightSpecialChars!==!1&&s.push(S4()),e.history!==!1&&s.push(w$()),e.foldGutter!==!1&&s.push(K5()),e.drawSelection!==!1&&s.push(c4()),e.dropCursor!==!1&&s.push(p4()),e.allowMultipleSelections!==!1&&s.push(We.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push($5()),e.syntaxHighlighting!==!1&&s.push(SC(J5,{fallback:!0})),e.bracketMatching!==!1&&s.push(a$()),e.closeBrackets!==!1&&s.push(AL()),e.autocompletion!==!1&&s.push(jL()),e.rectangularSelection!==!1&&s.push(z4()),t!==!1&&s.push(L4()),e.highlightActiveLine!==!1&&s.push(k4()),e.highlightSelectionMatches!==!1&&s.push(DB()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Uh.of(" ".repeat(e.tabSize))),s.concat([qh.of(i.flat())]).filter(Boolean)};const ej="#e5c07b",j2="#e06c75",tj="#56b6c2",ij="#ffffff",Yf="#abb2bf",u0="#7d8799",nj="#61afef",rj="#98c379",P2="#d19a66",sj="#c678dd",aj="#21252b",q2="#2c313a",H2="#282c34",og="#353a42",oj="#3E4451",U2="#528bff",lj=ye.theme({"&":{color:Yf,backgroundColor:H2},".cm-content":{caretColor:U2},".cm-cursor, .cm-dropCursor":{borderLeftColor:U2},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:oj},".cm-panels":{backgroundColor:aj,color:Yf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:H2,color:u0,border:"none"},".cm-activeLineGutter":{backgroundColor:q2},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:og},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:og,borderBottomColor:og},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:q2,color:Yf}}},{dark:!0}),cj=Il.define([{tag:re.keyword,color:sj},{tag:[re.name,re.deleted,re.character,re.propertyName,re.macroName],color:j2},{tag:[re.function(re.variableName),re.labelName],color:nj},{tag:[re.color,re.constant(re.name),re.standard(re.name)],color:P2},{tag:[re.definition(re.name),re.separator],color:Yf},{tag:[re.typeName,re.className,re.number,re.changed,re.annotation,re.modifier,re.self,re.namespace],color:ej},{tag:[re.operator,re.operatorKeyword,re.url,re.escape,re.regexp,re.link,re.special(re.string)],color:tj},{tag:[re.meta,re.comment],color:u0},{tag:re.strong,fontWeight:"bold"},{tag:re.emphasis,fontStyle:"italic"},{tag:re.strikethrough,textDecoration:"line-through"},{tag:re.link,color:u0,textDecoration:"underline"},{tag:re.heading,fontWeight:"bold",color:j2},{tag:[re.atom,re.bool,re.special(re.variableName)],color:P2},{tag:[re.processingInstruction,re.string,re.inserted],color:rj},{tag:re.invalid,color:ij}]),uj=[lj,SC(cj)];var fj=ye.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),hj=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:s=!1,theme:o="light",placeholder:l="",basicSetup:u=!0}=e,f=[];switch(t&&f.unshift(qh.of([CB])),u&&(typeof u=="boolean"?f.unshift(L2()):f.unshift(L2(u))),l&&f.unshift(O4(l)),o){case"light":f.push(fj);break;case"dark":f.push(uj);break;case"none":break;default:f.push(o);break}return i===!1&&f.push(ye.editable.of(!1)),s&&f.push(We.readOnly.of(!0)),[...f]},dj=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)});class pj{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(t=>{try{t()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class V2{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var lg=null,mj=()=>typeof window>"u"?new V2:(lg||(lg=new V2),lg),I2=On.define(),gj=200,yj=[];function vj(n){var{value:e,selection:t,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:l,extensions:u=yj,autoFocus:f,theme:d="light",height:p=null,minHeight:g=null,maxHeight:y=null,width:b=null,minWidth:S=null,maxWidth:C=null,placeholder:x="",editable:_=!0,readOnly:w=!1,indentWithTab:T=!0,basicSetup:E=!0,root:k,initialState:O}=n,[A,N]=ve.useState(),[$,V]=ve.useState(),[q,H]=ve.useState(),X=ve.useState(()=>({current:null}))[0],te=ve.useState(()=>({current:null}))[0],fe=ye.theme({"&":{height:p,minHeight:g,maxHeight:y,width:b,minWidth:S,maxWidth:C},"& .cm-scroller":{height:"100% !important"}}),I=ye.updateListener.of(pe=>{if(pe.docChanged&&typeof i=="function"&&!pe.transactions.some(L=>L.annotation(I2))){X.current?X.current.reset():(X.current=new pj(()=>{if(te.current){var L=te.current;te.current=null,L()}X.current=null},gj),mj().add(X.current));var K=pe.state.doc,D=K.toString();i(D,pe)}s&&s(dj(pe))}),ne=hj({theme:d,editable:_,readOnly:w,placeholder:x,indentWithTab:T,basicSetup:E}),oe=[I,fe,...ne];return l&&typeof l=="function"&&oe.push(ye.updateListener.of(l)),oe=oe.concat(u),ve.useLayoutEffect(()=>{if(A&&!q){var pe={doc:e,selection:t,extensions:oe},K=O?We.fromJSON(O.json,pe,O.fields):We.create(pe);if(H(K),!$){var D=new ye({state:K,parent:A,root:k});V(D),o&&o(D,K)}}return()=>{$&&(H(void 0),V(void 0))}},[A,q]),ve.useEffect(()=>{n.container&&N(n.container)},[n.container]),ve.useEffect(()=>()=>{$&&($.destroy(),V(void 0)),X.current&&(X.current.cancel(),X.current=null)},[$]),ve.useEffect(()=>{f&&$&&$.focus()},[f,$]),ve.useEffect(()=>{$&&$.dispatch({effects:ze.reconfigure.of(oe)})},[d,u,p,g,y,b,S,C,x,_,w,T,E,i,l]),ve.useEffect(()=>{if(e!==void 0){var pe=$?$.state.doc.toString():"";if($&&e!==pe){var K=X.current&&!X.current.isDone,D=()=>{$&&e!==$.state.doc.toString()&&$.dispatch({changes:{from:0,to:$.state.doc.toString().length,insert:e||""},annotations:[I2.of(!0)]})};K?te.current=D:D()}}},[e,$]),{state:q,setState:H,view:$,setView:V,container:A,setContainer:N}}var bj=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],kk=ve.forwardRef((n,e)=>{var{className:t,value:i="",selection:s,extensions:o=[],onChange:l,onStatistics:u,onCreateEditor:f,onUpdate:d,autoFocus:p,theme:g="light",height:y,minHeight:b,maxHeight:S,width:C,minWidth:x,maxWidth:_,basicSetup:w,placeholder:T,indentWithTab:E,editable:k,readOnly:O,root:A,initialState:N}=n,$=XN(n,bj),V=ve.useRef(null),{state:q,view:H,container:X,setContainer:te}=vj({root:A,value:i,autoFocus:p,theme:g,height:y,minHeight:b,maxHeight:S,width:C,minWidth:x,maxWidth:_,basicSetup:w,placeholder:T,indentWithTab:E,editable:k,readOnly:O,selection:s,onChange:l,onStatistics:u,onCreateEditor:f,onUpdate:d,extensions:o,initialState:N});ve.useImperativeHandle(e,()=>({editor:V.current,state:q,view:H}),[V,X,q,H]);var fe=ve.useCallback(ne=>{V.current=ne,te(ne)},[te]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var I=typeof g=="string"?"cm-theme-"+g:"cm-theme";return W.jsx("div",gg({ref:fe,className:""+I+(t?" "+t:"")},$))});kk.displayName="CodeMirror";var W2={};class wh{constructor(e,t,i,s,o,l,u,f,d,p=0,g){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=o,this.score=l,this.buffer=u,this.bufferBase=f,this.curContext=d,this.lookAhead=p,this.parent=g}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new wh(e,[],t,i,i,0,[],0,s?new G2(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:o}=this.p,l=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),u=o.dynamicPrecedence(s);if(u&&(this.score+=u),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,l?8:4,!0),this.reduceContext(s,this.reducePos);return}let f=this.stack.length-(i-1)*3-(e&262144?6:0),d=f?this.stack[f-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let g=f?this.stack[f-1]:0,y=this.bufferBase+this.buffer.length-g;if(s<o.minRepeatTerm||e&131072){let b=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,b,y+4,!0)}if(e&262144)this.state=this.stack[f];else{let b=this.stack[f-3];this.state=o.getGoto(b,s,!0)}for(;this.stack.length>f;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,u=this.buffer.length;if(u==0&&l.parent&&(u=l.bufferBase-l.parent.bufferBase,l=l.parent),u>0&&l.buffer[u-4]==0&&l.buffer[u-1]>-1){if(t==i)return;if(l.buffer[u-2]>=t){l.buffer[u-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,s);else{let l=this.buffer.length;if(l>0&&(this.buffer[l-4]!=0||this.buffer[l-1]<0)){let u=!1;for(let f=l;f>0&&this.buffer[f-2]>i;f-=4)if(this.buffer[f-1]>=0){u=!0;break}if(u)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,s>4&&(s-=4)}this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:l}=this.p;(s>this.pos||t<=l.maxNode)&&(this.pos=s,l.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,i),this.shiftContext(t,i),t<=l.maxNode&&this.buffer.push(t,i,s,4)}else this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4)}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new wh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Sj(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let o=0,l;o<t.length;o+=2)(l=t[o+1])!=this.state&&this.p.parser.hasAction(l,e)&&s.push(t[o],l);if(this.stack.length<120)for(let o=0;s.length<8&&o<t.length;o+=2){let l=t[o+1];s.some((u,f)=>f&1&&u==l)||s.push(t[o],l)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let o=t[s+1];if(o==this.state)continue;let l=this.split();l.pushState(o,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[s],this.pos),l.reducePos=this.pos,l.score-=200,i.push(l)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let l=this.findForcedReduction();if(l==null)return!1;t=l}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,o)=>{if(!t.includes(s))return t.push(s),e.allActions(s,l=>{if(!(l&393216))if(l&65536){let u=(l>>19)-o;if(u>1){let f=l&65535,d=this.stack.length-u*3;if(d>=0&&e.getGoto(this.stack[d],f,!1)>=0)return u<<19|65536|f}}else{let u=i(l,o+1);if(u!=null)return u}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new G2(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class G2{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Sj{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class _h{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new _h(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new _h(this.stack,this.pos,this.index)}}function jf(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let o=0;for(;;){let l=n.charCodeAt(i++),u=!1;if(l==126){o=65535;break}l>=92&&l--,l>=34&&l--;let f=l-32;if(f>=46&&(f-=46,u=!0),o+=f,u)break;o*=46}t?t[s++]=o:t=new e(o)}return t}class Ff{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Y2=new Ff;class xj{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Y2,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let l=this.ranges[--s];o-=i.from-l.to,i=l}for(;t<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let l=this.ranges[++s];o+=l.from-i.to,i=l}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,u=this.range;for(;u.to<=i;)u=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Y2,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Ba{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;wj(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ba.prototype.contextual=Ba.prototype.fallback=Ba.prototype.extend=!1;Ba.prototype.fallback=Ba.prototype.extend=!1;function wj(n,e,t,i,s,o){let l=0,u=1<<i,{dialect:f}=t.p.parser;e:for(;(u&n[l])!=0;){let d=n[l+1];for(let b=l+3;b<d;b+=2)if((n[b+1]&u)>0){let S=n[b];if(f.allows(S)&&(e.token.value==-1||e.token.value==S||_j(S,e.token.value,s,o))){e.acceptToken(S);break}}let p=e.next,g=0,y=n[l+2];if(e.next<0&&y>g&&n[d+y*3-3]==65535){l=n[d+y*3-1];continue e}for(;g<y;){let b=g+y>>1,S=d+b+(b<<1),C=n[S],x=n[S+1]||65536;if(p<C)y=b;else if(p>=x)g=b+1;else{l=n[S+2],e.advance();continue e}}break}}function F2(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function _j(n,e,t,i){let s=F2(t,i,e);return s<0||F2(t,i,n)<s}const Ni=typeof process<"u"&&W2&&/\bparse\b/.test(W2.LOG);let cg=null;function K2(n,e,t){let i=n.cursor(Ht.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Tj{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?K2(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?K2(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],l=this.start[t]+i.positions[s];if(l>e)return this.nextStart=l,null;if(o instanceof Rt){if(l==e){if(l<this.safeFrom)return null;let u=l+o.length;if(u<=this.safeTo){let f=o.prop(Le.lookAhead);if(!f||u+f<this.fragment.to)return o}}this.index[t]++,l+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+o.length}}}class Cj{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ff)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,l=s.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,f=0;for(let d=0;d<o.length;d++){if((1<<d&l)==0)continue;let p=o[d],g=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||g.start!=e.pos||g.mask!=l||g.context!=u)&&(this.updateCachedToken(g,p,e),g.mask=l,g.context=u),g.lookAhead>g.end+25&&(f=Math.max(g.lookAhead,f)),g.value!=0)){let y=t;if(g.extended>-1&&(t=this.addActions(e,g.extended,g.end,t)),t=this.addActions(e,g.value,g.end,t),!p.extend&&(i=g,t>y))break}}for(;this.actions.length>t;)this.actions.pop();return f&&e.setLookAhead(f),!i&&e.pos==this.stream.end&&(i=new Ff,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ff,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let l=0;l<o.specialized.length;l++)if(o.specialized[l]==e.value){let u=o.specializers[l](this.stream.read(e.start,e.end),i);if(u>=0&&i.p.parser.dialect.allows(u>>1)){(u&1)==0?e.value=u>>1:e.extended=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:o}=e,{parser:l}=e.p,{data:u}=l;for(let f=0;f<2;f++)for(let d=l.stateSlot(o,f?2:1);;d+=3){if(u[d]==65535)if(u[d+1]==1)d=er(u,d+2);else{s==0&&u[d+1]==2&&(s=this.putAction(er(u,d+2),t,i,s));break}u[d]==t&&(s=this.putAction(er(u,d+1),t,i,s))}return s}}class kj{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new xj(t,s),this.tokens=new Cj(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[wh.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Tj(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let u=e[l];for(;;){if(this.tokens.mainToken=null,u.pos>t)i.push(u);else{if(this.advanceStack(u,i,e))continue;{s||(s=[],o=[]),s.push(u);let f=this.tokens.getMainToken(u);o.push(f.value,f.end)}}break}}if(!i.length){let l=s&&Ej(s);if(l)return Ni&&console.log("Finish with "+this.stackID(l)),this.stackToTree(l);if(this.parser.strict)throw Ni&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let l=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(l)return Ni&&console.log("Force-finish "+this.stackID(l)),this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((u,f)=>f.score-u.score);i.length>l;)i.pop();i.some(u=>u.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let u=i[l];for(let f=l+1;f<i.length;f++){let d=i[f];if(u.sameState(d)||u.buffer.length>500&&d.buffer.length>500)if((u.score-d.score||u.buffer.length-d.buffer.length)>0)i.splice(f--,1);else{i.splice(l--,1);continue e}}}i.length>12&&(i.sort((l,u)=>u.score-l.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:o}=this,l=Ni?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let g=this.fragments.nodeAt(s);g;){let y=this.parser.nodeSet.types[g.type.id]==g.type?o.getGoto(e.state,g.type.id):-1;if(y>-1&&g.length&&(!d||(g.prop(Le.contextHash)||0)==p))return e.useNode(g,y),Ni&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(g.type.id)})`),!0;if(!(g instanceof Rt)||g.children.length==0||g.positions[0]>0)break;let b=g.children[0];if(b instanceof Rt&&g.positions[0]==0)g=b;else break}}let u=o.stateSlot(e.state,4);if(u>0)return e.reduce(u),Ni&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(u&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let d=0;d<f.length;){let p=f[d++],g=f[d++],y=f[d++],b=d==f.length||!i,S=b?e:e.split(),C=this.tokens.mainToken;if(S.apply(p,g,C?C.start:S.pos,y),Ni&&console.log(l+this.stackID(S)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(g)} @ ${s}${S==e?"":", split"})`),b)return!0;S.pos>s?t.push(S):i.push(S)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return X2(e,t),!0}}runRecovery(e,t,i){let s=null,o=!1;for(let l=0;l<e.length;l++){let u=e[l],f=t[l<<1],d=t[(l<<1)+1],p=Ni?this.stackID(u)+" -> ":"";if(u.deadEnd&&(o||(o=!0,u.restart(),Ni&&console.log(p+this.stackID(u)+" (restarted)"),this.advanceFully(u,i))))continue;let g=u.split(),y=p;for(let b=0;b<10&&g.forceReduce()&&(Ni&&console.log(y+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,i));b++)Ni&&(y=this.stackID(g)+" -> ");for(let b of u.recoverByInsert(f))Ni&&console.log(p+this.stackID(b)+" (via recover-insert)"),this.advanceFully(b,i);this.stream.end>u.pos?(d==u.pos&&(d++,f=0),u.recoverByDelete(f,d),Ni&&console.log(p+this.stackID(u)+` (via recover-delete ${this.parser.getName(f)})`),X2(u,i)):(!s||s.score<u.score)&&(s=u)}return s}stackToTree(e){return e.close(),Rt.build({buffer:_h.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(cg||(cg=new WeakMap)).get(e);return t||cg.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function X2(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Aj{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Th extends rC{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let i=Object.keys(e.topRules).map(u=>e.topRules[u][1]),s=[];for(let u=0;u<t.length;u++)s.push([]);function o(u,f,d){s[u].push([f,f.deserialize(String(d))])}if(e.nodeProps)for(let u of e.nodeProps){let f=u[0];typeof f=="string"&&(f=Le[f]);for(let d=1;d<u.length;){let p=u[d++];if(p>=0)o(p,f,u[d++]);else{let g=u[d+-p];for(let y=-p;y>0;y--)o(u[d++],f,g);d++}}}this.nodeSet=new R0(t.map((u,f)=>xi.define({name:f>=this.minRepeatTerm?void 0:u,id:f,props:s[f],top:i.indexOf(f)>-1,error:f==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=eC;let l=jf(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(Q2),this.states=jf(e.states,Uint32Array),this.data=jf(e.stateData),this.goto=jf(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>typeof u=="number"?new Ba(l,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new kj(this,e,t,i);for(let o of this.wrappers)s=o(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let o=s[t+1];;){let l=s[o++],u=l&1,f=s[o++];if(u&&i)return f;for(let d=o+(l>>1);o<d;o++)if(s[o]==e)return f;if(u)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),l;;o+=3){if((l=i[o])==65535)if(i[o+1]==1)l=i[o=er(i,o+2)];else{if(i[o+1]==2)return er(i,o+2);break}if(l==t||l==0)return er(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=er(this.data,o+2);else break;s=t(er(this.data,o+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=er(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];t.some((o,l)=>l&1&&o==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Th.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(u=>u.from==i.external);if(!o)return i;let l=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[s]=Q2(l),l})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let l=t.indexOf(o);l>=0&&(i[l]=!0)}let s=null;for(let o=0;o<t.length;o++)if(!i[o])for(let l=this.dialects[t[o]],u;(u=this.data[l++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[u]=1;return new Aj(e,i,s)}static deserialize(e){return new Th(e)}}function er(n,e){return n[e]|n[e+1]<<16}function Ej(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Q2(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Mj=sC({String:re.string,Number:re.number,"True False":re.bool,PropertyName:re.propertyName,Null:re.null,", :":re.separator,"[ ]":re.squareBracket,"{ }":re.brace}),Oj=Th.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Mj],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Dj=ch.define({name:"json",parser:Oj.configure({props:[cC.add({Object:o2({except:/^\s*\}/}),Array:o2({except:/^\s*\]/})}),fC.add({"Object Array":L5})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Rj(){return new C5(Dj)}function el(n){switch(n.type){case"Account":return`${n.payload.id} ${n.payload.label}`;case"JournalEntry":return n.payload.id&&n.payload.id!="Neue Buchung"?`Buchung ${n.payload.id}`:"Neue Buchung";case"FileHandeling":return"File Handeling";default:return"No Title"}}const Nj=()=>{const n=Bi.c(55);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0];const[t,i]=ve.useState(e),[s,o]=ve.useState(1);nr();const l=ve.useRef(null),[,u]=ve.useState(0),{teacherMode:f}=FN(),{interactiveBalanceData:d,setInteractiveBalanceData:p}=nr();let g;n[1]!==d?(g=JSON.stringify(d,null,4),n[1]=d,n[2]=g):g=n[2];const[y,b]=ve.useState(g);let S;n[3]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{if(l.current){const K=l.current.getBoundingClientRect();u(K.height)}},n[3]=S):S=n[3];let C;n[4]!==t?(C=[t],n[4]=t,n[5]=C):C=n[5],ve.useEffect(S,C);let x;n[6]!==p||n[7]!==f||n[8]!==y?(x=()=>{if(f)try{const K=JSON.parse(y);if(!fg(K))return;p(K)}catch(K){console.error(K)}},n[6]=p,n[7]=f,n[8]=y,n[9]=x):x=n[9];let _;n[10]!==y?(_=[y],n[10]=y,n[11]=_):_=n[11],ve.useEffect(x,_);let w;n[12]===Symbol.for("react.memo_cache_sentinel")?(w={Account:3,JournalEntry:1,FileHandeling:1},n[12]=w):w=n[12];const T=w;let E,k,O,A;if(n[13]!==s){A=L=>{i(j=>{const R=j.filter(he=>he.data.type===L.type).length,B=j.find(he=>he.title===el(L));if(B)return E(B.data),j;if(R>=T[L.type])return j;const F={x:100+j.length*200,y:100+j.length*50,width:500,height:400,title:el(L),data:L,zIndex:s+1};return[...j,F]})};let K;n[18]===Symbol.for("react.memo_cache_sentinel")?(K=L=>{i(j=>j.filter(R=>R.title!==el(L)))},n[18]=K):K=n[18],O=K;let D;n[19]===Symbol.for("react.memo_cache_sentinel")?(D=L=>{i(L?j=>j.filter(R=>R.title===el(L)):[])},n[19]=D):D=n[19],k=D,E=L=>{i(j=>{const R=el(L);return j.map(B=>B.title===R?{...B,zIndex:s+1}:B)}),o(zj)},n[13]=s,n[14]=E,n[15]=k,n[16]=O,n[17]=A}else E=n[14],k=n[15],O=n[16],A=n[17];let N;n[20]!==E||n[21]!==k||n[22]!==O||n[23]!==A?(N={openWindow:A,closeWindow:O,closeAllWindowsExcept:k,bringToFront:E},n[20]=E,n[21]=k,n[22]=O,n[23]=A,n[24]=N):N=n[24];let $;n[25]!==A?($=W.jsx("button",{className:"bg-green-500 hover:bg-green-700 px-2 py-1 rounded w-60",onClick:()=>A({type:"JournalEntry",payload:{isDraft:!0}}),children:"Neuer Buchungssatz"}),n[25]=A,n[26]=$):$=n[26];let V;n[27]!==A?(V=W.jsx("button",{className:"bg-green-500 hover:bg-green-700 px-2 py-1 rounded w-60",onClick:()=>A({type:"FileHandeling",payload:{}}),children:"Up-/Download"}),n[27]=A,n[28]=V):V=n[28];let q;n[29]!==$||n[30]!==V?(q=W.jsxs("div",{className:"space-x-2 flex-1 flex justify-center",children:[$,V]}),n[29]=$,n[30]=V,n[31]=q):q=n[31];const H="flex-1 flex items-start p-8 h-full "+(f?"justify-evenly":"justify-center");let X;n[32]===Symbol.for("react.memo_cache_sentinel")?(X=W.jsx(jM,{}),n[32]=X):X=n[32];let te;n[33]!==f||n[34]!==y?(te=f&&W.jsx("div",{className:"w-1/2",children:W.jsx(kk,{value:y,height:"90vh",width:"full",extensions:[Rj()],onChange:K=>b(K),theme:"light"})}),n[33]=f,n[34]=y,n[35]=te):te=n[35];let fe;n[36]!==H||n[37]!==te?(fe=W.jsxs("div",{className:H,children:[X,te]}),n[36]=H,n[37]=te,n[38]=fe):fe=n[38];let I;n[39]!==q||n[40]!==fe?(I=W.jsxs("div",{className:"",children:[q,fe]}),n[39]=q,n[40]=fe,n[41]=I):I=n[41];let ne;if(n[42]!==E||n[43]!==O||n[44]!==t){let K;n[46]!==E||n[47]!==O?(K=D=>W.jsxs(EM,{default:{x:D.x,y:D.y,width:D.data.type==="FileHandeling"?"auto":D.width,height:"auto"},minWidth:D.data.type==="FileHandeling"?400:550,minHeight:D.data.type==="FileHandeling"?250:400,enableResizing:D.data.type!=="FileHandeling",bounds:"window",style:{zIndex:D.zIndex},onMouseDown:()=>E(D.data),dragHandleClassName:"window-drag-handle",cancel:".clickable, button, input, select, textarea",className:"border border-gray-700 bg-white shadow-lg absolute flex flex-col",children:[W.jsxs("div",{className:"window-drag-handle bg-gray-800 text-white px-3 py-2 flex justify-between items-center cursor-move",children:[W.jsx("span",{children:D.title}),W.jsx("button",{onClick:()=>O(D.data),className:"bg-red-700 hover:bg-red-500 text-white px-2 py-1 rounded",children:"X"})]}),W.jsxs("div",{className:"p-4 text-sm text-gray-700",children:[D.data.type==="Account"&&W.jsx(qM,{...D.data.payload},D.data.payload.id),D.data.type==="JournalEntry"&&W.jsx(VM,{entryId:D.data.payload.id,isDraft:D.data.payload.isDraft},D.data.payload.id??"new"),D.data.type==="FileHandeling"&&W.jsx(GN,{},D.data.type)]})]},D.title),n[46]=E,n[47]=O,n[48]=K):K=n[48],ne=t.map(K),n[42]=E,n[43]=O,n[44]=t,n[45]=ne}else ne=n[45];let oe;n[49]!==I||n[50]!==ne?(oe=W.jsxs("div",{className:"w-screen h-screen bg-gray-200 relative overflow-hidden p-4",children:[I,ne]}),n[49]=I,n[50]=ne,n[51]=oe):oe=n[51];let pe;return n[52]!==oe||n[53]!==N?(pe=W.jsx(s_.Provider,{value:N,children:oe}),n[52]=oe,n[53]=N,n[54]=pe):pe=n[54],pe};function zj(n){return n+1}const $j=()=>{const n=Bi.c(2);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=W.jsx(WN,{position:"bottom-right",autoClose:4e3,theme:"colored"}),n[0]=e):e=n[0];let t;return n[1]===Symbol.for("react.memo_cache_sentinel")?(t=W.jsx(YN,{children:W.jsxs(BM,{children:[e,W.jsx(rM,{children:W.jsx(Nj,{})})]})}),n[1]=t):t=n[1],t},Bj=tM.createRoot(document.getElementById("root"));Bj.render(W.jsx(ct.StrictMode,{children:W.jsx($j,{})}));
